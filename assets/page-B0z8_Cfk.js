import{r as i,c as j,u as N,d as w,j as e,L as l,s as d}from"./index-DLj1qXuc.js";function E(){const[c,g]=i.useState(""),[m,h]=i.useState(""),[x,f]=i.useState(!1),[u,b]=i.useState(""),{signIn:p,user:n}=j(),{darkMode:t}=N(),a=w();i.useEffect(()=>{(async()=>{if(n)try{const{data:r}=await d.from("profiles").select("role").eq("id",n.id).maybeSingle();r&&["superadmin","admin","manager","editor","financial","support"].includes(r.role)?a("/admin/dashboard"):a("/")}catch(r){console.error("Erro ao verificar perfil:",r),a("/")}})()},[n,a]);const y=async s=>{s.preventDefault(),b(""),f(!0);try{await p(c,m);const{data:{user:r}}=await d.auth.getUser();if(r){const{data:o}=await d.from("profiles").select("role").eq("id",r.id).maybeSingle();o&&["superadmin","admin","manager","editor","financial","support"].includes(o.role)?a("/admin/dashboard"):a("/")}}catch(r){b(r.message||"Erro ao fazer login. Verifique as suas credenciais.")}finally{f(!1)}};return e.jsx("div",{className:`min-h-screen flex items-center justify-center ${t?"bg-[#0b0011]":"bg-gray-50"} px-4`,children:e.jsxs("div",{className:"max-w-md w-full",children:[e.jsxs(l,{to:"/",className:"flex items-center justify-center gap-2 mb-8",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-[#b62bff] to-[#ff6a00] rounded-lg flex items-center justify-center",children:e.jsx("i",{className:"ri-store-3-line text-white text-2xl"})}),e.jsx("span",{className:"text-2xl font-bold bg-gradient-to-r from-[#b62bff] to-[#ff6a00] bg-clip-text text-transparent",children:"JokaTech"})]}),e.jsxs("div",{className:`${t?"bg-[#170018] border-gray-800":"bg-white border-gray-200"} rounded-2xl shadow-xl border p-8`,children:[e.jsx("h1",{className:`text-2xl font-bold ${t?"text-white":"text-gray-900"} mb-2 text-center`,children:"Entrar na sua conta"}),e.jsx("p",{className:`text-sm ${t?"text-gray-400":"text-gray-600"} mb-6 text-center`,children:"Aceda à sua conta para continuar"}),u&&e.jsx("div",{className:"mb-4 p-3 bg-red-100 dark:bg-red-900/30 border border-red-300 dark:border-red-800 rounded-lg",children:e.jsx("p",{className:"text-sm text-red-700 dark:text-red-400",children:u})}),e.jsxs("form",{onSubmit:y,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${t?"text-gray-300":"text-gray-700"} mb-2`,children:"E-mail"}),e.jsx("input",{type:"email",value:c,onChange:s=>g(s.target.value),required:!0,className:`w-full px-4 py-3 ${t?"bg-[#0b0011] border-gray-700 text-white":"bg-gray-50 border-gray-300 text-gray-900"} border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#b62bff]`,placeholder:"seu@email.com"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${t?"text-gray-300":"text-gray-700"} mb-2`,children:"Senha"}),e.jsx("input",{type:"password",value:m,onChange:s=>h(s.target.value),required:!0,className:`w-full px-4 py-3 ${t?"bg-[#0b0011] border-gray-700 text-white":"bg-gray-50 border-gray-300 text-gray-900"} border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#b62bff]`,placeholder:"••••••••"})]}),e.jsx("button",{type:"submit",disabled:x,className:"w-full px-4 py-3 bg-gradient-to-r from-[#b62bff] to-[#ff6a00] hover:opacity-90 disabled:opacity-50 text-white font-medium rounded-lg transition-opacity whitespace-nowrap disabled:cursor-not-allowed",children:x?"A entrar...":"Entrar"})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs("p",{className:`text-sm ${t?"text-gray-400":"text-gray-600"}`,children:["Não tem uma conta?"," ",e.jsx(l,{to:"/register",className:"text-[#b62bff] hover:text-[#ff6a00] font-medium transition-colors",children:"Criar conta"})]})})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs(l,{to:"/",className:`text-sm ${t?"text-gray-400 hover:text-[#b62bff]":"text-gray-600 hover:text-[#b62bff]"} transition-colors`,children:[e.jsx("i",{className:"ri-arrow-left-line mr-1"}),"Voltar ao site"]})})]})})}export{E as default};
//# sourceMappingURL=page-B0z8_Cfk.js.map
