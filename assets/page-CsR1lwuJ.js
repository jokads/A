import{a as S,b as E,u as q,r as s,s as h,j as e}from"./index-DBg0Zut9.js";function T(){const{slug:F}=S(),{addToCart:x}=E(),{darkMode:t}=q(),[f,y]=s.useState([]),[n,p]=s.useState([]),[d,j]=s.useState([]),[N,b]=s.useState(!0),[l,m]=s.useState("all"),[g,w]=s.useState("name"),[o,u]=s.useState([0,1e4]),[i,v]=s.useState("");s.useEffect(()=>{$()},[]),s.useEffect(()=>{k()},[n,l,g,o,i]);const $=async()=>{b(!0);try{const{data:r}=await h.from("categories").select("*").eq("active",!0).order("display_order");r&&y(r);const{data:a}=await h.from("products").select("*").eq("status","active").order("created_at",{ascending:!1});a&&p(a)}catch(r){console.error("Erro ao carregar dados:",r)}finally{b(!1)}},k=()=>{let r=[...n];l!=="all"&&(r=r.filter(a=>a.category_id===l)),r=r.filter(a=>a.price>=o[0]&&a.price<=o[1]),i&&(r=r.filter(a=>a.name.toLowerCase().includes(i.toLowerCase())||a.description?.toLowerCase().includes(i.toLowerCase()))),r.sort((a,c)=>{switch(g){case"price-asc":return a.price-c.price;case"price-desc":return c.price-a.price;default:return a.name.localeCompare(c.name)}}),j(r)},C=async r=>{try{await x(r,1)}catch(a){console.error("Erro ao adicionar ao carrinho:",a)}},P=async r=>{try{await x(r,1),window.location.href="/cart"}catch(a){console.error("Erro ao comprar:",a)}};return N?e.jsx("div",{className:`min-h-screen ${t?"bg-[#0b0011]":"bg-gray-50"}`,children:e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsx("div",{className:"w-12 h-12 border-4 border-[#b62bff] border-t-transparent rounded-full animate-spin"})})}):e.jsxs("div",{className:`min-h-screen ${t?"bg-[#0b0011]":"bg-gray-50"}`,children:[e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"flex gap-6",children:[e.jsxs("aside",{className:`w-80 ${t?"bg-gray-900":"bg-white"} rounded-xl p-6 h-fit sticky top-24 shadow-lg border ${t?"border-gray-800":"border-gray-200"}`,children:[e.jsxs("h2",{className:`text-xl font-bold mb-6 ${t?"text-white":"text-gray-900"}`,children:[e.jsx("i",{className:"ri-filter-3-line mr-2 text-[#b62bff]"}),"Filtros"]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${t?"text-gray-300":"text-gray-700"}`,children:"Pesquisar"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Nome do produto...",value:i,onChange:r=>v(r.target.value),className:`w-full px-4 py-2.5 pl-10 rounded-lg ${t?"bg-gray-800 border-gray-700 text-white":"bg-gray-50 border-gray-300 text-gray-900"} border focus:outline-none focus:ring-2 focus:ring-[#b62bff]`}),e.jsx("i",{className:`ri-search-line absolute left-3 top-1/2 -translate-y-1/2 ${t?"text-gray-400":"text-gray-500"}`})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:`block text-sm font-medium mb-3 ${t?"text-gray-300":"text-gray-700"}`,children:"Categorias"}),e.jsxs("div",{className:"space-y-2 max-h-64 overflow-y-auto custom-scrollbar",children:[e.jsxs("button",{onClick:()=>m("all"),className:`w-full text-left px-4 py-2.5 rounded-lg transition-colors ${l==="all"?"bg-gradient-to-r from-[#b62bff] to-[#ff6a00] text-white":t?"bg-gray-800 text-gray-300 hover:bg-gray-700":"bg-gray-50 text-gray-700 hover:bg-gray-100"}`,children:[e.jsx("i",{className:"ri-apps-line mr-2"}),"Todas as Categorias",e.jsxs("span",{className:`float-right ${l==="all"?"text-white":t?"text-gray-500":"text-gray-400"}`,children:["(",n.length,")"]})]}),f.map(r=>{const a=n.filter(c=>c.category_id===r.id).length;return e.jsxs("button",{onClick:()=>m(r.id),className:`w-full text-left px-4 py-2.5 rounded-lg transition-colors ${l===r.id?"bg-gradient-to-r from-[#b62bff] to-[#ff6a00] text-white":t?"bg-gray-800 text-gray-300 hover:bg-gray-700":"bg-gray-50 text-gray-700 hover:bg-gray-100"}`,children:[r.name,e.jsxs("span",{className:`float-right ${l===r.id?"text-white":t?"text-gray-500":"text-gray-400"}`,children:["(",a,")"]})]},r.id)})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:`block text-sm font-medium mb-3 ${t?"text-gray-300":"text-gray-700"}`,children:"Faixa de Preço"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"number",placeholder:"Min",value:o[0],onChange:r=>u([Number(r.target.value),o[1]]),className:`w-full px-3 py-2 rounded-lg ${t?"bg-gray-800 border-gray-700 text-white":"bg-gray-50 border-gray-300 text-gray-900"} border focus:outline-none focus:ring-2 focus:ring-[#b62bff]`}),e.jsx("span",{className:t?"text-gray-400":"text-gray-500",children:"-"}),e.jsx("input",{type:"number",placeholder:"Max",value:o[1],onChange:r=>u([o[0],Number(r.target.value)]),className:`w-full px-3 py-2 rounded-lg ${t?"bg-gray-800 border-gray-700 text-white":"bg-gray-50 border-gray-300 text-gray-900"} border focus:outline-none focus:ring-2 focus:ring-[#b62bff]`})]}),e.jsxs("div",{className:`text-sm ${t?"text-gray-400":"text-gray-600"}`,children:["R$ ",o[0].toFixed(2)," - R$ ",o[1].toFixed(2)]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-3 ${t?"text-gray-300":"text-gray-700"}`,children:"Ordenar por"}),e.jsxs("select",{value:g,onChange:r=>w(r.target.value),className:`w-full px-4 py-2.5 rounded-lg ${t?"bg-gray-800 border-gray-700 text-white":"bg-gray-50 border-gray-300 text-gray-900"} border focus:outline-none focus:ring-2 focus:ring-[#b62bff] cursor-pointer`,children:[e.jsx("option",{value:"name",children:"Nome (A-Z)"}),e.jsx("option",{value:"price-asc",children:"Menor Preço"}),e.jsx("option",{value:"price-desc",children:"Maior Preço"})]})]})]}),e.jsxs("main",{className:"flex-1",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:`text-3xl font-bold ${t?"text-white":"text-gray-900"} mb-2`,children:"Produtos"}),e.jsxs("p",{className:`${t?"text-gray-400":"text-gray-600"}`,children:[d.length," ",d.length===1?"produto encontrado":"produtos encontrados"]})]}),d.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:d.map(r=>{const a=Array.isArray(r.images)&&r.images.length>0?r.images[0]:"https://readdy.ai/api/search-image?query=product%20placeholder%20image%20on%20clean%20white%20minimalist%20background&width=400&height=400&seq=placeholder&orientation=squarish";return e.jsxs("div",{className:`group ${t?"bg-gray-900":"bg-white"} rounded-xl overflow-hidden border ${t?"border-gray-800":"border-gray-200"} hover:shadow-xl transition-all duration-300`,"data-product-shop":!0,children:[e.jsxs("div",{className:"relative w-full h-64 bg-gray-100 dark:bg-gray-800 overflow-hidden",children:[e.jsx("img",{src:a,alt:r.name,className:"w-full h-full object-cover object-top group-hover:scale-110 transition-transform duration-500"}),e.jsx("div",{className:"absolute top-3 right-3 flex flex-col gap-2 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:e.jsx("button",{className:"w-10 h-10 bg-white dark:bg-gray-900 rounded-full flex items-center justify-center shadow-lg hover:bg-[#b62bff] hover:text-white transition-colors cursor-pointer","aria-label":"Adicionar aos favoritos",children:e.jsx("i",{className:"ri-heart-line text-lg"})})}),r.stock<10&&r.stock>0&&e.jsxs("div",{className:"absolute top-3 left-3 px-3 py-1 bg-yellow-500 text-black text-xs font-bold rounded-full",children:["Últimas ",r.stock," unidades"]}),r.stock===0&&e.jsx("div",{className:"absolute top-3 left-3 px-3 py-1 bg-red-500 text-white text-xs font-bold rounded-full",children:"Esgotado"})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:`font-semibold ${t?"text-white":"text-gray-900"} line-clamp-2 mb-3 group-hover:text-[#b62bff] transition-colors`,children:r.name}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("span",{className:`text-2xl font-bold ${t?"text-white":"text-gray-900"}`,children:["R$ ",r.price.toFixed(2).replace(".",",")]}),e.jsxs("p",{className:`text-xs ${t?"text-gray-400":"text-gray-600"} mt-1`,children:["ou 12x de R$ ",(r.price/12).toFixed(2).replace(".",",")]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>C(r),disabled:r.stock===0,className:`flex-1 px-4 py-2.5 ${t?"bg-gray-800 hover:bg-gray-700":"bg-gray-100 hover:bg-gray-200"} ${t?"text-white":"text-gray-900"} rounded-lg transition-colors cursor-pointer whitespace-nowrap disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 font-medium`,children:[e.jsx("i",{className:"ri-shopping-cart-line"}),"Carrinho"]}),e.jsxs("button",{onClick:()=>P(r),disabled:r.stock===0,className:"flex-1 px-4 py-2.5 bg-gradient-to-r from-[#b62bff] to-[#ff6a00] text-white rounded-lg hover:opacity-90 transition-opacity cursor-pointer whitespace-nowrap disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 font-medium",children:[e.jsx("i",{className:"ri-shopping-bag-line"}),"Comprar"]})]})]})]},r.id)})}):e.jsxs("div",{className:`text-center py-20 ${t?"bg-gray-900":"bg-white"} rounded-xl border ${t?"border-gray-800":"border-gray-200"}`,children:[e.jsx("i",{className:`ri-inbox-line text-6xl ${t?"text-gray-700":"text-gray-300"} mb-4`}),e.jsx("h3",{className:`text-xl font-semibold ${t?"text-white":"text-gray-900"} mb-2`,children:"Nenhum produto encontrado"}),e.jsx("p",{className:`${t?"text-gray-400":"text-gray-600"}`,children:"Tente ajustar os filtros ou pesquise por outro termo."})]})]})]})}),e.jsx("style",{children:`
        .custom-scrollbar::-webkit-scrollbar {
          width: 6px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
          background: ${t?"#1f2937":"#f3f4f6"};
          border-radius: 3px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
          background: ${t?"#4b5563":"#d1d5db"};
          border-radius: 3px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
          background: ${t?"#6b7280":"#9ca3af"};
        }
      `})]})}export{T as default};
//# sourceMappingURL=page-CsR1lwuJ.js.map
