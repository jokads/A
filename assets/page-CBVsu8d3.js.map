{"version":3,"mappings":"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","names":["AdminHeader","sidebarOpen","setSidebarOpen","userRole","user","signOut","useAuth","darkMode","toggleDarkMode","useTheme","navigate","useNavigate","showUserMenu","setShowUserMenu","useState","handleLogout","getRoleLabel","role","jsx","jsxs","Fragment","AdminSidebar","activeSection","setActiveSection","menuItems","item","DashboardOverview","stats","setStats","recentOrders","setRecentOrders","topProducts","setTopProducts","loading","setLoading","useEffect","loadDashboardData","productsRes","ordersRes","customersRes","ticketsRes","supabase","products","orders","customers","tickets","totalRevenue","sum","order","pendingOrders","o","lowStock","p","openTickets","t","error","statCards","alerts","card","index","alert","action","ProductFormModal","product","onClose","onSave","formData","setFormData","categories","setCategories","images","setImages","variants","setVariants","loadCategories","data","handleSubmit","e","productData","generateSlug","name","cat","ProductsManagement","setProducts","searchTerm","setSearchTerm","selectedCategory","setSelectedCategory","selectedStatus","setSelectedStatus","showModal","setShowModal","editingProduct","setEditingProduct","selectedProducts","setSelectedProducts","loadProducts","handleExportCSV","csv","filteredProducts","c","blob","url","a","matchesSearch","matchesCategory","matchesStatus","controls","control","id","CategoriesManagement","editingCategory","setEditingCategory","category","OrdersManagement","setOrders","filterStatus","setFilterStatus","selectedOrders","setSelectedOrders","showRefundModal","setShowRefundModal","selectedOrder","setSelectedOrder","loadOrders","handleStatusChange","orderId","newStatus","generateInvoicePDF","filteredOrders","statusOptions","status","CustomersManagement","setCustomers","selectedCustomer","setSelectedCustomer","showSegmentModal","setShowSegmentModal","filterType","setFilterType","loadCustomers","profilesData","profilesError","customersWithStats","profile","ordersData","orderCount","totalSpent","filteredCustomers","customer","daysSinceCreated","getRoleBadge","getCustomerType","ContentManagement","pages","setPages","banners","setBanners","settings","setSettings","loadContentData","pagesRes","bannersRes","settingsRes","settingsObj","setting","page","banner","MarketingManagement","campaigns","setCampaigns","coupons","setCoupons","showCouponModal","setShowCouponModal","loadMarketingData","campaignsRes","couponsRes","coupon","campaign","stat","FinancialManagement","transactions","setTransactions","dateRange","setDateRange","loadFinancialData","avgOrderValue","kpis","range","kpi","SecurityManagement","auditLogs","setAuditLogs","apiKeys","setApiKeys","webhooks","setWebhooks","loadSecurityData","logsRes","keysRes","webhooksRes","k","key","webhook","log","AutomationManagement","rules","setRules","templates","setTemplates","tasks","setTasks","loadAutomationData","rulesRes","templatesRes","tasksRes","rule","template","task","SupportManagement","setTickets","filterPriority","setFilterPriority","selectedTicket","setSelectedTicket","loadTickets","ticketId","filteredTickets","ticket","matchesPriority","priorityOptions","priority","count","ShippingManagement","shippingRules","setShippingRules","editingRule","setEditingRule","loadShippingRules","resetForm","handleEdit","handleDelete","countries","r","country","TaxManagement","taxRules","setTaxRules","loadTaxRules","acc","MarketplaceManagement","vendors","setVendors","commissionRules","setCommissionRules","activeTab","setActiveTab","loadData","vendorsData","rulesData","handleSubmitRule","handleApproveVendor","vendorId","handleRejectVendor","handleSuspendVendor","getStatusColor","v","vendor","ThemeEditor","previewMode","setPreviewMode","loadSettings","prev","handleSave","googleFonts","font","SiteSettingsManagement","message","setMessage","tabs","tab","normalizeStoreUrl","useSSL","normalized","testWooCommerceConnection","credentials","storeUrl","rootUrl","rootResponse","rootData","ns","productsUrl","auth","response","totalProducts","fetchWooCommerceProducts","limit","config","img","tag","importWooCommerceProducts","mode","options","categoryMapping","job","jobError","result","processedCount","createdCount","updatedCount","errors","existing","updateData","updateError","newProduct","createError","WooCommerceIntegration","setCredentials","isConnected","setIsConnected","testing","setTesting","testResult","setTestResult","showCredentials","setShowCredentials","previewProducts","setPreviewProducts","showPreview","setShowPreview","importing","setImporting","importJobs","setImportJobs","importedProducts","setImportedProducts","showImportedProducts","setShowImportedProducts","selectedProduct","setSelectedProduct","setCategoryMapping","syncSchedule","setSyncSchedule","importOptions","setImportOptions","setError","filterCategory","setFilterCategory","loadConnection","loadImportJobs","loadImportedProducts","mappings","mappingsError","m","testConnection","startTime","latency","saveConnection","loadPreview","startImport","disconnectWooCommerce","saveProductEdit","idx","ServicesManagement","lazy","__vitePreload","AdminPage","setUserRole","renderContent","Suspense"],"ignoreList":[],"sources":["../../src/pages/admin/components/AdminHeader.tsx","../../src/pages/admin/components/AdminSidebar.tsx","../../src/pages/admin/components/DashboardOverview.tsx","../../src/pages/admin/components/ProductFormModal.tsx","../../src/pages/admin/components/ProductsManagement.tsx","../../src/pages/admin/components/CategoriesManagement.tsx","../../src/pages/admin/components/OrdersManagement.tsx","../../src/pages/admin/components/CustomersManagement.tsx","../../src/pages/admin/components/ContentManagement.tsx","../../src/pages/admin/components/MarketingManagement.tsx","../../src/pages/admin/components/FinancialManagement.tsx","../../src/pages/admin/components/SecurityManagement.tsx","../../src/pages/admin/components/AutomationManagement.tsx","../../src/pages/admin/components/SupportManagement.tsx","../../src/pages/admin/components/ShippingManagement.tsx","../../src/pages/admin/components/TaxManagement.tsx","../../src/pages/admin/components/MarketplaceManagement.tsx","../../src/pages/admin/components/ThemeEditor.tsx","../../src/pages/admin/components/SiteSettingsManagement.tsx","../../src/api/woocommerce.ts","../../src/pages/admin/components/WooCommerceIntegration.tsx","../../src/pages/admin/page.tsx"],"sourcesContent":["import { useAuth } from '../../../contexts/AuthContext';\r\nimport { useTheme } from '../../../contexts/ThemeContext';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useState } from 'react';\r\n\r\ninterface AdminHeaderProps {\r\n  sidebarOpen: boolean;\r\n  setSidebarOpen: (open: boolean) => void;\r\n  userRole: string;\r\n}\r\n\r\nexport default function AdminHeader({ sidebarOpen, setSidebarOpen, userRole }: AdminHeaderProps) {\r\n  const { user, signOut } = useAuth();\r\n  const { darkMode, toggleDarkMode } = useTheme();\r\n  const navigate = useNavigate();\r\n  const [showUserMenu, setShowUserMenu] = useState(false);\r\n\r\n  const handleLogout = async () => {\r\n    await signOut();\r\n    navigate('/login');\r\n  };\r\n\r\n  const getRoleLabel = (role: string) => {\r\n    const roles: Record<string, string> = {\r\n      superadmin: 'Super Administrador',\r\n      admin: 'Administrador',\r\n      manager: 'Gestor',\r\n      editor: 'Editor',\r\n      financial: 'Financeiro',\r\n      support: 'Suporte'\r\n    };\r\n    return roles[role] || 'Utilizador';\r\n  };\r\n\r\n  return (\r\n    <header className={`sticky top-0 z-40 ${darkMode ? 'bg-[#0b0011] border-gray-800' : 'bg-white border-gray-200'} border-b`}>\r\n      <nav className=\"px-4 sm:px-6 lg:px-8\">\r\n        <div className=\"flex items-center justify-between h-16\">\r\n          {/* Left Section */}\r\n          <div className=\"flex items-center gap-4\">\r\n            {/* Toggle Sidebar Button */}\r\n            <button\r\n              onClick={() => setSidebarOpen(!sidebarOpen)}\r\n              className={`w-10 h-10 rounded-lg ${\r\n                darkMode ? 'bg-gray-800 hover:bg-gray-700' : 'bg-gray-100 hover:bg-gray-200'\r\n              } flex items-center justify-center transition-colors cursor-pointer`}\r\n            >\r\n              <i className={`ri-menu-line text-xl ${darkMode ? 'text-white' : 'text-gray-900'}`}></i>\r\n            </button>\r\n\r\n            {/* Logo */}\r\n            <div className=\"flex items-center gap-2\">\r\n              <div className=\"w-8 h-8 bg-gradient-to-br from-[#b62bff] to-[#ff6a00] rounded-lg flex items-center justify-center\">\r\n                <i className=\"ri-dashboard-line text-white text-lg\"></i>\r\n              </div>\r\n              <span className={`text-lg font-bold ${darkMode ? 'text-white' : 'text-gray-900'}`}>\r\n                Dashboard Admin\r\n              </span>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Right Section */}\r\n          <div className=\"flex items-center gap-3\">\r\n            {/* Ver Site Button */}\r\n            <button\r\n              onClick={() => navigate('/')}\r\n              className={`hidden sm:flex items-center gap-2 px-4 py-2 rounded-lg ${\r\n                darkMode \r\n                  ? 'bg-gradient-to-r from-[#b62bff]/20 to-[#ff6a00]/20 hover:from-[#b62bff]/30 hover:to-[#ff6a00]/30 text-white border border-[#b62bff]/30' \r\n                  : 'bg-gradient-to-r from-[#b62bff]/10 to-[#ff6a00]/10 hover:from-[#b62bff]/20 hover:to-[#ff6a00]/20 text-gray-900 border border-[#b62bff]/20'\r\n              } font-medium transition-all cursor-pointer whitespace-nowrap`}\r\n            >\r\n              <i className=\"ri-home-line text-lg\"></i>\r\n              <span>Ver Site</span>\r\n            </button>\r\n\r\n            {/* Theme Toggle */}\r\n            <button\r\n              onClick={toggleDarkMode}\r\n              className={`w-10 h-10 rounded-lg ${\r\n                darkMode ? 'bg-gray-800 hover:bg-gray-700' : 'bg-gray-100 hover:bg-gray-200'\r\n              } flex items-center justify-center transition-colors cursor-pointer`}\r\n            >\r\n              <i className={`${darkMode ? 'ri-sun-line' : 'ri-moon-line'} text-xl ${\r\n                darkMode ? 'text-yellow-400' : 'text-gray-700'\r\n              }`}></i>\r\n            </button>\r\n\r\n            {/* User Menu */}\r\n            <div className=\"relative\">\r\n              <button\r\n                onClick={() => setShowUserMenu(!showUserMenu)}\r\n                className={`w-10 h-10 rounded-lg ${\r\n                  darkMode ? 'bg-gray-800 hover:bg-gray-700' : 'bg-gray-100 hover:bg-gray-200'\r\n                } flex items-center justify-center transition-colors cursor-pointer`}\r\n              >\r\n                <i className={`ri-user-line text-xl ${darkMode ? 'text-white' : 'text-gray-900'}`}></i>\r\n              </button>\r\n\r\n              {/* Dropdown Menu */}\r\n              {showUserMenu && (\r\n                <>\r\n                  <div \r\n                    className=\"fixed inset-0 z-40\" \r\n                    onClick={() => setShowUserMenu(false)}\r\n                  ></div>\r\n                  <div className={`absolute right-0 mt-2 w-72 rounded-xl shadow-2xl ${\r\n                    darkMode ? 'bg-[#170018] border-gray-800' : 'bg-white border-gray-200'\r\n                  } border overflow-hidden z-50`}>\r\n                    {/* User Info */}\r\n                    <div className={`p-4 border-b ${darkMode ? 'border-gray-800' : 'border-gray-200'}`}>\r\n                      <div className=\"flex items-center gap-3\">\r\n                        <div className=\"w-12 h-12 bg-gradient-to-br from-[#b62bff] to-[#ff6a00] rounded-full flex items-center justify-center\">\r\n                          <i className=\"ri-user-line text-white text-xl\"></i>\r\n                        </div>\r\n                        <div className=\"flex-1 min-w-0\">\r\n                          <p className={`font-semibold truncate ${darkMode ? 'text-white' : 'text-gray-900'}`}>\r\n                            {user?.email}\r\n                          </p>\r\n                          <p className=\"text-sm text-gray-500 truncate\">\r\n                            {getRoleLabel(userRole)}\r\n                          </p>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n\r\n                    {/* Menu Items */}\r\n                    <div className=\"p-2\">\r\n                      <button\r\n                        onClick={() => {\r\n                          navigate('/');\r\n                          setShowUserMenu(false);\r\n                        }}\r\n                        className={`w-full flex items-center gap-3 px-4 py-3 rounded-lg ${\r\n                          darkMode ? 'hover:bg-gray-800 text-gray-300' : 'hover:bg-gray-100 text-gray-700'\r\n                        } transition-colors cursor-pointer`}\r\n                      >\r\n                        <i className=\"ri-home-line text-lg\"></i>\r\n                        <span>Ver Site Pblico</span>\r\n                      </button>\r\n\r\n                      <button\r\n                        onClick={handleLogout}\r\n                        className={`w-full flex items-center gap-3 px-4 py-3 rounded-lg ${\r\n                          darkMode ? 'hover:bg-red-900/20 text-red-400' : 'hover:bg-red-50 text-red-600'\r\n                        } transition-colors cursor-pointer`}\r\n                      >\r\n                        <i className=\"ri-logout-box-line text-lg\"></i>\r\n                        <span>Terminar Sesso</span>\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                </>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </nav>\r\n    </header>\r\n  );\r\n}\r\n","import { useTheme } from '../../../contexts/ThemeContext';\r\n\r\ninterface AdminSidebarProps {\r\n  activeSection: string;\r\n  setActiveSection: (section: string) => void;\r\n  sidebarOpen: boolean;\r\n}\r\n\r\nexport default function AdminSidebar({ activeSection, setActiveSection, sidebarOpen }: AdminSidebarProps) {\r\n  const { darkMode } = useTheme();\r\n\r\n  const menuItems = [\r\n    { id: 'dashboard', icon: 'ri-dashboard-line', label: 'Dashboard' },\r\n    { id: 'products', icon: 'ri-shopping-bag-line', label: 'Produtos' },\r\n    { id: 'services', icon: 'ri-service-line', label: 'Servios' },\r\n    { id: 'categories', icon: 'ri-folder-line', label: 'Categorias' },\r\n    { id: 'orders', icon: 'ri-file-list-line', label: 'Pedidos' },\r\n    { id: 'customers', icon: 'ri-user-line', label: 'Clientes' },\r\n    { id: 'content', icon: 'ri-pages-line', label: 'Contedo' },\r\n    { id: 'marketing', icon: 'ri-megaphone-line', label: 'Marketing' },\r\n    { id: 'financial', icon: 'ri-money-dollar-circle-line', label: 'Financeiro' },\r\n    { id: 'shipping', icon: 'ri-truck-line', label: 'Envios' },\r\n    { id: 'tax', icon: 'ri-percent-line', label: 'Impostos' },\r\n    { id: 'marketplace', icon: 'ri-store-line', label: 'Marketplace' },\r\n    { id: 'automation', icon: 'ri-robot-line', label: 'Automao' },\r\n    { id: 'support', icon: 'ri-customer-service-line', label: 'Suporte' },\r\n    { id: 'woocommerce', icon: 'ri-shopping-cart-2-line', label: 'WooCommerce' },\r\n    { id: 'site-settings', icon: 'ri-settings-3-line', label: 'Configuraes' },\r\n    { id: 'theme', icon: 'ri-palette-line', label: 'Tema' },\r\n    { id: 'security', icon: 'ri-shield-check-line', label: 'Segurana' }\r\n  ];\r\n\r\n  return (\r\n    <aside\r\n      className={`fixed left-0 top-16 bottom-0 w-64 ${\r\n        darkMode ? 'bg-[#170018] border-gray-800' : 'bg-white border-gray-200'\r\n      } border-r transition-transform duration-300 overflow-y-auto ${\r\n        sidebarOpen ? 'translate-x-0' : '-translate-x-full'\r\n      }`}\r\n    >\r\n      <nav className=\"p-4 space-y-1\">\r\n        {menuItems.map((item) => (\r\n          <button\r\n            key={item.id}\r\n            onClick={() => setActiveSection(item.id)}\r\n            className={`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all ${\r\n              activeSection === item.id\r\n                ? 'bg-gradient-to-r from-[#b62bff] to-[#ff6a00] text-white shadow-lg'\r\n                : darkMode\r\n                ? 'text-gray-300 hover:bg-gray-800'\r\n                : 'text-gray-700 hover:bg-gray-100'\r\n            }`}\r\n          >\r\n            <i className={`${item.icon} text-xl`}></i>\r\n            <span className=\"font-medium\">{item.label}</span>\r\n          </button>\r\n        ))}\r\n      </nav>\r\n    </aside>\r\n  );\r\n}\r\n","import { useState, useEffect } from 'react';\r\nimport { supabase } from '../../../lib/supabase';\r\n\r\ninterface DashboardOverviewProps {\r\n  darkMode: boolean;\r\n}\r\n\r\nexport default function DashboardOverview({ darkMode }: DashboardOverviewProps) {\r\n  const [stats, setStats] = useState({\r\n    totalProducts: 0,\r\n    totalOrders: 0,\r\n    totalCustomers: 0,\r\n    totalRevenue: 0,\r\n    pendingOrders: 0,\r\n    lowStock: 0,\r\n    openTickets: 0,\r\n    activeCampaigns: 0\r\n  });\r\n\r\n  const [recentOrders, setRecentOrders] = useState<any[]>([]);\r\n  const [topProducts, setTopProducts] = useState<any[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    loadDashboardData();\r\n  }, []);\r\n\r\n  const loadDashboardData = async () => {\r\n    try {\r\n      const [productsRes, ordersRes, customersRes, ticketsRes] = await Promise.all([\r\n        supabase.from('products').select('id, stock, min_stock'),\r\n        supabase.from('orders').select('id, total, status, created_at, user_id'),\r\n        supabase.from('profiles').select('id'),\r\n        supabase.from('support_tickets').select('id, status')\r\n      ]);\r\n\r\n      const products = productsRes.data || [];\r\n      const orders = ordersRes.data || [];\r\n      const customers = customersRes.data || [];\r\n      const tickets = ticketsRes.data || [];\r\n\r\n      const totalRevenue = orders.reduce((sum, order) => sum + (order.total || 0), 0);\r\n      const pendingOrders = orders.filter(o => o.status === 'pending').length;\r\n      const lowStock = products.filter(p => p.stock <= p.min_stock).length;\r\n      const openTickets = tickets.filter(t => t.status === 'open').length;\r\n\r\n      setStats({\r\n        totalProducts: products.length,\r\n        totalOrders: orders.length,\r\n        totalCustomers: customers.length,\r\n        totalRevenue,\r\n        pendingOrders,\r\n        lowStock,\r\n        openTickets,\r\n        activeCampaigns: 0\r\n      });\r\n\r\n      setRecentOrders(orders.slice(0, 5));\r\n    } catch (error) {\r\n      console.error('Erro ao carregar dados:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const statCards = [\r\n    {\r\n      title: 'Receita Total',\r\n      value: `R$ ${stats.totalRevenue.toFixed(2)}`,\r\n      icon: 'ri-money-dollar-circle-line',\r\n      color: 'from-green-500 to-green-600',\r\n      change: '+12.5%'\r\n    },\r\n    {\r\n      title: 'Pedidos',\r\n      value: stats.totalOrders.toString(),\r\n      icon: 'ri-shopping-cart-line',\r\n      color: 'from-blue-500 to-blue-600',\r\n      change: '+8.2%'\r\n    },\r\n    {\r\n      title: 'Produtos',\r\n      value: stats.totalProducts.toString(),\r\n      icon: 'ri-shopping-bag-line',\r\n      color: 'from-purple-500 to-purple-600',\r\n      change: '+5.1%'\r\n    },\r\n    {\r\n      title: 'Clientes',\r\n      value: stats.totalCustomers.toString(),\r\n      icon: 'ri-user-line',\r\n      color: 'from-yellow-500 to-yellow-600',\r\n      change: '+15.3%'\r\n    }\r\n  ];\r\n\r\n  const alerts = [\r\n    {\r\n      type: 'warning',\r\n      icon: 'ri-alert-line',\r\n      message: `${stats.lowStock} produtos com estoque baixo`,\r\n      action: 'Ver produtos'\r\n    },\r\n    {\r\n      type: 'info',\r\n      icon: 'ri-time-line',\r\n      message: `${stats.pendingOrders} pedidos pendentes`,\r\n      action: 'Processar'\r\n    },\r\n    {\r\n      type: 'error',\r\n      icon: 'ri-customer-service-line',\r\n      message: `${stats.openTickets} tickets abertos`,\r\n      action: 'Responder'\r\n    }\r\n  ];\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center h-96\">\r\n        <div className=\"w-12 h-12 border-4 border-yellow-500 border-t-transparent rounded-full animate-spin\"></div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\r\n        {statCards.map((card, index) => (\r\n          <div\r\n            key={index}\r\n            className={`p-6 rounded-xl ${\r\n              darkMode ? 'bg-gray-900' : 'bg-gray-50'\r\n            } border ${darkMode ? 'border-gray-800' : 'border-gray-200'}`}\r\n          >\r\n            <div className=\"flex items-center justify-between mb-4\">\r\n              <div className={`w-12 h-12 rounded-lg bg-gradient-to-br ${card.color} flex items-center justify-center`}>\r\n                <i className={`${card.icon} text-2xl text-white`}></i>\r\n              </div>\r\n              <span className=\"text-green-500 text-sm font-medium\">{card.change}</span>\r\n            </div>\r\n            <h3 className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'} mb-1`}>{card.title}</h3>\r\n            <p className=\"text-3xl font-bold\">{card.value}</p>\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      {alerts.length > 0 && (\r\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n          {alerts.map((alert, index) => (\r\n            <div\r\n              key={index}\r\n              className={`p-4 rounded-lg border ${\r\n                alert.type === 'warning'\r\n                  ? 'bg-yellow-500/10 border-yellow-500/30'\r\n                  : alert.type === 'error'\r\n                  ? 'bg-red-500/10 border-red-500/30'\r\n                  : 'bg-blue-500/10 border-blue-500/30'\r\n              }`}\r\n            >\r\n              <div className=\"flex items-start gap-3\">\r\n                <i className={`${alert.icon} text-xl ${\r\n                  alert.type === 'warning'\r\n                    ? 'text-yellow-500'\r\n                    : alert.type === 'error'\r\n                    ? 'text-red-500'\r\n                    : 'text-blue-500'\r\n                }`}></i>\r\n                <div className=\"flex-1\">\r\n                  <p className=\"text-sm mb-2\">{alert.message}</p>\r\n                  <button className={`text-xs font-medium ${\r\n                    alert.type === 'warning'\r\n                      ? 'text-yellow-500'\r\n                      : alert.type === 'error'\r\n                      ? 'text-red-500'\r\n                      : 'text-blue-500'\r\n                  } hover:underline whitespace-nowrap`}>\r\n                    {alert.action} \r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n        <div className={`p-6 rounded-xl ${darkMode ? 'bg-gray-900' : 'bg-gray-50'} border ${darkMode ? 'border-gray-800' : 'border-gray-200'}`}>\r\n          <h3 className=\"text-lg font-bold mb-4\">Pedidos Recentes</h3>\r\n          <div className=\"space-y-3\">\r\n            {recentOrders.length === 0 ? (\r\n              <p className={darkMode ? 'text-gray-400' : 'text-gray-600'}>Nenhum pedido ainda</p>\r\n            ) : (\r\n              recentOrders.map((order) => (\r\n                <div key={order.id} className={`p-3 rounded-lg ${darkMode ? 'bg-gray-800' : 'bg-white'}`}>\r\n                  <div className=\"flex items-center justify-between\">\r\n                    <div>\r\n                      <p className=\"font-medium\">Pedido #{order.id.slice(0, 8)}</p>\r\n                      <p className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>\r\n                        {new Date(order.created_at).toLocaleDateString('pt-BR')}\r\n                      </p>\r\n                    </div>\r\n                    <div className=\"text-right\">\r\n                      <p className=\"font-bold text-yellow-500\">R$ {order.total?.toFixed(2)}</p>\r\n                      <span className={`text-xs px-2 py-1 rounded-full ${\r\n                        order.status === 'completed'\r\n                          ? 'bg-green-500/20 text-green-500'\r\n                          : order.status === 'pending'\r\n                          ? 'bg-yellow-500/20 text-yellow-500'\r\n                          : 'bg-gray-500/20 text-gray-500'\r\n                      }`}>\r\n                        {order.status}\r\n                      </span>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              ))\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        <div className={`p-6 rounded-xl ${darkMode ? 'bg-gray-900' : 'bg-gray-50'} border ${darkMode ? 'border-gray-800' : 'border-gray-200'}`}>\r\n          <h3 className=\"text-lg font-bold mb-4\">Aes Rpidas</h3>\r\n          <div className=\"grid grid-cols-2 gap-3\">\r\n            {[\r\n              { label: 'Novo Produto', icon: 'ri-add-circle-line', color: 'from-blue-500 to-blue-600' },\r\n              { label: 'Nova Categoria', icon: 'ri-folder-add-line', color: 'from-purple-500 to-purple-600' },\r\n              { label: 'Criar Cupom', icon: 'ri-coupon-line', color: 'from-green-500 to-green-600' },\r\n              { label: 'Nova Campanha', icon: 'ri-megaphone-line', color: 'from-yellow-500 to-yellow-600' },\r\n              { label: 'Exportar Dados', icon: 'ri-download-line', color: 'from-red-500 to-red-600' },\r\n              { label: 'Relatrios', icon: 'ri-bar-chart-line', color: 'from-indigo-500 to-indigo-600' }\r\n            ].map((action, index) => (\r\n              <button\r\n                key={index}\r\n                className={`p-4 rounded-lg bg-gradient-to-br ${action.color} hover:opacity-90 transition-opacity text-white text-left whitespace-nowrap`}\r\n              >\r\n                <i className={`${action.icon} text-2xl mb-2 block`}></i>\r\n                <span className=\"text-sm font-medium\">{action.label}</span>\r\n              </button>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","\r\nimport { useState, useEffect } from 'react';\r\nimport { supabase } from '../../../lib/supabase';\r\n\r\ninterface ProductFormModalProps {\r\n  darkMode: boolean;\r\n  product: any;\r\n  onClose: () => void;\r\n  onSave: () => void;\r\n}\r\n\r\nexport default function ProductFormModal({ darkMode, product, onClose, onSave }: ProductFormModalProps) {\r\n  const [formData, setFormData] = useState({\r\n    name: '',\r\n    slug: '',\r\n    description: '',\r\n    short_description: '',\r\n    price: 0,\r\n    cost: 0,\r\n    promotional_price: 0,\r\n    category_id: '',\r\n    stock: 0,\r\n    min_stock: 5,\r\n    sku: '',\r\n    barcode: '',\r\n    weight: 0,\r\n    dimensions: '',\r\n    status: 'active',\r\n    type: 'physical',\r\n    tax_rate: 23,\r\n    country_origin: '',\r\n    warehouse_location: '',\r\n    is_dropshipping: false,\r\n    supplier_id: '',\r\n    meta_title: '',\r\n    meta_description: '',\r\n    meta_keywords: '',\r\n    tags: '',\r\n  });\r\n\r\n  const [categories, setCategories] = useState<any[]>([]);\r\n  const [images, setImages] = useState<string[]>([]);\r\n  const [variants, setVariants] = useState<any[]>([]);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  useEffect(() => {\r\n    loadCategories();\r\n    if (product) {\r\n      setFormData({\r\n        name: product.name || '',\r\n        slug: product.slug || '',\r\n        description: product.description || '',\r\n        short_description: product.short_description || '',\r\n        price: product.price || 0,\r\n        cost: product.cost || 0,\r\n        promotional_price: product.promotional_price || 0,\r\n        category_id: product.category_id || '',\r\n        stock: product.stock || 0,\r\n        min_stock: product.min_stock || 5,\r\n        sku: product.sku || '',\r\n        barcode: product.barcode || '',\r\n        weight: product.weight || 0,\r\n        dimensions: product.dimensions || '',\r\n        status: product.status || 'active',\r\n        type: product.type || 'physical',\r\n        tax_rate: product.tax_rate || 23,\r\n        country_origin: product.country_origin || '',\r\n        warehouse_location: product.warehouse_location || '',\r\n        is_dropshipping: product.is_dropshipping || false,\r\n        supplier_id: product.supplier_id || '',\r\n        meta_title: product.meta_title || '',\r\n        meta_description: product.meta_description || '',\r\n        meta_keywords: product.meta_keywords || '',\r\n        tags: product.tags || '',\r\n      });\r\n      setImages(product.images || []);\r\n      setVariants(product.variants || []);\r\n    }\r\n  }, [product]);\r\n\r\n  const loadCategories = async () => {\r\n    const { data } = await supabase.from('categories').select('*').order('name');\r\n    setCategories(data || []);\r\n  };\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n\r\n    try {\r\n      const productData = {\r\n        ...formData,\r\n        images,\r\n        variants,\r\n        margin: formData.price - formData.cost,\r\n        margin_percentage: ((formData.price - formData.cost) / formData.price * 100).toFixed(2),\r\n        updated_at: new Date().toISOString(),\r\n      };\r\n\r\n      if (product) {\r\n        const { error } = await supabase\r\n          .from('products')\r\n          .update(productData)\r\n          .eq('id', product.id);\r\n        if (error) throw error;\r\n      } else {\r\n        const { error } = await supabase\r\n          .from('products')\r\n          .insert([{ ...productData, created_at: new Date().toISOString() }]);\r\n        if (error) throw error;\r\n      }\r\n\r\n      alert('Produto salvo com sucesso!');\r\n      onSave();\r\n      onClose();\r\n    } catch (error) {\r\n      console.error('Erro ao salvar produto:', error);\r\n      alert('Erro ao salvar produto');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const generateSlug = (name: string) => {\r\n    return name\r\n      .toLowerCase()\r\n      .normalize('NFD')\r\n      .replace(/[\\u0300-\\u036f]/g, '')\r\n      .replace(/[^a-z0-9]+/g, '-')\r\n      .replace(/(^-|-$)/g, '');\r\n  };\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 overflow-y-auto\">\r\n      <div className={`${darkMode ? 'bg-gray-900' : 'bg-white'} rounded-xl max-w-6xl w-full max-h-[90vh] overflow-y-auto`}>\r\n        <div className={`sticky top-0 ${darkMode ? 'bg-gray-900' : 'bg-white'} border-b ${darkMode ? 'border-gray-800' : 'border-gray-200'} p-6 flex items-center justify-between z-10`}>\r\n          <h2 className=\"text-2xl font-bold flex items-center gap-2\">\r\n            <i className=\"ri-box-3-line text-yellow-500\"></i>\r\n            {product ? 'Editar Produto' : 'Novo Produto'}\r\n          </h2>\r\n          <button onClick={onClose} className=\"p-2 hover:bg-gray-800 rounded-lg transition-colors\">\r\n            <i className=\"ri-close-line text-xl\"></i>\r\n          </button>\r\n        </div>\r\n\r\n        <form onSubmit={handleSubmit} className=\"p-6 space-y-6\">\r\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n            <div className=\"space-y-4\">\r\n              <h3 className=\"text-lg font-semibold flex items-center gap-2\">\r\n                <i className=\"ri-information-line text-yellow-500\"></i>\r\n                Informaes Bsicas\r\n              </h3>\r\n\r\n              <div>\r\n                <label className=\"block text-sm font-medium mb-2\">Nome do Produto *</label>\r\n                <input\r\n                  type=\"text\"\r\n                  required\r\n                  value={formData.name}\r\n                  onChange={(e) => {\r\n                    setFormData({ ...formData, name: e.target.value, slug: generateSlug(e.target.value) });\r\n                  }}\r\n                  className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"block text-sm font-medium mb-2\">Slug (URL)</label>\r\n                <input\r\n                  type=\"text\"\r\n                  value={formData.slug}\r\n                  onChange={(e) => setFormData({ ...formData, slug: e.target.value })}\r\n                  className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"block text-sm font-medium mb-2\">Descrio Curta</label>\r\n                <textarea\r\n                  value={formData.short_description}\r\n                  onChange={(e) => setFormData({ ...formData, short_description: e.target.value })}\r\n                  rows={3}\r\n                  className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"block text-sm font-medium mb-2\">Descrio Completa</label>\r\n                <textarea\r\n                  value={formData.description}\r\n                  onChange={(e) => setFormData({ ...formData, description: e.target.value })}\r\n                  rows={6}\r\n                  className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\r\n                />\r\n              </div>\r\n\r\n              <div className=\"grid grid-cols-2 gap-4\">\r\n                <div>\r\n                  <label className=\"block text-sm font-medium mb-2\">Categoria *</label>\r\n                  <select\r\n                    required\r\n                    value={formData.category_id}\r\n                    onChange={(e) => setFormData({ ...formData, category_id: e.target.value })}\r\n                    className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\r\n                  >\r\n                    <option value=\"\">Selecione...</option>\r\n                    {categories.map(cat => (\r\n                      <option key={cat.id} value={cat.id}>{cat.name}</option>\r\n                    ))}\r\n                  </select>\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm font-medium mb-2\">Status</label>\r\n                  <select\r\n                    value={formData.status}\r\n                    onChange={(e) => setFormData({ ...formData, status: e.target.value })}\r\n                    className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\r\n                  >\r\n                    <option value=\"active\">Ativo</option>\r\n                    <option value=\"inactive\">Inativo</option>\r\n                    <option value=\"draft\">Rascunho</option>\r\n                  </select>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"grid grid-cols-2 gap-4\">\r\n                <div>\r\n                  <label className=\"block text-sm font-medium mb-2\">Tipo</label>\r\n                  <select\r\n                    value={formData.type}\r\n                    onChange={(e) => setFormData({ ...formData, type: e.target.value })}\r\n                    className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\r\n                  >\r\n                    <option value=\"physical\">Fsico</option>\r\n                    <option value=\"digital\">Digital</option>\r\n                  </select>\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm font-medium mb-2\">SKU</label>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={formData.sku}\r\n                    onChange={(e) => setFormData({ ...formData, sku: e.target.value })}\r\n                    className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\r\n                  />\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"space-y-4\">\r\n              <h3 className=\"text-lg font-semibold flex items-center gap-2\">\r\n                <i className=\"ri-money-dollar-circle-line text-yellow-500\"></i>\r\n                Preos & Financeiro\r\n              </h3>\r\n\r\n              <div className=\"grid grid-cols-2 gap-4\">\r\n                <div>\r\n                  <label className=\"block text-sm font-medium mb-2\">Custo *</label>\r\n                  <input\r\n                    type=\"number\"\r\n                    step=\"0.01\"\r\n                    required\r\n                    value={formData.cost}\r\n                    onChange={(e) => setFormData({ ...formData, cost: parseFloat(e.target.value) })}\r\n                    className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\r\n                  />\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm font-medium mb-2\">Preo de Venda *</label>\r\n                  <input\r\n                    type=\"number\"\r\n                    step=\"0.01\"\r\n                    required\r\n                    value={formData.price}\r\n                    onChange={(e) => setFormData({ ...formData, price: parseFloat(e.target.value) })}\r\n                    className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"block text-sm font-medium mb-2\">Preo Promocional</label>\r\n                <input\r\n                  type=\"number\"\r\n                  step=\"0.01\"\r\n                  value={formData.promotional_price}\r\n                  onChange={(e) => setFormData({ ...formData, promotional_price: parseFloat(e.target.value) })}\r\n                  className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"block text-sm font-medium mb-2\">Taxa IVA (%)</label>\r\n                <input\r\n                  type=\"number\"\r\n                  step=\"0.01\"\r\n                  value={formData.tax_rate}\r\n                  onChange={(e) => setFormData({ ...formData, tax_rate: parseFloat(e.target.value) })}\r\n                  className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\r\n                />\r\n              </div>\r\n\r\n              {formData.price > 0 && formData.cost > 0 && (\r\n                <div className={`p-4 rounded-lg ${darkMode ? 'bg-gray-800' : 'bg-gray-100'}`}>\r\n                  <p className=\"text-sm mb-2\">Margem: <span className=\"font-bold text-green-500\">{(formData.price - formData.cost).toFixed(2)}</span></p>\r\n                  <p className=\"text-sm\">Margem %: <span className=\"font-bold text-green-500\">{((formData.price - formData.cost) / formData.price * 100).toFixed(2)}%</span></p>\r\n                </div>\r\n              )}\r\n\r\n              <h3 className=\"text-lg font-semibold flex items-center gap-2 pt-4\">\r\n                <i className=\"ri-stack-line text-yellow-500\"></i>\r\n                Estoque & Logstica\r\n              </h3>\r\n\r\n              <div className=\"grid grid-cols-2 gap-4\">\r\n                <div>\r\n                  <label className=\"block text-sm font-medium mb-2\">Estoque Atual</label>\r\n                  <input\r\n                    type=\"number\"\r\n                    value={formData.stock}\r\n                    onChange={(e) => setFormData({ ...formData, stock: parseInt(e.target.value) })}\r\n                    className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\r\n                  />\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm font-medium mb-2\">Estoque Mnimo</label>\r\n                  <input\r\n                    type=\"number\"\r\n                    value={formData.min_stock}\r\n                    onChange={(e) => setFormData({ ...formData, min_stock: parseInt(e.target.value) })}\r\n                    className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"block text-sm font-medium mb-2\">Localizao no Armazm</label>\r\n                <input\r\n                  type=\"text\"\r\n                  value={formData.warehouse_location}\r\n                  onChange={(e) => setFormData({ ...formData, warehouse_location: e.target.value })}\r\n                  placeholder=\"Ex: A-12-3\"\r\n                  className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\r\n                />\r\n              </div>\r\n\r\n              <div className=\"grid grid-cols-2 gap-4\">\r\n                <div>\r\n                  <label className=\"block text-sm font-medium mb-2\">Peso (kg)</label>\r\n                  <input\r\n                    type=\"number\"\r\n                    step=\"0.01\"\r\n                    value={formData.weight}\r\n                    onChange={(e) => setFormData({ ...formData, weight: parseFloat(e.target.value) })}\r\n                    className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\r\n                  />\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm font-medium mb-2\">Dimenses (LxAxP cm)</label>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={formData.dimensions}\r\n                    onChange={(e) => setFormData({ ...formData, dimensions: e.target.value })}\r\n                    placeholder=\"30x20x10\"\r\n                    className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"block text-sm font-medium mb-2\">Pas de Origem</label>\r\n                <input\r\n                  type=\"text\"\r\n                  value={formData.country_origin}\r\n                  onChange={(e) => setFormData({ ...formData, country_origin: e.target.value })}\r\n                  placeholder=\"Portugal\"\r\n                  className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\r\n                />\r\n              </div>\r\n\r\n              <div className=\"flex items-center gap-2\">\r\n                <input\r\n                  type=\"checkbox\"\r\n                  id=\"is_dropshipping\"\r\n                  checked={formData.is_dropshipping}\r\n                  onChange={(e) => setFormData({ ...formData, is_dropshipping: e.target.checked })}\r\n                  className=\"w-4 h-4 rounded border-gray-300\"\r\n                />\r\n                <label htmlFor=\"is_dropshipping\" className=\"text-sm font-medium\">Produto Dropshipping</label>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"space-y-4\">\r\n            <h3 className=\"text-lg font-semibold flex items-center gap-2\">\r\n              <i className=\"ri-seo-line text-yellow-500\"></i>\r\n              SEO & Meta Tags\r\n            </h3>\r\n\r\n            <div className=\"grid grid-cols-1 gap-4\">\r\n              <div>\r\n                <label className=\"block text-sm font-medium mb-2\">Meta Ttulo</label>\r\n                <input\r\n                  type=\"text\"\r\n                  value={formData.meta_title}\r\n                  onChange={(e) => setFormData({ ...formData, meta_title: e.target.value })}\r\n                  maxLength={60}\r\n                  className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\r\n                />\r\n                <p className=\"text-xs text-gray-500 mt-1\">{formData.meta_title.length}/60 caracteres</p>\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"block text-sm font-medium mb-2\">Meta Descrio</label>\r\n                <textarea\r\n                  value={formData.meta_description}\r\n                  onChange={(e) => setFormData({ ...formData, meta_description: e.target.value })}\r\n                  maxLength={160}\r\n                  rows={3}\r\n                  className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\r\n                />\r\n                <p className=\"text-xs text-gray-500 mt-1\">{formData.meta_description.length}/160 caracteres</p>\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"block text-sm font-medium mb-2\">Palavras-chave (separadas por vrgula)</label>\r\n                <input\r\n                  type=\"text\"\r\n                  value={formData.meta_keywords}\r\n                  onChange={(e) => setFormData({ ...formData, meta_keywords: e.target.value })}\r\n                  className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"block text-sm font-medium mb-2\">Tags (separadas por vrgula)</label>\r\n                <input\r\n                  type=\"text\"\r\n                  value={formData.tags}\r\n                  onChange={(e) => setFormData({ ...formData, tags: e.target.value })}\r\n                  placeholder=\"eletrnicos, tecnologia, gadgets\"\r\n                  className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"flex items-center justify-end gap-4 pt-6 border-t border-gray-800\">\r\n            <button\r\n              type=\"button\"\r\n              onClick={onClose}\r\n              className=\"px-6 py-2 rounded-lg border border-gray-700 hover:bg-gray-800 transition-colors whitespace-nowrap\"\r\n            >\r\n              Cancelar\r\n            </button>\r\n            <button\r\n              type=\"submit\"\r\n              disabled={loading}\r\n              className=\"px-6 py-2 bg-gradient-to-r from-yellow-500 to-yellow-600 text-black font-medium rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap\"\r\n            >\r\n              {loading ? (\r\n                <>\r\n                  <div className=\"w-4 h-4 border-2 border-black border-t-transparent rounded-full animate-spin\"></div>\r\n                  Salvando...\r\n                </>\r\n              ) : (\r\n                <>\r\n                  <i className=\"ri-save-line\"></i>\r\n                  Salvar Produto\r\n                </>\r\n              )}\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import { useState, useEffect } from 'react';\r\nimport { supabase } from '../../../lib/supabase';\r\nimport ProductFormModal from './ProductFormModal';\r\n\r\ninterface ProductsManagementProps {\r\n  darkMode: boolean;\r\n}\r\n\r\nexport default function ProductsManagement({ darkMode }: ProductsManagementProps) {\r\n  const [products, setProducts] = useState<any[]>([]);\r\n  const [categories, setCategories] = useState<any[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [selectedCategory, setSelectedCategory] = useState('all');\r\n  const [selectedStatus, setSelectedStatus] = useState('all');\r\n  const [showModal, setShowModal] = useState(false);\r\n  const [editingProduct, setEditingProduct] = useState<any>(null);\r\n  const [selectedProducts, setSelectedProducts] = useState<string[]>([]);\r\n\r\n  useEffect(() => {\r\n    loadProducts();\r\n  }, []);\r\n\r\n  const loadProducts = async () => {\r\n    try {\r\n      const { data, error } = await supabase\r\n        .from('products')\r\n        .select('*, categories(name)')\r\n        .order('created_at', { ascending: false });\r\n\r\n      if (error) throw error;\r\n      setProducts(data || []);\r\n    } catch (error) {\r\n      console.error('Erro ao carregar produtos:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleEdit = (product: any) => {\r\n    setEditingProduct(product);\r\n    setShowModal(true);\r\n  };\r\n\r\n  const handleDelete = async (id: string) => {\r\n    if (!confirm('Tem certeza que deseja excluir este produto?')) return;\r\n    const { error } = await supabase.from('products').delete().eq('id', id);\r\n    if (!error) {\r\n      alert('Produto excludo com sucesso!');\r\n      loadProducts();\r\n    }\r\n  };\r\n\r\n  const handleBulkDelete = async () => {\r\n    if (!confirm('Tem certeza que deseja excluir os produtos selecionados?')) return;\r\n    // Implementar excluso em massa\r\n    alert('Funcionalidade em desenvolvimento');\r\n  };\r\n\r\n  const handleExportCSV = () => {\r\n    const csv = [\r\n      ['ID', 'Nome', 'SKU', 'Preo', 'Estoque', 'Categoria', 'Status'].join(','),\r\n      ...filteredProducts.map(p => [\r\n        p.id,\r\n        p.name,\r\n        p.sku,\r\n        p.price,\r\n        p.stock,\r\n        categories.find(c => c.id === p.category_id)?.name || '',\r\n        p.status\r\n      ].join(','))\r\n    ].join('\\n');\r\n\r\n    const blob = new Blob([csv], { type: 'text/csv' });\r\n    const url = window.URL.createObjectURL(blob);\r\n    const a = document.createElement('a');\r\n    a.href = url;\r\n    a.download = `produtos_${new Date().toISOString().split('T')[0]}.csv`;\r\n    a.click();\r\n  };\r\n\r\n  const filteredProducts = products.filter(product => {\r\n    const matchesSearch = product.name.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n                         product.sku?.toLowerCase().includes(searchTerm.toLowerCase());\r\n    const matchesCategory = selectedCategory === 'all' || product.category_id === selectedCategory;\r\n    const matchesStatus = selectedStatus === 'all' || product.status === selectedStatus;\r\n    \r\n    return matchesSearch && matchesCategory && matchesStatus;\r\n  });\r\n\r\n  const controls = [\r\n    { id: 1, name: 'CRUD Completo', icon: 'ri-edit-line', active: true },\r\n    { id: 2, name: 'Upload Mltiplo', icon: 'ri-upload-line', active: true },\r\n    { id: 3, name: 'Editor WYSIWYG', icon: 'ri-text', active: true },\r\n    { id: 4, name: 'SKU/UPC/EAN', icon: 'ri-barcode-line', active: true },\r\n    { id: 5, name: 'Variantes', icon: 'ri-list-check', active: true },\r\n    { id: 6, name: 'Preos Promocionais', icon: 'ri-price-tag-3-line', active: true },\r\n    { id: 7, name: 'Custo/Margem/Lucro', icon: 'ri-calculator-line', active: true },\r\n    { id: 8, name: 'Multi-Warehouse', icon: 'ri-building-line', active: true },\r\n    { id: 9, name: 'Alertas de Estoque', icon: 'ri-alarm-warning-line', active: true },\r\n    { id: 10, name: 'Bulk CSV Import', icon: 'ri-file-excel-line', active: true },\r\n    { id: 11, name: 'Histrico Audit', icon: 'ri-history-line', active: true },\r\n    { id: 12, name: 'Bundles', icon: 'ri-stack-line', active: true },\r\n    { id: 13, name: 'Etiquetas Envio', icon: 'ri-printer-line', active: true },\r\n    { id: 14, name: 'A/B Testing', icon: 'ri-test-tube-line', active: true },\r\n    { id: 15, name: 'Bloqueio Regional', icon: 'ri-map-pin-line', active: true },\r\n    { id: 16, name: 'Imagens Regionais', icon: 'ri-image-line', active: true },\r\n    { id: 17, name: 'Moderao Reviews', icon: 'ri-star-line', active: true },\r\n    { id: 18, name: 'Analytics por SKU', icon: 'ri-line-chart-line', active: true },\r\n    { id: 19, name: 'SEO Avanado', icon: 'ri-seo-line', active: true },\r\n    { id: 20, name: 'Peso/Dimenses', icon: 'ri-ruler-line', active: true },\r\n    { id: 21, name: 'Tags/Etiquetas', icon: 'ri-price-tag-line', active: true },\r\n    { id: 22, name: 'Duplicar Produto', icon: 'ri-file-copy-line', active: true },\r\n    { id: 23, name: 'Exportar Produtos', icon: 'ri-download-line', active: true },\r\n    { id: 24, name: 'Importar Produtos', icon: 'ri-upload-cloud-line', active: true },\r\n    { id: 25, name: 'Rollback Changes', icon: 'ri-arrow-go-back-line', active: true }\r\n  ];\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"flex items-center justify-between\">\r\n        <div>\r\n          <h2 className=\"text-2xl font-bold flex items-center gap-2\">\r\n            <i className=\"ri-box-3-line text-yellow-500\"></i>\r\n            Gesto de Produtos\r\n          </h2>\r\n          <p className=\"text-gray-400 mt-1\">Gerencie todo o catlogo de produtos</p>\r\n        </div>\r\n        <div className=\"flex items-center gap-3\">\r\n          <button\r\n            onClick={handleExportCSV}\r\n            className={`px-4 py-2 rounded-lg border ${darkMode ? 'border-gray-700' : 'border-gray-300'} hover:bg-gray-800 transition-colors flex items-center gap-2 whitespace-nowrap`}\r\n          >\r\n            <i className=\"ri-download-line\"></i>\r\n            Exportar CSV\r\n          </button>\r\n          <button\r\n            onClick={() => {\r\n              setEditingProduct(null);\r\n              setShowModal(true);\r\n            }}\r\n            className=\"px-4 py-2 bg-gradient-to-r from-yellow-500 to-yellow-600 text-black font-medium rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap\"\r\n          >\r\n            <i className=\"ri-add-line\"></i>\r\n            Novo Produto\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      <div className={`p-6 rounded-xl ${darkMode ? 'bg-gray-900' : 'bg-gray-50'} border ${darkMode ? 'border-gray-800' : 'border-gray-200'}`}>\r\n        <h2 className=\"text-xl font-bold mb-4 flex items-center gap-2\">\r\n          <i className=\"ri-function-line text-yellow-500\"></i>\r\n          25+ Controles de Produtos Disponveis\r\n        </h2>\r\n        <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-3\">\r\n          {controls.map(control => (\r\n            <div\r\n              key={control.id}\r\n              className={`p-3 rounded-lg ${darkMode ? 'bg-gray-800' : 'bg-white'} border ${darkMode ? 'border-gray-700' : 'border-gray-200'}`}\r\n            >\r\n              <div className=\"flex items-center gap-2 mb-1\">\r\n                <i className={`${control.icon} text-yellow-500`}></i>\r\n                <span className={`w-2 h-2 rounded-full ${control.active ? 'bg-green-500' : 'bg-gray-500'}`}></span>\r\n              </div>\r\n              <p className=\"text-xs font-medium\">{control.name}</p>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"flex flex-wrap items-center justify-between gap-4\">\r\n        <div className=\"flex items-center gap-3 flex-1\">\r\n          <div className=\"relative flex-1 max-w-md\">\r\n            <i className=\"ri-search-line absolute left-3 top-1/2 -translate-y-1/2 text-gray-400\"></i>\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Buscar por nome ou SKU...\"\r\n              value={searchTerm}\r\n              onChange={(e) => setSearchTerm(e.target.value)}\r\n              className={`w-full pl-10 pr-4 py-2 rounded-lg ${\r\n                darkMode ? 'bg-gray-800 border-gray-700' : 'bg-white border-gray-200'\r\n              } border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\r\n            />\r\n          </div>\r\n\r\n          <select\r\n            value={selectedStatus}\r\n            onChange={(e) => setSelectedStatus(e.target.value)}\r\n            className={`px-4 py-2 rounded-lg ${\r\n              darkMode ? 'bg-gray-800 border-gray-700' : 'bg-white border-gray-200'\r\n            } border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\r\n          >\r\n            <option value=\"all\">Todos Status</option>\r\n            <option value=\"active\">Ativo</option>\r\n            <option value=\"inactive\">Inativo</option>\r\n            <option value=\"draft\">Rascunho</option>\r\n          </select>\r\n        </div>\r\n      </div>\r\n\r\n      {showModal && (\r\n        <ProductFormModal\r\n          darkMode={darkMode}\r\n          product={editingProduct}\r\n          onClose={() => {\r\n            setShowModal(false);\r\n            setEditingProduct(null);\r\n          }}\r\n          onSave={loadProducts}\r\n        />\r\n      )}\r\n\r\n      <div className={`rounded-xl overflow-hidden ${darkMode ? 'bg-gray-900' : 'bg-gray-50'} border ${darkMode ? 'border-gray-800' : 'border-gray-200'}`}>\r\n        {loading ? (\r\n          <div className=\"flex items-center justify-center h-64\">\r\n            <div className=\"w-12 h-12 border-4 border-yellow-500 border-t-transparent rounded-full animate-spin\"></div>\r\n          </div>\r\n        ) : (\r\n          <div className=\"overflow-x-auto\">\r\n            <table className=\"w-full\">\r\n              <thead className={darkMode ? 'bg-gray-800' : 'bg-gray-100'}>\r\n                <tr>\r\n                  <th className=\"px-6 py-4 text-left\">\r\n                    <input\r\n                      type=\"checkbox\"\r\n                      checked={selectedProducts.length === filteredProducts.length && filteredProducts.length > 0}\r\n                      onChange={(e) => {\r\n                        if (e.target.checked) {\r\n                          setSelectedProducts(filteredProducts.map(p => p.id));\r\n                        } else {\r\n                          setSelectedProducts([]);\r\n                        }\r\n                      }}\r\n                      className=\"w-4 h-4 rounded border-gray-300\"\r\n                    />\r\n                  </th>\r\n                  <th className=\"px-6 py-4 text-left font-semibold\">Produto</th>\r\n                  <th className=\"px-6 py-4 text-left font-semibold\">SKU</th>\r\n                  <th className=\"px-6 py-4 text-left font-semibold\">Preo</th>\r\n                  <th className=\"px-6 py-4 text-left font-semibold\">Estoque</th>\r\n                  <th className=\"px-6 py-4 text-left font-semibold\">Status</th>\r\n                  <th className=\"px-6 py-4 text-left font-semibold\">Aes</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {filteredProducts.map((product) => (\r\n                  <tr\r\n                    key={product.id}\r\n                    className={`border-t ${darkMode ? 'border-gray-800 hover:bg-gray-800' : 'border-gray-200 hover:bg-gray-50'} transition-colors`}\r\n                  >\r\n                    <td className=\"px-6 py-4\">\r\n                      <input\r\n                        type=\"checkbox\"\r\n                        checked={selectedProducts.includes(product.id)}\r\n                        onChange={(e) => {\r\n                          if (e.target.checked) {\r\n                            setSelectedProducts([...selectedProducts, product.id]);\r\n                          } else {\r\n                            setSelectedProducts(selectedProducts.filter(id => id !== product.id));\r\n                          }\r\n                        }}\r\n                        className=\"w-4 h-4 rounded border-gray-300\"\r\n                      />\r\n                    </td>\r\n                    <td className=\"px-6 py-4\">\r\n                      <div className=\"flex items-center gap-3\">\r\n                        <div className=\"w-12 h-12 bg-gray-700 rounded-lg overflow-hidden flex items-center justify-center\">\r\n                          {product.image ? (\r\n                            <img src={product.image} alt={product.name} className=\"w-full h-full object-cover\" />\r\n                          ) : (\r\n                            <i className=\"ri-image-line text-gray-500\"></i>\r\n                          )}\r\n                        </div>\r\n                        <div>\r\n                          <p className=\"font-medium\">{product.name}</p>\r\n                          <p className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>\r\n                            {product.categories?.name || 'Sem categoria'}\r\n                          </p>\r\n                        </div>\r\n                      </div>\r\n                    </td>\r\n                    <td className=\"px-6 py-4\">\r\n                      <span className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>\r\n                        {product.sku || '-'}\r\n                      </span>\r\n                    </td>\r\n                    <td className=\"px-6 py-4\">\r\n                      <span className=\"font-medium text-yellow-500\">\r\n                        R$ {product.price?.toFixed(2)}\r\n                      </span>\r\n                      {product.promotional_price && (\r\n                        <p className=\"text-xs text-green-500\">\r\n                          Promo: R$ {product.promotional_price.toFixed(2)}\r\n                        </p>\r\n                      )}\r\n                    </td>\r\n                    <td className=\"px-6 py-4\">\r\n                      <span className={`font-medium ${\r\n                        product.stock <= product.min_stock ? 'text-red-500' : 'text-green-500'\r\n                      }`}>\r\n                        {product.stock || 0}\r\n                      </span>\r\n                      {product.stock <= product.min_stock && (\r\n                        <p className=\"text-xs text-red-500\">Estoque baixo!</p>\r\n                      )}\r\n                    </td>\r\n                    <td className=\"px-6 py-4\">\r\n                      <span className={`px-3 py-1 rounded-full text-xs font-medium ${\r\n                        product.status === 'active'\r\n                          ? 'bg-green-500/20 text-green-500'\r\n                          : product.status === 'inactive'\r\n                          ? 'bg-gray-500/20 text-gray-500'\r\n                          : 'bg-yellow-500/20 text-yellow-500'\r\n                      }`}>\r\n                        {product.status === 'active' ? 'Ativo' : product.status === 'inactive' ? 'Inativo' : 'Rascunho'}\r\n                      </span>\r\n                    </td>\r\n                    <td className=\"px-6 py-4\">\r\n                      <div className=\"flex items-center gap-2\">\r\n                        <button\r\n                          onClick={() => {\r\n                            setEditingProduct(product);\r\n                            setShowModal(true);\r\n                          }}\r\n                          className=\"p-2 rounded-lg bg-blue-500/10 text-blue-500 hover:bg-blue-500/20 transition-colors\"\r\n                        >\r\n                          <i className=\"ri-edit-line\"></i>\r\n                        </button>\r\n                        <button className=\"p-2 rounded-lg bg-purple-500/10 text-purple-500 hover:bg-purple-500/20 transition-colors\">\r\n                          <i className=\"ri-file-copy-line\"></i>\r\n                        </button>\r\n                        <button className=\"p-2 rounded-lg bg-red-500/10 text-red-500 hover:bg-red-500/20 transition-colors\">\r\n                          <i className=\"ri-delete-bin-line\"></i>\r\n                        </button>\r\n                      </div>\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import { useState, useEffect } from 'react';\r\nimport { supabase } from '../../../lib/supabase';\r\n\r\ninterface CategoriesManagementProps {\r\n  darkMode: boolean;\r\n}\r\n\r\nexport default function CategoriesManagement({ darkMode }: CategoriesManagementProps) {\r\n  const [categories, setCategories] = useState<any[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [showModal, setShowModal] = useState(false);\r\n  const [editingCategory, setEditingCategory] = useState<any>(null);\r\n\r\n  useEffect(() => {\r\n    loadCategories();\r\n  }, []);\r\n\r\n  const loadCategories = async () => {\r\n    try {\r\n      const { data, error } = await supabase\r\n        .from('categories')\r\n        .select('*')\r\n        .order('display_order', { ascending: true });\r\n\r\n      if (error) throw error;\r\n      setCategories(data || []);\r\n    } catch (error) {\r\n      console.error('Erro ao carregar categorias:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const controls = [\r\n    { id: 1, name: 'rvore Aninhada', icon: 'ri-node-tree' },\r\n    { id: 2, name: 'Drag & Drop', icon: 'ri-drag-move-line' },\r\n    { id: 3, name: 'SEO por Categoria', icon: 'ri-seo-line' },\r\n    { id: 4, name: 'Landing Pages Custom', icon: 'ri-pages-line' },\r\n    { id: 5, name: 'Filtros Configurveis', icon: 'ri-filter-3-line' },\r\n    { id: 6, name: 'Banners por Categoria', icon: 'ri-image-line' },\r\n    { id: 7, name: 'Priorizao Produtos', icon: 'ri-sort-asc' },\r\n    { id: 8, name: 'Redirecionamentos', icon: 'ri-arrow-right-line' }\r\n  ];\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className={`p-6 rounded-xl ${darkMode ? 'bg-gray-900' : 'bg-gray-50'} border ${darkMode ? 'border-gray-800' : 'border-gray-200'}`}>\r\n        <h2 className=\"text-xl font-bold mb-4 flex items-center gap-2\">\r\n          <i className=\"ri-function-line text-yellow-500\"></i>\r\n          8+ Controles de Categorias & Navegao\r\n        </h2>\r\n        <div className=\"grid grid-cols-2 md:grid-cols-4 gap-3\">\r\n          {controls.map(control => (\r\n            <div\r\n              key={control.id}\r\n              className={`p-3 rounded-lg ${darkMode ? 'bg-gray-800' : 'bg-white'} border ${darkMode ? 'border-gray-700' : 'border-gray-200'}`}\r\n            >\r\n              <div className=\"flex items-center gap-2 mb-1\">\r\n                <i className={`${control.icon} text-yellow-500`}></i>\r\n                <span className=\"w-2 h-2 rounded-full bg-green-500\"></span>\r\n              </div>\r\n              <p className=\"text-xs font-medium\">{control.name}</p>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"flex items-center justify-between\">\r\n        <h3 className=\"text-xl font-bold\">Gerenciar Categorias</h3>\r\n        <button\r\n          onClick={() => {\r\n            setEditingCategory(null);\r\n            setShowModal(true);\r\n          }}\r\n          className=\"px-6 py-2 bg-gradient-to-r from-yellow-500 to-yellow-600 text-black font-medium rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap\"\r\n        >\r\n          <i className=\"ri-add-line text-xl\"></i>\r\n          Nova Categoria\r\n        </button>\r\n      </div>\r\n\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n        {loading ? (\r\n          <div className=\"col-span-full flex items-center justify-center h-64\">\r\n            <div className=\"w-12 h-12 border-4 border-yellow-500 border-t-transparent rounded-full animate-spin\"></div>\r\n          </div>\r\n        ) : categories.length === 0 ? (\r\n          <div className=\"col-span-full text-center py-12\">\r\n            <i className=\"ri-folder-line text-6xl text-gray-600 mb-4\"></i>\r\n            <p className={`text-lg ${darkMode ? 'text-gray-400' : 'text-gray-600'} mb-4`}>\r\n              Nenhuma categoria criada ainda\r\n            </p>\r\n            <button\r\n              onClick={() => setShowModal(true)}\r\n              className=\"px-6 py-2 bg-gradient-to-r from-yellow-500 to-yellow-600 text-black font-medium rounded-lg hover:opacity-90 transition-opacity whitespace-nowrap\"\r\n            >\r\n              Criar Primeira Categoria\r\n            </button>\r\n          </div>\r\n        ) : (\r\n          categories.map((category) => (\r\n            <div\r\n              key={category.id}\r\n              className={`p-6 rounded-xl ${darkMode ? 'bg-gray-900' : 'bg-gray-50'} border ${darkMode ? 'border-gray-800' : 'border-gray-200'} hover:border-yellow-500 transition-colors cursor-move`}\r\n            >\r\n              <div className=\"flex items-start justify-between mb-4\">\r\n                <div className=\"flex items-center gap-3\">\r\n                  {category.icon ? (\r\n                    <i className={`${category.icon} text-3xl text-yellow-500`}></i>\r\n                  ) : (\r\n                    <div className=\"w-12 h-12 bg-gradient-to-br from-yellow-500 to-yellow-600 rounded-lg flex items-center justify-center\">\r\n                      <i className=\"ri-folder-line text-2xl text-black\"></i>\r\n                    </div>\r\n                  )}\r\n                  <div>\r\n                    <h4 className=\"font-bold text-lg\">{category.name}</h4>\r\n                    <p className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>\r\n                      {category.product_count || 0} produtos\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n                <span className={`px-2 py-1 rounded-full text-xs ${\r\n                  category.is_active ? 'bg-green-500/20 text-green-500' : 'bg-gray-500/20 text-gray-500'\r\n                }`}>\r\n                  {category.is_active ? 'Ativa' : 'Inativa'}\r\n                </span>\r\n              </div>\r\n\r\n              {category.description && (\r\n                <p className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'} mb-4`}>\r\n                  {category.description}\r\n                </p>\r\n              )}\r\n\r\n              {category.seo_title && (\r\n                <div className={`p-3 rounded-lg ${darkMode ? 'bg-gray-800' : 'bg-white'} mb-4`}>\r\n                  <p className=\"text-xs text-yellow-500 mb-1\">SEO Configurado</p>\r\n                  <p className=\"text-sm font-medium\">{category.seo_title}</p>\r\n                </div>\r\n              )}\r\n\r\n              <div className=\"flex items-center gap-2\">\r\n                <button\r\n                  onClick={() => {\r\n                    setEditingCategory(category);\r\n                    setShowModal(true);\r\n                  }}\r\n                  className=\"flex-1 p-2 rounded-lg bg-blue-500/10 text-blue-500 hover:bg-blue-500/20 transition-colors font-medium whitespace-nowrap\"\r\n                >\r\n                  <i className=\"ri-edit-line mr-2\"></i>\r\n                  Editar\r\n                </button>\r\n                <button className=\"flex-1 p-2 rounded-lg bg-purple-500/10 text-purple-500 hover:bg-purple-500/20 transition-colors font-medium whitespace-nowrap\">\r\n                  <i className=\"ri-image-line mr-2\"></i>\r\n                  Banner\r\n                </button>\r\n                <button className=\"p-2 rounded-lg bg-red-500/10 text-red-500 hover:bg-red-500/20 transition-colors\">\r\n                  <i className=\"ri-delete-bin-line\"></i>\r\n                </button>\r\n              </div>\r\n            </div>\r\n          ))\r\n        )}\r\n      </div>\r\n\r\n      <div className={`p-6 rounded-xl ${darkMode ? 'bg-gray-900' : 'bg-gray-50'} border ${darkMode ? 'border-gray-800' : 'border-gray-200'}`}>\r\n        <h3 className=\"text-lg font-bold mb-4\">Configuraes Avanadas</h3>\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n          <div className={`p-4 rounded-lg ${darkMode ? 'bg-gray-800' : 'bg-white'} border ${darkMode ? 'border-gray-700' : 'border-gray-200'}`}>\r\n            <h4 className=\"font-medium mb-2 flex items-center gap-2\">\r\n              <i className=\"ri-filter-3-line text-yellow-500\"></i>\r\n              Filtros Personalizados\r\n            </h4>\r\n            <p className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'} mb-3`}>\r\n              Configure filtros especficos para cada categoria\r\n            </p>\r\n            <button className=\"px-4 py-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-lg hover:opacity-90 transition-opacity text-sm whitespace-nowrap\">\r\n              Configurar Filtros\r\n            </button>\r\n          </div>\r\n\r\n          <div className={`p-4 rounded-lg ${darkMode ? 'bg-gray-800' : 'bg-white'} border ${darkMode ? 'border-gray-700' : 'border-gray-200'}`}>\r\n            <h4 className=\"font-medium mb-2 flex items-center gap-2\">\r\n              <i className=\"ri-arrow-right-line text-yellow-500\"></i>\r\n              Redirecionamentos\r\n            </h4>\r\n            <p className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'} mb-3`}>\r\n              Gerencie redirecionamentos e sinnimos de categorias\r\n            </p>\r\n            <button className=\"px-4 py-2 bg-gradient-to-r from-purple-500 to-purple-600 text-white rounded-lg hover:opacity-90 transition-opacity text-sm whitespace-nowrap\">\r\n              Gerenciar Redirecionamentos\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import { useState, useEffect } from 'react';\r\nimport { supabase } from '../../../lib/supabase';\r\n\r\ninterface OrdersManagementProps {\r\n  darkMode: boolean;\r\n}\r\n\r\nexport default function OrdersManagement({ darkMode }: OrdersManagementProps) {\r\n  const [orders, setOrders] = useState<any[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [filterStatus, setFilterStatus] = useState('all');\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [selectedOrders, setSelectedOrders] = useState<string[]>([]);\r\n  const [showRefundModal, setShowRefundModal] = useState(false);\r\n  const [selectedOrder, setSelectedOrder] = useState<any>(null);\r\n\r\n  useEffect(() => {\r\n    loadOrders();\r\n  }, []);\r\n\r\n  const loadOrders = async () => {\r\n    try {\r\n      const { data, error } = await supabase\r\n        .from('orders')\r\n        .select('*, profiles(email, full_name)')\r\n        .order('created_at', { ascending: false });\r\n\r\n      if (error) throw error;\r\n      setOrders(data || []);\r\n    } catch (error) {\r\n      console.error('Erro ao carregar pedidos:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleStatusChange = async (orderId: string, newStatus: string) => {\r\n    try {\r\n      const { error } = await supabase\r\n        .from('orders')\r\n        .update({ status: newStatus })\r\n        .eq('id', orderId);\r\n\r\n      if (error) throw error;\r\n      \r\n      await loadOrders();\r\n      alert('Status atualizado com sucesso!');\r\n    } catch (error) {\r\n      console.error('Erro ao atualizar status:', error);\r\n      alert('Erro ao atualizar status');\r\n    }\r\n  };\r\n\r\n  const handleRefund = async (orderId: string, amount: number, reason: string) => {\r\n    try {\r\n      const { error } = await supabase\r\n        .from('refunds')\r\n        .insert({\r\n          order_id: orderId,\r\n          amount,\r\n          reason,\r\n          status: 'pending'\r\n        });\r\n\r\n      if (error) throw error;\r\n      \r\n      alert('Reembolso solicitado com sucesso!');\r\n      setShowRefundModal(false);\r\n    } catch (error) {\r\n      console.error('Erro ao processar reembolso:', error);\r\n      alert('Erro ao processar reembolso');\r\n    }\r\n  };\r\n\r\n  const generateInvoicePDF = (order: any) => {\r\n    alert('Gerando PDF da fatura...');\r\n  };\r\n\r\n  const filteredOrders = orders.filter(order => {\r\n    const matchesSearch = order.id.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n                         order.profiles?.email?.toLowerCase().includes(searchTerm.toLowerCase());\r\n    const matchesStatus = filterStatus === 'all' || order.status === filterStatus;\r\n    \r\n    return matchesSearch && matchesStatus;\r\n  });\r\n\r\n  const controls = [\r\n    { id: 1, name: 'Visualizar Pedidos', icon: 'ri-eye-line' },\r\n    { id: 2, name: 'Filtros Avanados', icon: 'ri-filter-line' },\r\n    { id: 3, name: 'Editar Status', icon: 'ri-edit-line' },\r\n    { id: 4, name: 'Reprocessar Pagamento', icon: 'ri-refresh-line' },\r\n    { id: 5, name: 'Reembolsos Stripe', icon: 'ri-refund-line' },\r\n    { id: 6, name: 'Gerar Invoice PDF', icon: 'ri-file-pdf-line' },\r\n    { id: 7, name: 'Mapear Envios', icon: 'ri-map-pin-line' },\r\n    { id: 8, name: 'Export Logstica', icon: 'ri-download-line' },\r\n    { id: 9, name: 'Monitor Chargebacks', icon: 'ri-alert-line' },\r\n    { id: 10, name: 'E-mails Automatizados', icon: 'ri-mail-send-line' },\r\n    { id: 11, name: 'Rastreamento Courier', icon: 'ri-truck-line' },\r\n    { id: 12, name: 'Ajuste Manual Taxas', icon: 'ri-calculator-line' }\r\n  ];\r\n\r\n  const statusOptions = [\r\n    { value: 'pending', label: 'Pendente', color: 'yellow' },\r\n    { value: 'processing', label: 'Processando', color: 'blue' },\r\n    { value: 'shipped', label: 'Enviado', color: 'purple' },\r\n    { value: 'delivered', label: 'Entregue', color: 'green' },\r\n    { value: 'cancelled', label: 'Cancelado', color: 'red' }\r\n  ];\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className={`p-6 rounded-xl ${darkMode ? 'bg-gray-900' : 'bg-gray-50'} border ${darkMode ? 'border-gray-800' : 'border-gray-200'}`}>\r\n        <h2 className=\"text-xl font-bold mb-4 flex items-center gap-2\">\r\n          <i className=\"ri-function-line text-yellow-500\"></i>\r\n          12+ Controles de Pedidos & Pagamentos\r\n        </h2>\r\n        <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3\">\r\n          {controls.map(control => (\r\n            <div\r\n              key={control.id}\r\n              className={`p-3 rounded-lg ${darkMode ? 'bg-gray-800' : 'bg-white'} border ${darkMode ? 'border-gray-700' : 'border-gray-200'}`}\r\n            >\r\n              <div className=\"flex items-center gap-2 mb-1\">\r\n                <i className={`${control.icon} text-yellow-500`}></i>\r\n                <span className=\"w-2 h-2 rounded-full bg-green-500\"></span>\r\n              </div>\r\n              <p className=\"text-xs font-medium\">{control.name}</p>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"flex flex-wrap items-center justify-between gap-4\">\r\n        <div className=\"flex items-center gap-3 flex-1\">\r\n          <div className=\"relative flex-1 max-w-md\">\r\n            <i className=\"ri-search-line absolute left-3 top-1/2 -translate-y-1/2 text-gray-400\"></i>\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Buscar por ID ou cliente...\"\r\n              value={searchTerm}\r\n              onChange={(e) => setSearchTerm(e.target.value)}\r\n              className={`w-full pl-10 pr-4 py-2 rounded-lg ${\r\n                darkMode ? 'bg-gray-800 border-gray-700' : 'bg-white border-gray-200'\r\n              } border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\r\n            />\r\n          </div>\r\n\r\n          <select\r\n            value={filterStatus}\r\n            onChange={(e) => setFilterStatus(e.target.value)}\r\n            className={`px-4 py-2 rounded-lg ${\r\n              darkMode ? 'bg-gray-800 border-gray-700' : 'bg-white border-gray-200'\r\n            } border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\r\n          >\r\n            <option value=\"all\">Todos Status</option>\r\n            {statusOptions.map(status => (\r\n              <option key={status.value} value={status.value}>{status.label}</option>\r\n            ))}\r\n          </select>\r\n        </div>\r\n\r\n        <button className=\"px-6 py-2 bg-gradient-to-r from-green-500 to-green-600 text-white font-medium rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap\">\r\n          <i className=\"ri-download-line text-xl\"></i>\r\n          Exportar Pedidos\r\n        </button>\r\n      </div>\r\n\r\n      <div className={`rounded-xl overflow-hidden ${darkMode ? 'bg-gray-900' : 'bg-gray-50'} border ${darkMode ? 'border-gray-800' : 'border-gray-200'}`}>\r\n        {loading ? (\r\n          <div className=\"flex items-center justify-center h-64\">\r\n            <div className=\"w-12 h-12 border-4 border-yellow-500 border-t-transparent rounded-full animate-spin\"></div>\r\n          </div>\r\n        ) : (\r\n          <div className=\"overflow-x-auto\">\r\n            <table className=\"w-full\">\r\n              <thead className={darkMode ? 'bg-gray-800' : 'bg-gray-100'}>\r\n                <tr>\r\n                  <th className=\"px-6 py-4 text-left font-semibold\">ID Pedido</th>\r\n                  <th className=\"px-6 py-4 text-left font-semibold\">Cliente</th>\r\n                  <th className=\"px-6 py-4 text-left font-semibold\">Data</th>\r\n                  <th className=\"px-6 py-4 text-left font-semibold\">Total</th>\r\n                  <th className=\"px-6 py-4 text-left font-semibold\">Status</th>\r\n                  <th className=\"px-6 py-4 text-left font-semibold\">Aes</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {filteredOrders.map((order) => (\r\n                  <tr\r\n                    key={order.id}\r\n                    className={`border-t ${darkMode ? 'border-gray-800 hover:bg-gray-800' : 'border-gray-200 hover:bg-gray-50'} transition-colors`}\r\n                  >\r\n                    <td className=\"px-6 py-4\">\r\n                      <span className=\"font-mono text-sm\">{order.id.slice(0, 8)}</span>\r\n                    </td>\r\n                    <td className=\"px-6 py-4\">\r\n                      <div>\r\n                        <p className=\"font-medium\">{order.profiles?.full_name || 'N/A'}</p>\r\n                        <p className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>\r\n                          {order.profiles?.email}\r\n                        </p>\r\n                      </div>\r\n                    </td>\r\n                    <td className=\"px-6 py-4\">\r\n                      <span className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>\r\n                        {new Date(order.created_at).toLocaleDateString('pt-BR')}\r\n                      </span>\r\n                    </td>\r\n                    <td className=\"px-6 py-4\">\r\n                      <span className=\"font-bold text-yellow-500\">\r\n                        R$ {order.total?.toFixed(2)}\r\n                      </span>\r\n                    </td>\r\n                    <td className=\"px-6 py-4\">\r\n                      <select\r\n                        value={order.status}\r\n                        onChange={(e) => handleStatusChange(order.id, e.target.value)}\r\n                        className={`px-3 py-1 rounded-full text-xs font-medium ${\r\n                          order.status === 'delivered'\r\n                            ? 'bg-green-500/20 text-green-500'\r\n                            : order.status === 'pending'\r\n                            ? 'bg-yellow-500/20 text-yellow-500'\r\n                            : order.status === 'cancelled'\r\n                            ? 'bg-red-500/20 text-red-500'\r\n                            : 'bg-blue-500/20 text-blue-500'\r\n                        } border-none cursor-pointer`}\r\n                      >\r\n                        {statusOptions.map(status => (\r\n                          <option key={status.value} value={status.value}>{status.label}</option>\r\n                        ))}\r\n                      </select>\r\n                    </td>\r\n                    <td className=\"px-6 py-4\">\r\n                      <div className=\"flex items-center gap-2\">\r\n                        <button\r\n                          onClick={() => generateInvoicePDF(order)}\r\n                          className=\"p-2 rounded-lg bg-blue-500/10 text-blue-500 hover:bg-blue-500/20 transition-colors\"\r\n                          title=\"Gerar PDF\"\r\n                        >\r\n                          <i className=\"ri-file-pdf-line\"></i>\r\n                        </button>\r\n                        <button\r\n                          onClick={() => {\r\n                            setSelectedOrder(order);\r\n                            setShowRefundModal(true);\r\n                          }}\r\n                          className=\"p-2 rounded-lg bg-red-500/10 text-red-500 hover:bg-red-500/20 transition-colors\"\r\n                          title=\"Reembolso\"\r\n                        >\r\n                          <i className=\"ri-refund-line\"></i>\r\n                        </button>\r\n                        <button\r\n                          className=\"p-2 rounded-lg bg-purple-500/10 text-purple-500 hover:bg-purple-500/20 transition-colors\"\r\n                          title=\"Rastreamento\"\r\n                        >\r\n                          <i className=\"ri-truck-line\"></i>\r\n                        </button>\r\n                      </div>\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import { useState, useEffect } from 'react';\r\nimport { supabase } from '../../../lib/supabase';\r\n\r\ninterface CustomersManagementProps {\r\n  darkMode: boolean;\r\n}\r\n\r\ninterface Customer {\r\n  id: string;\r\n  email: string;\r\n  full_name: string;\r\n  role: string;\r\n  created_at: string;\r\n  phone?: string;\r\n  city?: string;\r\n  country?: string;\r\n  total_spent?: number;\r\n  order_count?: number;\r\n}\r\n\r\nexport default function CustomersManagement({ darkMode }: CustomersManagementProps) {\r\n  const [customers, setCustomers] = useState<Customer[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [selectedCustomer, setSelectedCustomer] = useState<any>(null);\r\n  const [showSegmentModal, setShowSegmentModal] = useState(false);\r\n  const [filterType, setFilterType] = useState<'all' | 'new' | 'vip' | 'inactive'>('all');\r\n\r\n  useEffect(() => {\r\n    loadCustomers();\r\n  }, []);\r\n\r\n  const loadCustomers = async () => {\r\n    try {\r\n      setLoading(true);\r\n\r\n      // Buscar todos os clientes com informaes de pedidos\r\n      const { data: profilesData, error: profilesError } = await supabase\r\n        .from('profiles')\r\n        .select('*')\r\n        .order('created_at', { ascending: false });\r\n\r\n      if (profilesError) throw profilesError;\r\n\r\n      // Buscar estatsticas de pedidos para cada cliente\r\n      const customersWithStats = await Promise.all(\r\n        (profilesData || []).map(async (profile) => {\r\n          const { data: ordersData } = await supabase\r\n            .from('orders')\r\n            .select('total, status')\r\n            .eq('user_id', profile.id);\r\n\r\n          const orderCount = ordersData?.length || 0;\r\n          const totalSpent = ordersData?.reduce((sum, order) => sum + (order.total || 0), 0) || 0;\r\n\r\n          return {\r\n            ...profile,\r\n            order_count: orderCount,\r\n            total_spent: totalSpent\r\n          };\r\n        })\r\n      );\r\n\r\n      setCustomers(customersWithStats);\r\n    } catch (error) {\r\n      console.error('Erro ao carregar clientes:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const controls = [\r\n    { id: 1, name: 'Perfil Completo', icon: 'ri-user-line' },\r\n    { id: 2, name: 'Busca Avanada', icon: 'ri-search-line' },\r\n    { id: 3, name: 'Segmentao', icon: 'ri-group-line' },\r\n    { id: 4, name: 'Campanhas', icon: 'ri-mail-send-line' },\r\n    { id: 5, name: 'Templates E-mail', icon: 'ri-file-text-line' },\r\n    { id: 6, name: 'Notas/Tickets', icon: 'ri-sticky-note-line' },\r\n    { id: 7, name: 'Merge Contas', icon: 'ri-merge-cells-horizontal' },\r\n    { id: 8, name: 'Export Marketing', icon: 'ri-download-line' },\r\n    { id: 9, name: 'Cashback/Crdito', icon: 'ri-coin-line' },\r\n    { id: 10, name: 'Recuperao Carrinho', icon: 'ri-shopping-cart-line' }\r\n  ];\r\n\r\n  // Filtrar clientes\r\n  const filteredCustomers = customers.filter(customer => {\r\n    const matchesSearch = customer.email?.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n                         customer.full_name?.toLowerCase().includes(searchTerm.toLowerCase());\r\n    \r\n    if (!matchesSearch) return false;\r\n\r\n    const daysSinceCreated = Math.floor((Date.now() - new Date(customer.created_at).getTime()) / (1000 * 60 * 60 * 24));\r\n    \r\n    switch (filterType) {\r\n      case 'new':\r\n        return daysSinceCreated <= 30; // Novos: ltimos 30 dias\r\n      case 'vip':\r\n        return (customer.total_spent || 0) >= 500; // VIP: gastou mais de 500\r\n      case 'inactive':\r\n        return daysSinceCreated > 90 && (customer.order_count || 0) === 0; // Inativos: mais de 90 dias sem pedidos\r\n      default:\r\n        return true;\r\n    }\r\n  });\r\n\r\n  // Calcular estatsticas\r\n  const stats = {\r\n    total: customers.length,\r\n    new: customers.filter(c => {\r\n      const days = Math.floor((Date.now() - new Date(c.created_at).getTime()) / (1000 * 60 * 60 * 24));\r\n      return days <= 30;\r\n    }).length,\r\n    vip: customers.filter(c => (c.total_spent || 0) >= 500).length,\r\n    inactive: customers.filter(c => {\r\n      const days = Math.floor((Date.now() - new Date(c.created_at).getTime()) / (1000 * 60 * 60 * 24));\r\n      return days > 90 && (c.order_count || 0) === 0;\r\n    }).length\r\n  };\r\n\r\n  const getRoleBadge = (role: string) => {\r\n    if (role === 'admin') {\r\n      return <span className=\"px-2 py-1 bg-purple-500/20 text-purple-400 text-xs font-medium rounded\">Admin</span>;\r\n    }\r\n    return <span className=\"px-2 py-1 bg-blue-500/20 text-blue-400 text-xs font-medium rounded\">Cliente</span>;\r\n  };\r\n\r\n  const getCustomerType = (customer: Customer) => {\r\n    const daysSinceCreated = Math.floor((Date.now() - new Date(customer.created_at).getTime()) / (1000 * 60 * 60 * 24));\r\n    \r\n    if (daysSinceCreated <= 30) {\r\n      return <span className=\"px-2 py-1 bg-green-500/20 text-green-400 text-xs font-medium rounded\">Novo</span>;\r\n    }\r\n    if ((customer.total_spent || 0) >= 500) {\r\n      return <span className=\"px-2 py-1 bg-yellow-500/20 text-yellow-400 text-xs font-medium rounded\">VIP</span>;\r\n    }\r\n    if (daysSinceCreated > 90 && (customer.order_count || 0) === 0) {\r\n      return <span className=\"px-2 py-1 bg-gray-500/20 text-gray-400 text-xs font-medium rounded\">Inativo</span>;\r\n    }\r\n    return null;\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Estatsticas */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\r\n        <div className={`p-6 rounded-xl ${darkMode ? 'bg-gray-900' : 'bg-white'} border ${darkMode ? 'border-gray-800' : 'border-gray-200'}`}>\r\n          <div className=\"flex items-center justify-between mb-2\">\r\n            <i className=\"ri-user-line text-2xl text-blue-500\"></i>\r\n            <span className=\"text-2xl font-bold\">{stats.total}</span>\r\n          </div>\r\n          <p className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>Total de Clientes</p>\r\n        </div>\r\n\r\n        <div className={`p-6 rounded-xl ${darkMode ? 'bg-gray-900' : 'bg-white'} border ${darkMode ? 'border-gray-800' : 'border-gray-200'}`}>\r\n          <div className=\"flex items-center justify-between mb-2\">\r\n            <i className=\"ri-user-add-line text-2xl text-green-500\"></i>\r\n            <span className=\"text-2xl font-bold\">{stats.new}</span>\r\n          </div>\r\n          <p className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>Novos (30 dias)</p>\r\n        </div>\r\n\r\n        <div className={`p-6 rounded-xl ${darkMode ? 'bg-gray-900' : 'bg-white'} border ${darkMode ? 'border-gray-800' : 'border-gray-200'}`}>\r\n          <div className=\"flex items-center justify-between mb-2\">\r\n            <i className=\"ri-vip-crown-line text-2xl text-yellow-500\"></i>\r\n            <span className=\"text-2xl font-bold\">{stats.vip}</span>\r\n          </div>\r\n          <p className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>Clientes VIP</p>\r\n        </div>\r\n\r\n        <div className={`p-6 rounded-xl ${darkMode ? 'bg-gray-900' : 'bg-white'} border ${darkMode ? 'border-gray-800' : 'border-gray-200'}`}>\r\n          <div className=\"flex items-center justify-between mb-2\">\r\n            <i className=\"ri-user-unfollow-line text-2xl text-red-500\"></i>\r\n            <span className=\"text-2xl font-bold\">{stats.inactive}</span>\r\n          </div>\r\n          <p className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>Inativos</p>\r\n        </div>\r\n      </div>\r\n\r\n      <div className={`p-6 rounded-xl ${darkMode ? 'bg-gray-900' : 'bg-gray-50'} border ${darkMode ? 'border-gray-800' : 'border-gray-200'}`}>\r\n        <h2 className=\"text-xl font-bold mb-4 flex items-center gap-2\">\r\n          <i className=\"ri-function-line text-yellow-500\"></i>\r\n          10+ Controles de Clientes & CRM\r\n        </h2>\r\n        <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-3\">\r\n          {controls.map(control => (\r\n            <div\r\n              key={control.id}\r\n              className={`p-3 rounded-lg ${darkMode ? 'bg-gray-800' : 'bg-white'} border ${darkMode ? 'border-gray-700' : 'border-gray-200'}`}\r\n            >\r\n              <div className=\"flex items-center gap-2 mb-1\">\r\n                <i className={`${control.icon} text-yellow-500`}></i>\r\n                <span className=\"w-2 h-2 rounded-full bg-green-500\"></span>\r\n              </div>\r\n              <p className=\"text-xs font-medium\">{control.name}</p>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Filtros */}\r\n      <div className=\"flex flex-wrap items-center gap-4\">\r\n        <div className=\"flex gap-2\">\r\n          <button\r\n            onClick={() => setFilterType('all')}\r\n            className={`px-4 py-2 rounded-lg font-medium transition-all ${\r\n              filterType === 'all'\r\n                ? 'bg-gradient-to-r from-[#b62bff] to-[#ff6a00] text-white'\r\n                : darkMode ? 'bg-gray-800 text-gray-300' : 'bg-gray-100 text-gray-700'\r\n            }`}\r\n          >\r\n            Todos ({stats.total})\r\n          </button>\r\n          <button\r\n            onClick={() => setFilterType('new')}\r\n            className={`px-4 py-2 rounded-lg font-medium transition-all ${\r\n              filterType === 'new'\r\n                ? 'bg-green-500 text-white'\r\n                : darkMode ? 'bg-gray-800 text-gray-300' : 'bg-gray-100 text-gray-700'\r\n            }`}\r\n          >\r\n            Novos ({stats.new})\r\n          </button>\r\n          <button\r\n            onClick={() => setFilterType('vip')}\r\n            className={`px-4 py-2 rounded-lg font-medium transition-all ${\r\n              filterType === 'vip'\r\n                ? 'bg-yellow-500 text-black'\r\n                : darkMode ? 'bg-gray-800 text-gray-300' : 'bg-gray-100 text-gray-700'\r\n            }`}\r\n          >\r\n            VIP ({stats.vip})\r\n          </button>\r\n          <button\r\n            onClick={() => setFilterType('inactive')}\r\n            className={`px-4 py-2 rounded-lg font-medium transition-all ${\r\n              filterType === 'inactive'\r\n                ? 'bg-red-500 text-white'\r\n                : darkMode ? 'bg-gray-800 text-gray-300' : 'bg-gray-100 text-gray-700'\r\n            }`}\r\n          >\r\n            Inativos ({stats.inactive})\r\n          </button>\r\n        </div>\r\n\r\n        <div className=\"relative flex-1 max-w-md\">\r\n          <i className=\"ri-search-line absolute left-3 top-1/2 -translate-y-1/2 text-gray-400\"></i>\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Buscar por nome ou email...\"\r\n            value={searchTerm}\r\n            onChange={(e) => setSearchTerm(e.target.value)}\r\n            className={`w-full pl-10 pr-4 py-2 rounded-lg ${\r\n              darkMode ? 'bg-gray-800 border-gray-700' : 'bg-white border-gray-200'\r\n            } border focus:outline-none focus:ring-2 focus:ring-[#b62bff]`}\r\n          />\r\n        </div>\r\n\r\n        <button className=\"px-6 py-2 bg-gradient-to-r from-green-500 to-green-600 text-white font-medium rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap\">\r\n          <i className=\"ri-download-line text-xl\"></i>\r\n          Exportar\r\n        </button>\r\n      </div>\r\n\r\n      <div className={`rounded-xl overflow-hidden ${darkMode ? 'bg-gray-900' : 'bg-white'} border ${darkMode ? 'border-gray-800' : 'border-gray-200'}`}>\r\n        {loading ? (\r\n          <div className=\"flex items-center justify-center h-64\">\r\n            <div className=\"w-12 h-12 border-4 border-[#b62bff] border-t-transparent rounded-full animate-spin\"></div>\r\n          </div>\r\n        ) : (\r\n          <div className=\"overflow-x-auto\">\r\n            <table className=\"w-full\">\r\n              <thead className={darkMode ? 'bg-gray-800' : 'bg-gray-50'}>\r\n                <tr>\r\n                  <th className=\"px-6 py-4 text-left font-semibold\">Cliente</th>\r\n                  <th className=\"px-6 py-4 text-left font-semibold\">Tipo</th>\r\n                  <th className=\"px-6 py-4 text-left font-semibold\">Pedidos</th>\r\n                  <th className=\"px-6 py-4 text-left font-semibold\">Total Gasto</th>\r\n                  <th className=\"px-6 py-4 text-left font-semibold\">Cadastro</th>\r\n                  <th className=\"px-6 py-4 text-left font-semibold\">Aes</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {filteredCustomers.map((customer) => (\r\n                  <tr\r\n                    key={customer.id}\r\n                    className={`border-t ${darkMode ? 'border-gray-800 hover:bg-gray-800' : 'border-gray-200 hover:bg-gray-50'} transition-colors`}\r\n                  >\r\n                    <td className=\"px-6 py-4\">\r\n                      <div className=\"flex items-center gap-3\">\r\n                        <div className=\"w-10 h-10 bg-gradient-to-br from-[#b62bff] to-[#ff6a00] rounded-full flex items-center justify-center text-white font-bold\">\r\n                          {customer.full_name?.charAt(0) || customer.email?.charAt(0) || '?'}\r\n                        </div>\r\n                        <div>\r\n                          <div className=\"flex items-center gap-2\">\r\n                            <p className=\"font-medium\">{customer.full_name || 'Sem nome'}</p>\r\n                            {getRoleBadge(customer.role)}\r\n                          </div>\r\n                          <p className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>\r\n                            {customer.email}\r\n                          </p>\r\n                        </div>\r\n                      </div>\r\n                    </td>\r\n                    <td className=\"px-6 py-4\">\r\n                      {getCustomerType(customer)}\r\n                    </td>\r\n                    <td className=\"px-6 py-4\">\r\n                      <span className=\"font-medium\">{customer.order_count || 0}</span>\r\n                    </td>\r\n                    <td className=\"px-6 py-4\">\r\n                      <span className=\"font-bold text-[#b62bff]\">{(customer.total_spent || 0).toFixed(2)}</span>\r\n                    </td>\r\n                    <td className=\"px-6 py-4\">\r\n                      <span className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>\r\n                        {new Date(customer.created_at).toLocaleDateString('pt-PT')}\r\n                      </span>\r\n                    </td>\r\n                    <td className=\"px-6 py-4\">\r\n                      <div className=\"flex items-center gap-2\">\r\n                        <button className=\"p-2 rounded-lg bg-blue-500/10 text-blue-500 hover:bg-blue-500/20 transition-colors\">\r\n                          <i className=\"ri-mail-line\"></i>\r\n                        </button>\r\n                        <button \r\n                          onClick={() => setSelectedCustomer(customer)}\r\n                          className=\"p-2 rounded-lg bg-purple-500/10 text-purple-500 hover:bg-purple-500/20 transition-colors\"\r\n                        >\r\n                          <i className=\"ri-eye-line\"></i>\r\n                        </button>\r\n                      </div>\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","\r\nimport { useState, useEffect } from 'react';\r\nimport { supabase } from '../../../lib/supabase';\r\n\r\ninterface ContentManagementProps {\r\n  darkMode: boolean;\r\n}\r\n\r\nexport default function ContentManagement({ darkMode }: ContentManagementProps) {\r\n  const [pages, setPages] = useState<any[]>([]);\r\n  const [banners, setBanners] = useState<any[]>([]);\r\n  const [settings, setSettings] = useState<any>({});\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    loadContentData();\r\n  }, []);\r\n\r\n  const loadContentData = async () => {\r\n    try {\r\n      const [pagesRes, bannersRes, settingsRes] = await Promise.all([\r\n        supabase.from('cms_pages').select('*').order('created_at', { ascending: false }),\r\n        supabase.from('banners').select('*').order('display_order', { ascending: true }),\r\n        supabase.from('site_settings').select('*')\r\n      ]);\r\n\r\n      setPages(pagesRes.data || []);\r\n      setBanners(bannersRes.data || []);\r\n      \r\n      const settingsObj: any = {};\r\n      settingsRes.data?.forEach(setting => {\r\n        settingsObj[setting.key] = setting.value;\r\n      });\r\n      setSettings(settingsObj);\r\n    } catch (error) {\r\n      console.error('Erro ao carregar contedo:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const controls = [\r\n    { id: 1, name: 'Editor de Tema', icon: 'ri-palette-line' },\r\n    { id: 2, name: 'Logos/Favicon', icon: 'ri-image-line' },\r\n    { id: 3, name: 'Editor Homepage', icon: 'ri-layout-line' },\r\n    { id: 4, name: 'Banners/Sliders', icon: 'ri-slideshow-line' },\r\n    { id: 5, name: 'CMS Pages', icon: 'ri-file-text-line' },\r\n    { id: 6, name: 'Gerenciador Arquivos', icon: 'ri-folder-line' },\r\n    { id: 7, name: 'Multi-lngua', icon: 'ri-translate-2' },\r\n    { id: 8, name: 'Badges/Selos', icon: 'ri-award-line' },\r\n    { id: 9, name: 'Preview Tempo Real', icon: 'ri-eye-line' }\r\n  ];\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className={`p-6 rounded-xl ${darkMode ? 'bg-gray-900' : 'bg-gray-50'} border ${darkMode ? 'border-gray-800' : 'border-gray-200'}`}>\r\n        <h2 className=\"text-xl font-bold mb-4 flex items-center gap-2\">\r\n          <i className=\"ri-function-line text-yellow-500\"></i>\r\n          9+ Controles de Contedo & Branding\r\n        </h2>\r\n        <div className=\"grid grid-cols-2 md:grid-cols-3 gap-3\">\r\n          {controls.map(control => (\r\n            <div\r\n              key={control.id}\r\n              className={`p-3 rounded-lg ${darkMode ? 'bg-gray-800' : 'bg-white'} border ${darkMode ? 'border-gray-700' : 'border-gray-200'}`}\r\n            >\r\n              <div className=\"flex items-center gap-2 mb-1\">\r\n                <i className={`${control.icon} text-yellow-500`}></i>\r\n                <span className=\"w-2 h-2 rounded-full bg-green-500\"></span>\r\n              </div>\r\n              <p className=\"text-xs font-medium\">{control.name}</p>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n        <div className={`p-6 rounded-xl ${darkMode ? 'bg-gray-900' : 'bg-gray-50'} border ${darkMode ? 'border-gray-800' : 'border-gray-200'}`}>\r\n          <div className=\"flex items-center justify-between mb-4\">\r\n            <h3 className=\"text-lg font-bold\">Configuraes do Tema</h3>\r\n            <button className=\"p-2 rounded-lg bg-yellow-500 text-black hover:bg-yellow-600 transition-colors\">\r\n              <i className=\"ri-save-line text-xl\"></i>\r\n            </button>\r\n          </div>\r\n\r\n          <div className=\"space-y-4\">\r\n            <div>\r\n              <label className={`block text-sm font-medium mb-2 ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>\r\n                Cor Principal\r\n              </label>\r\n              <div className=\"flex items-center gap-3\">\r\n                <input\r\n                  type=\"color\"\r\n                  defaultValue=\"#EAB308\"\r\n                  className=\"w-16 h-10 rounded-lg cursor-pointer\"\r\n                />\r\n                <input\r\n                  type=\"text\"\r\n                  defaultValue=\"#EAB308\"\r\n                  className={`flex-1 px-4 py-2 rounded-lg ${\r\n                    darkMode ? 'bg-gray-800 border-gray-700' : 'bg-white border-gray-200'\r\n                  } border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            <div>\r\n              <label className={`block text-sm font-medium mb-2 ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>\r\n                Fonte Principal\r\n              </label>\r\n              <select className={`w-full px-4 py-2 rounded-lg ${\r\n                darkMode ? 'bg-gray-800 border-gray-700' : 'bg-white border-gray-200'\r\n              } border focus:outline-none focus:ring-2 focus:ring-yellow-500`}>\r\n                <option>Inter</option>\r\n                <option>Roboto</option>\r\n                <option>Poppins</option>\r\n                <option>Montserrat</option>\r\n              </select>\r\n            </div>\r\n\r\n            <div>\r\n              <label className={`block text-sm font-medium mb-2 ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>\r\n                Logo do Site\r\n              </label>\r\n              <div className={`border-2 border-dashed ${darkMode ? 'border-gray-700' : 'border-gray-300'} rounded-lg p-8 text-center cursor-pointer hover:border-yellow-500 transition-colors`}>\r\n                <i className=\"ri-upload-cloud-line text-4xl text-gray-400 mb-2\"></i>\r\n                <p className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>\r\n                  Clique para fazer upload ou arraste aqui\r\n                </p>\r\n              </div>\r\n            </div>\r\n\r\n            <div>\r\n              <label className={`block text-sm font-medium mb-2 ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>\r\n                Favicon\r\n              </label>\r\n              <div className={`border-2 border-dashed ${darkMode ? 'border-gray-700' : 'border-gray-300'} rounded-lg p-8 text-center cursor-pointer hover:border-yellow-500 transition-colors`}>\r\n                <i className=\"ri-image-line text-4xl text-gray-400 mb-2\"></i>\r\n                <p className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>\r\n                  Upload favicon (32x32px)\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className={`p-6 rounded-xl ${darkMode ? 'bg-gray-900' : 'bg-gray-50'} border ${darkMode ? 'border-gray-800' : 'border-gray-200'}`}>\r\n          <div className=\"flex items-center justify-between mb-4\">\r\n            <h3 className=\"text-lg font-bold\">Pginas CMS</h3>\r\n            <button className=\"px-4 py-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white font-medium rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap\">\r\n              <i className=\"ri-add-line text-xl\"></i>\r\n              Nova Pgina\r\n            </button>\r\n          </div>\r\n\r\n          <div className=\"space-y-3\">\r\n            {pages.length === 0 ? (\r\n              <p className={darkMode ? 'text-gray-400' : 'text-gray-600'}>Nenhuma pgina criada</p>\r\n            ) : (\r\n              pages.map((page) => (\r\n                <div key={page.id} className={`p-4 rounded-lg ${darkMode ? 'bg-gray-800' : 'bg-white'} border ${darkMode ? 'border-gray-700' : 'border-gray-200'}`}>\r\n                  <div className=\"flex items-center justify-between mb-2\">\r\n                    <div>\r\n                      <h4 className=\"font-medium\">{page.title}</h4>\r\n                      <p className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>\r\n                        /{page.slug}\r\n                      </p>\r\n                    </div>\r\n                    <span className={`px-2 py-1 rounded-full text-xs ${\r\n                      page.is_published ? 'bg-green-500/20 text-green-500' : 'bg-gray-500/20 text-gray-500'\r\n                    }`}>\r\n                      {page.is_published ? 'Publicada' : 'Rascunho'}\r\n                    </span>\r\n                  </div>\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <button className=\"p-2 rounded-lg bg-blue-500/10 text-blue-500 hover:bg-blue-500/20 transition-colors\">\r\n                      <i className=\"ri-edit-line\"></i>\r\n                    </button>\r\n                    <button className=\"p-2 rounded-lg bg-purple-500/10 text-purple-500 hover:bg-purple-500/20 transition-colors\">\r\n                      <i className=\"ri-eye-line\"></i>\r\n                    </button>\r\n                    <button className=\"p-2 rounded-lg bg-red-500/10 text-red-500 hover:bg-red-500/20 transition-colors\">\r\n                      <i className=\"ri-delete-bin-line\"></i>\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              ))\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className={`p-6 rounded-xl ${darkMode ? 'bg-gray-900' : 'bg-gray-50'} border ${darkMode ? 'border-gray-800' : 'border-gray-200'}`}>\r\n        <div className=\"flex items-center justify-between mb-4\">\r\n          <h3 className=\"text-lg font-bold\">Banners & Sliders</h3>\r\n          <button className=\"px-4 py-2 bg-gradient-to-r from-purple-500 to-purple-600 text-white font-medium rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap\">\r\n            <i className=\"ri-add-line text-xl\"></i>\r\n            Novo Banner\r\n          </button>\r\n        </div>\r\n\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n          {banners.length === 0 ? (\r\n            <p className={darkMode ? 'text-gray-400' : 'text-gray-600'}>Nenhum banner criado</p>\r\n          ) : (\r\n            banners.map((banner) => (\r\n              <div key={banner.id} className={`rounded-lg overflow-hidden ${darkMode ? 'bg-gray-800' : 'bg-white'} border ${darkMode ? 'border-gray-700' : 'border-gray-200'}`}>\r\n                <div className=\"aspect-video bg-gray-700 flex items-center justify-center\">\r\n                  {banner.image_url ? (\r\n                    <img src={banner.image_url} alt={banner.title} className=\"w-full h-full object-cover\" />\r\n                  ) : (\r\n                    <i className=\"ri-image-line text-4xl text-gray-500\"></i>\r\n                  )}\r\n                </div>\r\n                <div className=\"p-4\">\r\n                  <h4 className=\"font-medium mb-2\">{banner.title}</h4>\r\n                  <div className=\"flex items-center justify-between\">\r\n                    <span className={`text-xs px-2 py-1 rounded-full ${\r\n                      banner.is_active ? 'bg-green-500/20 text-green-500' : 'bg-gray-500/20 text-gray-500'\r\n                    }`}>\r\n                      {banner.is_active ? 'Ativo' : 'Inativo'}\r\n                    </span>\r\n                    <div className=\"flex items-center gap-1\">\r\n                      <button className=\"p-1 rounded bg-blue-500/10 text-blue-500 hover:bg-blue-500/20 transition-colors\">\r\n                        <i className=\"ri-edit-line text-sm\"></i>\r\n                      </button>\r\n                      <button className=\"p-1 rounded bg-red-500/10 text-red-500 hover:bg-red-500/20 transition-colors\">\r\n                        <i className=\"ri-delete-bin-line text-sm\"></i>\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            ))\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import { useState, useEffect } from 'react';\r\nimport { supabase } from '../../../lib/supabase';\r\n\r\ninterface MarketingManagementProps {\r\n  darkMode: boolean;\r\n}\r\n\r\nexport default function MarketingManagement({ darkMode }: MarketingManagementProps) {\r\n  const [campaigns, setCampaigns] = useState<any[]>([]);\r\n  const [coupons, setCoupons] = useState<any[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [showCouponModal, setShowCouponModal] = useState(false);\r\n\r\n  useEffect(() => {\r\n    loadMarketingData();\r\n  }, []);\r\n\r\n  const loadMarketingData = async () => {\r\n    try {\r\n      const [campaignsRes, couponsRes] = await Promise.all([\r\n        supabase.from('marketing_campaigns').select('*').order('created_at', { ascending: false }),\r\n        supabase.from('coupons').select('*').order('created_at', { ascending: false })\r\n      ]);\r\n\r\n      setCampaigns(campaignsRes.data || []);\r\n      setCoupons(couponsRes.data || []);\r\n    } catch (error) {\r\n      console.error('Erro ao carregar dados de marketing:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const controls = [\r\n    { id: 1, name: 'Cupons de Desconto', icon: 'ri-coupon-line' },\r\n    { id: 2, name: 'Regras Promocionais', icon: 'ri-price-tag-3-line' },\r\n    { id: 3, name: 'Scheduling Promoes', icon: 'ri-calendar-event-line' },\r\n    { id: 4, name: 'ROI Campanhas', icon: 'ri-line-chart-line' },\r\n    { id: 5, name: 'Upsell One-Click', icon: 'ri-arrow-up-circle-line' },\r\n    { id: 6, name: 'Push/Web Notifications', icon: 'ri-notification-3-line' },\r\n    { id: 7, name: 'Pixel Tracking', icon: 'ri-eye-line' },\r\n    { id: 8, name: 'Banner Tool', icon: 'ri-image-add-line' },\r\n    { id: 9, name: 'A/B Landing Pages', icon: 'ri-test-tube-line' }\r\n  ];\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className={`p-6 rounded-xl ${darkMode ? 'bg-gray-900' : 'bg-gray-50'} border ${darkMode ? 'border-gray-800' : 'border-gray-200'}`}>\r\n        <h2 className=\"text-xl font-bold mb-4 flex items-center gap-2\">\r\n          <i className=\"ri-function-line text-yellow-500\"></i>\r\n          9+ Controles de Promoes & Marketing\r\n        </h2>\r\n        <div className=\"grid grid-cols-2 md:grid-cols-3 gap-3\">\r\n          {controls.map(control => (\r\n            <div\r\n              key={control.id}\r\n              className={`p-3 rounded-lg ${darkMode ? 'bg-gray-800' : 'bg-white'} border ${darkMode ? 'border-gray-700' : 'border-gray-200'}`}\r\n            >\r\n              <div className=\"flex items-center gap-2 mb-1\">\r\n                <i className={`${control.icon} text-yellow-500`}></i>\r\n                <span className=\"w-2 h-2 rounded-full bg-green-500\"></span>\r\n              </div>\r\n              <p className=\"text-xs font-medium\">{control.name}</p>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\r\n        <div className={`p-6 rounded-xl ${darkMode ? 'bg-gray-900' : 'bg-gray-50'} border ${darkMode ? 'border-gray-800' : 'border-gray-200'}`}>\r\n          <div className=\"flex items-center justify-between mb-4\">\r\n            <h3 className=\"text-lg font-bold\">Cupons Ativos</h3>\r\n            <button\r\n              onClick={() => setShowCouponModal(true)}\r\n              className=\"p-2 rounded-lg bg-yellow-500 text-black hover:bg-yellow-600 transition-colors\"\r\n            >\r\n              <i className=\"ri-add-line text-xl\"></i>\r\n            </button>\r\n          </div>\r\n          <div className=\"space-y-3\">\r\n            {coupons.length === 0 ? (\r\n              <p className={darkMode ? 'text-gray-400' : 'text-gray-600'}>Nenhum cupom criado</p>\r\n            ) : (\r\n              coupons.slice(0, 5).map((coupon) => (\r\n                <div key={coupon.id} className={`p-4 rounded-lg ${darkMode ? 'bg-gray-800' : 'bg-white'} border ${darkMode ? 'border-gray-700' : 'border-gray-200'}`}>\r\n                  <div className=\"flex items-center justify-between mb-2\">\r\n                    <span className=\"font-mono font-bold text-yellow-500\">{coupon.code}</span>\r\n                    <span className={`px-2 py-1 rounded-full text-xs ${\r\n                      coupon.is_active ? 'bg-green-500/20 text-green-500' : 'bg-gray-500/20 text-gray-500'\r\n                    }`}>\r\n                      {coupon.is_active ? 'Ativo' : 'Inativo'}\r\n                    </span>\r\n                  </div>\r\n                  <p className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'} mb-2`}>\r\n                    {coupon.description}\r\n                  </p>\r\n                  <div className=\"flex items-center justify-between text-xs\">\r\n                    <span className={darkMode ? 'text-gray-400' : 'text-gray-600'}>\r\n                      Usado: {coupon.usage_count || 0}/{coupon.usage_limit || ''}\r\n                    </span>\r\n                    <span className=\"text-yellow-500 font-medium\">\r\n                      {coupon.discount_type === 'percentage' ? `${coupon.discount_value}%` : `R$ ${coupon.discount_value}`}\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n              ))\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        <div className={`lg:col-span-2 p-6 rounded-xl ${darkMode ? 'bg-gray-900' : 'bg-gray-50'} border ${darkMode ? 'border-gray-800' : 'border-gray-200'}`}>\r\n          <div className=\"flex items-center justify-between mb-4\">\r\n            <h3 className=\"text-lg font-bold\">Campanhas de Marketing</h3>\r\n            <button className=\"px-4 py-2 bg-gradient-to-r from-purple-500 to-purple-600 text-white font-medium rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap\">\r\n              <i className=\"ri-add-line text-xl\"></i>\r\n              Nova Campanha\r\n            </button>\r\n          </div>\r\n\r\n          {loading ? (\r\n            <div className=\"flex items-center justify-center h-64\">\r\n              <div className=\"w-12 h-12 border-4 border-yellow-500 border-t-transparent rounded-full animate-spin\"></div>\r\n            </div>\r\n          ) : campaigns.length === 0 ? (\r\n            <div className=\"text-center py-12\">\r\n              <i className=\"ri-megaphone-line text-6xl text-gray-600 mb-4\"></i>\r\n              <p className={`text-lg ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>\r\n                Nenhuma campanha criada ainda\r\n              </p>\r\n              <button className=\"mt-4 px-6 py-2 bg-gradient-to-r from-yellow-500 to-yellow-600 text-black font-medium rounded-lg hover:opacity-90 transition-opacity whitespace-nowrap\">\r\n                Criar Primeira Campanha\r\n              </button>\r\n            </div>\r\n          ) : (\r\n            <div className=\"space-y-4\">\r\n              {campaigns.map((campaign) => (\r\n                <div key={campaign.id} className={`p-4 rounded-lg ${darkMode ? 'bg-gray-800' : 'bg-white'} border ${darkMode ? 'border-gray-700' : 'border-gray-200'}`}>\r\n                  <div className=\"flex items-start justify-between mb-3\">\r\n                    <div>\r\n                      <h4 className=\"font-bold text-lg\">{campaign.name}</h4>\r\n                      <p className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>\r\n                        {campaign.description}\r\n                      </p>\r\n                    </div>\r\n                    <span className={`px-3 py-1 rounded-full text-xs font-medium ${\r\n                      campaign.status === 'running'\r\n                        ? 'bg-green-500/20 text-green-500'\r\n                        : campaign.status === 'scheduled'\r\n                        ? 'bg-blue-500/20 text-blue-500'\r\n                        : campaign.status === 'completed'\r\n                        ? 'bg-gray-500/20 text-gray-500'\r\n                        : 'bg-yellow-500/20 text-yellow-500'\r\n                    }`}>\r\n                      {campaign.status === 'running' ? 'Em Execuo' : \r\n                       campaign.status === 'scheduled' ? 'Agendada' :\r\n                       campaign.status === 'completed' ? 'Concluda' : 'Rascunho'}\r\n                    </span>\r\n                  </div>\r\n\r\n                  <div className=\"grid grid-cols-4 gap-4 mb-3\">\r\n                    <div>\r\n                      <p className={`text-xs ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>Enviados</p>\r\n                      <p className=\"text-lg font-bold\">{campaign.sent_count || 0}</p>\r\n                    </div>\r\n                    <div>\r\n                      <p className={`text-xs ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>Abertos</p>\r\n                      <p className=\"text-lg font-bold text-blue-500\">{campaign.opened_count || 0}</p>\r\n                    </div>\r\n                    <div>\r\n                      <p className={`text-xs ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>Cliques</p>\r\n                      <p className=\"text-lg font-bold text-purple-500\">{campaign.clicked_count || 0}</p>\r\n                    </div>\r\n                    <div>\r\n                      <p className={`text-xs ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>Converses</p>\r\n                      <p className=\"text-lg font-bold text-green-500\">{campaign.conversion_count || 0}</p>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div className=\"flex items-center justify-between\">\r\n                    <span className=\"text-sm font-medium text-yellow-500\">\r\n                      ROI: R$ {campaign.revenue?.toFixed(2) || '0.00'}\r\n                    </span>\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <button className=\"p-2 rounded-lg bg-blue-500/10 text-blue-500 hover:bg-blue-500/20 transition-colors\">\r\n                        <i className=\"ri-edit-line\"></i>\r\n                      </button>\r\n                      <button className=\"p-2 rounded-lg bg-purple-500/10 text-purple-500 hover:bg-purple-500/20 transition-colors\">\r\n                        <i className=\"ri-bar-chart-line\"></i>\r\n                      </button>\r\n                      <button className=\"p-2 rounded-lg bg-red-500/10 text-red-500 hover:bg-red-500/20 transition-colors\">\r\n                        <i className=\"ri-delete-bin-line\"></i>\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\r\n        {[\r\n          { title: 'Taxa de Abertura', value: '24.5%', icon: 'ri-mail-open-line', color: 'blue' },\r\n          { title: 'Taxa de Clique', value: '8.2%', icon: 'ri-cursor-line', color: 'purple' },\r\n          { title: 'Taxa de Converso', value: '3.1%', icon: 'ri-shopping-cart-line', color: 'green' }\r\n        ].map((stat, index) => (\r\n          <div\r\n            key={index}\r\n            className={`p-6 rounded-xl ${darkMode ? 'bg-gray-900' : 'bg-gray-50'} border ${darkMode ? 'border-gray-800' : 'border-gray-200'}`}\r\n          >\r\n            <div className={`w-12 h-12 rounded-lg bg-${stat.color}-500/20 flex items-center justify-center mb-4`}>\r\n              <i className={`${stat.icon} text-2xl text-${stat.color}-500`}></i>\r\n            </div>\r\n            <h3 className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'} mb-1`}>{stat.title}</h3>\r\n            <p className=\"text-3xl font-bold\">{stat.value}</p>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import { useState, useEffect } from 'react';\r\nimport { supabase } from '../../../lib/supabase';\r\n\r\ninterface FinancialManagementProps {\r\n  darkMode: boolean;\r\n}\r\n\r\nexport default function FinancialManagement({ darkMode }: FinancialManagementProps) {\r\n  const [transactions, setTransactions] = useState<any[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [dateRange, setDateRange] = useState('month');\r\n  const [stats, setStats] = useState({\r\n    totalRevenue: 0,\r\n    totalRefunds: 0,\r\n    netRevenue: 0,\r\n    avgOrderValue: 0\r\n  });\r\n\r\n  useEffect(() => {\r\n    loadFinancialData();\r\n  }, [dateRange]);\r\n\r\n  const loadFinancialData = async () => {\r\n    try {\r\n      const { data: orders, error } = await supabase\r\n        .from('orders')\r\n        .select('*')\r\n        .order('created_at', { ascending: false });\r\n\r\n      if (error) throw error;\r\n\r\n      const totalRevenue = orders?.reduce((sum, order) => sum + (order.total || 0), 0) || 0;\r\n      const avgOrderValue = orders?.length ? totalRevenue / orders.length : 0;\r\n\r\n      setStats({\r\n        totalRevenue,\r\n        totalRefunds: 0,\r\n        netRevenue: totalRevenue,\r\n        avgOrderValue\r\n      });\r\n\r\n      setTransactions(orders || []);\r\n    } catch (error) {\r\n      console.error('Erro ao carregar dados financeiros:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const controls = [\r\n    { id: 1, name: 'Relatrios Peridicos', icon: 'ri-calendar-line' },\r\n    { id: 2, name: 'Por Mtodo Pagamento', icon: 'ri-bank-card-line' },\r\n    { id: 3, name: 'Margem por Categoria', icon: 'ri-pie-chart-line' },\r\n    { id: 4, name: 'KPIs (LTV/CAC/AOV)', icon: 'ri-dashboard-line' },\r\n    { id: 5, name: 'Exports Financeiros', icon: 'ri-file-excel-line' },\r\n    { id: 6, name: 'Reconciliao Stripe', icon: 'ri-refresh-line' },\r\n    { id: 7, name: 'Impostos por Regio', icon: 'ri-government-line' },\r\n    { id: 8, name: 'Plano de Contas', icon: 'ri-book-line' }\r\n  ];\r\n\r\n  const kpis = [\r\n    {\r\n      label: 'Receita Total',\r\n      value: `R$ ${stats.totalRevenue.toFixed(2)}`,\r\n      icon: 'ri-money-dollar-circle-line',\r\n      color: 'from-green-500 to-green-600',\r\n      change: '+12.5%'\r\n    },\r\n    {\r\n      label: 'Receita Lquida',\r\n      value: `R$ ${stats.netRevenue.toFixed(2)}`,\r\n      icon: 'ri-line-chart-line',\r\n      color: 'from-blue-500 to-blue-600',\r\n      change: '+8.2%'\r\n    },\r\n    {\r\n      label: 'Ticket Mdio (AOV)',\r\n      value: `R$ ${stats.avgOrderValue.toFixed(2)}`,\r\n      icon: 'ri-shopping-cart-line',\r\n      color: 'from-purple-500 to-purple-600',\r\n      change: '+5.1%'\r\n    },\r\n    {\r\n      label: 'Reembolsos',\r\n      value: `R$ ${stats.totalRefunds.toFixed(2)}`,\r\n      icon: 'ri-refund-line',\r\n      color: 'from-red-500 to-red-600',\r\n      change: '-2.3%'\r\n    }\r\n  ];\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className={`p-6 rounded-xl ${darkMode ? 'bg-gray-900' : 'bg-gray-50'} border ${darkMode ? 'border-gray-800' : 'border-gray-200'}`}>\r\n        <h2 className=\"text-xl font-bold mb-4 flex items-center gap-2\">\r\n          <i className=\"ri-function-line text-yellow-500\"></i>\r\n          8+ Controles Financeiros & Relatrios\r\n        </h2>\r\n        <div className=\"grid grid-cols-2 md:grid-cols-4 gap-3\">\r\n          {controls.map(control => (\r\n            <div\r\n              key={control.id}\r\n              className={`p-3 rounded-lg ${darkMode ? 'bg-gray-800' : 'bg-white'} border ${darkMode ? 'border-gray-700' : 'border-gray-200'}`}\r\n            >\r\n              <div className=\"flex items-center gap-2 mb-1\">\r\n                <i className={`${control.icon} text-yellow-500`}></i>\r\n                <span className=\"w-2 h-2 rounded-full bg-green-500\"></span>\r\n              </div>\r\n              <p className=\"text-xs font-medium\">{control.name}</p>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"flex items-center justify-between\">\r\n        <div className=\"flex items-center gap-2\">\r\n          {['day', 'week', 'month', 'year'].map((range) => (\r\n            <button\r\n              key={range}\r\n              onClick={() => setDateRange(range)}\r\n              className={`px-4 py-2 rounded-lg font-medium transition-all whitespace-nowrap ${\r\n                dateRange === range\r\n                  ? 'bg-gradient-to-r from-yellow-500 to-yellow-600 text-black'\r\n                  : darkMode\r\n                  ? 'bg-gray-800 text-gray-300 hover:bg-gray-700'\r\n                  : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\r\n              }`}\r\n            >\r\n              {range === 'day' ? 'Hoje' : range === 'week' ? 'Semana' : range === 'month' ? 'Ms' : 'Ano'}\r\n            </button>\r\n          ))}\r\n        </div>\r\n\r\n        <button className=\"px-6 py-2 bg-gradient-to-r from-green-500 to-green-600 text-white font-medium rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap\">\r\n          <i className=\"ri-file-excel-line text-xl\"></i>\r\n          Exportar Relatrio\r\n        </button>\r\n      </div>\r\n\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\r\n        {kpis.map((kpi, index) => (\r\n          <div\r\n            key={index}\r\n            className={`p-6 rounded-xl ${darkMode ? 'bg-gray-900' : 'bg-gray-50'} border ${darkMode ? 'border-gray-800' : 'border-gray-200'}`}\r\n          >\r\n            <div className=\"flex items-center justify-between mb-4\">\r\n              <div className={`w-12 h-12 rounded-lg bg-gradient-to-br ${kpi.color} flex items-center justify-center`}>\r\n                <i className={`${kpi.icon} text-2xl text-white`}></i>\r\n              </div>\r\n              <span className={`text-sm font-medium ${kpi.change.startsWith('+') ? 'text-green-500' : 'text-red-500'}`}>\r\n                {kpi.change}\r\n              </span>\r\n            </div>\r\n            <h3 className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'} mb-1`}>{kpi.label}</h3>\r\n            <p className=\"text-2xl font-bold\">{kpi.value}</p>\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n        <div className={`p-6 rounded-xl ${darkMode ? 'bg-gray-900' : 'bg-gray-50'} border ${darkMode ? 'border-gray-800' : 'border-gray-200'}`}>\r\n          <h3 className=\"text-lg font-bold mb-4\">Receita por Mtodo de Pagamento</h3>\r\n          <div className=\"space-y-3\">\r\n            {[\r\n              { method: 'Carto de Crdito', amount: 45230.50, percentage: 65, color: 'blue' },\r\n              { method: 'PIX', amount: 18450.00, percentage: 25, color: 'green' },\r\n              { method: 'Boleto', amount: 7380.00, percentage: 10, color: 'yellow' }\r\n            ].map((item, index) => (\r\n              <div key={index} className={`p-4 rounded-lg ${darkMode ? 'bg-gray-800' : 'bg-white'}`}>\r\n                <div className=\"flex items-center justify-between mb-2\">\r\n                  <span className=\"font-medium\">{item.method}</span>\r\n                  <span className=\"font-bold text-yellow-500\">R$ {item.amount.toFixed(2)}</span>\r\n                </div>\r\n                <div className=\"w-full bg-gray-700 rounded-full h-2\">\r\n                  <div\r\n                    className={`bg-${item.color}-500 h-2 rounded-full`}\r\n                    style={{ width: `${item.percentage}%` }}\r\n                  ></div>\r\n                </div>\r\n                <p className={`text-xs mt-1 ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>\r\n                  {item.percentage}% do total\r\n                </p>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n\r\n        <div className={`p-6 rounded-xl ${darkMode ? 'bg-gray-900' : 'bg-gray-50'} border ${darkMode ? 'border-gray-800' : 'border-gray-200'}`}>\r\n          <h3 className=\"text-lg font-bold mb-4\">Margem por Categoria</h3>\r\n          <div className=\"space-y-3\">\r\n            {[\r\n              { category: 'Tecnologia', revenue: 35000, cost: 20000, margin: 42.8 },\r\n              { category: 'Casa & Decorao', revenue: 18000, cost: 12000, margin: 33.3 },\r\n              { category: 'Ferramentas', revenue: 12000, cost: 7000, margin: 41.6 }\r\n            ].map((item, index) => (\r\n              <div key={index} className={`p-4 rounded-lg ${darkMode ? 'bg-gray-800' : 'bg-white'}`}>\r\n                <div className=\"flex items-center justify-between mb-2\">\r\n                  <span className=\"font-medium\">{item.category}</span>\r\n                  <span className=\"text-green-500 font-bold\">{item.margin.toFixed(1)}%</span>\r\n                </div>\r\n                <div className=\"flex items-center justify-between text-sm\">\r\n                  <span className={darkMode ? 'text-gray-400' : 'text-gray-600'}>\r\n                    Receita: R$ {item.revenue.toFixed(2)}\r\n                  </span>\r\n                  <span className={darkMode ? 'text-gray-400' : 'text-gray-600'}>\r\n                    Custo: R$ {item.cost.toFixed(2)}\r\n                  </span>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import { useState, useEffect } from 'react';\r\nimport { supabase } from '../../../lib/supabase';\r\n\r\ninterface SecurityManagementProps {\r\n  darkMode: boolean;\r\n}\r\n\r\nexport default function SecurityManagement({ darkMode }: SecurityManagementProps) {\r\n  const [auditLogs, setAuditLogs] = useState<any[]>([]);\r\n  const [apiKeys, setApiKeys] = useState<any[]>([]);\r\n  const [webhooks, setWebhooks] = useState<any[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    loadSecurityData();\r\n  }, []);\r\n\r\n  const loadSecurityData = async () => {\r\n    try {\r\n      const [logsRes, keysRes, webhooksRes] = await Promise.all([\r\n        supabase.from('audit_logs').select('*, profiles(email)').order('created_at', { ascending: false }).limit(50),\r\n        supabase.from('api_keys').select('*').order('created_at', { ascending: false }),\r\n        supabase.from('webhooks').select('*').order('created_at', { ascending: false })\r\n      ]);\r\n\r\n      setAuditLogs(logsRes.data || []);\r\n      setApiKeys(keysRes.data || []);\r\n      setWebhooks(webhooksRes.data || []);\r\n    } catch (error) {\r\n      console.error('Erro ao carregar dados de segurana:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const controls = [\r\n    { id: 1, name: 'Audit Log', icon: 'ri-history-line' },\r\n    { id: 2, name: 'Gesto API Keys', icon: 'ri-key-line' },\r\n    { id: 3, name: 'Webhooks', icon: 'ri-webhook-line' },\r\n    { id: 4, name: 'RLS Policies', icon: 'ri-shield-check-line' },\r\n    { id: 5, name: 'Backups Agendados', icon: 'ri-database-line' },\r\n    { id: 6, name: 'Controle de Sesses', icon: 'ri-user-settings-line' }\r\n  ];\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className={`p-6 rounded-xl ${darkMode ? 'bg-gray-900' : 'bg-gray-50'} border ${darkMode ? 'border-gray-800' : 'border-gray-200'}`}>\r\n        <h2 className=\"text-xl font-bold mb-4 flex items-center gap-2\">\r\n          <i className=\"ri-function-line text-yellow-500\"></i>\r\n          6+ Controles de Segurana & Infraestrutura\r\n        </h2>\r\n        <div className=\"grid grid-cols-2 md:grid-cols-3 gap-3\">\r\n          {controls.map(control => (\r\n            <div\r\n              key={control.id}\r\n              className={`p-3 rounded-lg ${darkMode ? 'bg-gray-800' : 'bg-white'} border ${darkMode ? 'border-gray-700' : 'border-gray-200'}`}\r\n            >\r\n              <div className=\"flex items-center gap-2 mb-1\">\r\n                <i className={`${control.icon} text-yellow-500`}></i>\r\n                <span className=\"w-2 h-2 rounded-full bg-green-500\"></span>\r\n              </div>\r\n              <p className=\"text-xs font-medium\">{control.name}</p>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\r\n        <div className={`p-6 rounded-xl ${darkMode ? 'bg-gray-900' : 'bg-gray-50'} border ${darkMode ? 'border-gray-800' : 'border-gray-200'}`}>\r\n          <div className=\"w-12 h-12 rounded-lg bg-green-500/20 flex items-center justify-center mb-4\">\r\n            <i className=\"ri-shield-check-line text-2xl text-green-500\"></i>\r\n          </div>\r\n          <h3 className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'} mb-1`}>Status de Segurana</h3>\r\n          <p className=\"text-3xl font-bold text-green-500\">Seguro</p>\r\n          <p className={`text-xs mt-2 ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>\r\n            Todas as polticas ativas\r\n          </p>\r\n        </div>\r\n\r\n        <div className={`p-6 rounded-xl ${darkMode ? 'bg-gray-900' : 'bg-gray-50'} border ${darkMode ? 'border-gray-800' : 'border-gray-200'}`}>\r\n          <div className=\"w-12 h-12 rounded-lg bg-blue-500/20 flex items-center justify-center mb-4\">\r\n            <i className=\"ri-key-line text-2xl text-blue-500\"></i>\r\n          </div>\r\n          <h3 className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'} mb-1`}>API Keys Ativas</h3>\r\n          <p className=\"text-3xl font-bold\">{apiKeys.filter(k => k.is_active).length}</p>\r\n          <p className={`text-xs mt-2 ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>\r\n            {apiKeys.length} total\r\n          </p>\r\n        </div>\r\n\r\n        <div className={`p-6 rounded-xl ${darkMode ? 'bg-gray-900' : 'bg-gray-50'} border ${darkMode ? 'border-gray-800' : 'border-gray-200'}`}>\r\n          <div className=\"w-12 h-12 rounded-lg bg-purple-500/20 flex items-center justify-center mb-4\">\r\n            <i className=\"ri-database-line text-2xl text-purple-500\"></i>\r\n          </div>\r\n          <h3 className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'} mb-1`}>ltimo Backup</h3>\r\n          <p className=\"text-3xl font-bold\">Hoje</p>\r\n          <p className={`text-xs mt-2 ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>\r\n            Automtico dirio\r\n          </p>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n        <div className={`p-6 rounded-xl ${darkMode ? 'bg-gray-900' : 'bg-gray-50'} border ${darkMode ? 'border-gray-800' : 'border-gray-200'}`}>\r\n          <div className=\"flex items-center justify-between mb-4\">\r\n            <h3 className=\"text-lg font-bold\">API Keys</h3>\r\n            <button className=\"px-4 py-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white font-medium rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap\">\r\n              <i className=\"ri-add-line text-xl\"></i>\r\n              Nova Key\r\n            </button>\r\n          </div>\r\n\r\n          <div className=\"space-y-3\">\r\n            {apiKeys.length === 0 ? (\r\n              <p className={darkMode ? 'text-gray-400' : 'text-gray-600'}>Nenhuma API key criada</p>\r\n            ) : (\r\n              apiKeys.map((key) => (\r\n                <div key={key.id} className={`p-4 rounded-lg ${darkMode ? 'bg-gray-800' : 'bg-white'} border ${darkMode ? 'border-gray-700' : 'border-gray-200'}`}>\r\n                  <div className=\"flex items-center justify-between mb-2\">\r\n                    <div>\r\n                      <p className=\"font-medium\">{key.name}</p>\r\n                      <p className={`text-xs font-mono ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>\r\n                        {key.key_hash.slice(0, 20)}...\r\n                      </p>\r\n                    </div>\r\n                    <span className={`px-2 py-1 rounded-full text-xs ${\r\n                      key.is_active ? 'bg-green-500/20 text-green-500' : 'bg-gray-500/20 text-gray-500'\r\n                    }`}>\r\n                      {key.is_active ? 'Ativa' : 'Inativa'}\r\n                    </span>\r\n                  </div>\r\n                  <div className=\"flex items-center justify-between text-xs\">\r\n                    <span className={darkMode ? 'text-gray-400' : 'text-gray-600'}>\r\n                      ltimo uso: {key.last_used ? new Date(key.last_used).toLocaleDateString('pt-BR') : 'Nunca'}\r\n                    </span>\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <button className=\"p-1 rounded bg-blue-500/10 text-blue-500 hover:bg-blue-500/20 transition-colors\">\r\n                        <i className=\"ri-edit-line\"></i>\r\n                      </button>\r\n                      <button className=\"p-1 rounded bg-red-500/10 text-red-500 hover:bg-red-500/20 transition-colors\">\r\n                        <i className=\"ri-delete-bin-line\"></i>\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              ))\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        <div className={`p-6 rounded-xl ${darkMode ? 'bg-gray-900' : 'bg-gray-50'} border ${darkMode ? 'border-gray-800' : 'border-gray-200'}`}>\r\n          <div className=\"flex items-center justify-between mb-4\">\r\n            <h3 className=\"text-lg font-bold\">Webhooks</h3>\r\n            <button className=\"px-4 py-2 bg-gradient-to-r from-purple-500 to-purple-600 text-white font-medium rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap\">\r\n              <i className=\"ri-add-line text-xl\"></i>\r\n              Novo Webhook\r\n            </button>\r\n          </div>\r\n\r\n          <div className=\"space-y-3\">\r\n            {webhooks.length === 0 ? (\r\n              <p className={darkMode ? 'text-gray-400' : 'text-gray-600'}>Nenhum webhook configurado</p>\r\n            ) : (\r\n              webhooks.map((webhook) => (\r\n                <div key={webhook.id} className={`p-4 rounded-lg ${darkMode ? 'bg-gray-800' : 'bg-white'} border ${darkMode ? 'border-gray-700' : 'border-gray-200'}`}>\r\n                  <div className=\"flex items-center justify-between mb-2\">\r\n                    <div className=\"flex-1 mr-2\">\r\n                      <p className=\"font-medium\">{webhook.name}</p>\r\n                      <p className={`text-xs ${darkMode ? 'text-gray-400' : 'text-gray-600'} truncate`}>\r\n                        {webhook.url}\r\n                      </p>\r\n                    </div>\r\n                    <span className={`px-2 py-1 rounded-full text-xs whitespace-nowrap ${\r\n                      webhook.is_active ? 'bg-green-500/20 text-green-500' : 'bg-gray-500/20 text-gray-500'\r\n                    }`}>\r\n                      {webhook.is_active ? 'Ativo' : 'Inativo'}\r\n                    </span>\r\n                  </div>\r\n                  <div className=\"flex items-center justify-between text-xs\">\r\n                    <div className=\"flex items-center gap-3\">\r\n                      <span className=\"text-green-500\"> {webhook.success_count || 0}</span>\r\n                      <span className=\"text-red-500\"> {webhook.failure_count || 0}</span>\r\n                    </div>\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <button className=\"p-1 rounded bg-blue-500/10 text-blue-500 hover:bg-blue-500/20 transition-colors\">\r\n                        <i className=\"ri-edit-line\"></i>\r\n                      </button>\r\n                      <button className=\"p-1 rounded bg-red-500/10 text-red-500 hover:bg-red-500/20 transition-colors\">\r\n                        <i className=\"ri-delete-bin-line\"></i>\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              ))\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className={`p-6 rounded-xl ${darkMode ? 'bg-gray-900' : 'bg-gray-50'} border ${darkMode ? 'border-gray-800' : 'border-gray-200'}`}>\r\n        <h3 className=\"text-lg font-bold mb-4\">Audit Log (ltimas 50 aes)</h3>\r\n        \r\n        {loading ? (\r\n          <div className=\"flex items-center justify-center h-64\">\r\n            <div className=\"w-12 h-12 border-4 border-yellow-500 border-t-transparent rounded-full animate-spin\"></div>\r\n          </div>\r\n        ) : auditLogs.length === 0 ? (\r\n          <p className={darkMode ? 'text-gray-400' : 'text-gray-600'}>Nenhuma ao registrada</p>\r\n        ) : (\r\n          <div className=\"overflow-x-auto\">\r\n            <table className=\"w-full\">\r\n              <thead className={darkMode ? 'bg-gray-800' : 'bg-gray-100'}>\r\n                <tr>\r\n                  <th className=\"px-4 py-3 text-left text-sm font-semibold\">Data/Hora</th>\r\n                  <th className=\"px-4 py-3 text-left text-sm font-semibold\">Usurio</th>\r\n                  <th className=\"px-4 py-3 text-left text-sm font-semibold\">Ao</th>\r\n                  <th className=\"px-4 py-3 text-left text-sm font-semibold\">Tabela</th>\r\n                  <th className=\"px-4 py-3 text-left text-sm font-semibold\">IP</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {auditLogs.map((log) => (\r\n                  <tr\r\n                    key={log.id}\r\n                    className={`border-t ${darkMode ? 'border-gray-800' : 'border-gray-200'}`}\r\n                  >\r\n                    <td className=\"px-4 py-3 text-sm\">\r\n                      {new Date(log.created_at).toLocaleString('pt-BR')}\r\n                    </td>\r\n                    <td className=\"px-4 py-3 text-sm\">\r\n                      {log.profiles?.email || 'Sistema'}\r\n                    </td>\r\n                    <td className=\"px-4 py-3\">\r\n                      <span className={`px-2 py-1 rounded-full text-xs font-medium ${\r\n                        log.action.includes('create') || log.action.includes('insert')\r\n                          ? 'bg-green-500/20 text-green-500'\r\n                          : log.action.includes('update')\r\n                          ? 'bg-blue-500/20 text-blue-500'\r\n                          : log.action.includes('delete')\r\n                          ? 'bg-red-500/20 text-red-500'\r\n                          : 'bg-gray-500/20 text-gray-500'\r\n                      }`}>\r\n                        {log.action}\r\n                      </span>\r\n                    </td>\r\n                    <td className=\"px-4 py-3 text-sm\">{log.table_name || '-'}</td>\r\n                    <td className=\"px-4 py-3 text-sm font-mono\">{log.ip_address || '-'}</td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import { useState, useEffect } from 'react';\r\nimport { supabase } from '../../../lib/supabase';\r\n\r\ninterface AutomationManagementProps {\r\n  darkMode: boolean;\r\n}\r\n\r\nexport default function AutomationManagement({ darkMode }: AutomationManagementProps) {\r\n  const [rules, setRules] = useState<any[]>([]);\r\n  const [templates, setTemplates] = useState<any[]>([]);\r\n  const [tasks, setTasks] = useState<any[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    loadAutomationData();\r\n  }, []);\r\n\r\n  const loadAutomationData = async () => {\r\n    try {\r\n      const [rulesRes, templatesRes, tasksRes] = await Promise.all([\r\n        supabase.from('automation_rules').select('*').order('created_at', { ascending: false }),\r\n        supabase.from('email_templates').select('*').order('created_at', { ascending: false }),\r\n        supabase.from('scheduled_tasks').select('*').order('created_at', { ascending: false })\r\n      ]);\r\n\r\n      setRules(rulesRes.data || []);\r\n      setTemplates(templatesRes.data || []);\r\n      setTasks(tasksRes.data || []);\r\n    } catch (error) {\r\n      console.error('Erro ao carregar automaes:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const controls = [\r\n    { id: 1, name: 'Regras de Evento', icon: 'ri-flashlight-line' },\r\n    { id: 2, name: 'Automaes E-mail', icon: 'ri-mail-send-line' },\r\n    { id: 3, name: 'Pricing Dinmico', icon: 'ri-price-tag-3-line' },\r\n    { id: 4, name: 'Fraud Flags', icon: 'ri-shield-check-line' },\r\n    { id: 5, name: 'Autoresponder Reviews', icon: 'ri-chat-smile-line' },\r\n    { id: 6, name: 'Integrao ERP', icon: 'ri-links-line' },\r\n    { id: 7, name: 'Scheduler Tarefas', icon: 'ri-calendar-check-line' }\r\n  ];\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className={`p-6 rounded-xl ${darkMode ? 'bg-gray-900' : 'bg-gray-50'} border ${darkMode ? 'border-gray-800' : 'border-gray-200'}`}>\r\n        <h2 className=\"text-xl font-bold mb-4 flex items-center gap-2\">\r\n          <i className=\"ri-function-line text-yellow-500\"></i>\r\n          7+ Controles de Automao & Regras\r\n        </h2>\r\n        <div className=\"grid grid-cols-2 md:grid-cols-4 gap-3\">\r\n          {controls.map(control => (\r\n            <div\r\n              key={control.id}\r\n              className={`p-3 rounded-lg ${darkMode ? 'bg-gray-800' : 'bg-white'} border ${darkMode ? 'border-gray-700' : 'border-gray-200'}`}\r\n            >\r\n              <div className=\"flex items-center gap-2 mb-1\">\r\n                <i className={`${control.icon} text-yellow-500`}></i>\r\n                <span className=\"w-2 h-2 rounded-full bg-green-500\"></span>\r\n              </div>\r\n              <p className=\"text-xs font-medium\">{control.name}</p>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n        <div className={`p-6 rounded-xl ${darkMode ? 'bg-gray-900' : 'bg-gray-50'} border ${darkMode ? 'border-gray-800' : 'border-gray-200'}`}>\r\n          <div className=\"flex items-center justify-between mb-4\">\r\n            <h3 className=\"text-lg font-bold\">Regras de Automao</h3>\r\n            <button className=\"px-4 py-2 bg-gradient-to-r from-yellow-500 to-yellow-600 text-black font-medium rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap\">\r\n              <i className=\"ri-add-line text-xl\"></i>\r\n              Nova Regra\r\n            </button>\r\n          </div>\r\n\r\n          <div className=\"space-y-3\">\r\n            {rules.length === 0 ? (\r\n              <div className=\"text-center py-8\">\r\n                <i className=\"ri-robot-line text-6xl text-gray-600 mb-4\"></i>\r\n                <p className={`${darkMode ? 'text-gray-400' : 'text-gray-600'} mb-4`}>\r\n                  Nenhuma regra de automao criada\r\n                </p>\r\n                <button className=\"px-6 py-2 bg-gradient-to-r from-yellow-500 to-yellow-600 text-black font-medium rounded-lg hover:opacity-90 transition-opacity whitespace-nowrap\">\r\n                  Criar Primeira Regra\r\n                </button>\r\n              </div>\r\n            ) : (\r\n              rules.map((rule) => (\r\n                <div key={rule.id} className={`p-4 rounded-lg ${darkMode ? 'bg-gray-800' : 'bg-white'} border ${darkMode ? 'border-gray-700' : 'border-gray-200'}`}>\r\n                  <div className=\"flex items-start justify-between mb-2\">\r\n                    <div className=\"flex-1\">\r\n                      <h4 className=\"font-medium\">{rule.name}</h4>\r\n                      <p className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>\r\n                        {rule.description}\r\n                      </p>\r\n                    </div>\r\n                    <span className={`px-2 py-1 rounded-full text-xs ml-2 whitespace-nowrap ${\r\n                      rule.is_active ? 'bg-green-500/20 text-green-500' : 'bg-gray-500/20 text-gray-500'\r\n                    }`}>\r\n                      {rule.is_active ? 'Ativa' : 'Inativa'}\r\n                    </span>\r\n                  </div>\r\n                  <div className=\"flex items-center justify-between\">\r\n                    <span className={`text-xs ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>\r\n                      Executada {rule.execution_count || 0} vezes\r\n                    </span>\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <button className=\"p-2 rounded-lg bg-blue-500/10 text-blue-500 hover:bg-blue-500/20 transition-colors\">\r\n                        <i className=\"ri-edit-line\"></i>\r\n                      </button>\r\n                      <button className=\"p-2 rounded-lg bg-red-500/10 text-red-500 hover:bg-red-500/20 transition-colors\">\r\n                        <i className=\"ri-delete-bin-line\"></i>\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              ))\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        <div className={`p-6 rounded-xl ${darkMode ? 'bg-gray-900' : 'bg-gray-50'} border ${darkMode ? 'border-gray-800' : 'border-gray-200'}`}>\r\n          <div className=\"flex items-center justify-between mb-4\">\r\n            <h3 className=\"text-lg font-bold\">Templates de E-mail</h3>\r\n            <button className=\"px-4 py-2 bg-gradient-to-r from-purple-500 to-purple-600 text-white font-medium rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap\">\r\n              <i className=\"ri-add-line text-xl\"></i>\r\n              Novo Template\r\n            </button>\r\n          </div>\r\n\r\n          <div className=\"space-y-3\">\r\n            {templates.length === 0 ? (\r\n              <p className={darkMode ? 'text-gray-400' : 'text-gray-600'}>Nenhum template criado</p>\r\n            ) : (\r\n              templates.map((template) => (\r\n                <div key={template.id} className={`p-4 rounded-lg ${darkMode ? 'bg-gray-800' : 'bg-white'} border ${darkMode ? 'border-gray-700' : 'border-gray-200'}`}>\r\n                  <div className=\"flex items-start justify-between mb-2\">\r\n                    <div>\r\n                      <h4 className=\"font-medium\">{template.name}</h4>\r\n                      <p className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>\r\n                        {template.subject}\r\n                      </p>\r\n                    </div>\r\n                    <span className={`px-2 py-1 rounded-full text-xs ${\r\n                      template.is_active ? 'bg-green-500/20 text-green-500' : 'bg-gray-500/20 text-gray-500'\r\n                    }`}>\r\n                      {template.is_active ? 'Ativo' : 'Inativo'}\r\n                    </span>\r\n                  </div>\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <button className=\"p-2 rounded-lg bg-blue-500/10 text-blue-500 hover:bg-blue-500/20 transition-colors\">\r\n                      <i className=\"ri-edit-line\"></i>\r\n                    </button>\r\n                    <button className=\"p-2 rounded-lg bg-purple-500/10 text-purple-500 hover:bg-purple-500/20 transition-colors\">\r\n                      <i className=\"ri-eye-line\"></i>\r\n                    </button>\r\n                    <button className=\"p-2 rounded-lg bg-red-500/10 text-red-500 hover:bg-red-500/20 transition-colors\">\r\n                      <i className=\"ri-delete-bin-line\"></i>\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              ))\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className={`p-6 rounded-xl ${darkMode ? 'bg-gray-900' : 'bg-gray-50'} border ${darkMode ? 'border-gray-800' : 'border-gray-200'}`}>\r\n        <div className=\"flex items-center justify-between mb-4\">\r\n          <h3 className=\"text-lg font-bold\">Tarefas Agendadas</h3>\r\n          <button className=\"px-4 py-2 bg-gradient-to-r from-green-500 to-green-600 text-white font-medium rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap\">\r\n            <i className=\"ri-add-line text-xl\"></i>\r\n            Nova Tarefa\r\n          </button>\r\n        </div>\r\n\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n          {tasks.length === 0 ? (\r\n            <p className={darkMode ? 'text-gray-400' : 'text-gray-600'}>Nenhuma tarefa agendada</p>\r\n          ) : (\r\n            tasks.map((task) => (\r\n              <div key={task.id} className={`p-4 rounded-lg ${darkMode ? 'bg-gray-800' : 'bg-white'} border ${darkMode ? 'border-gray-700' : 'border-gray-200'}`}>\r\n                <div className=\"flex items-center justify-between mb-3\">\r\n                  <h4 className=\"font-medium\">{task.name}</h4>\r\n                  <span className={`px-2 py-1 rounded-full text-xs ${\r\n                    task.is_active ? 'bg-green-500/20 text-green-500' : 'bg-gray-500/20 text-gray-500'\r\n                  }`}>\r\n                    {task.is_active ? 'Ativa' : 'Inativa'}\r\n                  </span>\r\n                </div>\r\n                <div className=\"space-y-2 text-sm\">\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <i className=\"ri-time-line text-gray-400\"></i>\r\n                    <span className={darkMode ? 'text-gray-400' : 'text-gray-600'}>\r\n                      {task.schedule_cron}\r\n                    </span>\r\n                  </div>\r\n                  {task.last_run && (\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <i className=\"ri-check-line text-green-500\"></i>\r\n                      <span className={darkMode ? 'text-gray-400' : 'text-gray-600'}>\r\n                        ltima execuo: {new Date(task.last_run).toLocaleString('pt-BR')}\r\n                      </span>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            ))\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import { useState, useEffect } from 'react';\r\nimport { supabase } from '../../../lib/supabase';\r\n\r\ninterface SupportManagementProps {\r\n  darkMode: boolean;\r\n}\r\n\r\nexport default function SupportManagement({ darkMode }: SupportManagementProps) {\r\n  const [tickets, setTickets] = useState<any[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [filterStatus, setFilterStatus] = useState('all');\r\n  const [filterPriority, setFilterPriority] = useState('all');\r\n  const [selectedTicket, setSelectedTicket] = useState<any>(null);\r\n\r\n  useEffect(() => {\r\n    loadTickets();\r\n  }, []);\r\n\r\n  const loadTickets = async () => {\r\n    try {\r\n      const { data, error } = await supabase\r\n        .from('support_tickets')\r\n        .select(`\r\n          *,\r\n          profiles!support_tickets_user_id_fkey(email, full_name)\r\n        `)\r\n        .order('created_at', { ascending: false });\r\n\r\n      if (error) throw error;\r\n      setTickets(data || []);\r\n    } catch (error) {\r\n      console.error('Erro ao carregar tickets:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleStatusChange = async (ticketId: string, newStatus: string) => {\r\n    try {\r\n      const { error } = await supabase\r\n        .from('support_tickets')\r\n        .update({ status: newStatus })\r\n        .eq('id', ticketId);\r\n\r\n      if (error) throw error;\r\n      await loadTickets();\r\n    } catch (error) {\r\n      console.error('Erro ao atualizar status:', error);\r\n    }\r\n  };\r\n\r\n  const controls = [\r\n    { id: 1, name: 'Chat Interno', icon: 'ri-chat-3-line' },\r\n    { id: 2, name: 'Sistema de Tickets', icon: 'ri-ticket-line' },\r\n    { id: 3, name: 'Import/Export Catlogo', icon: 'ri-file-transfer-line' },\r\n    { id: 4, name: 'Painel de Tarefas', icon: 'ri-task-line' },\r\n    { id: 5, name: 'Modo Manuteno', icon: 'ri-tools-line' },\r\n    { id: 6, name: 'Simular Pedido', icon: 'ri-shopping-cart-2-line' }\r\n  ];\r\n\r\n  const filteredTickets = tickets.filter(ticket => {\r\n    const matchesStatus = filterStatus === 'all' || ticket.status === filterStatus;\r\n    const matchesPriority = filterPriority === 'all' || ticket.priority === filterPriority;\r\n    return matchesStatus && matchesPriority;\r\n  });\r\n\r\n  const statusOptions = [\r\n    { value: 'open', label: 'Aberto', color: 'yellow' },\r\n    { value: 'in_progress', label: 'Em Progresso', color: 'blue' },\r\n    { value: 'waiting', label: 'Aguardando', color: 'purple' },\r\n    { value: 'resolved', label: 'Resolvido', color: 'green' },\r\n    { value: 'closed', label: 'Fechado', color: 'gray' }\r\n  ];\r\n\r\n  const priorityOptions = [\r\n    { value: 'low', label: 'Baixa', color: 'gray' },\r\n    { value: 'medium', label: 'Mdia', color: 'blue' },\r\n    { value: 'high', label: 'Alta', color: 'yellow' },\r\n    { value: 'urgent', label: 'Urgente', color: 'red' }\r\n  ];\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className={`p-6 rounded-xl ${darkMode ? 'bg-gray-900' : 'bg-gray-50'} border ${darkMode ? 'border-gray-800' : 'border-gray-200'}`}>\r\n        <h2 className=\"text-xl font-bold mb-4 flex items-center gap-2\">\r\n          <i className=\"ri-function-line text-yellow-500\"></i>\r\n          6+ Controles de Suporte & Operaes\r\n        </h2>\r\n        <div className=\"grid grid-cols-2 md:grid-cols-3 gap-3\">\r\n          {controls.map(control => (\r\n            <div\r\n              key={control.id}\r\n              className={`p-3 rounded-lg ${darkMode ? 'bg-gray-800' : 'bg-white'} border ${darkMode ? 'border-gray-700' : 'border-gray-200'}`}\r\n            >\r\n              <div className=\"flex items-center gap-2 mb-1\">\r\n                <i className={`${control.icon} text-yellow-500`}></i>\r\n                <span className=\"w-2 h-2 rounded-full bg-green-500\"></span>\r\n              </div>\r\n              <p className=\"text-xs font-medium\">{control.name}</p>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"flex flex-wrap items-center justify-between gap-4\">\r\n        <div className=\"flex items-center gap-3\">\r\n          <select\r\n            value={filterStatus}\r\n            onChange={(e) => setFilterStatus(e.target.value)}\r\n            className={`px-4 py-2 rounded-lg ${\r\n              darkMode ? 'bg-gray-800 border-gray-700' : 'bg-white border-gray-200'\r\n            } border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\r\n          >\r\n            <option value=\"all\">Todos Status</option>\r\n            {statusOptions.map(status => (\r\n              <option key={status.value} value={status.value}>{status.label}</option>\r\n            ))}\r\n          </select>\r\n\r\n          <select\r\n            value={filterPriority}\r\n            onChange={(e) => setFilterPriority(e.target.value)}\r\n            className={`px-4 py-2 rounded-lg ${\r\n              darkMode ? 'bg-gray-800 border-gray-700' : 'bg-white border-gray-200'\r\n            } border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\r\n          >\r\n            <option value=\"all\">Todas Prioridades</option>\r\n            {priorityOptions.map(priority => (\r\n              <option key={priority.value} value={priority.value}>{priority.label}</option>\r\n            ))}\r\n          </select>\r\n        </div>\r\n\r\n        <div className=\"flex items-center gap-2\">\r\n          <button className=\"px-6 py-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white font-medium rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap\">\r\n            <i className=\"ri-download-line text-xl\"></i>\r\n            Exportar Catlogo\r\n          </button>\r\n          <button className=\"px-6 py-2 bg-gradient-to-r from-green-500 to-green-600 text-white font-medium rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap\">\r\n            <i className=\"ri-upload-line text-xl\"></i>\r\n            Importar Catlogo\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\r\n        {statusOptions.map((status) => {\r\n          const count = tickets.filter(t => t.status === status.value).length;\r\n          return (\r\n            <div\r\n              key={status.value}\r\n              className={`p-4 rounded-xl ${darkMode ? 'bg-gray-900' : 'bg-gray-50'} border ${darkMode ? 'border-gray-800' : 'border-gray-200'}`}\r\n            >\r\n              <div className={`w-10 h-10 rounded-lg bg-${status.color}-500/20 flex items-center justify-center mb-3`}>\r\n                <i className={`ri-ticket-line text-xl text-${status.color}-500`}></i>\r\n              </div>\r\n              <p className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'} mb-1`}>{status.label}</p>\r\n              <p className=\"text-2xl font-bold\">{count}</p>\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n\r\n      <div className={`rounded-xl overflow-hidden ${darkMode ? 'bg-gray-900' : 'bg-gray-50'} border ${darkMode ? 'border-gray-800' : 'border-gray-200'}`}>\r\n        {loading ? (\r\n          <div className=\"flex items-center justify-center h-64\">\r\n            <div className=\"w-12 h-12 border-4 border-yellow-500 border-t-transparent rounded-full animate-spin\"></div>\r\n          </div>\r\n        ) : filteredTickets.length === 0 ? (\r\n          <div className=\"text-center py-12\">\r\n            <i className=\"ri-customer-service-line text-6xl text-gray-600 mb-4\"></i>\r\n            <p className={`text-lg ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>\r\n              Nenhum ticket encontrado\r\n            </p>\r\n          </div>\r\n        ) : (\r\n          <div className=\"overflow-x-auto\">\r\n            <table className=\"w-full\">\r\n              <thead className={darkMode ? 'bg-gray-800' : 'bg-gray-100'}>\r\n                <tr>\r\n                  <th className=\"px-6 py-4 text-left font-semibold\">ID</th>\r\n                  <th className=\"px-6 py-4 text-left font-semibold\">Assunto</th>\r\n                  <th className=\"px-6 py-4 text-left font-semibold\">Cliente</th>\r\n                  <th className=\"px-6 py-4 text-left font-semibold\">Prioridade</th>\r\n                  <th className=\"px-6 py-4 text-left font-semibold\">Status</th>\r\n                  <th className=\"px-6 py-4 text-left font-semibold\">Data</th>\r\n                  <th className=\"px-6 py-4 text-left font-semibold\">Aes</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {filteredTickets.map((ticket) => (\r\n                  <tr\r\n                    key={ticket.id}\r\n                    className={`border-t ${darkMode ? 'border-gray-800 hover:bg-gray-800' : 'border-gray-200 hover:bg-gray-50'} transition-colors`}\r\n                  >\r\n                    <td className=\"px-6 py-4\">\r\n                      <span className=\"font-mono text-sm\">#{ticket.id.slice(0, 8)}</span>\r\n                    </td>\r\n                    <td className=\"px-6 py-4\">\r\n                      <p className=\"font-medium\">{ticket.subject}</p>\r\n                      {ticket.category && (\r\n                        <span className={`text-xs ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>\r\n                          {ticket.category}\r\n                        </span>\r\n                      )}\r\n                    </td>\r\n                    <td className=\"px-6 py-4\">\r\n                      <div>\r\n                        <p className=\"font-medium\">{ticket.profiles?.full_name || 'N/A'}</p>\r\n                        <p className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>\r\n                          {ticket.profiles?.email}\r\n                        </p>\r\n                      </div>\r\n                    </td>\r\n                    <td className=\"px-6 py-4\">\r\n                      <span className={`px-3 py-1 rounded-full text-xs font-medium ${\r\n                        ticket.priority === 'urgent'\r\n                          ? 'bg-red-500/20 text-red-500'\r\n                          : ticket.priority === 'high'\r\n                          ? 'bg-yellow-500/20 text-yellow-500'\r\n                          : ticket.priority === 'medium'\r\n                          ? 'bg-blue-500/20 text-blue-500'\r\n                          : 'bg-gray-500/20 text-gray-500'\r\n                      }`}>\r\n                        {priorityOptions.find(p => p.value === ticket.priority)?.label}\r\n                      </span>\r\n                    </td>\r\n                    <td className=\"px-6 py-4\">\r\n                      <select\r\n                        value={ticket.status}\r\n                        onChange={(e) => handleStatusChange(ticket.id, e.target.value)}\r\n                        className={`px-3 py-1 rounded-full text-xs font-medium ${\r\n                          ticket.status === 'resolved'\r\n                            ? 'bg-green-500/20 text-green-500'\r\n                            : ticket.status === 'open'\r\n                            ? 'bg-yellow-500/20 text-yellow-500'\r\n                            : ticket.status === 'closed'\r\n                            ? 'bg-gray-500/20 text-gray-500'\r\n                            : 'bg-blue-500/20 text-blue-500'\r\n                        } border-none cursor-pointer`}\r\n                      >\r\n                        {statusOptions.map(status => (\r\n                          <option key={status.value} value={status.value}>{status.label}</option>\r\n                        ))}\r\n                      </select>\r\n                    </td>\r\n                    <td className=\"px-6 py-4\">\r\n                      <span className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>\r\n                        {new Date(ticket.created_at).toLocaleDateString('pt-BR')}\r\n                      </span>\r\n                    </td>\r\n                    <td className=\"px-6 py-4\">\r\n                      <div className=\"flex items-center gap-2\">\r\n                        <button\r\n                          onClick={() => setSelectedTicket(ticket)}\r\n                          className=\"p-2 rounded-lg bg-blue-500/10 text-blue-500 hover:bg-blue-500/20 transition-colors\"\r\n                          title=\"Ver detalhes\"\r\n                        >\r\n                          <i className=\"ri-eye-line\"></i>\r\n                        </button>\r\n                        <button\r\n                          className=\"p-2 rounded-lg bg-green-500/10 text-green-500 hover:bg-green-500/20 transition-colors\"\r\n                          title=\"Responder\"\r\n                        >\r\n                          <i className=\"ri-reply-line\"></i>\r\n                        </button>\r\n                      </div>\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n        <div className={`p-6 rounded-xl ${darkMode ? 'bg-gray-900' : 'bg-gray-50'} border ${darkMode ? 'border-gray-800' : 'border-gray-200'}`}>\r\n          <h3 className=\"text-lg font-bold mb-4\">Ferramentas de Operao</h3>\r\n          <div className=\"space-y-3\">\r\n            <button className=\"w-full p-4 rounded-lg bg-gradient-to-r from-blue-500 to-blue-600 text-white text-left hover:opacity-90 transition-opacity\">\r\n              <div className=\"flex items-center gap-3\">\r\n                <i className=\"ri-shopping-cart-2-line text-2xl\"></i>\r\n                <div>\r\n                  <p className=\"font-medium\">Simular Pedido</p>\r\n                  <p className=\"text-sm opacity-80\">Testar fluxo completo de compra</p>\r\n                </div>\r\n              </div>\r\n            </button>\r\n\r\n            <button className=\"w-full p-4 rounded-lg bg-gradient-to-r from-yellow-500 to-yellow-600 text-black text-left hover:opacity-90 transition-opacity\">\r\n              <div className=\"flex items-center gap-3\">\r\n                <i className=\"ri-tools-line text-2xl\"></i>\r\n                <div>\r\n                  <p className=\"font-medium\">Modo Manuteno</p>\r\n                  <p className=\"text-sm opacity-80\">Ativar/desativar site temporariamente</p>\r\n                </div>\r\n              </div>\r\n            </button>\r\n\r\n            <button className=\"w-full p-4 rounded-lg bg-gradient-to-r from-purple-500 to-purple-600 text-white text-left hover:opacity-90 transition-opacity\">\r\n              <div className=\"flex items-center gap-3\">\r\n                <i className=\"ri-task-line text-2xl\"></i>\r\n                <div>\r\n                  <p className=\"font-medium\">Painel de Tarefas</p>\r\n                  <p className=\"text-sm opacity-80\">Gerenciar tarefas da equipe</p>\r\n                </div>\r\n              </div>\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        <div className={`p-6 rounded-xl ${darkMode ? 'bg-gray-900' : 'bg-gray-50'} border ${darkMode ? 'border-gray-800' : 'border-gray-200'}`}>\r\n          <h3 className=\"text-lg font-bold mb-4\">Estatsticas de Suporte</h3>\r\n          <div className=\"space-y-4\">\r\n            <div>\r\n              <div className=\"flex items-center justify-between mb-2\">\r\n                <span className={darkMode ? 'text-gray-400' : 'text-gray-600'}>Tempo Mdio de Resposta</span>\r\n                <span className=\"font-bold text-yellow-500\">2.5h</span>\r\n              </div>\r\n              <div className=\"w-full bg-gray-700 rounded-full h-2\">\r\n                <div className=\"bg-yellow-500 h-2 rounded-full\" style={{ width: '75%' }}></div>\r\n              </div>\r\n            </div>\r\n\r\n            <div>\r\n              <div className=\"flex items-center justify-between mb-2\">\r\n                <span className={darkMode ? 'text-gray-400' : 'text-gray-600'}>Taxa de Resoluo</span>\r\n                <span className=\"font-bold text-green-500\">87%</span>\r\n              </div>\r\n              <div className=\"w-full bg-gray-700 rounded-full h-2\">\r\n                <div className=\"bg-green-500 h-2 rounded-full\" style={{ width: '87%' }}></div>\r\n              </div>\r\n            </div>\r\n\r\n            <div>\r\n              <div className=\"flex items-center justify-between mb-2\">\r\n                <span className={darkMode ? 'text-gray-400' : 'text-gray-600'}>Satisfao do Cliente</span>\r\n                <span className=\"font-bold text-blue-500\">4.6/5.0</span>\r\n              </div>\r\n              <div className=\"w-full bg-gray-700 rounded-full h-2\">\r\n                <div className=\"bg-blue-500 h-2 rounded-full\" style={{ width: '92%' }}></div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","\r\nimport { useState, useEffect } from 'react';\r\nimport { supabase } from '../../../lib/supabase';\r\n\r\ninterface ShippingManagementProps {\r\n  darkMode: boolean;\r\n}\r\n\r\nexport default function ShippingManagement({ darkMode }: ShippingManagementProps) {\r\n  const [shippingRules, setShippingRules] = useState<any[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [showModal, setShowModal] = useState(false);\r\n  const [editingRule, setEditingRule] = useState<any>(null);\r\n\r\n  const [formData, setFormData] = useState({\r\n    name: '',\r\n    country: '',\r\n    region: '',\r\n    method: 'standard',\r\n    base_cost: 0,\r\n    cost_per_kg: 0,\r\n    cost_per_item: 0,\r\n    free_shipping_threshold: 0,\r\n    min_delivery_days: 3,\r\n    max_delivery_days: 7,\r\n    is_active: true,\r\n    is_dropshipping: false,\r\n    carrier: '',\r\n    tracking_enabled: true,\r\n  });\r\n\r\n  useEffect(() => {\r\n    loadShippingRules();\r\n  }, []);\r\n\r\n  const loadShippingRules = async () => {\r\n    setLoading(true);\r\n    const { data } = await supabase\r\n      .from('shipping_rules')\r\n      .select('*')\r\n      .order('country');\r\n    setShippingRules(data || []);\r\n    setLoading(false);\r\n  };\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    try {\r\n      if (editingRule) {\r\n        const { error } = await supabase\r\n          .from('shipping_rules')\r\n          .update(formData)\r\n          .eq('id', editingRule.id);\r\n        if (error) throw error;\r\n      } else {\r\n        const { error } = await supabase\r\n          .from('shipping_rules')\r\n          .insert([formData]);\r\n        if (error) throw error;\r\n      }\r\n      alert('Regra de envio salva com sucesso!');\r\n      setShowModal(false);\r\n      resetForm();\r\n      loadShippingRules();\r\n    } catch (error) {\r\n      console.error('Erro:', error);\r\n      alert('Erro ao salvar regra de envio');\r\n    }\r\n  };\r\n\r\n  const handleEdit = (rule: any) => {\r\n    setEditingRule(rule);\r\n    setFormData(rule);\r\n    setShowModal(true);\r\n  };\r\n\r\n  const handleDelete = async (id: string) => {\r\n    if (!confirm('Tem certeza que deseja excluir esta regra?')) return;\r\n    const { error } = await supabase.from('shipping_rules').delete().eq('id', id);\r\n    if (!error) {\r\n      alert('Regra excluda com sucesso!');\r\n      loadShippingRules();\r\n    }\r\n  };\r\n\r\n  const resetForm = () => {\r\n    setFormData({\r\n      name: '',\r\n      country: '',\r\n      region: '',\r\n      method: 'standard',\r\n      base_cost: 0,\r\n      cost_per_kg: 0,\r\n      cost_per_item: 0,\r\n      free_shipping_threshold: 0,\r\n      min_delivery_days: 3,\r\n      max_delivery_days: 7,\r\n      is_active: true,\r\n      is_dropshipping: false,\r\n      carrier: '',\r\n      tracking_enabled: true,\r\n    });\r\n    setEditingRule(null);\r\n  };\r\n\r\n  const countries = [\r\n    'Portugal', 'Frana', 'Alemanha', 'Espanha', 'Itlia', 'Luxemburgo',\r\n    'Blgica', 'Holanda', 'Reino Unido', 'Sua', 'ustria', 'Brasil'\r\n  ];\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"flex items-center justify-between\">\r\n        <div>\r\n          <h2 className=\"text-2xl font-bold flex items-center gap-2\">\r\n            <i className=\"ri-truck-line text-yellow-500\"></i>\r\n            Gesto de Envios & Logstica\r\n          </h2>\r\n          <p className=\"text-gray-400 mt-1\">Configure taxas de envio por pas, peso e mtodo</p>\r\n        </div>\r\n        <button\r\n          onClick={() => {\r\n            resetForm();\r\n            setShowModal(true);\r\n          }}\r\n          className=\"px-4 py-2 bg-gradient-to-r from-yellow-500 to-yellow-600 text-black font-medium rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap\"\r\n        >\r\n          <i className=\"ri-add-line\"></i>\r\n          Nova Regra de Envio\r\n        </button>\r\n      </div>\r\n\r\n      {/* Estatsticas */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\r\n        <div className={`${darkMode ? 'bg-gray-800' : 'bg-white'} rounded-xl p-6`}>\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <p className=\"text-gray-400 text-sm\">Total de Regras</p>\r\n              <p className=\"text-2xl font-bold mt-1\">{shippingRules.length}</p>\r\n            </div>\r\n            <div className=\"w-12 h-12 bg-blue-500/10 rounded-lg flex items-center justify-center\">\r\n              <i className=\"ri-list-check text-2xl text-blue-500\"></i>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className={`${darkMode ? 'bg-gray-800' : 'bg-white'} rounded-xl p-6`}>\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <p className=\"text-gray-400 text-sm\">Regras Ativas</p>\r\n              <p className=\"text-2xl font-bold mt-1\">\r\n                {shippingRules.filter(r => r.is_active).length}\r\n              </p>\r\n            </div>\r\n            <div className=\"w-12 h-12 bg-green-500/10 rounded-lg flex items-center justify-center\">\r\n              <i className=\"ri-checkbox-circle-line text-2xl text-green-500\"></i>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className={`${darkMode ? 'bg-gray-800' : 'bg-white'} rounded-xl p-6`}>\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <p className=\"text-gray-400 text-sm\">Pases Cobertos</p>\r\n              <p className=\"text-2xl font-bold mt-1\">\r\n                {new Set(shippingRules.map(r => r.country)).size}\r\n              </p>\r\n            </div>\r\n            <div className=\"w-12 h-12 bg-purple-500/10 rounded-lg flex items-center justify-center\">\r\n              <i className=\"ri-global-line text-2xl text-purple-500\"></i>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className={`${darkMode ? 'bg-gray-800' : 'bg-white'} rounded-xl p-6`}>\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <p className=\"text-gray-400 text-sm\">Dropshipping</p>\r\n              <p className=\"text-2xl font-bold mt-1\">\r\n                {shippingRules.filter(r => r.is_dropshipping).length}\r\n              </p>\r\n            </div>\r\n            <div className=\"w-12 h-12 bg-yellow-500/10 rounded-lg flex items-center justify-center\">\r\n              <i className=\"ri-box-3-line text-2xl text-yellow-500\"></i>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Lista de Regras */}\r\n      <div className={`${darkMode ? 'bg-gray-800' : 'bg-white'} rounded-xl overflow-hidden`}>\r\n        <div className=\"overflow-x-auto\">\r\n          <table className=\"w-full\">\r\n            <thead className={`${darkMode ? 'bg-gray-900' : 'bg-gray-50'}`}>\r\n              <tr>\r\n                <th className=\"px-6 py-4 text-left text-sm font-semibold\">Nome</th>\r\n                <th className=\"px-6 py-4 text-left text-sm font-semibold\">Pas/Regio</th>\r\n                <th className=\"px-6 py-4 text-left text-sm font-semibold\">Mtodo</th>\r\n                <th className=\"px-6 py-4 text-left text-sm font-semibold\">Custo Base</th>\r\n                <th className=\"px-6 py-4 text-left text-sm font-semibold\">Por Kg</th>\r\n                <th className=\"px-6 py-4 text-left text-sm font-semibold\">Prazo</th>\r\n                <th className=\"px-6 py-4 text-left text-sm font-semibold\">Status</th>\r\n                <th className=\"px-6 py-4 text-left text-sm font-semibold\">Aes</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody className=\"divide-y divide-gray-700\">\r\n              {loading ? (\r\n                <tr>\r\n                  <td colSpan={8} className=\"px-6 py-12 text-center\">\r\n                    <div className=\"flex items-center justify-center gap-2\">\r\n                      <div className=\"w-5 h-5 border-2 border-yellow-500 border-t-transparent rounded-full animate-spin\"></div>\r\n                      Carregando...\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n              ) : shippingRules.length === 0 ? (\r\n                <tr>\r\n                  <td colSpan={8} className=\"px-6 py-12 text-center text-gray-400\">\r\n                    Nenhuma regra de envio cadastrada\r\n                  </td>\r\n                </tr>\r\n              ) : (\r\n                shippingRules.map((rule) => (\r\n                  <tr key={rule.id} className=\"hover:bg-gray-700/50 transition-colors\">\r\n                    <td className=\"px-6 py-4\">\r\n                      <div className=\"flex items-center gap-2\">\r\n                        <i className={`ri-${rule.is_dropshipping ? 'box-3' : 'truck'}-line text-yellow-500`}></i>\r\n                        <span className=\"font-medium\">{rule.name}</span>\r\n                      </div>\r\n                    </td>\r\n                    <td className=\"px-6 py-4\">\r\n                      <div>\r\n                        <p className=\"font-medium\">{rule.country}</p>\r\n                        {rule.region && <p className=\"text-sm text-gray-400\">{rule.region}</p>}\r\n                      </div>\r\n                    </td>\r\n                    <td className=\"px-6 py-4\">\r\n                      <span className=\"px-2 py-1 bg-blue-500/10 text-blue-500 rounded text-xs font-medium\">\r\n                        {rule.method}\r\n                      </span>\r\n                    </td>\r\n                    <td className=\"px-6 py-4 font-medium\">{rule.base_cost.toFixed(2)}</td>\r\n                    <td className=\"px-6 py-4 text-gray-400\">{rule.cost_per_kg.toFixed(2)}</td>\r\n                    <td className=\"px-6 py-4 text-sm text-gray-400\">\r\n                      {rule.min_delivery_days}-{rule.max_delivery_days} dias\r\n                    </td>\r\n                    <td className=\"px-6 py-4\">\r\n                      <span className={`px-2 py-1 rounded text-xs font-medium ${\r\n                        rule.is_active \r\n                          ? 'bg-green-500/10 text-green-500' \r\n                          : 'bg-red-500/10 text-red-500'\r\n                      }`}>\r\n                        {rule.is_active ? 'Ativo' : 'Inativo'}\r\n                      </span>\r\n                    </td>\r\n                    <td className=\"px-6 py-4\">\r\n                      <div className=\"flex items-center gap-2\">\r\n                        <button\r\n                          onClick={() => handleEdit(rule)}\r\n                          className=\"p-2 hover:bg-gray-700 rounded-lg transition-colors\"\r\n                          title=\"Editar\"\r\n                        >\r\n                          <i className=\"ri-edit-line text-blue-500\"></i>\r\n                        </button>\r\n                        <button\r\n                          onClick={() => handleDelete(rule.id)}\r\n                          className=\"p-2 hover:bg-gray-700 rounded-lg transition-colors\"\r\n                          title=\"Excluir\"\r\n                        >\r\n                          <i className=\"ri-delete-bin-line text-red-500\"></i>\r\n                        </button>\r\n                      </div>\r\n                    </td>\r\n                  </tr>\r\n                ))\r\n              )}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Modal de Formulrio */}\r\n      {showModal && (\r\n        <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\">\r\n          <div className={`${darkMode ? 'bg-gray-900' : 'bg-white'} rounded-xl max-w-3xl w-full max-h-[90vh] overflow-y-auto`}>\r\n            <div className={`sticky top-0 ${darkMode ? 'bg-gray-900' : 'bg-white'} border-b ${darkMode ? 'border-gray-800' : 'border-gray-200'} p-6 flex items-center justify-between`}>\r\n              <h3 className=\"text-xl font-bold\">\r\n                {editingRule ? 'Editar Regra de Envio' : 'Nova Regra de Envio'}\r\n              </h3>\r\n              <button\r\n                onClick={() => {\r\n                  setShowModal(false);\r\n                  resetForm();\r\n                }}\r\n                className=\"p-2 hover:bg-gray-800 rounded-lg transition-colors\"\r\n              >\r\n                <i className=\"ri-close-line text-xl\"></i>\r\n              </button>\r\n            </div>\r\n\r\n            <form onSubmit={handleSubmit} className=\"p-6 space-y-6\">\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                <div>\r\n                  <label className=\"block text-sm font-medium mb-2\">Nome da Regra *</label>\r\n                  <input\r\n                    type=\"text\"\r\n                    required\r\n                    value={formData.name}\r\n                    onChange={(e) => setFormData({ ...formData, name: e.target.value })}\r\n                    placeholder=\"Ex: Envio Standard Portugal\"\r\n                    className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\r\n                  />\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm font-medium mb-2\">Pas *</label>\r\n                  <select\r\n                    required\r\n                    value={formData.country}\r\n                    onChange={(e) => setFormData({ ...formData, country: e.target.value })}\r\n                    className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\r\n                  >\r\n                    <option value=\"\">Selecione...</option>\r\n                    {countries.map(country => (\r\n                      <option key={country} value={country}>{country}</option>\r\n                    ))}\r\n                  </select>\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm font-medium mb-2\">Regio (Opcional)</label>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={formData.region}\r\n                    onChange={(e) => setFormData({ ...formData, region: e.target.value })}\r\n                    placeholder=\"Ex: Lisboa, Porto\"\r\n                    className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\r\n                  />\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm font-medium mb-2\">Mtodo de Envio</label>\r\n                  <select\r\n                    value={formData.method}\r\n                    onChange={(e) => setFormData({ ...formData, method: e.target.value })}\r\n                    className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\r\n                  >\r\n                    <option value=\"standard\">Standard</option>\r\n                    <option value=\"express\">Express</option>\r\n                    <option value=\"priority\">Priority</option>\r\n                    <option value=\"economy\">Economy</option>\r\n                  </select>\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm font-medium mb-2\">Transportadora</label>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={formData.carrier}\r\n                    onChange={(e) => setFormData({ ...formData, carrier: e.target.value })}\r\n                    placeholder=\"Ex: CTT, DHL, UPS\"\r\n                    className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\r\n                  />\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm font-medium mb-2\">Custo Base ()</label>\r\n                  <input\r\n                    type=\"number\"\r\n                    step=\"0.01\"\r\n                    value={formData.base_cost}\r\n                    onChange={(e) => setFormData({ ...formData, base_cost: parseFloat(e.target.value) })}\r\n                    className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\r\n                  />\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm font-medium mb-2\">Custo por Kg ()</label>\r\n                  <input\r\n                    type=\"number\"\r\n                    step=\"0.01\"\r\n                    value={formData.cost_per_kg}\r\n                    onChange={(e) => setFormData({ ...formData, cost_per_kg: parseFloat(e.target.value) })}\r\n                    className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\r\n                  />\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm font-medium mb-2\">Custo por Item ()</label>\r\n                  <input\r\n                    type=\"number\"\r\n                    step=\"0.01\"\r\n                    value={formData.cost_per_item}\r\n                    onChange={(e) => setFormData({ ...formData, cost_per_item: parseFloat(e.target.value) })}\r\n                    className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\r\n                  />\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm font-medium mb-2\">Envio Grtis Acima de ()</label>\r\n                  <input\r\n                    type=\"number\"\r\n                    step=\"0.01\"\r\n                    value={formData.free_shipping_threshold}\r\n                    onChange={(e) => setFormData({ ...formData, free_shipping_threshold: parseFloat(e.target.value) })}\r\n                    className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\r\n                  />\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm font-medium mb-2\">Prazo Mnimo (dias)</label>\r\n                  <input\r\n                    type=\"number\"\r\n                    value={formData.min_delivery_days}\r\n                    onChange={(e) => setFormData({ ...formData, min_delivery_days: parseInt(e.target.value) })}\r\n                    className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\r\n                  />\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm font-medium mb-2\">Prazo Mximo (dias)</label>\r\n                  <input\r\n                    type=\"number\"\r\n                    value={formData.max_delivery_days}\r\n                    onChange={(e) => setFormData({ ...formData, max_delivery_days: parseInt(e.target.value) })}\r\n                    className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"space-y-3\">\r\n                <div className=\"flex items-center gap-2\">\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    id=\"is_active\"\r\n                    checked={formData.is_active}\r\n                    onChange={(e) => setFormData({ ...formData, is_active: e.target.checked })}\r\n                    className=\"w-4 h-4 rounded border-gray-300\"\r\n                  />\r\n                  <label htmlFor=\"is_active\" className=\"text-sm font-medium\">Regra Ativa</label>\r\n                </div>\r\n\r\n                <div className=\"flex items-center gap-2\">\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    id=\"is_dropshipping\"\r\n                    checked={formData.is_dropshipping}\r\n                    onChange={(e) => setFormData({ ...formData, is_dropshipping: e.target.checked })}\r\n                    className=\"w-4 h-4 rounded border-gray-300\"\r\n                  />\r\n                  <label htmlFor=\"is_dropshipping\" className=\"text-sm font-medium\">Dropshipping</label>\r\n                </div>\r\n\r\n                <div className=\"flex items-center gap-2\">\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    id=\"tracking_enabled\"\r\n                    checked={formData.tracking_enabled}\r\n                    onChange={(e) => setFormData({ ...formData, tracking_enabled: e.target.checked })}\r\n                    className=\"w-4 h-4 rounded border-gray-300\"\r\n                  />\r\n                  <label htmlFor=\"tracking_enabled\" className=\"text-sm font-medium\">Rastreamento Habilitado</label>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"flex items-center justify-end gap-4 pt-6 border-t border-gray-800\">\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={() => {\r\n                    setShowModal(false);\r\n                    resetForm();\r\n                  }}\r\n                  className=\"px-6 py-2 rounded-lg border border-gray-700 hover:bg-gray-800 transition-colors whitespace-nowrap\"\r\n                >\r\n                  Cancelar\r\n                </button>\r\n                <button\r\n                  type=\"submit\"\r\n                  className=\"px-6 py-2 bg-gradient-to-r from-yellow-500 to-yellow-600 text-black font-medium rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap\"\r\n                >\r\n                  <i className=\"ri-save-line\"></i>\r\n                  Salvar Regra\r\n                </button>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","\r\nimport { useState, useEffect } from 'react';\r\nimport { supabase } from '../../../lib/supabase';\r\n\r\ninterface TaxManagementProps {\r\n  darkMode: boolean;\r\n}\r\n\r\nexport default function TaxManagement({ darkMode }: TaxManagementProps) {\r\n  const [taxRules, setTaxRules] = useState<any[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [showModal, setShowModal] = useState(false);\r\n  const [editingRule, setEditingRule] = useState<any>(null);\r\n\r\n  const [formData, setFormData] = useState({\r\n    name: '',\r\n    country: '',\r\n    region: '',\r\n    tax_type: 'vat',\r\n    rate: 23,\r\n    is_default: false,\r\n    is_active: true,\r\n    applies_to: 'all',\r\n    product_categories: '',\r\n    min_amount: 0,\r\n    max_amount: 0,\r\n    is_compound: false,\r\n    priority: 1,\r\n  });\r\n\r\n  useEffect(() => {\r\n    loadTaxRules();\r\n  }, []);\r\n\r\n  const loadTaxRules = async () => {\r\n    setLoading(true);\r\n    const { data } = await supabase\r\n      .from('tax_settings')\r\n      .select('*')\r\n      .order('country');\r\n    setTaxRules(data || []);\r\n    setLoading(false);\r\n  };\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    try {\r\n      if (editingRule) {\r\n        const { error } = await supabase\r\n          .from('tax_settings')\r\n          .update(formData)\r\n          .eq('id', editingRule.id);\r\n        if (error) throw error;\r\n      } else {\r\n        const { error } = await supabase\r\n          .from('tax_settings')\r\n          .insert([formData]);\r\n        if (error) throw error;\r\n      }\r\n      alert('Regra de IVA salva com sucesso!');\r\n      setShowModal(false);\r\n      resetForm();\r\n      loadTaxRules();\r\n    } catch (error) {\r\n      console.error('Erro:', error);\r\n      alert('Erro ao salvar regra de IVA');\r\n    }\r\n  };\r\n\r\n  const handleEdit = (rule: any) => {\r\n    setEditingRule(rule);\r\n    setFormData(rule);\r\n    setShowModal(true);\r\n  };\r\n\r\n  const handleDelete = async (id: string) => {\r\n    if (!confirm('Tem certeza que deseja excluir esta regra?')) return;\r\n    const { error } = await supabase.from('tax_settings').delete().eq('id', id);\r\n    if (!error) {\r\n      alert('Regra excluda com sucesso!');\r\n      loadTaxRules();\r\n    }\r\n  };\r\n\r\n  const resetForm = () => {\r\n    setFormData({\r\n      name: '',\r\n      country: '',\r\n      region: '',\r\n      tax_type: 'vat',\r\n      rate: 23,\r\n      is_default: false,\r\n      is_active: true,\r\n      applies_to: 'all',\r\n      product_categories: '',\r\n      min_amount: 0,\r\n      max_amount: 0,\r\n      is_compound: false,\r\n      priority: 1,\r\n    });\r\n    setEditingRule(null);\r\n  };\r\n\r\n  const countries = [\r\n    { name: 'Portugal', defaultVat: 23 },\r\n    { name: 'Frana', defaultVat: 20 },\r\n    { name: 'Alemanha', defaultVat: 19 },\r\n    { name: 'Espanha', defaultVat: 21 },\r\n    { name: 'Itlia', defaultVat: 22 },\r\n    { name: 'Luxemburgo', defaultVat: 17 },\r\n    { name: 'Blgica', defaultVat: 21 },\r\n    { name: 'Holanda', defaultVat: 21 },\r\n    { name: 'Reino Unido', defaultVat: 20 },\r\n    { name: 'Sua', defaultVat: 7.7 },\r\n    { name: 'ustria', defaultVat: 20 },\r\n    { name: 'Brasil', defaultVat: 17 },\r\n  ];\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"flex items-center justify-between\">\r\n        <div>\r\n          <h2 className=\"text-2xl font-bold flex items-center gap-2\">\r\n            <i className=\"ri-percent-line text-yellow-500\"></i>\r\n            Gesto de IVA / TVA / Impostos\r\n          </h2>\r\n          <p className=\"text-gray-400 mt-1\">Configure taxas de IVA por pas e categoria</p>\r\n        </div>\r\n        <button\r\n          onClick={() => {\r\n            resetForm();\r\n            setShowModal(true);\r\n          }}\r\n          className=\"px-4 py-2 bg-gradient-to-r from-yellow-500 to-yellow-600 text-black font-medium rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap\"\r\n        >\r\n          <i className=\"ri-add-line\"></i>\r\n          Nova Regra de IVA\r\n        </button>\r\n      </div>\r\n\r\n      {/* Estatsticas */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\r\n        <div className={`${darkMode ? 'bg-gray-800' : 'bg-white'} rounded-xl p-6`}>\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <p className=\"text-gray-400 text-sm\">Total de Regras</p>\r\n              <p className=\"text-2xl font-bold mt-1\">{taxRules.length}</p>\r\n            </div>\r\n            <div className=\"w-12 h-12 bg-blue-500/10 rounded-lg flex items-center justify-center\">\r\n              <i className=\"ri-list-check text-2xl text-blue-500\"></i>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className={`${darkMode ? 'bg-gray-800' : 'bg-white'} rounded-xl p-6`}>\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <p className=\"text-gray-400 text-sm\">Regras Ativas</p>\r\n              <p className=\"text-2xl font-bold mt-1\">\r\n                {taxRules.filter(r => r.is_active).length}\r\n              </p>\r\n            </div>\r\n            <div className=\"w-12 h-12 bg-green-500/10 rounded-lg flex items-center justify-center\">\r\n              <i className=\"ri-checkbox-circle-line text-2xl text-green-500\"></i>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className={`${darkMode ? 'bg-gray-800' : 'bg-white'} rounded-xl p-6`}>\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <p className=\"text-gray-400 text-sm\">Pases Cobertos</p>\r\n              <p className=\"text-2xl font-bold mt-1\">\r\n                {new Set(taxRules.map(r => r.country)).size}\r\n              </p>\r\n            </div>\r\n            <div className=\"w-12 h-12 bg-purple-500/10 rounded-lg flex items-center justify-center\">\r\n              <i className=\"ri-global-line text-2xl text-purple-500\"></i>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className={`${darkMode ? 'bg-gray-800' : 'bg-white'} rounded-xl p-6`}>\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <p className=\"text-gray-400 text-sm\">Taxa Mdia</p>\r\n              <p className=\"text-2xl font-bold mt-1\">\r\n                {taxRules.length > 0 \r\n                  ? (taxRules.reduce((acc, r) => acc + r.rate, 0) / taxRules.length).toFixed(1)\r\n                  : 0}%\r\n              </p>\r\n            </div>\r\n            <div className=\"w-12 h-12 bg-yellow-500/10 rounded-lg flex items-center justify-center\">\r\n              <i className=\"ri-percent-line text-2xl text-yellow-500\"></i>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Informao IOSS */}\r\n      <div className={`${darkMode ? 'bg-gradient-to-r from-blue-900/20 to-purple-900/20 border-blue-500/30' : 'bg-blue-50 border-blue-200'} border rounded-xl p-6`}>\r\n        <div className=\"flex items-start gap-4\">\r\n          <div className=\"w-12 h-12 bg-blue-500/10 rounded-lg flex items-center justify-center flex-shrink-0\">\r\n            <i className=\"ri-information-line text-2xl text-blue-500\"></i>\r\n          </div>\r\n          <div>\r\n            <h3 className=\"text-lg font-semibold mb-2\">Modo IOSS Ready</h3>\r\n            <p className=\"text-sm text-gray-400 mb-3\">\r\n              O sistema est preparado para o regime IOSS (Import One-Stop Shop) da Unio Europeia. \r\n              Configure as taxas de IVA por pas para vendas B2C dentro da UE.\r\n            </p>\r\n            <div className=\"flex items-center gap-4 text-sm\">\r\n              <div className=\"flex items-center gap-2\">\r\n                <i className=\"ri-checkbox-circle-line text-green-500\"></i>\r\n                <span>Clculo automtico de IVA</span>\r\n              </div>\r\n              <div className=\"flex items-center gap-2\">\r\n                <i className=\"ri-checkbox-circle-line text-green-500\"></i>\r\n                <span>Breakdown detalhado no checkout</span>\r\n              </div>\r\n              <div className=\"flex items-center gap-2\">\r\n                <i className=\"ri-checkbox-circle-line text-green-500\"></i>\r\n                <span>Suporte a dropshipping UE/Extra-UE</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Lista de Regras */}\r\n      <div className={`${darkMode ? 'bg-gray-800' : 'bg-white'} rounded-xl overflow-hidden`}>\r\n        <div className=\"overflow-x-auto\">\r\n          <table className=\"w-full\">\r\n            <thead className={`${darkMode ? 'bg-gray-900' : 'bg-gray-50'}`}>\r\n              <tr>\r\n                <th className=\"px-6 py-4 text-left text-sm font-semibold\">Nome</th>\r\n                <th className=\"px-6 py-4 text-left text-sm font-semibold\">Pas/Regio</th>\r\n                <th className=\"px-6 py-4 text-left text-sm font-semibold\">Tipo</th>\r\n                <th className=\"px-6 py-4 text-left text-sm font-semibold\">Taxa (%)</th>\r\n                <th className=\"px-6 py-4 text-left text-sm font-semibold\">Aplica-se a</th>\r\n                <th className=\"px-6 py-4 text-left text-sm font-semibold\">Prioridade</th>\r\n                <th className=\"px-6 py-4 text-left text-sm font-semibold\">Status</th>\r\n                <th className=\"px-6 py-4 text-left text-sm font-semibold\">Aes</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody className=\"divide-y divide-gray-700\">\r\n              {loading ? (\r\n                <tr>\r\n                  <td colSpan={8} className=\"px-6 py-12 text-center\">\r\n                    <div className=\"flex items-center justify-center gap-2\">\r\n                      <div className=\"w-5 h-5 border-2 border-yellow-500 border-t-transparent rounded-full animate-spin\"></div>\r\n                      Carregando...\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n              ) : taxRules.length === 0 ? (\r\n                <tr>\r\n                  <td colSpan={8} className=\"px-6 py-12 text-center text-gray-400\">\r\n                    Nenhuma regra de IVA cadastrada\r\n                  </td>\r\n                </tr>\r\n              ) : (\r\n                taxRules.map((rule) => (\r\n                  <tr key={rule.id} className=\"hover:bg-gray-700/50 transition-colors\">\r\n                    <td className=\"px-6 py-4\">\r\n                      <div className=\"flex items-center gap-2\">\r\n                        <i className=\"ri-percent-line text-yellow-500\"></i>\r\n                        <span className=\"font-medium\">{rule.name}</span>\r\n                        {rule.is_default && (\r\n                          <span className=\"px-2 py-0.5 bg-blue-500/10 text-blue-500 rounded text-xs font-medium\">\r\n                            Padro\r\n                          </span>\r\n                        )}\r\n                      </div>\r\n                    </td>\r\n                    <td className=\"px-6 py-4\">\r\n                      <div>\r\n                        <p className=\"font-medium\">{rule.country}</p>\r\n                        {rule.region && <p className=\"text-sm text-gray-400\">{rule.region}</p>}\r\n                      </div>\r\n                    </td>\r\n                    <td className=\"px-6 py-4\">\r\n                      <span className=\"px-2 py-1 bg-purple-500/10 text-purple-500 rounded text-xs font-medium uppercase\">\r\n                        {rule.tax_type}\r\n                      </span>\r\n                    </td>\r\n                    <td className=\"px-6 py-4\">\r\n                      <span className=\"text-lg font-bold text-yellow-500\">{rule.rate}%</span>\r\n                    </td>\r\n                    <td className=\"px-6 py-4 text-sm text-gray-400\">\r\n                      {rule.applies_to === 'all' ? 'Todos os produtos' : rule.applies_to}\r\n                    </td>\r\n                    <td className=\"px-6 py-4\">\r\n                      <span className=\"px-2 py-1 bg-gray-700 rounded text-xs font-medium\">\r\n                        {rule.priority}\r\n                      </span>\r\n                    </td>\r\n                    <td className=\"px-6 py-4\">\r\n                      <span className={`px-2 py-1 rounded text-xs font-medium ${\r\n                        rule.is_active \r\n                          ? 'bg-green-500/10 text-green-500' \r\n                          : 'bg-red-500/10 text-red-500'\r\n                      }`}>\r\n                        {rule.is_active ? 'Ativo' : 'Inativo'}\r\n                      </span>\r\n                    </td>\r\n                    <td className=\"px-6 py-4\">\r\n                      <div className=\"flex items-center gap-2\">\r\n                        <button\r\n                          onClick={() => handleEdit(rule)}\r\n                          className=\"p-2 hover:bg-gray-700 rounded-lg transition-colors\"\r\n                          title=\"Editar\"\r\n                        >\r\n                          <i className=\"ri-edit-line text-blue-500\"></i>\r\n                        </button>\r\n                        <button\r\n                          onClick={() => handleDelete(rule.id)}\r\n                          className=\"p-2 hover:bg-gray-700 rounded-lg transition-colors\"\r\n                          title=\"Excluir\"\r\n                        >\r\n                          <i className=\"ri-delete-bin-line text-red-500\"></i>\r\n                        </button>\r\n                      </div>\r\n                    </td>\r\n                  </tr>\r\n                ))\r\n              )}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Modal de Formulrio */}\r\n      {showModal && (\r\n        <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\">\r\n          <div className={`${darkMode ? 'bg-gray-900' : 'bg-white'} rounded-xl max-w-3xl w-full max-h-[90vh] overflow-y-auto`}>\r\n            <div className={`sticky top-0 ${darkMode ? 'bg-gray-900' : 'bg-white'} border-b ${darkMode ? 'border-gray-800' : 'border-gray-200'} p-6 flex items-center justify-between`}>\r\n              <h3 className=\"text-xl font-bold\">\r\n                {editingRule ? 'Editar Regra de IVA' : 'Nova Regra de IVA'}\r\n              </h3>\r\n              <button\r\n                onClick={() => {\r\n                  setShowModal(false);\r\n                  resetForm();\r\n                }}\r\n                className=\"p-2 hover:bg-gray-800 rounded-lg transition-colors\"\r\n              >\r\n                <i className=\"ri-close-line text-xl\"></i>\r\n              </button>\r\n            </div>\r\n\r\n            <form onSubmit={handleSubmit} className=\"p-6 space-y-6\">\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                <div>\r\n                  <label className=\"block text-sm font-medium mb-2\">Nome da Regra *</label>\r\n                  <input\r\n                    type=\"text\"\r\n                    required\r\n                    value={formData.name}\r\n                    onChange={(e) => setFormData({ ...formData, name: e.target.value })}\r\n                    placeholder=\"Ex: IVA Portugal Standard\"\r\n                    className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\r\n                  />\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm font-medium mb-2\">Pas *</label>\r\n                  <select\r\n                    required\r\n                    value={formData.country}\r\n                    onChange={(e) => {\r\n                      const country = countries.find(c => c.name === e.target.value);\r\n                      setFormData({ \r\n                        ...formData, \r\n                        country: e.target.value,\r\n                        rate: country?.defaultVat || 23\r\n                      });\r\n                    }}\r\n                    className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\r\n                  >\r\n                    <option value=\"\">Selecione...</option>\r\n                    {countries.map(country => (\r\n                      <option key={country.name} value={country.name}>\r\n                        {country.name} ({country.defaultVat}%)\r\n                      </option>\r\n                    ))}\r\n                  </select>\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm font-medium mb-2\">Regio (Opcional)</label>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={formData.region}\r\n                    onChange={(e) => setFormData({ ...formData, region: e.target.value })}\r\n                    placeholder=\"Ex: Aores, Madeira\"\r\n                    className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\r\n                  />\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm font-medium mb-2\">Tipo de Imposto</label>\r\n                  <select\r\n                    value={formData.tax_type}\r\n                    onChange={(e) => setFormData({ ...formData, tax_type: e.target.value })}\r\n                    className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\r\n                  >\r\n                    <option value=\"vat\">IVA / VAT</option>\r\n                    <option value=\"sales_tax\">Sales Tax</option>\r\n                    <option value=\"gst\">GST</option>\r\n                    <option value=\"custom\">Personalizado</option>\r\n                  </select>\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm font-medium mb-2\">Taxa (%) *</label>\r\n                  <input\r\n                    type=\"number\"\r\n                    step=\"0.01\"\r\n                    required\r\n                    value={formData.rate}\r\n                    onChange={(e) => setFormData({ ...formData, rate: parseFloat(e.target.value) })}\r\n                    className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\r\n                  />\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm font-medium mb-2\">Prioridade</label>\r\n                  <input\r\n                    type=\"number\"\r\n                    value={formData.priority}\r\n                    onChange={(e) => setFormData({ ...formData, priority: parseInt(e.target.value) })}\r\n                    className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\r\n                  />\r\n                  <p className=\"text-xs text-gray-500 mt-1\">Menor nmero = maior prioridade</p>\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm font-medium mb-2\">Aplica-se a</label>\r\n                  <select\r\n                    value={formData.applies_to}\r\n                    onChange={(e) => setFormData({ ...formData, applies_to: e.target.value })}\r\n                    className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\r\n                  >\r\n                    <option value=\"all\">Todos os produtos</option>\r\n                    <option value=\"physical\">Apenas produtos fsicos</option>\r\n                    <option value=\"digital\">Apenas produtos digitais</option>\r\n                    <option value=\"categories\">Categorias especficas</option>\r\n                  </select>\r\n                </div>\r\n\r\n                {formData.applies_to === 'categories' && (\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium mb-2\">Categorias (IDs separados por vrgula)</label>\r\n                    <input\r\n                      type=\"text\"\r\n                      value={formData.product_categories}\r\n                      onChange={(e) => setFormData({ ...formData, product_categories: e.target.value })}\r\n                      placeholder=\"1,2,3\"\r\n                      className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\r\n                    />\r\n                  </div>\r\n                )}\r\n\r\n                <div>\r\n                  <label className=\"block text-sm font-medium mb-2\">Valor Mnimo ()</label>\r\n                  <input\r\n                    type=\"number\"\r\n                    step=\"0.01\"\r\n                    value={formData.min_amount}\r\n                    onChange={(e) => setFormData({ ...formData, min_amount: parseFloat(e.target.value) })}\r\n                    className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\r\n                  />\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm font-medium mb-2\">Valor Mximo ()</label>\r\n                  <input\r\n                    type=\"number\"\r\n                    step=\"0.01\"\r\n                    value={formData.max_amount}\r\n                    onChange={(e) => setFormData({ ...formData, max_amount: parseFloat(e.target.value) })}\r\n                    className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"space-y-3\">\r\n                <div className=\"flex items-center gap-2\">\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    id=\"is_active\"\r\n                    checked={formData.is_active}\r\n                    onChange={(e) => setFormData({ ...formData, is_active: e.target.checked })}\r\n                    className=\"w-4 h-4 rounded border-gray-300\"\r\n                  />\r\n                  <label htmlFor=\"is_active\" className=\"text-sm font-medium\">Regra Ativa</label>\r\n                </div>\r\n\r\n                <div className=\"flex items-center gap-2\">\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    id=\"is_default\"\r\n                    checked={formData.is_default}\r\n                    onChange={(e) => setFormData({ ...formData, is_default: e.target.checked })}\r\n                    className=\"w-4 h-4 rounded border-gray-300\"\r\n                  />\r\n                  <label htmlFor=\"is_default\" className=\"text-sm font-medium\">Definir como padro para este pas</label>\r\n                </div>\r\n\r\n                <div className=\"flex items-center gap-2\">\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    id=\"is_compound\"\r\n                    checked={formData.is_compound}\r\n                    onChange={(e) => setFormData({ ...formData, is_compound: e.target.checked })}\r\n                    className=\"w-4 h-4 rounded border-gray-300\"\r\n                  />\r\n                  <label htmlFor=\"is_compound\" className=\"text-sm font-medium\">Imposto composto (aplica sobre outros impostos)</label>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"flex items-center justify-end gap-4 pt-6 border-t border-gray-800\">\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={() => {\r\n                    setShowModal(false);\r\n                    resetForm();\r\n                  }}\r\n                  className=\"px-6 py-2 rounded-lg border border-gray-700 hover:bg-gray-800 transition-colors whitespace-nowrap\"\r\n                >\r\n                  Cancelar\r\n                </button>\r\n                <button\r\n                  type=\"submit\"\r\n                  className=\"px-6 py-2 bg-gradient-to-r from-yellow-500 to-yellow-600 text-black font-medium rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap\"\r\n                >\r\n                  <i className=\"ri-save-line\"></i>\r\n                  Salvar Regra\r\n                </button>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","\r\nimport { useState, useEffect } from 'react';\r\nimport { supabase } from '../../../lib/supabase';\r\n\r\ninterface MarketplaceManagementProps {\r\n  darkMode: boolean;\r\n}\r\n\r\nexport default function MarketplaceManagement({ darkMode }: MarketplaceManagementProps) {\r\n  const [vendors, setVendors] = useState<any[]>([]);\r\n  const [commissionRules, setCommissionRules] = useState<any[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [activeTab, setActiveTab] = useState('vendors');\r\n  const [showModal, setShowModal] = useState(false);\r\n  const [editingRule, setEditingRule] = useState<any>(null);\r\n\r\n  const [formData, setFormData] = useState({\r\n    name: '',\r\n    commission_type: 'percentage',\r\n    commission_value: 15,\r\n    applies_to: 'all',\r\n    category_ids: '',\r\n    vendor_ids: '',\r\n    min_order_value: 0,\r\n    max_order_value: 0,\r\n    is_active: true,\r\n    priority: 1,\r\n  });\r\n\r\n  useEffect(() => {\r\n    loadData();\r\n  }, []);\r\n\r\n  const loadData = async () => {\r\n    setLoading(true);\r\n    \r\n    // Carregar vendedores\r\n    const { data: vendorsData } = await supabase\r\n      .from('vendors')\r\n      .select('*')\r\n      .order('created_at', { ascending: false });\r\n    setVendors(vendorsData || []);\r\n\r\n    // Carregar regras de comisso\r\n    const { data: rulesData } = await supabase\r\n      .from('commission_rules')\r\n      .select('*')\r\n      .order('priority');\r\n    setCommissionRules(rulesData || []);\r\n\r\n    setLoading(false);\r\n  };\r\n\r\n  const handleSubmitRule = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    try {\r\n      if (editingRule) {\r\n        const { error } = await supabase\r\n          .from('commission_rules')\r\n          .update(formData)\r\n          .eq('id', editingRule.id);\r\n        if (error) throw error;\r\n      } else {\r\n        const { error } = await supabase\r\n          .from('commission_rules')\r\n          .insert([formData]);\r\n        if (error) throw error;\r\n      }\r\n      alert('Regra de comisso salva com sucesso!');\r\n      setShowModal(false);\r\n      resetForm();\r\n      loadData();\r\n    } catch (error) {\r\n      console.error('Erro:', error);\r\n      alert('Erro ao salvar regra de comisso');\r\n    }\r\n  };\r\n\r\n  const handleApproveVendor = async (vendorId: string) => {\r\n    const { error } = await supabase\r\n      .from('vendors')\r\n      .update({ status: 'approved', approved_at: new Date().toISOString() })\r\n      .eq('id', vendorId);\r\n    \r\n    if (!error) {\r\n      alert('Vendedor aprovado com sucesso!');\r\n      loadData();\r\n    }\r\n  };\r\n\r\n  const handleRejectVendor = async (vendorId: string) => {\r\n    const { error } = await supabase\r\n      .from('vendors')\r\n      .update({ status: 'rejected' })\r\n      .eq('id', vendorId);\r\n    \r\n    if (!error) {\r\n      alert('Vendedor rejeitado!');\r\n      loadData();\r\n    }\r\n  };\r\n\r\n  const handleSuspendVendor = async (vendorId: string) => {\r\n    const { error } = await supabase\r\n      .from('vendors')\r\n      .update({ status: 'suspended' })\r\n      .eq('id', vendorId);\r\n    \r\n    if (!error) {\r\n      alert('Vendedor suspenso!');\r\n      loadData();\r\n    }\r\n  };\r\n\r\n  const resetForm = () => {\r\n    setFormData({\r\n      name: '',\r\n      commission_type: 'percentage',\r\n      commission_value: 15,\r\n      applies_to: 'all',\r\n      category_ids: '',\r\n      vendor_ids: '',\r\n      min_order_value: 0,\r\n      max_order_value: 0,\r\n      is_active: true,\r\n      priority: 1,\r\n    });\r\n    setEditingRule(null);\r\n  };\r\n\r\n  const getStatusColor = (status: string) => {\r\n    switch (status) {\r\n      case 'approved': return 'bg-green-500/10 text-green-500';\r\n      case 'pending': return 'bg-yellow-500/10 text-yellow-500';\r\n      case 'rejected': return 'bg-red-500/10 text-red-500';\r\n      case 'suspended': return 'bg-orange-500/10 text-orange-500';\r\n      default: return 'bg-gray-500/10 text-gray-500';\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"flex items-center justify-between\">\r\n        <div>\r\n          <h2 className=\"text-2xl font-bold flex items-center gap-2\">\r\n            <i className=\"ri-store-3-line text-yellow-500\"></i>\r\n            Gesto de Marketplace\r\n          </h2>\r\n          <p className=\"text-gray-400 mt-1\">Gerencie vendedores e comisses do marketplace</p>\r\n        </div>\r\n        {activeTab === 'commissions' && (\r\n          <button\r\n            onClick={() => {\r\n              resetForm();\r\n              setShowModal(true);\r\n            }}\r\n            className=\"px-4 py-2 bg-gradient-to-r from-yellow-500 to-yellow-600 text-black font-medium rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap\"\r\n          >\r\n            <i className=\"ri-add-line\"></i>\r\n            Nova Regra de Comisso\r\n          </button>\r\n        )}\r\n      </div>\r\n\r\n      {/* Estatsticas */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\r\n        <div className={`${darkMode ? 'bg-gray-800' : 'bg-white'} rounded-xl p-6`}>\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <p className=\"text-gray-400 text-sm\">Total de Vendedores</p>\r\n              <p className=\"text-2xl font-bold mt-1\">{vendors.length}</p>\r\n            </div>\r\n            <div className=\"w-12 h-12 bg-blue-500/10 rounded-lg flex items-center justify-center\">\r\n              <i className=\"ri-store-3-line text-2xl text-blue-500\"></i>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className={`${darkMode ? 'bg-gray-800' : 'bg-white'} rounded-xl p-6`}>\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <p className=\"text-gray-400 text-sm\">Aprovados</p>\r\n              <p className=\"text-2xl font-bold mt-1\">\r\n                {vendors.filter(v => v.status === 'approved').length}\r\n              </p>\r\n            </div>\r\n            <div className=\"w-12 h-12 bg-green-500/10 rounded-lg flex items-center justify-center\">\r\n              <i className=\"ri-checkbox-circle-line text-2xl text-green-500\"></i>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className={`${darkMode ? 'bg-gray-800' : 'bg-white'} rounded-xl p-6`}>\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <p className=\"text-gray-400 text-sm\">Pendentes</p>\r\n              <p className=\"text-2xl font-bold mt-1\">\r\n                {vendors.filter(v => v.status === 'pending').length}\r\n              </p>\r\n            </div>\r\n            <div className=\"w-12 h-12 bg-yellow-500/10 rounded-lg flex items-center justify-center\">\r\n              <i className=\"ri-time-line text-2xl text-yellow-500\"></i>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className={`${darkMode ? 'bg-gray-800' : 'bg-white'} rounded-xl p-6`}>\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <p className=\"text-gray-400 text-sm\">Regras de Comisso</p>\r\n              <p className=\"text-2xl font-bold mt-1\">{commissionRules.length}</p>\r\n            </div>\r\n            <div className=\"w-12 h-12 bg-purple-500/10 rounded-lg flex items-center justify-center\">\r\n              <i className=\"ri-percent-line text-2xl text-purple-500\"></i>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Tabs */}\r\n      <div className={`${darkMode ? 'bg-gray-800' : 'bg-white'} rounded-xl p-2 flex gap-2`}>\r\n        <button\r\n          onClick={() => setActiveTab('vendors')}\r\n          className={`flex-1 px-4 py-2 rounded-lg font-medium transition-colors whitespace-nowrap ${\r\n            activeTab === 'vendors'\r\n              ? 'bg-gradient-to-r from-yellow-500 to-yellow-600 text-black'\r\n              : 'hover:bg-gray-700'\r\n          }`}\r\n        >\r\n          <i className=\"ri-store-3-line mr-2\"></i>\r\n          Vendedores\r\n        </button>\r\n        <button\r\n          onClick={() => setActiveTab('commissions')}\r\n          className={`flex-1 px-4 py-2 rounded-lg font-medium transition-colors whitespace-nowrap ${\r\n            activeTab === 'commissions'\r\n              ? 'bg-gradient-to-r from-yellow-500 to-yellow-600 text-black'\r\n              : 'hover:bg-gray-700'\r\n          }`}\r\n        >\r\n          <i className=\"ri-percent-line mr-2\"></i>\r\n          Comisses\r\n        </button>\r\n      </div>\r\n\r\n      {/* Contedo das Tabs */}\r\n      {activeTab === 'vendors' && (\r\n        <div className={`${darkMode ? 'bg-gray-800' : 'bg-white'} rounded-xl overflow-hidden`}>\r\n          <div className=\"overflow-x-auto\">\r\n            <table className=\"w-full\">\r\n              <thead className={`${darkMode ? 'bg-gray-900' : 'bg-gray-50'}`}>\r\n                <tr>\r\n                  <th className=\"px-6 py-4 text-left text-sm font-semibold\">Vendedor</th>\r\n                  <th className=\"px-6 py-4 text-left text-sm font-semibold\">Email</th>\r\n                  <th className=\"px-6 py-4 text-left text-sm font-semibold\">Produtos</th>\r\n                  <th className=\"px-6 py-4 text-left text-sm font-semibold\">Vendas</th>\r\n                  <th className=\"px-6 py-4 text-left text-sm font-semibold\">Comisso</th>\r\n                  <th className=\"px-6 py-4 text-left text-sm font-semibold\">Status</th>\r\n                  <th className=\"px-6 py-4 text-left text-sm font-semibold\">Aes</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody className=\"divide-y divide-gray-700\">\r\n                {loading ? (\r\n                  <tr>\r\n                    <td colSpan={7} className=\"px-6 py-12 text-center\">\r\n                      <div className=\"flex items-center justify-center gap-2\">\r\n                        <div className=\"w-5 h-5 border-2 border-yellow-500 border-t-transparent rounded-full animate-spin\"></div>\r\n                        Carregando...\r\n                      </div>\r\n                    </td>\r\n                  </tr>\r\n                ) : vendors.length === 0 ? (\r\n                  <tr>\r\n                    <td colSpan={7} className=\"px-6 py-12 text-center text-gray-400\">\r\n                      Nenhum vendedor cadastrado\r\n                    </td>\r\n                  </tr>\r\n                ) : (\r\n                  vendors.map((vendor) => (\r\n                    <tr key={vendor.id} className=\"hover:bg-gray-700/50 transition-colors\">\r\n                      <td className=\"px-6 py-4\">\r\n                        <div className=\"flex items-center gap-3\">\r\n                          <div className=\"w-10 h-10 bg-gradient-to-br from-yellow-500 to-yellow-600 rounded-full flex items-center justify-center text-black font-bold\">\r\n                            {vendor.store_name?.charAt(0) || 'V'}\r\n                          </div>\r\n                          <div>\r\n                            <p className=\"font-medium\">{vendor.store_name}</p>\r\n                            <p className=\"text-sm text-gray-400\">{vendor.company_name}</p>\r\n                          </div>\r\n                        </div>\r\n                      </td>\r\n                      <td className=\"px-6 py-4 text-gray-400\">{vendor.email}</td>\r\n                      <td className=\"px-6 py-4 font-medium\">{vendor.total_products || 0}</td>\r\n                      <td className=\"px-6 py-4 font-medium\">{vendor.total_sales?.toFixed(2) || '0.00'}</td>\r\n                      <td className=\"px-6 py-4 text-yellow-500 font-medium\">{vendor.commission_rate || 15}%</td>\r\n                      <td className=\"px-6 py-4\">\r\n                        <span className={`px-2 py-1 rounded text-xs font-medium ${getStatusColor(vendor.status)}`}>\r\n                          {vendor.status === 'approved' && 'Aprovado'}\r\n                          {vendor.status === 'pending' && 'Pendente'}\r\n                          {vendor.status === 'rejected' && 'Rejeitado'}\r\n                          {vendor.status === 'suspended' && 'Suspenso'}\r\n                        </span>\r\n                      </td>\r\n                      <td className=\"px-6 py-4\">\r\n                        <div className=\"flex items-center gap-2\">\r\n                          {vendor.status === 'pending' && (\r\n                            <>\r\n                              <button\r\n                                onClick={() => handleApproveVendor(vendor.id)}\r\n                                className=\"p-2 hover:bg-gray-700 rounded-lg transition-colors\"\r\n                                title=\"Aprovar\"\r\n                              >\r\n                                <i className=\"ri-checkbox-circle-line text-green-500\"></i>\r\n                              </button>\r\n                              <button\r\n                                onClick={() => handleRejectVendor(vendor.id)}\r\n                                className=\"p-2 hover:bg-gray-700 rounded-lg transition-colors\"\r\n                                title=\"Rejeitar\"\r\n                              >\r\n                                <i className=\"ri-close-circle-line text-red-500\"></i>\r\n                              </button>\r\n                            </>\r\n                          )}\r\n                          {vendor.status === 'approved' && (\r\n                            <button\r\n                              onClick={() => handleSuspendVendor(vendor.id)}\r\n                              className=\"p-2 hover:bg-gray-700 rounded-lg transition-colors\"\r\n                              title=\"Suspender\"\r\n                            >\r\n                              <i className=\"ri-forbid-line text-orange-500\"></i>\r\n                            </button>\r\n                          )}\r\n                          <button\r\n                            className=\"p-2 hover:bg-gray-700 rounded-lg transition-colors\"\r\n                            title=\"Ver Detalhes\"\r\n                          >\r\n                            <i className=\"ri-eye-line text-blue-500\"></i>\r\n                          </button>\r\n                        </div>\r\n                      </td>\r\n                    </tr>\r\n                  ))\r\n                )}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {activeTab === 'commissions' && (\r\n        <div className={`${darkMode ? 'bg-gray-800' : 'bg-white'} rounded-xl overflow-hidden`}>\r\n          <div className=\"overflow-x-auto\">\r\n            <table className=\"w-full\">\r\n              <thead className={`${darkMode ? 'bg-gray-900' : 'bg-gray-50'}`}>\r\n                <tr>\r\n                  <th className=\"px-6 py-4 text-left text-sm font-semibold\">Nome</th>\r\n                  <th className=\"px-6 py-4 text-left text-sm font-semibold\">Tipo</th>\r\n                  <th className=\"px-6 py-4 text-left text-sm font-semibold\">Valor</th>\r\n                  <th className=\"px-6 py-4 text-left text-sm font-semibold\">Aplica-se a</th>\r\n                  <th className=\"px-6 py-4 text-left text-sm font-semibold\">Prioridade</th>\r\n                  <th className=\"px-6 py-4 text-left text-sm font-semibold\">Status</th>\r\n                  <th className=\"px-6 py-4 text-left text-sm font-semibold\">Aes</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody className=\"divide-y divide-gray-700\">\r\n                {loading ? (\r\n                  <tr>\r\n                    <td colSpan={7} className=\"px-6 py-12 text-center\">\r\n                      <div className=\"flex items-center justify-center gap-2\">\r\n                        <div className=\"w-5 h-5 border-2 border-yellow-500 border-t-transparent rounded-full animate-spin\"></div>\r\n                        Carregando...\r\n                      </div>\r\n                    </td>\r\n                  </tr>\r\n                ) : commissionRules.length === 0 ? (\r\n                  <tr>\r\n                    <td colSpan={7} className=\"px-6 py-12 text-center text-gray-400\">\r\n                      Nenhuma regra de comisso cadastrada\r\n                    </td>\r\n                  </tr>\r\n                ) : (\r\n                  commissionRules.map((rule) => (\r\n                    <tr key={rule.id} className=\"hover:bg-gray-700/50 transition-colors\">\r\n                      <td className=\"px-6 py-4\">\r\n                        <div className=\"flex items-center gap-2\">\r\n                          <i className=\"ri-percent-line text-yellow-500\"></i>\r\n                          <span className=\"font-medium\">{rule.name}</span>\r\n                        </div>\r\n                      </td>\r\n                      <td className=\"px-6 py-4\">\r\n                        <span className=\"px-2 py-1 bg-purple-500/10 text-purple-500 rounded text-xs font-medium\">\r\n                          {rule.commission_type === 'percentage' ? 'Percentual' : 'Fixo'}\r\n                        </span>\r\n                      </td>\r\n                      <td className=\"px-6 py-4\">\r\n                        <span className=\"text-lg font-bold text-yellow-500\">\r\n                          {rule.commission_type === 'percentage' ? `${rule.commission_value}%` : `${rule.commission_value}`}\r\n                        </span>\r\n                      </td>\r\n                      <td className=\"px-6 py-4 text-sm text-gray-400\">\r\n                        {rule.applies_to === 'all' ? 'Todos' : rule.applies_to}\r\n                      </td>\r\n                      <td className=\"px-6 py-4\">\r\n                        <span className=\"px-2 py-1 bg-gray-700 rounded text-xs font-medium\">\r\n                          {rule.priority}\r\n                        </span>\r\n                      </td>\r\n                      <td className=\"px-6 py-4\">\r\n                        <span className={`px-2 py-1 rounded text-xs font-medium ${\r\n                          rule.is_active \r\n                            ? 'bg-green-500/10 text-green-500' \r\n                            : 'bg-red-500/10 text-red-500'\r\n                        }`}>\r\n                          {rule.is_active ? 'Ativo' : 'Inativo'}\r\n                        </span>\r\n                      </td>\r\n                      <td className=\"px-6 py-4\">\r\n                        <div className=\"flex items-center gap-2\">\r\n                          <button\r\n                            onClick={() => {\r\n                              setEditingRule(rule);\r\n                              setFormData(rule);\r\n                              setShowModal(true);\r\n                            }}\r\n                            className=\"p-2 hover:bg-gray-700 rounded-lg transition-colors\"\r\n                            title=\"Editar\"\r\n                          >\r\n                            <i className=\"ri-edit-line text-blue-500\"></i>\r\n                          </button>\r\n                          <button\r\n                            onClick={async () => {\r\n                              if (!confirm('Tem certeza que deseja excluir esta regra?')) return;\r\n                              const { error } = await supabase.from('commission_rules').delete().eq('id', rule.id);\r\n                              if (!error) {\r\n                                alert('Regra excluda com sucesso!');\r\n                                loadData();\r\n                              }\r\n                            }}\r\n                            className=\"p-2 hover:bg-gray-700 rounded-lg transition-colors\"\r\n                            title=\"Excluir\"\r\n                          >\r\n                            <i className=\"ri-delete-bin-line text-red-500\"></i>\r\n                          </button>\r\n                        </div>\r\n                      </td>\r\n                    </tr>\r\n                  ))\r\n                )}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Modal de Formulrio de Comisso */}\r\n      {showModal && (\r\n        <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\">\r\n          <div className={`${darkMode ? 'bg-gray-900' : 'bg-white'} rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto`}>\r\n            <div className={`sticky top-0 ${darkMode ? 'bg-gray-900' : 'bg-white'} border-b ${darkMode ? 'border-gray-800' : 'border-gray-200'} p-6 flex items-center justify-between`}>\r\n              <h3 className=\"text-xl font-bold\">\r\n                {editingRule ? 'Editar Regra de Comisso' : 'Nova Regra de Comisso'}\r\n              </h3>\r\n              <button\r\n                onClick={() => {\r\n                  setShowModal(false);\r\n                  resetForm();\r\n                }}\r\n                className=\"p-2 hover:bg-gray-800 rounded-lg transition-colors\"\r\n              >\r\n                <i className=\"ri-close-line text-xl\"></i>\r\n              </button>\r\n            </div>\r\n\r\n            <form onSubmit={handleSubmitRule} className=\"p-6 space-y-6\">\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                <div className=\"md:col-span-2\">\r\n                  <label className=\"block text-sm font-medium mb-2\">Nome da Regra *</label>\r\n                  <input\r\n                    type=\"text\"\r\n                    required\r\n                    value={formData.name}\r\n                    onChange={(e) => setFormData({ ...formData, name: e.target.value })}\r\n                    placeholder=\"Ex: Comisso Padro\"\r\n                    className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\r\n                  />\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm font-medium mb-2\">Tipo de Comisso</label>\r\n                  <select\r\n                    value={formData.commission_type}\r\n                    onChange={(e) => setFormData({ ...formData, commission_type: e.target.value })}\r\n                    className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\r\n                  >\r\n                    <option value=\"percentage\">Percentual (%)</option>\r\n                    <option value=\"fixed\">Valor Fixo ()</option>\r\n                  </select>\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm font-medium mb-2\">\r\n                    Valor {formData.commission_type === 'percentage' ? '(%)' : '()'} *\r\n                  </label>\r\n                  <input\r\n                    type=\"number\"\r\n                    step=\"0.01\"\r\n                    required\r\n                    value={formData.commission_value}\r\n                    onChange={(e) => setFormData({ ...formData, commission_value: parseFloat(e.target.value) })}\r\n                    className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\r\n                  />\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm font-medium mb-2\">Aplica-se a</label>\r\n                  <select\r\n                    value={formData.applies_to}\r\n                    onChange={(e) => setFormData({ ...formData, applies_to: e.target.value })}\r\n                    className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\r\n                  >\r\n                    <option value=\"all\">Todos os vendedores</option>\r\n                    <option value=\"categories\">Categorias especficas</option>\r\n                    <option value=\"vendors\">Vendedores especficos</option>\r\n                  </select>\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm font-medium mb-2\">Prioridade</label>\r\n                  <input\r\n                    type=\"number\"\r\n                    value={formData.priority}\r\n                    onChange={(e) => setFormData({ ...formData, priority: parseInt(e.target.value) })}\r\n                    className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\r\n                  />\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm font-medium mb-2\">Valor Mnimo do Pedido ()</label>\r\n                  <input\r\n                    type=\"number\"\r\n                    step=\"0.01\"\r\n                    value={formData.min_order_value}\r\n                    onChange={(e) => setFormData({ ...formData, min_order_value: parseFloat(e.target.value) })}\r\n                    className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\r\n                  />\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm font-medium mb-2\">Valor Mximo do Pedido ()</label>\r\n                  <input\r\n                    type=\"number\"\r\n                    step=\"0.01\"\r\n                    value={formData.max_order_value}\r\n                    onChange={(e) => setFormData({ ...formData, max_order_value: parseFloat(e.target.value) })}\r\n                    className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"flex items-center gap-2\">\r\n                <input\r\n                  type=\"checkbox\"\r\n                  id=\"is_active\"\r\n                  checked={formData.is_active}\r\n                  onChange={(e) => setFormData({ ...formData, is_active: e.target.checked })}\r\n                  className=\"w-4 h-4 rounded border-gray-300\"\r\n                />\r\n                <label htmlFor=\"is_active\" className=\"text-sm font-medium\">Regra Ativa</label>\r\n              </div>\r\n\r\n              <div className=\"flex items-center justify-end gap-4 pt-6 border-t border-gray-800\">\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={() => {\r\n                    setShowModal(false);\r\n                    resetForm();\r\n                  }}\r\n                  className=\"px-6 py-2 rounded-lg border border-gray-700 hover:bg-gray-800 transition-colors whitespace-nowrap\"\r\n                >\r\n                  Cancelar\r\n                </button>\r\n                <button\r\n                  type=\"submit\"\r\n                  className=\"px-6 py-2 bg-gradient-to-r from-yellow-500 to-yellow-600 text-black font-medium rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap\"\r\n                >\r\n                  <i className=\"ri-save-line\"></i>\r\n                  Salvar Regra\r\n                </button>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","\r\nimport { useState, useEffect } from 'react';\r\nimport { supabase } from '../../../lib/supabase';\r\n\r\ninterface ThemeEditorProps {\r\n  darkMode: boolean;\r\n}\r\n\r\nexport default function ThemeEditor({ darkMode }: ThemeEditorProps) {\r\n  const [settings, setSettings] = useState({\r\n    site_name: 'JokaTech',\r\n    site_tagline: 'Sua loja de tecnologia',\r\n    primary_color: '#EAB308',\r\n    secondary_color: '#000000',\r\n    accent_color: '#F59E0B',\r\n    success_color: '#10B981',\r\n    warning_color: '#F59E0B',\r\n    error_color: '#EF4444',\r\n    font_family: 'Inter',\r\n    font_size_base: '16',\r\n    logo_url: '',\r\n    logo_footer_url: '',\r\n    logo_mobile_url: '',\r\n    favicon_url: '',\r\n    header_style: 'fixed',\r\n    header_bg_color: '#000000',\r\n    footer_bg_color: '#1F2937',\r\n    enable_dark_mode: true,\r\n    default_theme: 'dark',\r\n  });\r\n\r\n  const [loading, setLoading] = useState(false);\r\n  const [previewMode, setPreviewMode] = useState(false);\r\n\r\n  useEffect(() => {\r\n    loadSettings();\r\n  }, []);\r\n\r\n  const loadSettings = async () => {\r\n    const { data } = await supabase\r\n      .from('site_settings')\r\n      .select('*')\r\n      .single();\r\n    \r\n    if (data) {\r\n      setSettings(prev => ({ ...prev, ...data.settings }));\r\n    }\r\n  };\r\n\r\n  const handleSave = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const { error } = await supabase\r\n        .from('site_settings')\r\n        .upsert({\r\n          id: 1,\r\n          settings,\r\n          updated_at: new Date().toISOString(),\r\n        });\r\n\r\n      if (error) throw error;\r\n      alert('Configuraes salvas com sucesso!');\r\n    } catch (error) {\r\n      console.error('Erro ao salvar:', error);\r\n      alert('Erro ao salvar configuraes');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const googleFonts = [\r\n    'Inter', 'Roboto', 'Open Sans', 'Lato', 'Montserrat', 'Poppins', \r\n    'Raleway', 'Nunito', 'Playfair Display', 'Merriweather'\r\n  ];\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"flex items-center justify-between\">\r\n        <div>\r\n          <h2 className=\"text-2xl font-bold flex items-center gap-2\">\r\n            <i className=\"ri-palette-line text-yellow-500\"></i>\r\n            Editor de Tema & Design\r\n          </h2>\r\n          <p className=\"text-gray-400 mt-1\">Configure a aparncia visual do seu site</p>\r\n        </div>\r\n        <div className=\"flex items-center gap-3\">\r\n          <button\r\n            onClick={() => setPreviewMode(!previewMode)}\r\n            className={`px-4 py-2 rounded-lg border ${darkMode ? 'border-gray-700' : 'border-gray-300'} hover:bg-gray-800 transition-colors flex items-center gap-2 whitespace-nowrap`}\r\n          >\r\n            <i className={`ri-${previewMode ? 'eye-off' : 'eye'}-line`}></i>\r\n            {previewMode ? 'Ocultar Preview' : 'Mostrar Preview'}\r\n          </button>\r\n          <button\r\n            onClick={handleSave}\r\n            disabled={loading}\r\n            className=\"px-6 py-2 bg-gradient-to-r from-yellow-500 to-yellow-600 text-black font-medium rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap\"\r\n          >\r\n            {loading ? (\r\n              <>\r\n                <div className=\"w-4 h-4 border-2 border-black border-t-transparent rounded-full animate-spin\"></div>\r\n                Salvando...\r\n              </>\r\n            ) : (\r\n              <>\r\n                <i className=\"ri-save-line\"></i>\r\n                Salvar Alteraes\r\n              </>\r\n            )}\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n        {/* Informaes Bsicas */}\r\n        <div className={`${darkMode ? 'bg-gray-800' : 'bg-white'} rounded-xl p-6 space-y-4`}>\r\n          <h3 className=\"text-lg font-semibold flex items-center gap-2\">\r\n            <i className=\"ri-information-line text-yellow-500\"></i>\r\n            Informaes do Site\r\n          </h3>\r\n\r\n          <div>\r\n            <label className=\"block text-sm font-medium mb-2\">Nome do Site</label>\r\n            <input\r\n              type=\"text\"\r\n              value={settings.site_name}\r\n              onChange={(e) => setSettings({ ...settings, site_name: e.target.value })}\r\n              className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-900 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\r\n            />\r\n          </div>\r\n\r\n          <div>\r\n            <label className=\"block text-sm font-medium mb-2\">Slogan/Tagline</label>\r\n            <input\r\n              type=\"text\"\r\n              value={settings.site_tagline}\r\n              onChange={(e) => setSettings({ ...settings, site_tagline: e.target.value })}\r\n              className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-900 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\r\n            />\r\n          </div>\r\n\r\n          <div>\r\n            <label className=\"block text-sm font-medium mb-2\">Fonte Principal</label>\r\n            <select\r\n              value={settings.font_family}\r\n              onChange={(e) => setSettings({ ...settings, font_family: e.target.value })}\r\n              className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-900 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\r\n            >\r\n              {googleFonts.map(font => (\r\n                <option key={font} value={font}>{font}</option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n\r\n          <div>\r\n            <label className=\"block text-sm font-medium mb-2\">Tamanho Base da Fonte (px)</label>\r\n            <input\r\n              type=\"number\"\r\n              value={settings.font_size_base}\r\n              onChange={(e) => setSettings({ ...settings, font_size_base: e.target.value })}\r\n              className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-900 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        {/* Cores do Tema */}\r\n        <div className={`${darkMode ? 'bg-gray-800' : 'bg-white'} rounded-xl p-6 space-y-4`}>\r\n          <h3 className=\"text-lg font-semibold flex items-center gap-2\">\r\n            <i className=\"ri-paint-brush-line text-yellow-500\"></i>\r\n            Paleta de Cores\r\n          </h3>\r\n\r\n          <div className=\"grid grid-cols-2 gap-4\">\r\n            <div>\r\n              <label className=\"block text-sm font-medium mb-2\">Cor Primria</label>\r\n              <div className=\"flex items-center gap-2\">\r\n                <input\r\n                  type=\"color\"\r\n                  value={settings.primary_color}\r\n                  onChange={(e) => setSettings({ ...settings, primary_color: e.target.value })}\r\n                  className=\"w-12 h-10 rounded cursor-pointer\"\r\n                />\r\n                <input\r\n                  type=\"text\"\r\n                  value={settings.primary_color}\r\n                  onChange={(e) => setSettings({ ...settings, primary_color: e.target.value })}\r\n                  className={`flex-1 px-3 py-2 rounded-lg ${darkMode ? 'bg-gray-900 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            <div>\r\n              <label className=\"block text-sm font-medium mb-2\">Cor Secundria</label>\r\n              <div className=\"flex items-center gap-2\">\r\n                <input\r\n                  type=\"color\"\r\n                  value={settings.secondary_color}\r\n                  onChange={(e) => setSettings({ ...settings, secondary_color: e.target.value })}\r\n                  className=\"w-12 h-10 rounded cursor-pointer\"\r\n                />\r\n                <input\r\n                  type=\"text\"\r\n                  value={settings.secondary_color}\r\n                  onChange={(e) => setSettings({ ...settings, secondary_color: e.target.value })}\r\n                  className={`flex-1 px-3 py-2 rounded-lg ${darkMode ? 'bg-gray-900 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            <div>\r\n              <label className=\"block text-sm font-medium mb-2\">Cor de Destaque</label>\r\n              <div className=\"flex items-center gap-2\">\r\n                <input\r\n                  type=\"color\"\r\n                  value={settings.accent_color}\r\n                  onChange={(e) => setSettings({ ...settings, accent_color: e.target.value })}\r\n                  className=\"w-12 h-10 rounded cursor-pointer\"\r\n                />\r\n                <input\r\n                  type=\"text\"\r\n                  value={settings.accent_color}\r\n                  onChange={(e) => setSettings({ ...settings, accent_color: e.target.value })}\r\n                  className={`flex-1 px-3 py-2 rounded-lg ${darkMode ? 'bg-gray-900 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            <div>\r\n              <label className=\"block text-sm font-medium mb-2\">Cor de Sucesso</label>\r\n              <div className=\"flex items-center gap-2\">\r\n                <input\r\n                  type=\"color\"\r\n                  value={settings.success_color}\r\n                  onChange={(e) => setSettings({ ...settings, success_color: e.target.value })}\r\n                  className=\"w-12 h-10 rounded cursor-pointer\"\r\n                />\r\n                <input\r\n                  type=\"text\"\r\n                  value={settings.success_color}\r\n                  onChange={(e) => setSettings({ ...settings, success_color: e.target.value })}\r\n                  className={`flex-1 px-3 py-2 rounded-lg ${darkMode ? 'bg-gray-900 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            <div>\r\n              <label className=\"block text-sm font-medium mb-2\">Cor de Aviso</label>\r\n              <div className=\"flex items-center gap-2\">\r\n                <input\r\n                  type=\"color\"\r\n                  value={settings.warning_color}\r\n                  onChange={(e) => setSettings({ ...settings, warning_color: e.target.value })}\r\n                  className=\"w-12 h-10 rounded cursor-pointer\"\r\n                />\r\n                <input\r\n                  type=\"text\"\r\n                  value={settings.warning_color}\r\n                  onChange={(e) => setSettings({ ...settings, warning_color: e.target.value })}\r\n                  className={`flex-1 px-3 py-2 rounded-lg ${darkMode ? 'bg-gray-900 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            <div>\r\n              <label className=\"block text-sm font-medium mb-2\">Cor de Erro</label>\r\n              <div className=\"flex items-center gap-2\">\r\n                <input\r\n                  type=\"color\"\r\n                  value={settings.error_color}\r\n                  onChange={(e) => setSettings({ ...settings, error_color: e.target.value })}\r\n                  className=\"w-12 h-10 rounded cursor-pointer\"\r\n                />\r\n                <input\r\n                  type=\"text\"\r\n                  value={settings.error_color}\r\n                  onChange={(e) => setSettings({ ...settings, error_color: e.target.value })}\r\n                  className={`flex-1 px-3 py-2 rounded-lg ${darkMode ? 'bg-gray-900 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Logos */}\r\n        <div className={`${darkMode ? 'bg-gray-800' : 'bg-white'} rounded-xl p-6 space-y-4`}>\r\n          <h3 className=\"text-lg font-semibold flex items-center gap-2\">\r\n            <i className=\"ri-image-line text-yellow-500\"></i>\r\n            Logos & cones\r\n          </h3>\r\n\r\n          <div>\r\n            <label className=\"block text-sm font-medium mb-2\">Logo Principal (URL)</label>\r\n            <input\r\n              type=\"text\"\r\n              value={settings.logo_url}\r\n              onChange={(e) => setSettings({ ...settings, logo_url: e.target.value })}\r\n              placeholder=\"https://exemplo.com/logo.png\"\r\n              className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-900 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\r\n            />\r\n          </div>\r\n\r\n          <div>\r\n            <label className=\"block text-sm font-medium mb-2\">Logo Footer (URL)</label>\r\n            <input\r\n              type=\"text\"\r\n              value={settings.logo_footer_url}\r\n              onChange={(e) => setSettings({ ...settings, logo_footer_url: e.target.value })}\r\n              placeholder=\"https://exemplo.com/logo-footer.png\"\r\n              className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-900 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\r\n            />\r\n          </div>\r\n\r\n          <div>\r\n            <label className=\"block text-sm font-medium mb-2\">Logo Mobile (URL)</label>\r\n            <input\r\n              type=\"text\"\r\n              value={settings.logo_mobile_url}\r\n              onChange={(e) => setSettings({ ...settings, logo_mobile_url: e.target.value })}\r\n              placeholder=\"https://exemplo.com/logo-mobile.png\"\r\n              className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-900 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\r\n            />\r\n          </div>\r\n\r\n          <div>\r\n            <label className=\"block text-sm font-medium mb-2\">Favicon (URL)</label>\r\n            <input\r\n              type=\"text\"\r\n              value={settings.favicon_url}\r\n              onChange={(e) => setSettings({ ...settings, favicon_url: e.target.value })}\r\n              placeholder=\"https://exemplo.com/favicon.ico\"\r\n              className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-900 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        {/* Header & Footer */}\r\n        <div className={`${darkMode ? 'bg-gray-800' : 'bg-white'} rounded-xl p-6 space-y-4`}>\r\n          <h3 className=\"text-lg font-semibold flex items-center gap-2\">\r\n            <i className=\"ri-layout-line text-yellow-500\"></i>\r\n            Header & Footer\r\n          </h3>\r\n\r\n          <div>\r\n            <label className=\"block text-sm font-medium mb-2\">Estilo do Header</label>\r\n            <select\r\n              value={settings.header_style}\r\n              onChange={(e) => setSettings({ ...settings, header_style: e.target.value })}\r\n              className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-900 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\r\n            >\r\n              <option value=\"fixed\">Fixo no Topo</option>\r\n              <option value=\"sticky\">Sticky (Cola ao Scroll)</option>\r\n              <option value=\"static\">Esttico</option>\r\n            </select>\r\n          </div>\r\n\r\n          <div>\r\n            <label className=\"block text-sm font-medium mb-2\">Cor de Fundo do Header</label>\r\n            <div className=\"flex items-center gap-2\">\r\n              <input\r\n                type=\"color\"\r\n                value={settings.header_bg_color}\r\n                onChange={(e) => setSettings({ ...settings, header_bg_color: e.target.value })}\r\n                className=\"w-12 h-10 rounded cursor-pointer\"\r\n              />\r\n              <input\r\n                type=\"text\"\r\n                value={settings.header_bg_color}\r\n                onChange={(e) => setSettings({ ...settings, header_bg_color: e.target.value })}\r\n                className={`flex-1 px-3 py-2 rounded-lg ${darkMode ? 'bg-gray-900 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          <div>\r\n            <label className=\"block text-sm font-medium mb-2\">Cor de Fundo do Footer</label>\r\n            <div className=\"flex items-center gap-2\">\r\n              <input\r\n                type=\"color\"\r\n                value={settings.footer_bg_color}\r\n                onChange={(e) => setSettings({ ...settings, footer_bg_color: e.target.value })}\r\n                className=\"w-12 h-10 rounded cursor-pointer\"\r\n              />\r\n              <input\r\n                type=\"text\"\r\n                value={settings.footer_bg_color}\r\n                onChange={(e) => setSettings({ ...settings, footer_bg_color: e.target.value })}\r\n                className={`flex-1 px-3 py-2 rounded-lg ${darkMode ? 'bg-gray-900 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"space-y-3 pt-4\">\r\n            <div className=\"flex items-center gap-2\">\r\n              <input\r\n                type=\"checkbox\"\r\n                id=\"enable_dark_mode\"\r\n                checked={settings.enable_dark_mode}\r\n                onChange={(e) => setSettings({ ...settings, enable_dark_mode: e.target.checked })}\r\n                className=\"w-4 h-4 rounded border-gray-300\"\r\n              />\r\n              <label htmlFor=\"enable_dark_mode\" className=\"text-sm font-medium\">Habilitar Modo Escuro</label>\r\n            </div>\r\n\r\n            <div>\r\n              <label className=\"block text-sm font-medium mb-2\">Tema Padro</label>\r\n              <select\r\n                value={settings.default_theme}\r\n                onChange={(e) => setSettings({ ...settings, default_theme: e.target.value })}\r\n                className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-900 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\r\n              >\r\n                <option value=\"dark\">Escuro</option>\r\n                <option value=\"light\">Claro</option>\r\n              </select>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Preview em Tempo Real */}\r\n      {previewMode && (\r\n        <div className={`${darkMode ? 'bg-gray-800' : 'bg-white'} rounded-xl p-6`}>\r\n          <h3 className=\"text-lg font-semibold mb-4 flex items-center gap-2\">\r\n            <i className=\"ri-eye-line text-yellow-500\"></i>\r\n            Preview em Tempo Real\r\n          </h3>\r\n          <div \r\n            className=\"border-2 border-dashed border-gray-700 rounded-lg p-8\"\r\n            style={{\r\n              fontFamily: settings.font_family,\r\n              fontSize: `${settings.font_size_base}px`,\r\n            }}\r\n          >\r\n            <div \r\n              className=\"p-4 rounded-lg mb-4\"\r\n              style={{ backgroundColor: settings.header_bg_color }}\r\n            >\r\n              <h1 className=\"text-2xl font-bold\" style={{ color: settings.primary_color }}>\r\n                {settings.site_name}\r\n              </h1>\r\n              <p className=\"text-sm\" style={{ color: settings.accent_color }}>\r\n                {settings.site_tagline}\r\n              </p>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-4 gap-4 mb-4\">\r\n              <div className=\"p-4 rounded-lg text-center\" style={{ backgroundColor: settings.primary_color }}>\r\n                <p className=\"text-sm font-medium text-black\">Primria</p>\r\n              </div>\r\n              <div className=\"p-4 rounded-lg text-center\" style={{ backgroundColor: settings.accent_color }}>\r\n                <p className=\"text-sm font-medium text-black\">Destaque</p>\r\n              </div>\r\n              <div className=\"p-4 rounded-lg text-center\" style={{ backgroundColor: settings.success_color }}>\r\n                <p className=\"text-sm font-medium text-white\">Sucesso</p>\r\n              </div>\r\n              <div className=\"p-4 rounded-lg text-center\" style={{ backgroundColor: settings.error_color }}>\r\n                <p className=\"text-sm font-medium text-white\">Erro</p>\r\n              </div>\r\n            </div>\r\n\r\n            <div \r\n              className=\"p-4 rounded-lg\"\r\n              style={{ backgroundColor: settings.footer_bg_color }}\r\n            >\r\n              <p className=\"text-sm text-center text-gray-400\">Footer Preview</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","import { useState, useEffect } from 'react';\r\nimport { supabase } from '../../../lib/supabase';\r\n\r\ninterface SiteSettings {\r\n  topbar_email: string;\r\n  topbar_phone: string;\r\n  topbar_promo_text: string;\r\n  show_topbar: boolean;\r\n  enable_theme_toggle: boolean;\r\n  primary_color: string;\r\n  secondary_color: string;\r\n  accent_color: string;\r\n  carousel_max_items: number;\r\n  carousel_auto_play: boolean;\r\n  carousel_interval: number;\r\n  footer_about_text: string;\r\n  footer_social_facebook: string;\r\n  footer_social_instagram: string;\r\n  footer_social_twitter: string;\r\n  footer_social_linkedin: string;\r\n  footer_social_youtube: string;\r\n}\r\n\r\nexport default function SiteSettingsManagement() {\r\n  const [settings, setSettings] = useState<SiteSettings>({\r\n    topbar_email: 'jokadamas616@gmail.com',\r\n    topbar_phone: '+352 621 717 862',\r\n    topbar_promo_text: 'Envio grtis em compras acima de 50',\r\n    show_topbar: true,\r\n    enable_theme_toggle: true,\r\n    primary_color: '#f59e0b',\r\n    secondary_color: '#111827',\r\n    accent_color: '#d97706',\r\n    carousel_max_items: 10,\r\n    carousel_auto_play: true,\r\n    carousel_interval: 3000,\r\n    footer_about_text: 'Solues digitais completas para o seu negcio. Qualidade, inovao e resultados garantidos.',\r\n    footer_social_facebook: 'https://facebook.com',\r\n    footer_social_instagram: 'https://instagram.com',\r\n    footer_social_twitter: 'https://twitter.com',\r\n    footer_social_linkedin: 'https://linkedin.com',\r\n    footer_social_youtube: 'https://youtube.com'\r\n  });\r\n\r\n  const [loading, setLoading] = useState(false);\r\n  const [message, setMessage] = useState<{ type: 'success' | 'error'; text: string } | null>(null);\r\n  const [activeTab, setActiveTab] = useState<'header' | 'theme' | 'carousel' | 'footer'>('header');\r\n\r\n  useEffect(() => {\r\n    loadSettings();\r\n  }, []);\r\n\r\n  const loadSettings = async () => {\r\n    try {\r\n      const { data, error } = await supabase\r\n        .from('site_settings')\r\n        .select('*')\r\n        .single();\r\n\r\n      if (error) throw error;\r\n\r\n      if (data) {\r\n        setSettings({\r\n          topbar_email: data.topbar_email || settings.topbar_email,\r\n          topbar_phone: data.topbar_phone || settings.topbar_phone,\r\n          topbar_promo_text: data.topbar_promo_text || settings.topbar_promo_text,\r\n          show_topbar: data.show_topbar ?? settings.show_topbar,\r\n          enable_theme_toggle: data.enable_theme_toggle ?? settings.enable_theme_toggle,\r\n          primary_color: data.primary_color || settings.primary_color,\r\n          secondary_color: data.secondary_color || settings.secondary_color,\r\n          accent_color: data.accent_color || settings.accent_color,\r\n          carousel_max_items: data.carousel_max_items || settings.carousel_max_items,\r\n          carousel_auto_play: data.carousel_auto_play ?? settings.carousel_auto_play,\r\n          carousel_interval: data.carousel_interval || settings.carousel_interval,\r\n          footer_about_text: data.footer_about_text || settings.footer_about_text,\r\n          footer_social_facebook: data.footer_social_facebook || settings.footer_social_facebook,\r\n          footer_social_instagram: data.footer_social_instagram || settings.footer_social_instagram,\r\n          footer_social_twitter: data.footer_social_twitter || settings.footer_social_twitter,\r\n          footer_social_linkedin: data.footer_social_linkedin || settings.footer_social_linkedin,\r\n          footer_social_youtube: data.footer_social_youtube || settings.footer_social_youtube\r\n        });\r\n      }\r\n    } catch (error) {\r\n      console.error('Erro ao carregar configuraes:', error);\r\n    }\r\n  };\r\n\r\n  const handleSave = async () => {\r\n    setLoading(true);\r\n    setMessage(null);\r\n\r\n    try {\r\n      const { error } = await supabase\r\n        .from('site_settings')\r\n        .upsert({\r\n          id: 1,\r\n          ...settings,\r\n          updated_at: new Date().toISOString()\r\n        });\r\n\r\n      if (error) throw error;\r\n\r\n      setMessage({ type: 'success', text: 'Configuraes salvas com sucesso!' });\r\n      \r\n      // Recarregar pgina aps 1 segundo para aplicar mudanas\r\n      setTimeout(() => {\r\n        window.location.reload();\r\n      }, 1000);\r\n    } catch (error) {\r\n      console.error('Erro ao salvar:', error);\r\n      setMessage({ type: 'error', text: 'Erro ao salvar configuraes' });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const tabs = [\r\n    { id: 'header', label: 'Header & Topbar', icon: 'ri-layout-top-line' },\r\n    { id: 'theme', label: 'Tema & Cores', icon: 'ri-palette-line' },\r\n    { id: 'carousel', label: 'Carousel', icon: 'ri-slideshow-line' },\r\n    { id: 'footer', label: 'Footer & Redes Sociais', icon: 'ri-layout-bottom-line' }\r\n  ];\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"flex items-center justify-between\">\r\n        <div>\r\n          <h2 className=\"text-2xl font-bold text-gray-900 dark:text-white\">Configuraes do Site</h2>\r\n          <p className=\"text-gray-600 dark:text-gray-400 mt-1\">\r\n            Controle completo sobre header, footer, tema e comportamento do site\r\n          </p>\r\n        </div>\r\n        <button\r\n          onClick={handleSave}\r\n          disabled={loading}\r\n          className=\"px-6 py-3 bg-gradient-to-r from-amber-500 to-amber-600 text-white font-semibold rounded-lg hover:from-amber-600 hover:to-amber-700 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed whitespace-nowrap cursor-pointer\"\r\n        >\r\n          {loading ? (\r\n            <>\r\n              <i className=\"ri-loader-4-line animate-spin mr-2\"></i>\r\n              A guardar...\r\n            </>\r\n          ) : (\r\n            <>\r\n              <i className=\"ri-save-line mr-2\"></i>\r\n              Guardar Alteraes\r\n            </>\r\n          )}\r\n        </button>\r\n      </div>\r\n\r\n      {message && (\r\n        <div className={`p-4 rounded-lg ${\r\n          message.type === 'success' \r\n            ? 'bg-green-50 dark:bg-green-900/20 text-green-800 dark:text-green-200 border border-green-200 dark:border-green-800' \r\n            : 'bg-red-50 dark:bg-red-900/20 text-red-800 dark:text-red-200 border border-red-200 dark:border-red-800'\r\n        }`}>\r\n          <div className=\"flex items-center gap-2\">\r\n            <i className={message.type === 'success' ? 'ri-checkbox-circle-line' : 'ri-error-warning-line'}></i>\r\n            <span>{message.text}</span>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Tabs */}\r\n      <div className=\"border-b border-gray-200 dark:border-gray-700\">\r\n        <div className=\"flex gap-2 overflow-x-auto\">\r\n          {tabs.map((tab) => (\r\n            <button\r\n              key={tab.id}\r\n              onClick={() => setActiveTab(tab.id as typeof activeTab)}\r\n              className={`px-6 py-3 font-medium whitespace-nowrap transition-all duration-200 border-b-2 cursor-pointer ${\r\n                activeTab === tab.id\r\n                  ? 'border-amber-500 text-amber-600 dark:text-amber-400'\r\n                  : 'border-transparent text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200'\r\n              }`}\r\n            >\r\n              <i className={`${tab.icon} mr-2`}></i>\r\n              {tab.label}\r\n            </button>\r\n          ))}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Header & Topbar Settings */}\r\n      {activeTab === 'header' && (\r\n        <div className=\"bg-white dark:bg-gray-800 rounded-xl p-6 space-y-6\">\r\n          <div className=\"flex items-center justify-between pb-4 border-b border-gray-200 dark:border-gray-700\">\r\n            <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white\">Configuraes do Header</h3>\r\n            <label className=\"flex items-center gap-3 cursor-pointer\">\r\n              <span className=\"text-sm text-gray-600 dark:text-gray-400\">Mostrar Topbar</span>\r\n              <input\r\n                type=\"checkbox\"\r\n                checked={settings.show_topbar}\r\n                onChange={(e) => setSettings({ ...settings, show_topbar: e.target.checked })}\r\n                className=\"w-5 h-5 text-amber-600 rounded focus:ring-2 focus:ring-amber-500 cursor-pointer\"\r\n              />\r\n            </label>\r\n          </div>\r\n\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                E-mail de Contacto\r\n              </label>\r\n              <input\r\n                type=\"email\"\r\n                value={settings.topbar_email}\r\n                onChange={(e) => setSettings({ ...settings, topbar_email: e.target.value })}\r\n                className=\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\r\n                placeholder=\"email@exemplo.com\"\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                Telefone / WhatsApp\r\n              </label>\r\n              <input\r\n                type=\"text\"\r\n                value={settings.topbar_phone}\r\n                onChange={(e) => setSettings({ ...settings, topbar_phone: e.target.value })}\r\n                className=\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\r\n                placeholder=\"+352 621 717 862\"\r\n              />\r\n            </div>\r\n\r\n            <div className=\"md:col-span-2\">\r\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                Texto Promocional (Topbar)\r\n              </label>\r\n              <input\r\n                type=\"text\"\r\n                value={settings.topbar_promo_text}\r\n                onChange={(e) => setSettings({ ...settings, topbar_promo_text: e.target.value })}\r\n                className=\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\r\n                placeholder=\"Envio grtis em compras acima de 50\"\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"pt-4 border-t border-gray-200 dark:border-gray-700\">\r\n            <label className=\"flex items-center gap-3 cursor-pointer\">\r\n              <input\r\n                type=\"checkbox\"\r\n                checked={settings.enable_theme_toggle}\r\n                onChange={(e) => setSettings({ ...settings, enable_theme_toggle: e.target.checked })}\r\n                className=\"w-5 h-5 text-amber-600 rounded focus:ring-2 focus:ring-amber-500 cursor-pointer\"\r\n              />\r\n              <div>\r\n                <span className=\"text-sm font-medium text-gray-900 dark:text-white\">Ativar Toggle Dark/Light Mode</span>\r\n                <p className=\"text-xs text-gray-500 dark:text-gray-400\">Permite aos utilizadores alternar entre modo claro e escuro</p>\r\n              </div>\r\n            </label>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Theme & Colors Settings */}\r\n      {activeTab === 'theme' && (\r\n        <div className=\"bg-white dark:bg-gray-800 rounded-xl p-6 space-y-6\">\r\n          <div className=\"pb-4 border-b border-gray-200 dark:border-gray-700\">\r\n            <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white\">Cores do Tema</h3>\r\n            <p className=\"text-sm text-gray-600 dark:text-gray-400 mt-1\">\r\n              Personalize as cores principais do site\r\n            </p>\r\n          </div>\r\n\r\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                Cor Primria\r\n              </label>\r\n              <div className=\"flex gap-3\">\r\n                <input\r\n                  type=\"color\"\r\n                  value={settings.primary_color}\r\n                  onChange={(e) => setSettings({ ...settings, primary_color: e.target.value })}\r\n                  className=\"w-16 h-12 rounded-lg cursor-pointer border-2 border-gray-300 dark:border-gray-600\"\r\n                />\r\n                <input\r\n                  type=\"text\"\r\n                  value={settings.primary_color}\r\n                  onChange={(e) => setSettings({ ...settings, primary_color: e.target.value })}\r\n                  className=\"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white font-mono text-sm\"\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                Cor Secundria\r\n              </label>\r\n              <div className=\"flex gap-3\">\r\n                <input\r\n                  type=\"color\"\r\n                  value={settings.secondary_color}\r\n                  onChange={(e) => setSettings({ ...settings, secondary_color: e.target.value })}\r\n                  className=\"w-16 h-12 rounded-lg cursor-pointer border-2 border-gray-300 dark:border-gray-600\"\r\n                />\r\n                <input\r\n                  type=\"text\"\r\n                  value={settings.secondary_color}\r\n                  onChange={(e) => setSettings({ ...settings, secondary_color: e.target.value })}\r\n                  className=\"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white font-mono text-sm\"\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                Cor de Destaque\r\n              </label>\r\n              <div className=\"flex gap-3\">\r\n                <input\r\n                  type=\"color\"\r\n                  value={settings.accent_color}\r\n                  onChange={(e) => setSettings({ ...settings, accent_color: e.target.value })}\r\n                  className=\"w-16 h-12 rounded-lg cursor-pointer border-2 border-gray-300 dark:border-gray-600\"\r\n                />\r\n                <input\r\n                  type=\"text\"\r\n                  value={settings.accent_color}\r\n                  onChange={(e) => setSettings({ ...settings, accent_color: e.target.value })}\r\n                  className=\"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white font-mono text-sm\"\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"pt-4 border-t border-gray-200 dark:border-gray-700\">\r\n            <h4 className=\"text-sm font-medium text-gray-900 dark:text-white mb-4\">Preview das Cores</h4>\r\n            <div className=\"grid grid-cols-3 gap-4\">\r\n              <div className=\"p-4 rounded-lg text-center\" style={{ backgroundColor: settings.primary_color }}>\r\n                <span className=\"text-white font-semibold\">Primria</span>\r\n              </div>\r\n              <div className=\"p-4 rounded-lg text-center\" style={{ backgroundColor: settings.secondary_color }}>\r\n                <span className=\"text-white font-semibold\">Secundria</span>\r\n              </div>\r\n              <div className=\"p-4 rounded-lg text-center\" style={{ backgroundColor: settings.accent_color }}>\r\n                <span className=\"text-white font-semibold\">Destaque</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Carousel Settings */}\r\n      {activeTab === 'carousel' && (\r\n        <div className=\"bg-white dark:bg-gray-800 rounded-xl p-6 space-y-6\">\r\n          <div className=\"pb-4 border-b border-gray-200 dark:border-gray-700\">\r\n            <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white\">Configuraes do Carousel</h3>\r\n            <p className=\"text-sm text-gray-600 dark:text-gray-400 mt-1\">\r\n              Controle o comportamento do carousel de produtos em destaque\r\n            </p>\r\n          </div>\r\n\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                Mximo de Itens\r\n              </label>\r\n              <input\r\n                type=\"number\"\r\n                min=\"1\"\r\n                max=\"20\"\r\n                value={settings.carousel_max_items}\r\n                onChange={(e) => setSettings({ ...settings, carousel_max_items: parseInt(e.target.value) || 10 })}\r\n                className=\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\r\n              />\r\n              <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-1\">\r\n                Nmero mximo de produtos a exibir no carousel\r\n              </p>\r\n            </div>\r\n\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                Intervalo de Rotao (ms)\r\n              </label>\r\n              <input\r\n                type=\"number\"\r\n                min=\"1000\"\r\n                max=\"10000\"\r\n                step=\"500\"\r\n                value={settings.carousel_interval}\r\n                onChange={(e) => setSettings({ ...settings, carousel_interval: parseInt(e.target.value) || 3000 })}\r\n                className=\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\r\n              />\r\n              <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-1\">\r\n                Tempo entre cada transio (em milissegundos)\r\n              </p>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"pt-4 border-t border-gray-200 dark:border-gray-700\">\r\n            <label className=\"flex items-center gap-3 cursor-pointer\">\r\n              <input\r\n                type=\"checkbox\"\r\n                checked={settings.carousel_auto_play}\r\n                onChange={(e) => setSettings({ ...settings, carousel_auto_play: e.target.checked })}\r\n                className=\"w-5 h-5 text-amber-600 rounded focus:ring-2 focus:ring-amber-500 cursor-pointer\"\r\n              />\r\n              <div>\r\n                <span className=\"text-sm font-medium text-gray-900 dark:text-white\">Auto-Play Ativado</span>\r\n                <p className=\"text-xs text-gray-500 dark:text-gray-400\">O carousel roda automaticamente</p>\r\n              </div>\r\n            </label>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Footer Settings */}\r\n      {activeTab === 'footer' && (\r\n        <div className=\"bg-white dark:bg-gray-800 rounded-xl p-6 space-y-6\">\r\n          <div className=\"pb-4 border-b border-gray-200 dark:border-gray-700\">\r\n            <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white\">Configuraes do Footer</h3>\r\n            <p className=\"text-sm text-gray-600 dark:text-gray-400 mt-1\">\r\n              Personalize o rodap e links de redes sociais\r\n            </p>\r\n          </div>\r\n\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n              Texto Sobre a Empresa\r\n            </label>\r\n            <textarea\r\n              value={settings.footer_about_text}\r\n              onChange={(e) => setSettings({ ...settings, footer_about_text: e.target.value })}\r\n              rows={3}\r\n              className=\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white resize-none\"\r\n              placeholder=\"Descrio breve da empresa...\"\r\n            />\r\n          </div>\r\n\r\n          <div className=\"pt-4 border-t border-gray-200 dark:border-gray-700\">\r\n            <h4 className=\"text-sm font-medium text-gray-900 dark:text-white mb-4\">Redes Sociais</h4>\r\n            <div className=\"space-y-4\">\r\n              <div className=\"flex items-center gap-3\">\r\n                <div className=\"w-10 h-10 flex items-center justify-center bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 rounded-lg\">\r\n                  <i className=\"ri-facebook-fill\"></i>\r\n                </div>\r\n                <input\r\n                  type=\"url\"\r\n                  value={settings.footer_social_facebook}\r\n                  onChange={(e) => setSettings({ ...settings, footer_social_facebook: e.target.value })}\r\n                  className=\"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\r\n                  placeholder=\"https://facebook.com/...\"\r\n                />\r\n              </div>\r\n\r\n              <div className=\"flex items-center gap-3\">\r\n                <div className=\"w-10 h-10 flex items-center justify-center bg-pink-100 dark:bg-pink-900/30 text-pink-600 dark:text-pink-400 rounded-lg\">\r\n                  <i className=\"ri-instagram-line\"></i>\r\n                </div>\r\n                <input\r\n                  type=\"url\"\r\n                  value={settings.footer_social_instagram}\r\n                  onChange={(e) => setSettings({ ...settings, footer_social_instagram: e.target.value })}\r\n                  className=\"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\r\n                  placeholder=\"https://instagram.com/...\"\r\n                />\r\n              </div>\r\n\r\n              <div className=\"flex items-center gap-3\">\r\n                <div className=\"w-10 h-10 flex items-center justify-center bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-white rounded-lg\">\r\n                  <i className=\"ri-twitter-x-line\"></i>\r\n                </div>\r\n                <input\r\n                  type=\"url\"\r\n                  value={settings.footer_social_twitter}\r\n                  onChange={(e) => setSettings({ ...settings, footer_social_twitter: e.target.value })}\r\n                  className=\"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\r\n                  placeholder=\"https://twitter.com/...\"\r\n                />\r\n              </div>\r\n\r\n              <div className=\"flex items-center gap-3\">\r\n                <div className=\"w-10 h-10 flex items-center justify-center bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 rounded-lg\">\r\n                  <i className=\"ri-linkedin-fill\"></i>\r\n                </div>\r\n                <input\r\n                  type=\"url\"\r\n                  value={settings.footer_social_linkedin}\r\n                  onChange={(e) => setSettings({ ...settings, footer_social_linkedin: e.target.value })}\r\n                  className=\"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\r\n                  placeholder=\"https://linkedin.com/...\"\r\n                />\r\n              </div>\r\n\r\n              <div className=\"flex items-center gap-3\">\r\n                <div className=\"w-10 h-10 flex items-center justify-center bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400 rounded-lg\">\r\n                  <i className=\"ri-youtube-fill\"></i>\r\n                </div>\r\n                <input\r\n                  type=\"url\"\r\n                  value={settings.footer_social_youtube}\r\n                  onChange={(e) => setSettings({ ...settings, footer_social_youtube: e.target.value })}\r\n                  className=\"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\r\n                  placeholder=\"https://youtube.com/...\"\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","// API Endpoints para WooCommerce Integration\r\n\r\nimport { supabase } from '../lib/supabase';\r\n\r\nconst WOOCOMMERCE_API_BASE = '/api/integrations/woocommerce';\r\n\r\ninterface WooCredentials {\r\n  store_url: string;\r\n  consumer_key: string;\r\n  consumer_secret: string;\r\n  api_version: string;\r\n  use_ssl: boolean;\r\n  products_only: boolean;\r\n}\r\n\r\ninterface ImportOptions {\r\n  update_existing: boolean;\r\n  create_new: boolean;\r\n  sync_stock_only: boolean;\r\n  import_images: boolean;\r\n}\r\n\r\n/**\r\n * Normalizar URL da loja (remover trailing slash, garantir protocolo)\r\n */\r\nfunction normalizeStoreUrl(url: string, useSSL: boolean): string {\r\n  let normalized = url.trim().replace(/\\/+$/, ''); // Remove trailing slashes\r\n  \r\n  // Adicionar protocolo se no existir\r\n  if (!normalized.startsWith('http://') && !normalized.startsWith('https://')) {\r\n    normalized = `${useSSL ? 'https' : 'http'}://${normalized}`;\r\n  }\r\n  \r\n  // Forar HTTPS se useSSL for true\r\n  if (useSSL && normalized.startsWith('http://')) {\r\n    normalized = normalized.replace('http://', 'https://');\r\n  }\r\n  \r\n  return normalized;\r\n}\r\n\r\n/**\r\n * Testar conexo com WooCommerce\r\n * Testa tanto /wp-json/ quanto /wp-json/wc/v3/products\r\n */\r\nexport async function testWooCommerceConnection(credentials: WooCredentials) {\r\n  try {\r\n    const storeUrl = normalizeStoreUrl(credentials.store_url, credentials.use_ssl);\r\n    \r\n    // Teste 1: Verificar se API REST est ativa\r\n    const rootUrl = `${storeUrl}/wp-json/`;\r\n    \r\n    try {\r\n      const rootResponse = await fetch(rootUrl, {\r\n        method: 'GET',\r\n        headers: {\r\n          'Content-Type': 'application/json'\r\n        }\r\n      });\r\n\r\n      if (!rootResponse.ok) {\r\n        throw new Error(`API REST no acessvel. Status: ${rootResponse.status}. Verifique se os permalinks esto configurados corretamente.`);\r\n      }\r\n\r\n      const rootData = await rootResponse.json();\r\n      \r\n      // Verificar se WooCommerce est instalado\r\n      if (!rootData.namespaces || !rootData.namespaces.some((ns: string) => ns.includes('wc/'))) {\r\n        throw new Error('WooCommerce no detectado. Certifique-se que o plugin est instalado e ativo.');\r\n      }\r\n    } catch (error: any) {\r\n      if (error.message.includes('Failed to fetch') || error.message.includes('NetworkError')) {\r\n        throw new Error(`No foi possvel conectar a ${storeUrl}. Verifique se o domnio est correto e acessvel.`);\r\n      }\r\n      throw error;\r\n    }\r\n\r\n    // Teste 2: Verificar credenciais WooCommerce\r\n    const productsUrl = `${storeUrl}/wp-json/${credentials.api_version}/products?per_page=1`;\r\n    const auth = btoa(`${credentials.consumer_key}:${credentials.consumer_secret}`);\r\n    \r\n    const response = await fetch(productsUrl, {\r\n      method: 'GET',\r\n      headers: {\r\n        'Authorization': `Basic ${auth}`,\r\n        'Content-Type': 'application/json'\r\n      }\r\n    });\r\n\r\n    if (!response.ok) {\r\n      if (response.status === 401) {\r\n        throw new Error('Credenciais invlidas. Verifique o Consumer Key e Consumer Secret.');\r\n      } else if (response.status === 403) {\r\n        throw new Error('Acesso negado. Certifique-se que as chaves tm permisses de Leitura/Escrita.');\r\n      } else if (response.status === 404) {\r\n        throw new Error(`API ${credentials.api_version} no encontrada. Tente usar wc/v3.`);\r\n      }\r\n      throw new Error(`Erro ${response.status}: ${response.statusText}`);\r\n    }\r\n\r\n    const data = await response.json();\r\n    const totalProducts = response.headers.get('X-WP-Total') || data.length;\r\n    \r\n    return {\r\n      success: true,\r\n      message: ' Conexo estabelecida com sucesso!',\r\n      data: {\r\n        store_url: storeUrl,\r\n        api_version: credentials.api_version,\r\n        total_products: totalProducts,\r\n        woocommerce_version: response.headers.get('X-WC-Version') || 'Desconhecida'\r\n      }\r\n    };\r\n  } catch (error: any) {\r\n    console.error('Erro ao testar conexo:', error);\r\n    return {\r\n      success: false,\r\n      message: error.message || 'Erro desconhecido ao conectar com WooCommerce'\r\n    };\r\n  }\r\n}\r\n\r\n/**\r\n * Buscar produtos do WooCommerce (preview)\r\n */\r\nexport async function fetchWooCommerceProducts(limit: number = 50) {\r\n  try {\r\n    // Buscar credenciais do Supabase\r\n    const { data: config, error } = await supabase\r\n      .from('integrations_woocommerce')\r\n      .select('*')\r\n      .maybeSingle();\r\n\r\n    if (error || !config) {\r\n      throw new Error('Configurao WooCommerce no encontrada. Por favor, conecte primeiro.');\r\n    }\r\n\r\n    const storeUrl = normalizeStoreUrl(config.store_url, config.use_ssl);\r\n    const url = `${storeUrl}/wp-json/${config.api_version}/products?per_page=${limit}&status=publish`;\r\n    const auth = btoa(`${config.consumer_key}:${config.consumer_secret}`);\r\n    \r\n    const response = await fetch(url, {\r\n      method: 'GET',\r\n      headers: {\r\n        'Authorization': `Basic ${auth}`,\r\n        'Content-Type': 'application/json'\r\n      }\r\n    });\r\n\r\n    if (!response.ok) {\r\n      throw new Error(`Erro ${response.status}: ${response.statusText}`);\r\n    }\r\n\r\n    const products = await response.json();\r\n    const totalProducts = response.headers.get('X-WP-Total') || products.length;\r\n    \r\n    // Mapear produtos para formato interno\r\n    return {\r\n      success: true,\r\n      total: parseInt(totalProducts as string),\r\n      products: products.map((p: any) => ({\r\n        id: p.id,\r\n        name: p.name,\r\n        slug: p.slug,\r\n        sku: p.sku || `woo-${p.id}`,\r\n        price: p.price || p.regular_price || '0',\r\n        regular_price: p.regular_price || '0',\r\n        sale_price: p.sale_price || null,\r\n        stock: p.stock_quantity || 0,\r\n        stock_status: p.stock_status,\r\n        manage_stock: p.manage_stock,\r\n        image: p.images?.[0]?.src || '',\r\n        images: p.images?.map((img: any) => img.src) || [],\r\n        category: p.categories?.[0]?.name || 'Sem categoria',\r\n        categories: p.categories?.map((cat: any) => cat.name) || [],\r\n        description: p.description || '',\r\n        short_description: p.short_description || '',\r\n        weight: p.weight || null,\r\n        dimensions: p.dimensions || null,\r\n        variations: p.variations || [],\r\n        attributes: p.attributes || [],\r\n        tags: p.tags?.map((tag: any) => tag.name) || []\r\n      }))\r\n    };\r\n  } catch (error: any) {\r\n    console.error('Erro ao buscar produtos:', error);\r\n    return {\r\n      success: false,\r\n      message: error.message || 'Erro ao buscar produtos',\r\n      products: []\r\n    };\r\n  }\r\n}\r\n\r\n/**\r\n * Importar produtos do WooCommerce\r\n */\r\nexport async function importWooCommerceProducts(\r\n  mode: 'preview' | 'full',\r\n  options: ImportOptions,\r\n  categoryMapping: Record<string, string> = {}\r\n) {\r\n  try {\r\n    // Criar job de importao\r\n    const { data: job, error: jobError } = await supabase\r\n      .from('woocommerce_import_jobs')\r\n      .insert({\r\n        status: 'pending',\r\n        total_items: 0,\r\n        processed_items: 0\r\n      })\r\n      .select()\r\n      .single();\r\n\r\n    if (jobError) throw jobError;\r\n\r\n    // Buscar produtos\r\n    const limit = mode === 'preview' ? 50 : 1000;\r\n    const result = await fetchWooCommerceProducts(limit);\r\n    \r\n    if (!result.success) {\r\n      throw new Error(result.message);\r\n    }\r\n\r\n    // Atualizar job com total de items\r\n    await supabase\r\n      .from('woocommerce_import_jobs')\r\n      .update({\r\n        status: 'running',\r\n        total_items: result.products.length\r\n      })\r\n      .eq('id', job.id);\r\n\r\n    let processedCount = 0;\r\n    let createdCount = 0;\r\n    let updatedCount = 0;\r\n    const errors: string[] = [];\r\n\r\n    // Processar cada produto\r\n    for (const product of result.products) {\r\n      try {\r\n        // Verificar se produto j existe (por SKU)\r\n        const { data: existing } = await supabase\r\n          .from('products')\r\n          .select('id')\r\n          .eq('sku', product.sku)\r\n          .maybeSingle();\r\n\r\n        if (existing && options.update_existing) {\r\n          // Atualizar produto existente\r\n          const updateData: any = {\r\n            title: product.name,\r\n            updated_at: new Date().toISOString()\r\n          };\r\n\r\n          if (options.sync_stock_only) {\r\n            // Apenas atualizar stock\r\n            updateData.stock = product.stock || 0;\r\n          } else {\r\n            // Atualizao completa\r\n            updateData.description = product.description;\r\n            updateData.price = parseFloat(product.price) || 0;\r\n            updateData.stock = product.stock || 0;\r\n            updateData.weight = product.weight;\r\n            updateData.dimensions = product.dimensions;\r\n            \r\n            if (options.import_images && product.images.length > 0) {\r\n              updateData.images = product.images;\r\n            }\r\n          }\r\n\r\n          const { error: updateError } = await supabase\r\n            .from('products')\r\n            .update(updateData)\r\n            .eq('id', existing.id);\r\n\r\n          if (updateError) throw updateError;\r\n\r\n          // Atualizar mapeamento\r\n          await supabase\r\n            .from('product_mappings')\r\n            .upsert({\r\n              woo_product_id: product.id,\r\n              local_product_id: existing.id,\r\n              sku: product.sku,\r\n              last_synced_at: new Date().toISOString()\r\n            });\r\n\r\n          updatedCount++;\r\n\r\n        } else if (!existing && options.create_new) {\r\n          // Criar novo produto\r\n          const { data: newProduct, error: createError } = await supabase\r\n            .from('products')\r\n            .insert({\r\n              title: product.name,\r\n              description: product.description,\r\n              sku: product.sku,\r\n              price: parseFloat(product.price) || 0,\r\n              stock: product.stock || 0,\r\n              weight: product.weight,\r\n              dimensions: product.dimensions,\r\n              images: options.import_images ? product.images : [],\r\n              is_active: true,\r\n              created_at: new Date().toISOString()\r\n            })\r\n            .select()\r\n            .single();\r\n\r\n          if (createError) throw createError;\r\n\r\n          if (newProduct) {\r\n            // Criar mapeamento\r\n            await supabase\r\n              .from('product_mappings')\r\n              .insert({\r\n                woo_product_id: product.id,\r\n                local_product_id: newProduct.id,\r\n                sku: product.sku,\r\n                last_synced_at: new Date().toISOString()\r\n              });\r\n\r\n            createdCount++;\r\n          }\r\n        }\r\n\r\n        processedCount++;\r\n\r\n        // Atualizar progresso do job a cada 10 produtos\r\n        if (processedCount % 10 === 0) {\r\n          await supabase\r\n            .from('woocommerce_import_jobs')\r\n            .update({ processed_items: processedCount })\r\n            .eq('id', job.id);\r\n        }\r\n\r\n      } catch (error: any) {\r\n        console.error(`Erro ao processar produto ${product.sku}:`, error);\r\n        errors.push(`${product.sku}: ${error.message}`);\r\n      }\r\n    }\r\n\r\n    // Finalizar job\r\n    await supabase\r\n      .from('woocommerce_import_jobs')\r\n      .update({\r\n        status: errors.length > 0 && processedCount === 0 ? 'failed' : 'completed',\r\n        processed_items: processedCount,\r\n        completed_at: new Date().toISOString(),\r\n        error_message: errors.length > 0 ? errors.slice(0, 5).join('; ') : null\r\n      })\r\n      .eq('id', job.id);\r\n\r\n    // Atualizar ltimo sync\r\n    await supabase\r\n      .from('integrations_woocommerce')\r\n      .update({ last_sync_at: new Date().toISOString() })\r\n      .limit(1);\r\n\r\n    // Salvar no localStorage para debug panel\r\n    localStorage.setItem('last_woo_sync', JSON.stringify({\r\n      timestamp: new Date().toISOString(),\r\n      processed: processedCount,\r\n      created: createdCount,\r\n      updated: updatedCount,\r\n      errors: errors.length\r\n    }));\r\n\r\n    return {\r\n      success: true,\r\n      job_id: job.id,\r\n      processed: processedCount,\r\n      created: createdCount,\r\n      updated: updatedCount,\r\n      total: result.products.length,\r\n      errors\r\n    };\r\n\r\n  } catch (error: any) {\r\n    console.error('Erro ao importar produtos:', error);\r\n    return {\r\n      success: false,\r\n      message: error.message || 'Erro ao importar produtos'\r\n    };\r\n  }\r\n}\r\n\r\n/**\r\n * Buscar status de um job de importao\r\n */\r\nexport async function getImportJobStatus(jobId: string) {\r\n  try {\r\n    const { data, error } = await supabase\r\n      .from('woocommerce_import_jobs')\r\n      .select('*')\r\n      .eq('id', jobId)\r\n      .single();\r\n\r\n    if (error) throw error;\r\n\r\n    return {\r\n      success: true,\r\n      job: data\r\n    };\r\n  } catch (error: any) {\r\n    return {\r\n      success: false,\r\n      message: error.message || 'Erro ao buscar status do job'\r\n    };\r\n  }\r\n}\r\n\r\n/**\r\n * Verificar sade da conexo WooCommerce\r\n */\r\nexport async function checkWooCommerceHealth() {\r\n  try {\r\n    const { data: config, error } = await supabase\r\n      .from('integrations_woocommerce')\r\n      .select('*')\r\n      .maybeSingle();\r\n\r\n    if (error || !config) {\r\n      return {\r\n        connected: false,\r\n        message: 'No conectado'\r\n      };\r\n    }\r\n\r\n    const storeUrl = normalizeStoreUrl(config.store_url, config.use_ssl);\r\n    const url = `${storeUrl}/wp-json/`;\r\n    \r\n    const response = await fetch(url, {\r\n      method: 'GET',\r\n      headers: { 'Content-Type': 'application/json' }\r\n    });\r\n\r\n    return {\r\n      connected: response.ok,\r\n      message: response.ok ? 'Conectado' : 'Erro de conexo',\r\n      last_sync: config.last_sync_at\r\n    };\r\n  } catch (error) {\r\n    return {\r\n      connected: false,\r\n      message: 'Erro ao verificar conexo'\r\n    };\r\n  }\r\n}\r\n\r\nexport default {\r\n  testWooCommerceConnection,\r\n  fetchWooCommerceProducts,\r\n  importWooCommerceProducts,\r\n  getImportJobStatus,\r\n  checkWooCommerceHealth\r\n};\r\n","import { useState, useEffect } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { supabase } from '../../../lib/supabase';\r\nimport { testWooCommerceConnection, fetchWooCommerceProducts, importWooCommerceProducts } from '../../../api/woocommerce';\r\n\r\ninterface WooCommerceIntegrationProps {\r\n  darkMode: boolean;\r\n}\r\n\r\ninterface WooCredentials {\r\n  store_url: string;\r\n  consumer_key: string;\r\n  consumer_secret: string;\r\n  api_version: string;\r\n  use_ssl: boolean;\r\n  products_only: boolean;\r\n}\r\n\r\ninterface ImportJob {\r\n  id: string;\r\n  status: 'pending' | 'running' | 'completed' | 'failed';\r\n  total_items: number;\r\n  processed_items: number;\r\n  created_at: string;\r\n  completed_at?: string;\r\n  error_message?: string;\r\n}\r\n\r\ninterface ImportedProduct {\r\n  id: string;\r\n  woo_id: number;\r\n  title: string;\r\n  sku: string;\r\n  price: number;\r\n  sale_price?: number;\r\n  stock: number;\r\n  images: string[];\r\n  description: string;\r\n  short_description: string;\r\n  category: string;\r\n  weight?: string;\r\n  dimensions?: any;\r\n  manage_stock: boolean;\r\n  stock_status: string;\r\n  last_synced_at: string;\r\n}\r\n\r\nexport default function WooCommerceIntegration({ darkMode }: WooCommerceIntegrationProps) {\r\n  const [credentials, setCredentials] = useState<WooCredentials>({\r\n    store_url: '',\r\n    consumer_key: '',\r\n    consumer_secret: '',\r\n    api_version: 'wc/v3',\r\n    use_ssl: true,\r\n    products_only: true\r\n  });\r\n  const [isConnected, setIsConnected] = useState(false);\r\n  const [testing, setTesting] = useState(false);\r\n  const [testResult, setTestResult] = useState<any>(null);\r\n  const [showCredentials, setShowCredentials] = useState(false);\r\n  const [previewProducts, setPreviewProducts] = useState<any[]>([]);\r\n  const [showPreview, setShowPreview] = useState(false);\r\n  const [importing, setImporting] = useState(false);\r\n  const [importJobs, setImportJobs] = useState<ImportJob[]>([]);\r\n  const [importedProducts, setImportedProducts] = useState<ImportedProduct[]>([]);\r\n  const [showImportedProducts, setShowImportedProducts] = useState(false);\r\n  const [selectedProduct, setSelectedProduct] = useState<ImportedProduct | null>(null);\r\n  const [editingProduct, setEditingProduct] = useState<ImportedProduct | null>(null);\r\n  const [categoryMapping, setCategoryMapping] = useState<Record<string, string>>({});\r\n  const [syncSchedule, setSyncSchedule] = useState('manual');\r\n  const [importOptions, setImportOptions] = useState({\r\n    update_existing: true,\r\n    create_new: true,\r\n    sync_stock_only: false,\r\n    import_images: true\r\n  });\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [filterCategory, setFilterCategory] = useState('all');\r\n  const [categories, setCategories] = useState<any[]>([]);\r\n\r\n  useEffect(() => {\r\n    loadConnection();\r\n    loadImportJobs();\r\n    loadCategories();\r\n  }, []);\r\n\r\n  const loadConnection = async () => {\r\n    try {\r\n      setLoading(true);\r\n      setError(null);\r\n      const { data, error } = await supabase\r\n        .from('integrations_woocommerce')\r\n        .select('*')\r\n        .maybeSingle();\r\n\r\n      if (error) throw error;\r\n      \r\n      if (data) {\r\n        setIsConnected(true);\r\n        setCredentials({\r\n          store_url: data.store_url,\r\n          consumer_key: '',\r\n          consumer_secret: '',\r\n          api_version: data.api_version || 'wc/v3',\r\n          use_ssl: data.use_ssl ?? true,\r\n          products_only: data.products_only ?? true\r\n        });\r\n        setSyncSchedule(data.sync_schedule || 'manual');\r\n        loadImportedProducts();\r\n      }\r\n    } catch (error: any) {\r\n      console.error('Erro ao carregar conexo:', error);\r\n      setError('Falha ao carregar configuraes de conexo');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const loadImportJobs = async () => {\r\n    try {\r\n      setError(null);\r\n      const { data, error } = await supabase\r\n        .from('woocommerce_import_jobs')\r\n        .select('*')\r\n        .order('created_at', { ascending: false })\r\n        .limit(10);\r\n\r\n      if (error) throw error;\r\n      setImportJobs(data || []);\r\n    } catch (error: any) {\r\n      console.error('Erro ao carregar jobs:', error);\r\n      setError('Falha ao carregar histrico de importaes');\r\n    }\r\n  };\r\n\r\n  const loadCategories = async () => {\r\n    try {\r\n      const { data, error } = await supabase\r\n        .from('categories')\r\n        .select('*')\r\n        .order('name');\r\n\r\n      if (error) throw error;\r\n      setCategories(data || []);\r\n    } catch (error: any) {\r\n      console.error('Erro ao carregar categorias:', error);\r\n    }\r\n  };\r\n\r\n  const loadImportedProducts = async () => {\r\n    try {\r\n      const { data: mappings, error: mappingsError } = await supabase\r\n        .from('product_mappings')\r\n        .select(`\r\n          woo_product_id,\r\n          local_product_id,\r\n          sku,\r\n          last_synced_at,\r\n          products (\r\n            id,\r\n            title,\r\n            sku,\r\n            price,\r\n            sale_price,\r\n            stock,\r\n            images,\r\n            description,\r\n            short_description,\r\n            category_id,\r\n            weight,\r\n            dimensions,\r\n            manage_stock,\r\n            stock_status,\r\n            categories (\r\n              name\r\n            )\r\n          )\r\n        `)\r\n        .order('last_synced_at', { ascending: false });\r\n\r\n      if (mappingsError) throw mappingsError;\r\n\r\n      const products = mappings?.map((m: any) => ({\r\n        id: m.products.id,\r\n        woo_id: m.woo_product_id,\r\n        title: m.products.title,\r\n        sku: m.products.sku,\r\n        price: m.products.price,\r\n        sale_price: m.products.sale_price,\r\n        stock: m.products.stock,\r\n        images: m.products.images || [],\r\n        description: m.products.description || '',\r\n        short_description: m.products.short_description || '',\r\n        category: m.products.categories?.name || 'Sem categoria',\r\n        weight: m.products.weight,\r\n        dimensions: m.products.dimensions,\r\n        manage_stock: m.products.manage_stock,\r\n        stock_status: m.products.stock_status,\r\n        last_synced_at: m.last_synced_at\r\n      })) || [];\r\n\r\n      setImportedProducts(products);\r\n    } catch (error: any) {\r\n      console.error('Erro ao carregar produtos importados:', error);\r\n    }\r\n  };\r\n\r\n  const testConnection = async () => {\r\n    setTesting(true);\r\n    setTestResult(null);\r\n\r\n    try {\r\n      const startTime = Date.now();\r\n      \r\n      const result = await testWooCommerceConnection(credentials);\r\n      const latency = Date.now() - startTime;\r\n\r\n      setTestResult({\r\n        success: result.success,\r\n        latency,\r\n        message: result.message,\r\n        data: result.data\r\n      });\r\n\r\n      if (result.success) {\r\n        setIsConnected(true);\r\n      }\r\n    } catch (error: any) {\r\n      setTestResult({\r\n        success: false,\r\n        message: error.message || 'Erro ao testar conexo'\r\n      });\r\n    } finally {\r\n      setTesting(false);\r\n    }\r\n  };\r\n\r\n  const saveConnection = async () => {\r\n    if (!credentials.store_url || !credentials.consumer_key || !credentials.consumer_secret) {\r\n      setError('Por favor, preencha todos os campos de conexo');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setError(null);\r\n      const { error } = await supabase\r\n        .from('integrations_woocommerce')\r\n        .upsert({\r\n          store_url: credentials.store_url,\r\n          consumer_key: credentials.consumer_key.replace(//g, ''),\r\n          consumer_secret: credentials.consumer_secret.replace(//g, ''),\r\n          api_version: credentials.api_version,\r\n          use_ssl: credentials.use_ssl,\r\n          products_only: credentials.products_only,\r\n          sync_schedule: syncSchedule,\r\n          updated_at: new Date().toISOString()\r\n        });\r\n\r\n      if (error) throw error;\r\n\r\n      alert(' Conexo salva com sucesso!');\r\n      loadConnection();\r\n    } catch (error: any) {\r\n      console.error('Erro ao salvar:', error);\r\n      setError('Erro ao salvar conexo. Tente novamente.');\r\n    }\r\n  };\r\n\r\n  const loadPreview = async () => {\r\n    try {\r\n      setShowPreview(true);\r\n      const result = await fetchWooCommerceProducts(50);\r\n      \r\n      if (result.success) {\r\n        setPreviewProducts(result.products || []);\r\n      } else {\r\n        alert(` Erro: ${result.message}`);\r\n      }\r\n    } catch (error) {\r\n      console.error('Erro ao carregar preview:', error);\r\n      alert(' Erro ao carregar preview');\r\n    }\r\n  };\r\n\r\n  const startImport = async (mode: 'preview' | 'full') => {\r\n    setImporting(true);\r\n    \r\n    try {\r\n      const result = await importWooCommerceProducts(mode, importOptions, categoryMapping);\r\n\r\n      if (result.success) {\r\n        alert(` Import ${mode === 'preview' ? 'preview' : 'completo'} concludo!\\n\\nProcessados: ${result.processed}/${result.total}\\nCriados: ${result.created}\\nAtualizados: ${result.updated}`);\r\n        loadImportJobs();\r\n        loadImportedProducts();\r\n      } else {\r\n        alert(` Erro: ${result.message}`);\r\n      }\r\n    } catch (error) {\r\n      console.error('Erro ao importar:', error);\r\n      alert(' Erro ao iniciar importao');\r\n    } finally {\r\n      setImporting(false);\r\n    }\r\n  };\r\n\r\n  const disconnectWooCommerce = async () => {\r\n    if (!confirm('Tem certeza que deseja desconectar o WooCommerce?')) return;\r\n\r\n    try {\r\n      setError(null);\r\n      const { error } = await supabase\r\n        .from('integrations_woocommerce')\r\n        .delete()\r\n        .eq('store_url', credentials.store_url);\r\n\r\n      if (error) throw error;\r\n\r\n      setIsConnected(false);\r\n      setCredentials({\r\n        store_url: '',\r\n        consumer_key: '',\r\n        consumer_secret: '',\r\n        api_version: 'wc/v3',\r\n        use_ssl: true,\r\n        products_only: true\r\n      });\r\n      setImportJobs([]);\r\n      setPreviewProducts([]);\r\n      setShowPreview(false);\r\n      setImportedProducts([]);\r\n      setShowImportedProducts(false);\r\n      alert(' Desconectado com sucesso!');\r\n    } catch (error: any) {\r\n      console.error('Erro ao desconectar:', error);\r\n      setError('Erro ao desconectar. Tente novamente.');\r\n    }\r\n  };\r\n\r\n  const saveProductEdit = async () => {\r\n    if (!editingProduct) return;\r\n\r\n    try {\r\n      const { error } = await supabase\r\n        .from('products')\r\n        .update({\r\n          title: editingProduct.title,\r\n          price: editingProduct.price,\r\n          sale_price: editingProduct.sale_price,\r\n          stock: editingProduct.stock,\r\n          description: editingProduct.description,\r\n          short_description: editingProduct.short_description,\r\n          images: editingProduct.images,\r\n          weight: editingProduct.weight,\r\n          updated_at: new Date().toISOString()\r\n        })\r\n        .eq('id', editingProduct.id);\r\n\r\n      if (error) throw error;\r\n\r\n      alert(' Produto atualizado com sucesso!');\r\n      setEditingProduct(null);\r\n      loadImportedProducts();\r\n    } catch (error: any) {\r\n      console.error('Erro ao salvar produto:', error);\r\n      alert(' Erro ao salvar produto');\r\n    }\r\n  };\r\n\r\n  const filteredProducts = importedProducts.filter(p => {\r\n    const matchesSearch = p.title.toLowerCase().includes(searchTerm.toLowerCase()) || \r\n                         p.sku.toLowerCase().includes(searchTerm.toLowerCase());\r\n    const matchesCategory = filterCategory === 'all' || p.category === filterCategory;\r\n    return matchesSearch && matchesCategory;\r\n  });\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center py-12\">\r\n        <div className=\"w-8 h-8 border-2 border-primary border-t-transparent rounded-full animate-spin\"></div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {error && (\r\n        <div className=\"p-4 bg-red-500/20 border border-red-500 rounded-lg\">\r\n          <p className=\"text-red-500 text-sm\">{error}</p>\r\n        </div>\r\n      )}\r\n\r\n      <div className=\"flex items-center justify-between\">\r\n        <div>\r\n          <h2 className=\"text-2xl font-bold flex items-center gap-2\">\r\n            <i className=\"ri-shopping-cart-line text-primary\"></i>\r\n            Integrao WooCommerce\r\n          </h2>\r\n          <p className={`${darkMode ? 'text-gray-300' : 'text-gray-600'} mt-1`}>Gerir produtos do WooCommerce</p>\r\n        </div>\r\n        {isConnected && (\r\n          <div className=\"flex items-center gap-3\">\r\n            <span className=\"px-4 py-2 bg-green-500/20 text-green-500 rounded-lg flex items-center gap-2 font-medium\">\r\n              <i className=\"ri-checkbox-circle-line\"></i>\r\n              Conectado\r\n            </span>\r\n            <button\r\n              onClick={disconnectWooCommerce}\r\n              className=\"px-4 py-2 bg-red-500/20 text-red-500 rounded-lg hover:bg-red-500/30 transition-colors whitespace-nowrap font-medium\"\r\n            >\r\n              <i className=\"ri-link-unlink\"></i> Desconectar\r\n            </button>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Configurao da Conexo */}\r\n      <div className={`p-6 rounded-xl ${darkMode ? 'bg-gray-800/50' : 'bg-white'} border ${darkMode ? 'border-gray-700' : 'border-gray-200'} shadow-lg`}>\r\n        <h3 className=\"text-lg font-bold mb-4 flex items-center gap-2\">\r\n          <i className=\"ri-settings-3-line text-primary\"></i>\r\n          Configurao da Conexo\r\n        </h3>\r\n\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n          <div>\r\n            <label className={`block text-sm font-medium mb-2 ${darkMode ? 'text-gray-200' : 'text-gray-700'}`}>URL da Loja</label>\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"https://minhaloja.com\"\r\n              value={credentials.store_url}\r\n              onChange={(e) => setCredentials({ ...credentials, store_url: e.target.value })}\r\n              className={`w-full px-4 py-2.5 rounded-lg ${darkMode ? 'bg-gray-900 border-gray-600 text-white' : 'bg-gray-50 border-gray-300 text-gray-900'} border focus:outline-none focus:ring-2 focus:ring-primary`}\r\n            />\r\n          </div>\r\n\r\n          <div>\r\n            <label className={`block text-sm font-medium mb-2 ${darkMode ? 'text-gray-200' : 'text-gray-700'}`}>Verso da API</label>\r\n            <select\r\n              value={credentials.api_version}\r\n              onChange={(e) => setCredentials({ ...credentials, api_version: e.target.value })}\r\n              className={`w-full px-4 py-2.5 rounded-lg ${darkMode ? 'bg-gray-900 border-gray-600 text-white' : 'bg-gray-50 border-gray-300 text-gray-900'} border focus:outline-none focus:ring-2 focus:ring-primary`}\r\n            >\r\n              <option value=\"wc/v3\">WC v3 (Recomendado)</option>\r\n              <option value=\"wc/v2\">WC v2</option>\r\n              <option value=\"wc/v1\">WC v1</option>\r\n            </select>\r\n          </div>\r\n\r\n          <div>\r\n            <label className={`block text-sm font-medium mb-2 flex items-center gap-2 ${darkMode ? 'text-gray-200' : 'text-gray-700'}`}>\r\n              Consumer Key\r\n              <button\r\n                onClick={() => setShowCredentials(!showCredentials)}\r\n                className=\"text-xs text-primary hover:underline\"\r\n              >\r\n                {showCredentials ? 'Ocultar' : 'Mostrar'}\r\n              </button>\r\n            </label>\r\n            <input\r\n              type={showCredentials ? 'text' : 'password'}\r\n              placeholder=\"ck_...\"\r\n              value={credentials.consumer_key}\r\n              onChange={(e) => setCredentials({ ...credentials, consumer_key: e.target.value })}\r\n              className={`w-full px-4 py-2.5 rounded-lg ${darkMode ? 'bg-gray-900 border-gray-600 text-white' : 'bg-gray-50 border-gray-300 text-gray-900'} border focus:outline-none focus:ring-2 focus:ring-primary`}\r\n            />\r\n          </div>\r\n\r\n          <div>\r\n            <label className={`block text-sm font-medium mb-2 ${darkMode ? 'text-gray-200' : 'text-gray-700'}`}>Consumer Secret</label>\r\n            <input\r\n              type={showCredentials ? 'text' : 'password'}\r\n              placeholder=\"cs_...\"\r\n              value={credentials.consumer_secret}\r\n              onChange={(e) => setCredentials({ ...credentials, consumer_secret: e.target.value })}\r\n              className={`w-full px-4 py-2.5 rounded-lg ${darkMode ? 'bg-gray-900 border-gray-600 text-white' : 'bg-gray-50 border-gray-300 text-gray-900'} border focus:outline-none focus:ring-2 focus:ring-primary`}\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"flex items-center gap-6 mt-4\">\r\n          <label className=\"flex items-center gap-2 cursor-pointer\">\r\n            <input\r\n              type=\"checkbox\"\r\n              checked={credentials.use_ssl}\r\n              onChange={(e) => setCredentials({ ...credentials, use_ssl: e.target.checked })}\r\n              className=\"w-4 h-4 rounded border-gray-300\"\r\n            />\r\n            <span className={`text-sm ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>Usar SSL (HTTPS)</span>\r\n          </label>\r\n\r\n          <label className=\"flex items-center gap-2 cursor-pointer\">\r\n            <input\r\n              type=\"checkbox\"\r\n              checked={credentials.products_only}\r\n              onChange={(e) => setCredentials({ ...credentials, products_only: e.target.checked })}\r\n              className=\"w-4 h-4 rounded border-gray-300\"\r\n            />\r\n            <span className={`text-sm ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>Apenas Produtos (sem pedidos)</span>\r\n          </label>\r\n        </div>\r\n\r\n        <div className=\"flex items-center gap-3 mt-6\">\r\n          <button\r\n            onClick={testConnection}\r\n            disabled={testing || !credentials.store_url || !credentials.consumer_key || !credentials.consumer_secret}\r\n            className=\"px-6 py-2.5 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 whitespace-nowrap font-medium shadow-lg\"\r\n          >\r\n            {testing ? (\r\n              <>\r\n                <div className=\"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin\"></div>\r\n                Testando...\r\n              </>\r\n            ) : (\r\n              <>\r\n                <i className=\"ri-test-tube-line\"></i>\r\n                Testar Conexo\r\n              </>\r\n            )}\r\n          </button>\r\n\r\n          <button\r\n            onClick={saveConnection}\r\n            disabled={!isConnected}\r\n            className=\"px-6 py-2.5 bg-primary text-white rounded-lg hover:opacity-90 transition-opacity disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 whitespace-nowrap font-medium shadow-lg\"\r\n          >\r\n            <i className=\"ri-save-line\"></i>\r\n            Salvar Conexo\r\n          </button>\r\n        </div>\r\n\r\n        {testResult && (\r\n          <div className={`mt-4 p-4 rounded-lg ${testResult.success ? 'bg-green-500/20 border border-green-500' : 'bg-red-500/20 border border-red-500'}`}>\r\n            <div className=\"flex items-start gap-3\">\r\n              <i className={`${testResult.success ? 'ri-checkbox-circle-line text-green-500' : 'ri-error-warning-line text-red-500'} text-xl`}></i>\r\n              <div className=\"flex-1\">\r\n                <p className=\"font-medium\">{testResult.message}</p>\r\n                {testResult.latency && (\r\n                  <p className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'} mt-1`}>Latncia: {testResult.latency}ms</p>\r\n                )}\r\n                {testResult.data && (\r\n                  <pre className={`text-xs mt-2 p-2 ${darkMode ? 'bg-black/20' : 'bg-gray-100'} rounded overflow-x-auto`}>\r\n                    {JSON.stringify(testResult.data, null, 2)}\r\n                  </pre>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {isConnected && (\r\n        <>\r\n          {/* Importao de Produtos */}\r\n          <div className={`p-6 rounded-xl ${darkMode ? 'bg-gray-800/50' : 'bg-white'} border ${darkMode ? 'border-gray-700' : 'border-gray-200'} shadow-lg`}>\r\n            <h3 className=\"text-lg font-bold mb-4 flex items-center gap-2\">\r\n              <i className=\"ri-download-cloud-line text-accent\"></i>\r\n              Importao de Produtos\r\n            </h3>\r\n\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4\">\r\n              <label className=\"flex items-center gap-2 cursor-pointer\">\r\n                <input\r\n                  type=\"checkbox\"\r\n                  checked={importOptions.update_existing}\r\n                  onChange={(e) => setImportOptions({ ...importOptions, update_existing: e.target.checked })}\r\n                  className=\"w-4 h-4 rounded border-gray-300\"\r\n                />\r\n                <span className={`text-sm ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>Atualizar produtos existentes (por SKU)</span>\r\n              </label>\r\n\r\n              <label className=\"flex items-center gap-2 cursor-pointer\">\r\n                <input\r\n                  type=\"checkbox\"\r\n                  checked={importOptions.create_new}\r\n                  onChange={(e) => setImportOptions({ ...importOptions, create_new: e.target.checked })}\r\n                  className=\"w-4 h-4 rounded border-gray-300\"\r\n                />\r\n                <span className={`text-sm ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>Criar novos produtos</span>\r\n              </label>\r\n\r\n              <label className=\"flex items-center gap-2 cursor-pointer\">\r\n                <input\r\n                  type=\"checkbox\"\r\n                  checked={importOptions.sync_stock_only}\r\n                  onChange={(e) => setImportOptions({ ...importOptions, sync_stock_only: e.target.checked })}\r\n                  className=\"w-4 h-4 rounded border-gray-300\"\r\n                />\r\n                <span className={`text-sm ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>Sincronizar apenas stock</span>\r\n              </label>\r\n\r\n              <label className=\"flex items-center gap-2 cursor-pointer\">\r\n                <input\r\n                  type=\"checkbox\"\r\n                  checked={importOptions.import_images}\r\n                  onChange={(e) => setImportOptions({ ...importOptions, import_images: e.target.checked })}\r\n                  className=\"w-4 h-4 rounded border-gray-300\"\r\n                />\r\n                <span className={`text-sm ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>Importar imagens</span>\r\n              </label>\r\n            </div>\r\n\r\n            <div className=\"mb-4\">\r\n              <label className={`block text-sm font-medium mb-2 ${darkMode ? 'text-gray-200' : 'text-gray-700'}`}>Agendamento de Sincronizao</label>\r\n              <select\r\n                value={syncSchedule}\r\n                onChange={(e) => setSyncSchedule(e.target.value)}\r\n                className={`w-full max-w-xs px-4 py-2.5 rounded-lg ${darkMode ? 'bg-gray-900 border-gray-600 text-white' : 'bg-gray-50 border-gray-300 text-gray-900'} border focus:outline-none focus:ring-2 focus:ring-primary`}\r\n              >\r\n                <option value=\"manual\">Manual</option>\r\n                <option value=\"hourly\">A cada hora</option>\r\n                <option value=\"daily\">Diariamente</option>\r\n                <option value=\"weekly\">Semanalmente</option>\r\n              </select>\r\n            </div>\r\n\r\n            <div className=\"flex items-center gap-3\">\r\n              <button\r\n                onClick={loadPreview}\r\n                className=\"px-6 py-2.5 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors flex items-center gap-2 whitespace-nowrap font-medium shadow-lg\"\r\n              >\r\n                <i className=\"ri-eye-line\"></i>\r\n                Preview (50 produtos)\r\n              </button>\r\n\r\n              <button\r\n                onClick={() => startImport('full')}\r\n                disabled={importing}\r\n                className=\"px-6 py-2.5 bg-accent text-white rounded-lg hover:opacity-90 transition-opacity disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 whitespace-nowrap font-medium shadow-lg\"\r\n              >\r\n                {importing ? (\r\n                  <>\r\n                    <div className=\"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin\"></div>\r\n                    Importando...\r\n                  </>\r\n                ) : (\r\n                  <>\r\n                    <i className=\"ri-download-line\"></i>\r\n                    Importar Todos\r\n                  </>\r\n                )}\r\n              </button>\r\n\r\n              {importedProducts.length > 0 && (\r\n                <button\r\n                  onClick={() => setShowImportedProducts(!showImportedProducts)}\r\n                  className=\"px-6 py-2.5 bg-primary text-white rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap font-medium shadow-lg\"\r\n                >\r\n                  <i className=\"ri-list-check\"></i>\r\n                  Ver Produtos Importados ({importedProducts.length})\r\n                </button>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Preview de Produtos */}\r\n          {showPreview && previewProducts.length > 0 && (\r\n            <div className={`p-6 rounded-xl ${darkMode ? 'bg-gray-800/50' : 'bg-white'} border ${darkMode ? 'border-gray-700' : 'border-gray-200'} shadow-lg`}>\r\n              <div className=\"flex items-center justify-between mb-4\">\r\n                <h3 className=\"text-lg font-bold\">Preview de Produtos</h3>\r\n                <button\r\n                  onClick={() => setShowPreview(false)}\r\n                  className=\"text-gray-400 hover:text-white\"\r\n                >\r\n                  <i className=\"ri-close-line text-xl\"></i>\r\n                </button>\r\n              </div>\r\n              <div className=\"overflow-x-auto\">\r\n                <table className=\"w-full\">\r\n                  <thead className={darkMode ? 'bg-gray-900' : 'bg-gray-100'}>\r\n                    <tr>\r\n                      <th className={`px-4 py-3 text-left font-semibold ${darkMode ? 'text-gray-200' : 'text-gray-700'}`}>Imagem</th>\r\n                      <th className={`px-4 py-3 text-left font-semibold ${darkMode ? 'text-gray-200' : 'text-gray-700'}`}>Nome</th>\r\n                      <th className={`px-4 py-3 text-left font-semibold ${darkMode ? 'text-gray-200' : 'text-gray-700'}`}>SKU</th>\r\n                      <th className={`px-4 py-3 text-left font-semibold ${darkMode ? 'text-gray-200' : 'text-gray-700'}`}>Preo</th>\r\n                      <th className={`px-4 py-3 text-left font-semibold ${darkMode ? 'text-gray-200' : 'text-gray-700'}`}>Stock</th>\r\n                      <th className={`px-4 py-3 text-left font-semibold ${darkMode ? 'text-gray-200' : 'text-gray-700'}`}>Categoria</th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    {previewProducts.slice(0, 10).map((product, index) => (\r\n                      <tr key={index} className={`border-t ${darkMode ? 'border-gray-700' : 'border-gray-200'}`}>\r\n                        <td className=\"px-4 py-3\">\r\n                          <div className={`w-12 h-12 ${darkMode ? 'bg-gray-700' : 'bg-gray-200'} rounded overflow-hidden`}>\r\n                            {product.image && (\r\n                              <img src={product.image} alt={product.name} className=\"w-full h-full object-cover\" />\r\n                            )}\r\n                          </div>\r\n                        </td>\r\n                        <td className={`px-4 py-3 ${darkMode ? 'text-gray-200' : 'text-gray-800'}`}>{product.name}</td>\r\n                        <td className={`px-4 py-3 text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>{product.sku || '-'}</td>\r\n                        <td className=\"px-4 py-3 text-primary font-medium\">{product.price}</td>\r\n                        <td className={`px-4 py-3 ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>{product.stock}</td>\r\n                        <td className={`px-4 py-3 text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>{product.category}</td>\r\n                      </tr>\r\n                    ))}\r\n                  </tbody>\r\n                </table>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Produtos Importados - Vista Detalhada */}\r\n          {showImportedProducts && (\r\n            <div className={`p-6 rounded-xl ${darkMode ? 'bg-gray-800/50' : 'bg-white'} border ${darkMode ? 'border-gray-700' : 'border-gray-200'} shadow-lg`}>\r\n              <div className=\"flex items-center justify-between mb-6\">\r\n                <h3 className=\"text-lg font-bold flex items-center gap-2\">\r\n                  <i className=\"ri-box-3-line text-primary\"></i>\r\n                  Produtos Importados ({filteredProducts.length})\r\n                </h3>\r\n                <button\r\n                  onClick={() => setShowImportedProducts(false)}\r\n                  className={`text-gray-400 hover:${darkMode ? 'text-white' : 'text-gray-900'}`}\r\n                >\r\n                  <i className=\"ri-close-line text-xl\"></i>\r\n                </button>\r\n              </div>\r\n\r\n              {/* Filtros */}\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6\">\r\n                <div>\r\n                  <label className={`block text-sm font-medium mb-2 ${darkMode ? 'text-gray-200' : 'text-gray-700'}`}>Pesquisar</label>\r\n                  <input\r\n                    type=\"text\"\r\n                    placeholder=\"Nome ou SKU...\"\r\n                    value={searchTerm}\r\n                    onChange={(e) => setSearchTerm(e.target.value)}\r\n                    className={`w-full px-4 py-2.5 rounded-lg ${darkMode ? 'bg-gray-900 border-gray-600 text-white' : 'bg-gray-50 border-gray-300 text-gray-900'} border focus:outline-none focus:ring-2 focus:ring-primary`}\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <label className={`block text-sm font-medium mb-2 ${darkMode ? 'text-gray-200' : 'text-gray-700'}`}>Categoria</label>\r\n                  <select\r\n                    value={filterCategory}\r\n                    onChange={(e) => setFilterCategory(e.target.value)}\r\n                    className={`w-full px-4 py-2.5 rounded-lg ${darkMode ? 'bg-gray-900 border-gray-600 text-white' : 'bg-gray-50 border-gray-300 text-gray-900'} border focus:outline-none focus:ring-2 focus:ring-primary`}\r\n                  >\r\n                    <option value=\"all\">Todas as categorias</option>\r\n                    {Array.from(new Set(importedProducts.map(p => p.category))).map(cat => (\r\n                      <option key={cat} value={cat}>{cat}</option>\r\n                    ))}\r\n                  </select>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Grid de Produtos */}\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n                {filteredProducts.map((product) => (\r\n                  <div\r\n                    key={product.id}\r\n                    className={`p-4 rounded-lg ${darkMode ? 'bg-gray-900' : 'bg-gray-50'} border ${darkMode ? 'border-gray-700' : 'border-gray-200'} hover:border-primary transition-colors cursor-pointer`}\r\n                    onClick={() => setSelectedProduct(product)}\r\n                  >\r\n                    <div className={`w-full h-48 ${darkMode ? 'bg-gray-800' : 'bg-gray-200'} rounded-lg overflow-hidden mb-3`}>\r\n                      {product.images[0] && (\r\n                        <img src={product.images[0]} alt={product.title} className=\"w-full h-full object-cover\" />\r\n                      )}\r\n                    </div>\r\n                    <h4 className={`font-semibold mb-2 ${darkMode ? 'text-gray-100' : 'text-gray-900'}`}>{product.title}</h4>\r\n                    <div className=\"flex items-center justify-between mb-2\">\r\n                      <span className=\"text-primary font-bold text-lg\">{product.price}</span>\r\n                      {product.sale_price && (\r\n                        <span className={`text-sm line-through ${darkMode ? 'text-gray-500' : 'text-gray-400'}`}>{product.sale_price}</span>\r\n                      )}\r\n                    </div>\r\n                    <div className=\"flex items-center justify-between text-sm\">\r\n                      <span className={darkMode ? 'text-gray-400' : 'text-gray-600'}>SKU: {product.sku}</span>\r\n                      <span className={`px-2 py-1 rounded ${product.stock > 0 ? 'bg-green-500/20 text-green-500' : 'bg-red-500/20 text-red-500'}`}>\r\n                        Stock: {product.stock}\r\n                      </span>\r\n                    </div>\r\n                    <div className={`text-xs mt-2 ${darkMode ? 'text-gray-500' : 'text-gray-400'}`}>\r\n                      {product.category}\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Modal de Detalhes do Produto */}\r\n          {selectedProduct && !editingProduct && (\r\n            <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\" onClick={() => setSelectedProduct(null)}>\r\n              <div\r\n                className={`${darkMode ? 'bg-gray-800' : 'bg-white'} rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto`}\r\n                onClick={(e) => e.stopPropagation()}\r\n              >\r\n                <div className={`sticky top-0 ${darkMode ? 'bg-gray-800' : 'bg-white'} border-b ${darkMode ? 'border-gray-700' : 'border-gray-200'} p-6 flex items-center justify-between`}>\r\n                  <h3 className=\"text-xl font-bold\">Detalhes do Produto</h3>\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <button\r\n                      onClick={() => {\r\n                        setEditingProduct(selectedProduct);\r\n                        setSelectedProduct(null);\r\n                      }}\r\n                      className=\"px-4 py-2 bg-primary text-white rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap font-medium\"\r\n                    >\r\n                      <i className=\"ri-edit-line\"></i>\r\n                      Editar\r\n                    </button>\r\n                    <button\r\n                      onClick={() => setSelectedProduct(null)}\r\n                      className={`text-gray-400 hover:${darkMode ? 'text-white' : 'text-gray-900'}`}\r\n                    >\r\n                      <i className=\"ri-close-line text-2xl\"></i>\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"p-6\">\r\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                    {/* Imagens */}\r\n                    <div>\r\n                      <h4 className={`font-semibold mb-3 ${darkMode ? 'text-gray-200' : 'text-gray-800'}`}>Imagens</h4>\r\n                      <div className=\"grid grid-cols-2 gap-2\">\r\n                        {selectedProduct.images.map((img, idx) => (\r\n                          <div key={idx} className={`w-full h-48 ${darkMode ? 'bg-gray-900' : 'bg-gray-100'} rounded-lg overflow-hidden`}>\r\n                            <img src={img} alt={`${selectedProduct.title} ${idx + 1}`} className=\"w-full h-full object-cover\" />\r\n                          </div>\r\n                        ))}\r\n                      </div>\r\n                    </div>\r\n\r\n                    {/* Informaes */}\r\n                    <div className=\"space-y-4\">\r\n                      <div>\r\n                        <label className={`text-sm font-medium ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>Nome</label>\r\n                        <p className={`text-lg font-semibold ${darkMode ? 'text-gray-100' : 'text-gray-900'}`}>{selectedProduct.title}</p>\r\n                      </div>\r\n\r\n                      <div className=\"grid grid-cols-2 gap-4\">\r\n                        <div>\r\n                          <label className={`text-sm font-medium ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>Preo</label>\r\n                          <p className=\"text-xl font-bold text-primary\">{selectedProduct.price}</p>\r\n                        </div>\r\n                        {selectedProduct.sale_price && (\r\n                          <div>\r\n                            <label className={`text-sm font-medium ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>Preo Promocional</label>\r\n                            <p className=\"text-xl font-bold text-accent\">{selectedProduct.sale_price}</p>\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n\r\n                      <div className=\"grid grid-cols-2 gap-4\">\r\n                        <div>\r\n                          <label className={`text-sm font-medium ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>SKU</label>\r\n                          <p className={darkMode ? 'text-gray-200' : 'text-gray-800'}>{selectedProduct.sku}</p>\r\n                        </div>\r\n                        <div>\r\n                          <label className={`text-sm font-medium ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>Stock</label>\r\n                          <p className={`font-semibold ${selectedProduct.stock > 0 ? 'text-green-500' : 'text-red-500'}`}>\r\n                            {selectedProduct.stock} unidades\r\n                          </p>\r\n                        </div>\r\n                      </div>\r\n\r\n                      <div>\r\n                        <label className={`text-sm font-medium ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>Categoria</label>\r\n                        <p className={darkMode ? 'text-gray-200' : 'text-gray-800'}>{selectedProduct.category}</p>\r\n                      </div>\r\n\r\n                      {selectedProduct.weight && (\r\n                        <div>\r\n                          <label className={`text-sm font-medium ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>Peso</label>\r\n                          <p className={darkMode ? 'text-gray-200' : 'text-gray-800'}>{selectedProduct.weight} kg</p>\r\n                        </div>\r\n                      )}\r\n\r\n                      <div>\r\n                        <label className={`text-sm font-medium ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>Status do Stock</label>\r\n                        <p className={darkMode ? 'text-gray-200' : 'text-gray-800'}>{selectedProduct.stock_status}</p>\r\n                      </div>\r\n\r\n                      <div>\r\n                        <label className={`text-sm font-medium ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>ltima Sincronizao</label>\r\n                        <p className={darkMode ? 'text-gray-200' : 'text-gray-800'}>\r\n                          {new Date(selectedProduct.last_synced_at).toLocaleString('pt-PT')}\r\n                        </p>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Descries */}\r\n                  <div className=\"mt-6 space-y-4\">\r\n                    <div>\r\n                      <label className={`text-sm font-medium ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>Descrio Curta</label>\r\n                      <div\r\n                        className={`mt-2 p-4 rounded-lg ${darkMode ? 'bg-gray-900' : 'bg-gray-50'}`}\r\n                        dangerouslySetInnerHTML={{ __html: selectedProduct.short_description || 'Sem descrio curta' }}\r\n                      />\r\n                    </div>\r\n\r\n                    <div>\r\n                      <label className={`text-sm font-medium ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>Descrio Completa</label>\r\n                      <div\r\n                        className={`mt-2 p-4 rounded-lg ${darkMode ? 'bg-gray-900' : 'bg-gray-50'} max-h-64 overflow-y-auto`}\r\n                        dangerouslySetInnerHTML={{ __html: selectedProduct.description || 'Sem descrio' }}\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Modal de Edio do Produto */}\r\n          {editingProduct && (\r\n            <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\" onClick={() => setEditingProduct(null)}>\r\n              <div\r\n                className={`${darkMode ? 'bg-gray-800' : 'bg-white'} rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto`}\r\n                onClick={(e) => e.stopPropagation()}\r\n              >\r\n                <div className={`sticky top-0 ${darkMode ? 'bg-gray-800' : 'bg-white'} border-b ${darkMode ? 'border-gray-700' : 'border-gray-200'} p-6 flex items-center justify-between`}>\r\n                  <h3 className=\"text-xl font-bold\">Editar Produto</h3>\r\n                  <button\r\n                    onClick={() => setEditingProduct(null)}\r\n                    className={`text-gray-400 hover:${darkMode ? 'text-white' : 'text-gray-900'}`}\r\n                  >\r\n                    <i className=\"ri-close-line text-2xl\"></i>\r\n                  </button>\r\n                </div>\r\n\r\n                <div className=\"p-6 space-y-6\">\r\n                  <div>\r\n                    <label className={`block text-sm font-medium mb-2 ${darkMode ? 'text-gray-200' : 'text-gray-700'}`}>Nome do Produto</label>\r\n                    <input\r\n                      type=\"text\"\r\n                      value={editingProduct.title}\r\n                      onChange={(e) => setEditingProduct({ ...editingProduct, title: e.target.value })}\r\n                      className={`w-full px-4 py-2.5 rounded-lg ${darkMode ? 'bg-gray-900 border-gray-600 text-white' : 'bg-gray-50 border-gray-300 text-gray-900'} border focus:outline-none focus:ring-2 focus:ring-primary`}\r\n                    />\r\n                  </div>\r\n\r\n                  <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n                    <div>\r\n                      <label className={`block text-sm font-medium mb-2 ${darkMode ? 'text-gray-200' : 'text-gray-700'}`}>Preo ()</label>\r\n                      <input\r\n                        type=\"number\"\r\n                        step=\"0.01\"\r\n                        value={editingProduct.price}\r\n                        onChange={(e) => setEditingProduct({ ...editingProduct, price: parseFloat(e.target.value) })}\r\n                        className={`w-full px-4 py-2.5 rounded-lg ${darkMode ? 'bg-gray-900 border-gray-600 text-white' : 'bg-gray-50 border-gray-300 text-gray-900'} border focus:outline-none focus:ring-2 focus:ring-primary`}\r\n                      />\r\n                    </div>\r\n\r\n                    <div>\r\n                      <label className={`block text-sm font-medium mb-2 ${darkMode ? 'text-gray-200' : 'text-gray-700'}`}>Preo Promocional ()</label>\r\n                      <input\r\n                        type=\"number\"\r\n                        step=\"0.01\"\r\n                        value={editingProduct.sale_price || ''}\r\n                        onChange={(e) => setEditingProduct({ ...editingProduct, sale_price: e.target.value ? parseFloat(e.target.value) : undefined })}\r\n                        className={`w-full px-4 py-2.5 rounded-lg ${darkMode ? 'bg-gray-900 border-gray-600 text-white' : 'bg-gray-50 border-gray-300 text-gray-900'} border focus:outline-none focus:ring-2 focus:ring-primary`}\r\n                      />\r\n                    </div>\r\n\r\n                    <div>\r\n                      <label className={`block text-sm font-medium mb-2 ${darkMode ? 'text-gray-200' : 'text-gray-700'}`}>Stock</label>\r\n                      <input\r\n                        type=\"number\"\r\n                        value={editingProduct.stock}\r\n                        onChange={(e) => setEditingProduct({ ...editingProduct, stock: parseInt(e.target.value) })}\r\n                        className={`w-full px-4 py-2.5 rounded-lg ${darkMode ? 'bg-gray-900 border-gray-600 text-white' : 'bg-gray-50 border-gray-300 text-gray-900'} border focus:outline-none focus:ring-2 focus:ring-primary`}\r\n                      />\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div>\r\n                    <label className={`block text-sm font-medium mb-2 ${darkMode ? 'text-gray-200' : 'text-gray-700'}`}>Descrio Curta</label>\r\n                    <textarea\r\n                      rows={3}\r\n                      value={editingProduct.short_description}\r\n                      onChange={(e) => setEditingProduct({ ...editingProduct, short_description: e.target.value })}\r\n                      className={`w-full px-4 py-2.5 rounded-lg ${darkMode ? 'bg-gray-900 border-gray-600 text-white' : 'bg-gray-50 border-gray-300 text-gray-900'} border focus:outline-none focus:ring-2 focus:ring-primary`}\r\n                    />\r\n                  </div>\r\n\r\n                  <div>\r\n                    <label className={`block text-sm font-medium mb-2 ${darkMode ? 'text-gray-200' : 'text-gray-700'}`}>Descrio Completa</label>\r\n                    <textarea\r\n                      rows={6}\r\n                      value={editingProduct.description}\r\n                      onChange={(e) => setEditingProduct({ ...editingProduct, description: e.target.value })}\r\n                      className={`w-full px-4 py-2.5 rounded-lg ${darkMode ? 'bg-gray-900 border-gray-600 text-white' : 'bg-gray-50 border-gray-300 text-gray-900'} border focus:outline-none focus:ring-2 focus:ring-primary`}\r\n                    />\r\n                  </div>\r\n\r\n                  <div>\r\n                    <label className={`block text-sm font-medium mb-2 ${darkMode ? 'text-gray-200' : 'text-gray-700'}`}>URLs das Imagens (uma por linha)</label>\r\n                    <textarea\r\n                      rows={4}\r\n                      value={editingProduct.images.join('\\n')}\r\n                      onChange={(e) => setEditingProduct({ ...editingProduct, images: e.target.value.split('\\n').filter(url => url.trim()) })}\r\n                      className={`w-full px-4 py-2.5 rounded-lg ${darkMode ? 'bg-gray-900 border-gray-600 text-white' : 'bg-gray-50 border-gray-300 text-gray-900'} border focus:outline-none focus:ring-2 focus:ring-primary`}\r\n                      placeholder=\"https://exemplo.com/imagem1.jpg&#10;https://exemplo.com/imagem2.jpg\"\r\n                    />\r\n                  </div>\r\n\r\n                  <div>\r\n                    <label className={`block text-sm font-medium mb-2 ${darkMode ? 'text-gray-200' : 'text-gray-700'}`}>Peso (kg)</label>\r\n                    <input\r\n                      type=\"text\"\r\n                      value={editingProduct.weight || ''}\r\n                      onChange={(e) => setEditingProduct({ ...editingProduct, weight: e.target.value })}\r\n                      className={`w-full px-4 py-2.5 rounded-lg ${darkMode ? 'bg-gray-900 border-gray-600 text-white' : 'bg-gray-50 border-gray-300 text-gray-900'} border focus:outline-none focus:ring-2 focus:ring-primary`}\r\n                    />\r\n                  </div>\r\n\r\n                  <div className=\"flex items-center gap-3 pt-4\">\r\n                    <button\r\n                      onClick={saveProductEdit}\r\n                      className=\"px-6 py-2.5 bg-primary text-white rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap font-medium shadow-lg\"\r\n                    >\r\n                      <i className=\"ri-save-line\"></i>\r\n                      Salvar Alteraes\r\n                    </button>\r\n                    <button\r\n                      onClick={() => setEditingProduct(null)}\r\n                      className={`px-6 py-2.5 ${darkMode ? 'bg-gray-700' : 'bg-gray-200'} ${darkMode ? 'text-white' : 'text-gray-800'} rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap font-medium`}\r\n                    >\r\n                      <i className=\"ri-close-line\"></i>\r\n                      Cancelar\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Histrico de Importaes */}\r\n          <div className={`p-6 rounded-xl ${darkMode ? 'bg-gray-800/50' : 'bg-white'} border ${darkMode ? 'border-gray-700' : 'border-gray-200'} shadow-lg`}>\r\n            <h3 className=\"text-lg font-bold mb-4 flex items-center gap-2\">\r\n              <i className=\"ri-history-line text-primary\"></i>\r\n              Histrico de Importaes\r\n            </h3>\r\n\r\n            {importJobs.length === 0 ? (\r\n              <p className={`${darkMode ? 'text-gray-400' : 'text-gray-600'} text-center py-8`}>Nenhuma importao realizada ainda</p>\r\n            ) : (\r\n              <div className=\"space-y-3\">\r\n                {importJobs.map((job) => (\r\n                  <div\r\n                    key={job.id}\r\n                    className={`p-4 rounded-lg ${darkMode ? 'bg-gray-900' : 'bg-gray-50'} border ${darkMode ? 'border-gray-700' : 'border-gray-200'}`}\r\n                  >\r\n                    <div className=\"flex items-center justify-between\">\r\n                      <div className=\"flex items-center gap-3\">\r\n                        <span className={`px-3 py-1 rounded-full text-xs font-medium ${\r\n                          job.status === 'completed'\r\n                            ? 'bg-green-500/20 text-green-500'\r\n                            : job.status === 'failed'\r\n                            ? 'bg-red-500/20 text-red-500'\r\n                            : job.status === 'running'\r\n                            ? 'bg-blue-500/20 text-blue-500'\r\n                            : 'bg-gray-500/20 text-gray-500'\r\n                        }`}>\r\n                          {job.status === 'completed' ? 'Concludo' : job.status === 'failed' ? 'Falhou' : job.status === 'running' ? 'Em execuo' : 'Pendente'}\r\n                        </span>\r\n                        <span className={`text-sm ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>\r\n                          {job.processed_items} / {job.total_items} produtos\r\n                        </span>\r\n                      </div>\r\n                      <span className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>\r\n                        {new Date(job.created_at).toLocaleString('pt-PT')}\r\n                      </span>\r\n                    </div>\r\n                    {job.error_message && (\r\n                      <p className=\"text-sm text-red-500 mt-2\">{job.error_message}</p>\r\n                    )}\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            )}\r\n          </div>\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","import { useState, lazy, Suspense, useEffect } from 'react';\r\nimport { useAuth } from '../../contexts/AuthContext';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { supabase } from '../../lib/supabase';\r\nimport AdminHeader from './components/AdminHeader';\r\nimport AdminSidebar from './components/AdminSidebar';\r\nimport DashboardOverview from './components/DashboardOverview';\r\nimport ProductsManagement from './components/ProductsManagement';\r\nimport CategoriesManagement from './components/CategoriesManagement';\r\nimport OrdersManagement from './components/OrdersManagement';\r\nimport CustomersManagement from './components/CustomersManagement';\r\nimport ContentManagement from './components/ContentManagement';\r\nimport MarketingManagement from './components/MarketingManagement';\r\nimport FinancialManagement from './components/FinancialManagement';\r\nimport SecurityManagement from './components/SecurityManagement';\r\nimport AutomationManagement from './components/AutomationManagement';\r\nimport SupportManagement from './components/SupportManagement';\r\nimport ShippingManagement from './components/ShippingManagement';\r\nimport TaxManagement from './components/TaxManagement';\r\nimport MarketplaceManagement from './components/MarketplaceManagement';\r\nimport ThemeEditor from './components/ThemeEditor';\r\nimport SiteSettingsManagement from './components/SiteSettingsManagement';\r\nimport WooCommerceIntegration from './components/WooCommerceIntegration';\r\n\r\nconst ServicesManagement = lazy(() => import('./components/ServicesManagement'));\r\n\r\nexport default function AdminPage() {\r\n  const [activeSection, setActiveSection] = useState('dashboard');\r\n  const [sidebarOpen, setSidebarOpen] = useState(true);\r\n  const [userRole, setUserRole] = useState('admin');\r\n  const { user, signOut } = useAuth();\r\n  const navigate = useNavigate();\r\n\r\n  // Buscar role do utilizador\r\n  useEffect(() => {\r\n    const fetchUserRole = async () => {\r\n      if (!user) return;\r\n      \r\n      try {\r\n        const { data, error } = await supabase\r\n          .from('profiles')\r\n          .select('role')\r\n          .eq('id', user.id)\r\n          .single();\r\n\r\n        if (error) {\r\n          console.error('Erro ao buscar role:', error);\r\n          return;\r\n        }\r\n\r\n        if (data?.role) {\r\n          setUserRole(data.role);\r\n        }\r\n      } catch (error) {\r\n        console.error('Erro ao buscar role:', error);\r\n      }\r\n    };\r\n\r\n    fetchUserRole();\r\n  }, [user]);\r\n\r\n  const handleSignOut = async () => {\r\n    try {\r\n      await signOut();\r\n      navigate('/login');\r\n    } catch (error) {\r\n      console.error('Erro ao fazer logout:', error);\r\n    }\r\n  };\r\n\r\n  const renderContent = () => {\r\n    const content = (() => {\r\n      switch (activeSection) {\r\n        case 'dashboard':\r\n          return <DashboardOverview />;\r\n        case 'products':\r\n          return <ProductsManagement />;\r\n        case 'services':\r\n          return (\r\n            <Suspense fallback={\r\n              <div className=\"flex items-center justify-center h-64\">\r\n                <div className=\"w-12 h-12 border-4 border-[#b62bff] border-t-transparent rounded-full animate-spin\"></div>\r\n              </div>\r\n            }>\r\n              <ServicesManagement />\r\n            </Suspense>\r\n          );\r\n        case 'categories':\r\n          return <CategoriesManagement />;\r\n        case 'orders':\r\n          return <OrdersManagement />;\r\n        case 'customers':\r\n          return <CustomersManagement />;\r\n        case 'content':\r\n          return <ContentManagement />;\r\n        case 'marketing':\r\n          return <MarketingManagement />;\r\n        case 'financial':\r\n          return <FinancialManagement />;\r\n        case 'security':\r\n          return <SecurityManagement />;\r\n        case 'automation':\r\n          return <AutomationManagement />;\r\n        case 'support':\r\n          return <SupportManagement />;\r\n        case 'shipping':\r\n          return <ShippingManagement />;\r\n        case 'tax':\r\n          return <TaxManagement />;\r\n        case 'marketplace':\r\n          return <MarketplaceManagement />;\r\n        case 'site-settings':\r\n          return <SiteSettingsManagement />;\r\n        case 'theme':\r\n          return <ThemeEditor />;\r\n        case 'woocommerce':\r\n          return <WooCommerceIntegration />;\r\n        default:\r\n          return <DashboardOverview />;\r\n      }\r\n    })();\r\n\r\n    return content;\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50 dark:bg-[#0b0011]\">\r\n      <AdminHeader \r\n        sidebarOpen={sidebarOpen} \r\n        setSidebarOpen={setSidebarOpen}\r\n        userRole={userRole}\r\n      />\r\n      \r\n      <div className=\"flex\">\r\n        <AdminSidebar \r\n          activeSection={activeSection}\r\n          setActiveSection={setActiveSection}\r\n          sidebarOpen={sidebarOpen}\r\n        />\r\n        \r\n        <main className={`flex-1 transition-all duration-300 ${sidebarOpen ? 'ml-64' : 'ml-0'} pt-16`}>\r\n          <div className=\"p-6\">\r\n            {renderContent()}\r\n          </div>\r\n        </main>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"file":"page-CBVsu8d3.js"}