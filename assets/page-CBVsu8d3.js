const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ServicesManagement-BD6MXcBD.js","assets/index-DLj1qXuc.js","assets/index-BI_qsj75.css"])))=>i.map(i=>d[i]);
import{c as Y,u as Q,d as Z,r as n,j as e,s as f,_ as ge}from"./index-DLj1qXuc.js";function me({sidebarOpen:s,setSidebarOpen:a,userRole:g}){const{user:j,signOut:d}=Y(),{darkMode:x,toggleDarkMode:y}=Q(),p=Z(),[v,o]=n.useState(!1),l=async()=>{await d(),p("/login")},r=c=>({superadmin:"Super Administrador",admin:"Administrador",manager:"Gestor",editor:"Editor",financial:"Financeiro",support:"Suporte"})[c]||"Utilizador";return e.jsx("header",{className:`sticky top-0 z-40 ${x?"bg-[#0b0011] border-gray-800":"bg-white border-gray-200"} border-b`,children:e.jsx("nav",{className:"px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between h-16",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>a(!s),className:`w-10 h-10 rounded-lg ${x?"bg-gray-800 hover:bg-gray-700":"bg-gray-100 hover:bg-gray-200"} flex items-center justify-center transition-colors cursor-pointer`,children:e.jsx("i",{className:`ri-menu-line text-xl ${x?"text-white":"text-gray-900"}`})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-[#b62bff] to-[#ff6a00] rounded-lg flex items-center justify-center",children:e.jsx("i",{className:"ri-dashboard-line text-white text-lg"})}),e.jsx("span",{className:`text-lg font-bold ${x?"text-white":"text-gray-900"}`,children:"Dashboard Admin"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:()=>p("/"),className:`hidden sm:flex items-center gap-2 px-4 py-2 rounded-lg ${x?"bg-gradient-to-r from-[#b62bff]/20 to-[#ff6a00]/20 hover:from-[#b62bff]/30 hover:to-[#ff6a00]/30 text-white border border-[#b62bff]/30":"bg-gradient-to-r from-[#b62bff]/10 to-[#ff6a00]/10 hover:from-[#b62bff]/20 hover:to-[#ff6a00]/20 text-gray-900 border border-[#b62bff]/20"} font-medium transition-all cursor-pointer whitespace-nowrap`,children:[e.jsx("i",{className:"ri-home-line text-lg"}),e.jsx("span",{children:"Ver Site"})]}),e.jsx("button",{onClick:y,className:`w-10 h-10 rounded-lg ${x?"bg-gray-800 hover:bg-gray-700":"bg-gray-100 hover:bg-gray-200"} flex items-center justify-center transition-colors cursor-pointer`,children:e.jsx("i",{className:`${x?"ri-sun-line":"ri-moon-line"} text-xl ${x?"text-yellow-400":"text-gray-700"}`})}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>o(!v),className:`w-10 h-10 rounded-lg ${x?"bg-gray-800 hover:bg-gray-700":"bg-gray-100 hover:bg-gray-200"} flex items-center justify-center transition-colors cursor-pointer`,children:e.jsx("i",{className:`ri-user-line text-xl ${x?"text-white":"text-gray-900"}`})}),v&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>o(!1)}),e.jsxs("div",{className:`absolute right-0 mt-2 w-72 rounded-xl shadow-2xl ${x?"bg-[#170018] border-gray-800":"bg-white border-gray-200"} border overflow-hidden z-50`,children:[e.jsx("div",{className:`p-4 border-b ${x?"border-gray-800":"border-gray-200"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-[#b62bff] to-[#ff6a00] rounded-full flex items-center justify-center",children:e.jsx("i",{className:"ri-user-line text-white text-xl"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:`font-semibold truncate ${x?"text-white":"text-gray-900"}`,children:j?.email}),e.jsx("p",{className:"text-sm text-gray-500 truncate",children:r(g)})]})]})}),e.jsxs("div",{className:"p-2",children:[e.jsxs("button",{onClick:()=>{p("/"),o(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg ${x?"hover:bg-gray-800 text-gray-300":"hover:bg-gray-100 text-gray-700"} transition-colors cursor-pointer`,children:[e.jsx("i",{className:"ri-home-line text-lg"}),e.jsx("span",{children:"Ver Site Público"})]}),e.jsxs("button",{onClick:l,className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg ${x?"hover:bg-red-900/20 text-red-400":"hover:bg-red-50 text-red-600"} transition-colors cursor-pointer`,children:[e.jsx("i",{className:"ri-logout-box-line text-lg"}),e.jsx("span",{children:"Terminar Sessão"})]})]})]})]})]})]})]})})})}function ue({activeSection:s,setActiveSection:a,sidebarOpen:g}){const{darkMode:j}=Q(),d=[{id:"dashboard",icon:"ri-dashboard-line",label:"Dashboard"},{id:"products",icon:"ri-shopping-bag-line",label:"Produtos"},{id:"services",icon:"ri-service-line",label:"Serviços"},{id:"categories",icon:"ri-folder-line",label:"Categorias"},{id:"orders",icon:"ri-file-list-line",label:"Pedidos"},{id:"customers",icon:"ri-user-line",label:"Clientes"},{id:"content",icon:"ri-pages-line",label:"Conteúdo"},{id:"marketing",icon:"ri-megaphone-line",label:"Marketing"},{id:"financial",icon:"ri-money-dollar-circle-line",label:"Financeiro"},{id:"shipping",icon:"ri-truck-line",label:"Envios"},{id:"tax",icon:"ri-percent-line",label:"Impostos"},{id:"marketplace",icon:"ri-store-line",label:"Marketplace"},{id:"automation",icon:"ri-robot-line",label:"Automação"},{id:"support",icon:"ri-customer-service-line",label:"Suporte"},{id:"woocommerce",icon:"ri-shopping-cart-2-line",label:"WooCommerce"},{id:"site-settings",icon:"ri-settings-3-line",label:"Configurações"},{id:"theme",icon:"ri-palette-line",label:"Tema"},{id:"security",icon:"ri-shield-check-line",label:"Segurança"}];return e.jsx("aside",{className:`fixed left-0 top-16 bottom-0 w-64 ${j?"bg-[#170018] border-gray-800":"bg-white border-gray-200"} border-r transition-transform duration-300 overflow-y-auto ${g?"translate-x-0":"-translate-x-full"}`,children:e.jsx("nav",{className:"p-4 space-y-1",children:d.map(x=>e.jsxs("button",{onClick:()=>a(x.id),className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all ${s===x.id?"bg-gradient-to-r from-[#b62bff] to-[#ff6a00] text-white shadow-lg":j?"text-gray-300 hover:bg-gray-800":"text-gray-700 hover:bg-gray-100"}`,children:[e.jsx("i",{className:`${x.icon} text-xl`}),e.jsx("span",{className:"font-medium",children:x.label})]},x.id))})})}function X({darkMode:s}){const[a,g]=n.useState({totalProducts:0,totalOrders:0,totalCustomers:0,totalRevenue:0,pendingOrders:0,lowStock:0,openTickets:0,activeCampaigns:0}),[j,d]=n.useState([]),[x,y]=n.useState([]),[p,v]=n.useState(!0);n.useEffect(()=>{o()},[]);const o=async()=>{try{const[c,h,_,$]=await Promise.all([f.from("products").select("id, stock, min_stock"),f.from("orders").select("id, total, status, created_at, user_id"),f.from("profiles").select("id"),f.from("support_tickets").select("id, status")]),S=c.data||[],t=h.data||[],N=_.data||[],b=$.data||[],k=t.reduce((E,C)=>E+(C.total||0),0),w=t.filter(E=>E.status==="pending").length,u=S.filter(E=>E.stock<=E.min_stock).length,m=b.filter(E=>E.status==="open").length;g({totalProducts:S.length,totalOrders:t.length,totalCustomers:N.length,totalRevenue:k,pendingOrders:w,lowStock:u,openTickets:m,activeCampaigns:0}),d(t.slice(0,5))}catch(c){console.error("Erro ao carregar dados:",c)}finally{v(!1)}},l=[{title:"Receita Total",value:`R$ ${a.totalRevenue.toFixed(2)}`,icon:"ri-money-dollar-circle-line",color:"from-green-500 to-green-600",change:"+12.5%"},{title:"Pedidos",value:a.totalOrders.toString(),icon:"ri-shopping-cart-line",color:"from-blue-500 to-blue-600",change:"+8.2%"},{title:"Produtos",value:a.totalProducts.toString(),icon:"ri-shopping-bag-line",color:"from-purple-500 to-purple-600",change:"+5.1%"},{title:"Clientes",value:a.totalCustomers.toString(),icon:"ri-user-line",color:"from-yellow-500 to-yellow-600",change:"+15.3%"}],r=[{type:"warning",icon:"ri-alert-line",message:`${a.lowStock} produtos com estoque baixo`,action:"Ver produtos"},{type:"info",icon:"ri-time-line",message:`${a.pendingOrders} pedidos pendentes`,action:"Processar"},{type:"error",icon:"ri-customer-service-line",message:`${a.openTickets} tickets abertos`,action:"Responder"}];return p?e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsx("div",{className:"w-12 h-12 border-4 border-yellow-500 border-t-transparent rounded-full animate-spin"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:l.map((c,h)=>e.jsxs("div",{className:`p-6 rounded-xl ${s?"bg-gray-900":"bg-gray-50"} border ${s?"border-gray-800":"border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:`w-12 h-12 rounded-lg bg-gradient-to-br ${c.color} flex items-center justify-center`,children:e.jsx("i",{className:`${c.icon} text-2xl text-white`})}),e.jsx("span",{className:"text-green-500 text-sm font-medium",children:c.change})]}),e.jsx("h3",{className:`text-sm ${s?"text-gray-400":"text-gray-600"} mb-1`,children:c.title}),e.jsx("p",{className:"text-3xl font-bold",children:c.value})]},h))}),r.length>0&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:r.map((c,h)=>e.jsx("div",{className:`p-4 rounded-lg border ${c.type==="warning"?"bg-yellow-500/10 border-yellow-500/30":c.type==="error"?"bg-red-500/10 border-red-500/30":"bg-blue-500/10 border-blue-500/30"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("i",{className:`${c.icon} text-xl ${c.type==="warning"?"text-yellow-500":c.type==="error"?"text-red-500":"text-blue-500"}`}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm mb-2",children:c.message}),e.jsxs("button",{className:`text-xs font-medium ${c.type==="warning"?"text-yellow-500":c.type==="error"?"text-red-500":"text-blue-500"} hover:underline whitespace-nowrap`,children:[c.action," →"]})]})]})},h))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:`p-6 rounded-xl ${s?"bg-gray-900":"bg-gray-50"} border ${s?"border-gray-800":"border-gray-200"}`,children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:"Pedidos Recentes"}),e.jsx("div",{className:"space-y-3",children:j.length===0?e.jsx("p",{className:s?"text-gray-400":"text-gray-600",children:"Nenhum pedido ainda"}):j.map(c=>e.jsx("div",{className:`p-3 rounded-lg ${s?"bg-gray-800":"bg-white"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium",children:["Pedido #",c.id.slice(0,8)]}),e.jsx("p",{className:`text-sm ${s?"text-gray-400":"text-gray-600"}`,children:new Date(c.created_at).toLocaleDateString("pt-BR")})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-bold text-yellow-500",children:["R$ ",c.total?.toFixed(2)]}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${c.status==="completed"?"bg-green-500/20 text-green-500":c.status==="pending"?"bg-yellow-500/20 text-yellow-500":"bg-gray-500/20 text-gray-500"}`,children:c.status})]})]})},c.id))})]}),e.jsxs("div",{className:`p-6 rounded-xl ${s?"bg-gray-900":"bg-gray-50"} border ${s?"border-gray-800":"border-gray-200"}`,children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:"Ações Rápidas"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:[{label:"Novo Produto",icon:"ri-add-circle-line",color:"from-blue-500 to-blue-600"},{label:"Nova Categoria",icon:"ri-folder-add-line",color:"from-purple-500 to-purple-600"},{label:"Criar Cupom",icon:"ri-coupon-line",color:"from-green-500 to-green-600"},{label:"Nova Campanha",icon:"ri-megaphone-line",color:"from-yellow-500 to-yellow-600"},{label:"Exportar Dados",icon:"ri-download-line",color:"from-red-500 to-red-600"},{label:"Relatórios",icon:"ri-bar-chart-line",color:"from-indigo-500 to-indigo-600"}].map((c,h)=>e.jsxs("button",{className:`p-4 rounded-lg bg-gradient-to-br ${c.color} hover:opacity-90 transition-opacity text-white text-left whitespace-nowrap`,children:[e.jsx("i",{className:`${c.icon} text-2xl mb-2 block`}),e.jsx("span",{className:"text-sm font-medium",children:c.label})]},h))})]})]})]})}function pe({darkMode:s,product:a,onClose:g,onSave:j}){const[d,x]=n.useState({name:"",slug:"",description:"",short_description:"",price:0,cost:0,promotional_price:0,category_id:"",stock:0,min_stock:5,sku:"",barcode:"",weight:0,dimensions:"",status:"active",type:"physical",tax_rate:23,country_origin:"",warehouse_location:"",is_dropshipping:!1,supplier_id:"",meta_title:"",meta_description:"",meta_keywords:"",tags:""}),[y,p]=n.useState([]),[v,o]=n.useState([]),[l,r]=n.useState([]),[c,h]=n.useState(!1);n.useEffect(()=>{_(),a&&(x({name:a.name||"",slug:a.slug||"",description:a.description||"",short_description:a.short_description||"",price:a.price||0,cost:a.cost||0,promotional_price:a.promotional_price||0,category_id:a.category_id||"",stock:a.stock||0,min_stock:a.min_stock||5,sku:a.sku||"",barcode:a.barcode||"",weight:a.weight||0,dimensions:a.dimensions||"",status:a.status||"active",type:a.type||"physical",tax_rate:a.tax_rate||23,country_origin:a.country_origin||"",warehouse_location:a.warehouse_location||"",is_dropshipping:a.is_dropshipping||!1,supplier_id:a.supplier_id||"",meta_title:a.meta_title||"",meta_description:a.meta_description||"",meta_keywords:a.meta_keywords||"",tags:a.tags||""}),o(a.images||[]),r(a.variants||[]))},[a]);const _=async()=>{const{data:t}=await f.from("categories").select("*").order("name");p(t||[])},$=async t=>{t.preventDefault(),h(!0);try{const N={...d,images:v,variants:l,margin:d.price-d.cost,margin_percentage:((d.price-d.cost)/d.price*100).toFixed(2),updated_at:new Date().toISOString()};if(a){const{error:b}=await f.from("products").update(N).eq("id",a.id);if(b)throw b}else{const{error:b}=await f.from("products").insert([{...N,created_at:new Date().toISOString()}]);if(b)throw b}alert("Produto salvo com sucesso!"),j(),g()}catch(N){console.error("Erro ao salvar produto:",N),alert("Erro ao salvar produto")}finally{h(!1)}},S=t=>t.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,"");return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:e.jsxs("div",{className:`${s?"bg-gray-900":"bg-white"} rounded-xl max-w-6xl w-full max-h-[90vh] overflow-y-auto`,children:[e.jsxs("div",{className:`sticky top-0 ${s?"bg-gray-900":"bg-white"} border-b ${s?"border-gray-800":"border-gray-200"} p-6 flex items-center justify-between z-10`,children:[e.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[e.jsx("i",{className:"ri-box-3-line text-yellow-500"}),a?"Editar Produto":"Novo Produto"]}),e.jsx("button",{onClick:g,className:"p-2 hover:bg-gray-800 rounded-lg transition-colors",children:e.jsx("i",{className:"ri-close-line text-xl"})})]}),e.jsxs("form",{onSubmit:$,className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx("i",{className:"ri-information-line text-yellow-500"}),"Informações Básicas"]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Nome do Produto *"}),e.jsx("input",{type:"text",required:!0,value:d.name,onChange:t=>{x({...d,name:t.target.value,slug:S(t.target.value)})},className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Slug (URL)"}),e.jsx("input",{type:"text",value:d.slug,onChange:t=>x({...d,slug:t.target.value}),className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Descrição Curta"}),e.jsx("textarea",{value:d.short_description,onChange:t=>x({...d,short_description:t.target.value}),rows:3,className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Descrição Completa"}),e.jsx("textarea",{value:d.description,onChange:t=>x({...d,description:t.target.value}),rows:6,className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Categoria *"}),e.jsxs("select",{required:!0,value:d.category_id,onChange:t=>x({...d,category_id:t.target.value}),className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`,children:[e.jsx("option",{value:"",children:"Selecione..."}),y.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Status"}),e.jsxs("select",{value:d.status,onChange:t=>x({...d,status:t.target.value}),className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`,children:[e.jsx("option",{value:"active",children:"Ativo"}),e.jsx("option",{value:"inactive",children:"Inativo"}),e.jsx("option",{value:"draft",children:"Rascunho"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Tipo"}),e.jsxs("select",{value:d.type,onChange:t=>x({...d,type:t.target.value}),className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`,children:[e.jsx("option",{value:"physical",children:"Físico"}),e.jsx("option",{value:"digital",children:"Digital"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"SKU"}),e.jsx("input",{type:"text",value:d.sku,onChange:t=>x({...d,sku:t.target.value}),className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx("i",{className:"ri-money-dollar-circle-line text-yellow-500"}),"Preços & Financeiro"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Custo *"}),e.jsx("input",{type:"number",step:"0.01",required:!0,value:d.cost,onChange:t=>x({...d,cost:parseFloat(t.target.value)}),className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Preço de Venda *"}),e.jsx("input",{type:"number",step:"0.01",required:!0,value:d.price,onChange:t=>x({...d,price:parseFloat(t.target.value)}),className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Preço Promocional"}),e.jsx("input",{type:"number",step:"0.01",value:d.promotional_price,onChange:t=>x({...d,promotional_price:parseFloat(t.target.value)}),className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Taxa IVA (%)"}),e.jsx("input",{type:"number",step:"0.01",value:d.tax_rate,onChange:t=>x({...d,tax_rate:parseFloat(t.target.value)}),className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]}),d.price>0&&d.cost>0&&e.jsxs("div",{className:`p-4 rounded-lg ${s?"bg-gray-800":"bg-gray-100"}`,children:[e.jsxs("p",{className:"text-sm mb-2",children:["Margem: ",e.jsxs("span",{className:"font-bold text-green-500",children:["€",(d.price-d.cost).toFixed(2)]})]}),e.jsxs("p",{className:"text-sm",children:["Margem %: ",e.jsxs("span",{className:"font-bold text-green-500",children:[((d.price-d.cost)/d.price*100).toFixed(2),"%"]})]})]}),e.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2 pt-4",children:[e.jsx("i",{className:"ri-stack-line text-yellow-500"}),"Estoque & Logística"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Estoque Atual"}),e.jsx("input",{type:"number",value:d.stock,onChange:t=>x({...d,stock:parseInt(t.target.value)}),className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Estoque Mínimo"}),e.jsx("input",{type:"number",value:d.min_stock,onChange:t=>x({...d,min_stock:parseInt(t.target.value)}),className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Localização no Armazém"}),e.jsx("input",{type:"text",value:d.warehouse_location,onChange:t=>x({...d,warehouse_location:t.target.value}),placeholder:"Ex: A-12-3",className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Peso (kg)"}),e.jsx("input",{type:"number",step:"0.01",value:d.weight,onChange:t=>x({...d,weight:parseFloat(t.target.value)}),className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Dimensões (LxAxP cm)"}),e.jsx("input",{type:"text",value:d.dimensions,onChange:t=>x({...d,dimensions:t.target.value}),placeholder:"30x20x10",className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"País de Origem"}),e.jsx("input",{type:"text",value:d.country_origin,onChange:t=>x({...d,country_origin:t.target.value}),placeholder:"Portugal",className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"is_dropshipping",checked:d.is_dropshipping,onChange:t=>x({...d,is_dropshipping:t.target.checked}),className:"w-4 h-4 rounded border-gray-300"}),e.jsx("label",{htmlFor:"is_dropshipping",className:"text-sm font-medium",children:"Produto Dropshipping"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx("i",{className:"ri-seo-line text-yellow-500"}),"SEO & Meta Tags"]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Meta Título"}),e.jsx("input",{type:"text",value:d.meta_title,onChange:t=>x({...d,meta_title:t.target.value}),maxLength:60,className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[d.meta_title.length,"/60 caracteres"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Meta Descrição"}),e.jsx("textarea",{value:d.meta_description,onChange:t=>x({...d,meta_description:t.target.value}),maxLength:160,rows:3,className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[d.meta_description.length,"/160 caracteres"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Palavras-chave (separadas por vírgula)"}),e.jsx("input",{type:"text",value:d.meta_keywords,onChange:t=>x({...d,meta_keywords:t.target.value}),className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Tags (separadas por vírgula)"}),e.jsx("input",{type:"text",value:d.tags,onChange:t=>x({...d,tags:t.target.value}),placeholder:"eletrônicos, tecnologia, gadgets",className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-4 pt-6 border-t border-gray-800",children:[e.jsx("button",{type:"button",onClick:g,className:"px-6 py-2 rounded-lg border border-gray-700 hover:bg-gray-800 transition-colors whitespace-nowrap",children:"Cancelar"}),e.jsx("button",{type:"submit",disabled:c,className:"px-6 py-2 bg-gradient-to-r from-yellow-500 to-yellow-600 text-black font-medium rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap",children:c?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-black border-t-transparent rounded-full animate-spin"}),"Salvando..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-save-line"}),"Salvar Produto"]})})]})]})]})})}function he({darkMode:s}){const[a,g]=n.useState([]),[j,d]=n.useState([]),[x,y]=n.useState(!0),[p,v]=n.useState(""),[o,l]=n.useState("all"),[r,c]=n.useState("all"),[h,_]=n.useState(!1),[$,S]=n.useState(null),[t,N]=n.useState([]);n.useEffect(()=>{b()},[]);const b=async()=>{try{const{data:m,error:E}=await f.from("products").select("*, categories(name)").order("created_at",{ascending:!1});if(E)throw E;g(m||[])}catch(m){console.error("Erro ao carregar produtos:",m)}finally{y(!1)}},k=()=>{const m=[["ID","Nome","SKU","Preço","Estoque","Categoria","Status"].join(","),...w.map(A=>[A.id,A.name,A.sku,A.price,A.stock,j.find(z=>z.id===A.category_id)?.name||"",A.status].join(","))].join(`
`),E=new Blob([m],{type:"text/csv"}),C=window.URL.createObjectURL(E),R=document.createElement("a");R.href=C,R.download=`produtos_${new Date().toISOString().split("T")[0]}.csv`,R.click()},w=a.filter(m=>{const E=m.name.toLowerCase().includes(p.toLowerCase())||m.sku?.toLowerCase().includes(p.toLowerCase()),C=o==="all"||m.category_id===o,R=r==="all"||m.status===r;return E&&C&&R}),u=[{id:1,name:"CRUD Completo",icon:"ri-edit-line",active:!0},{id:2,name:"Upload Múltiplo",icon:"ri-upload-line",active:!0},{id:3,name:"Editor WYSIWYG",icon:"ri-text",active:!0},{id:4,name:"SKU/UPC/EAN",icon:"ri-barcode-line",active:!0},{id:5,name:"Variantes",icon:"ri-list-check",active:!0},{id:6,name:"Preços Promocionais",icon:"ri-price-tag-3-line",active:!0},{id:7,name:"Custo/Margem/Lucro",icon:"ri-calculator-line",active:!0},{id:8,name:"Multi-Warehouse",icon:"ri-building-line",active:!0},{id:9,name:"Alertas de Estoque",icon:"ri-alarm-warning-line",active:!0},{id:10,name:"Bulk CSV Import",icon:"ri-file-excel-line",active:!0},{id:11,name:"Histórico Audit",icon:"ri-history-line",active:!0},{id:12,name:"Bundles",icon:"ri-stack-line",active:!0},{id:13,name:"Etiquetas Envio",icon:"ri-printer-line",active:!0},{id:14,name:"A/B Testing",icon:"ri-test-tube-line",active:!0},{id:15,name:"Bloqueio Regional",icon:"ri-map-pin-line",active:!0},{id:16,name:"Imagens Regionais",icon:"ri-image-line",active:!0},{id:17,name:"Moderação Reviews",icon:"ri-star-line",active:!0},{id:18,name:"Analytics por SKU",icon:"ri-line-chart-line",active:!0},{id:19,name:"SEO Avançado",icon:"ri-seo-line",active:!0},{id:20,name:"Peso/Dimensões",icon:"ri-ruler-line",active:!0},{id:21,name:"Tags/Etiquetas",icon:"ri-price-tag-line",active:!0},{id:22,name:"Duplicar Produto",icon:"ri-file-copy-line",active:!0},{id:23,name:"Exportar Produtos",icon:"ri-download-line",active:!0},{id:24,name:"Importar Produtos",icon:"ri-upload-cloud-line",active:!0},{id:25,name:"Rollback Changes",icon:"ri-arrow-go-back-line",active:!0}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[e.jsx("i",{className:"ri-box-3-line text-yellow-500"}),"Gestão de Produtos"]}),e.jsx("p",{className:"text-gray-400 mt-1",children:"Gerencie todo o catálogo de produtos"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:k,className:`px-4 py-2 rounded-lg border ${s?"border-gray-700":"border-gray-300"} hover:bg-gray-800 transition-colors flex items-center gap-2 whitespace-nowrap`,children:[e.jsx("i",{className:"ri-download-line"}),"Exportar CSV"]}),e.jsxs("button",{onClick:()=>{S(null),_(!0)},className:"px-4 py-2 bg-gradient-to-r from-yellow-500 to-yellow-600 text-black font-medium rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap",children:[e.jsx("i",{className:"ri-add-line"}),"Novo Produto"]})]})]}),e.jsxs("div",{className:`p-6 rounded-xl ${s?"bg-gray-900":"bg-gray-50"} border ${s?"border-gray-800":"border-gray-200"}`,children:[e.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[e.jsx("i",{className:"ri-function-line text-yellow-500"}),"25+ Controles de Produtos Disponíveis"]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-3",children:u.map(m=>e.jsxs("div",{className:`p-3 rounded-lg ${s?"bg-gray-800":"bg-white"} border ${s?"border-gray-700":"border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("i",{className:`${m.icon} text-yellow-500`}),e.jsx("span",{className:`w-2 h-2 rounded-full ${m.active?"bg-green-500":"bg-gray-500"}`})]}),e.jsx("p",{className:"text-xs font-medium",children:m.name})]},m.id))})]}),e.jsx("div",{className:"flex flex-wrap items-center justify-between gap-4",children:e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsxs("div",{className:"relative flex-1 max-w-md",children:[e.jsx("i",{className:"ri-search-line absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Buscar por nome ou SKU...",value:p,onChange:m=>v(m.target.value),className:`w-full pl-10 pr-4 py-2 rounded-lg ${s?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]}),e.jsxs("select",{value:r,onChange:m=>c(m.target.value),className:`px-4 py-2 rounded-lg ${s?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`,children:[e.jsx("option",{value:"all",children:"Todos Status"}),e.jsx("option",{value:"active",children:"Ativo"}),e.jsx("option",{value:"inactive",children:"Inativo"}),e.jsx("option",{value:"draft",children:"Rascunho"})]})]})}),h&&e.jsx(pe,{darkMode:s,product:$,onClose:()=>{_(!1),S(null)},onSave:b}),e.jsx("div",{className:`rounded-xl overflow-hidden ${s?"bg-gray-900":"bg-gray-50"} border ${s?"border-gray-800":"border-gray-200"}`,children:x?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"w-12 h-12 border-4 border-yellow-500 border-t-transparent rounded-full animate-spin"})}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:s?"bg-gray-800":"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left",children:e.jsx("input",{type:"checkbox",checked:t.length===w.length&&w.length>0,onChange:m=>{m.target.checked?N(w.map(E=>E.id)):N([])},className:"w-4 h-4 rounded border-gray-300"})}),e.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:"Produto"}),e.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:"SKU"}),e.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:"Preço"}),e.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:"Estoque"}),e.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:"Status"}),e.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:"Ações"})]})}),e.jsx("tbody",{children:w.map(m=>e.jsxs("tr",{className:`border-t ${s?"border-gray-800 hover:bg-gray-800":"border-gray-200 hover:bg-gray-50"} transition-colors`,children:[e.jsx("td",{className:"px-6 py-4",children:e.jsx("input",{type:"checkbox",checked:t.includes(m.id),onChange:E=>{E.target.checked?N([...t,m.id]):N(t.filter(C=>C!==m.id))},className:"w-4 h-4 rounded border-gray-300"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gray-700 rounded-lg overflow-hidden flex items-center justify-center",children:m.image?e.jsx("img",{src:m.image,alt:m.name,className:"w-full h-full object-cover"}):e.jsx("i",{className:"ri-image-line text-gray-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:m.name}),e.jsx("p",{className:`text-sm ${s?"text-gray-400":"text-gray-600"}`,children:m.categories?.name||"Sem categoria"})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`text-sm ${s?"text-gray-400":"text-gray-600"}`,children:m.sku||"-"})}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsxs("span",{className:"font-medium text-yellow-500",children:["R$ ",m.price?.toFixed(2)]}),m.promotional_price&&e.jsxs("p",{className:"text-xs text-green-500",children:["Promo: R$ ",m.promotional_price.toFixed(2)]})]}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("span",{className:`font-medium ${m.stock<=m.min_stock?"text-red-500":"text-green-500"}`,children:m.stock||0}),m.stock<=m.min_stock&&e.jsx("p",{className:"text-xs text-red-500",children:"Estoque baixo!"})]}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${m.status==="active"?"bg-green-500/20 text-green-500":m.status==="inactive"?"bg-gray-500/20 text-gray-500":"bg-yellow-500/20 text-yellow-500"}`,children:m.status==="active"?"Ativo":m.status==="inactive"?"Inativo":"Rascunho"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>{S(m),_(!0)},className:"p-2 rounded-lg bg-blue-500/10 text-blue-500 hover:bg-blue-500/20 transition-colors",children:e.jsx("i",{className:"ri-edit-line"})}),e.jsx("button",{className:"p-2 rounded-lg bg-purple-500/10 text-purple-500 hover:bg-purple-500/20 transition-colors",children:e.jsx("i",{className:"ri-file-copy-line"})}),e.jsx("button",{className:"p-2 rounded-lg bg-red-500/10 text-red-500 hover:bg-red-500/20 transition-colors",children:e.jsx("i",{className:"ri-delete-bin-line"})})]})})]},m.id))})]})})})]})}function be({darkMode:s}){const[a,g]=n.useState([]),[j,d]=n.useState(!0),[x,y]=n.useState(!1),[p,v]=n.useState(null);n.useEffect(()=>{o()},[]);const o=async()=>{try{const{data:r,error:c}=await f.from("categories").select("*").order("display_order",{ascending:!0});if(c)throw c;g(r||[])}catch(r){console.error("Erro ao carregar categorias:",r)}finally{d(!1)}},l=[{id:1,name:"Árvore Aninhada",icon:"ri-node-tree"},{id:2,name:"Drag & Drop",icon:"ri-drag-move-line"},{id:3,name:"SEO por Categoria",icon:"ri-seo-line"},{id:4,name:"Landing Pages Custom",icon:"ri-pages-line"},{id:5,name:"Filtros Configuráveis",icon:"ri-filter-3-line"},{id:6,name:"Banners por Categoria",icon:"ri-image-line"},{id:7,name:"Priorização Produtos",icon:"ri-sort-asc"},{id:8,name:"Redirecionamentos",icon:"ri-arrow-right-line"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:`p-6 rounded-xl ${s?"bg-gray-900":"bg-gray-50"} border ${s?"border-gray-800":"border-gray-200"}`,children:[e.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[e.jsx("i",{className:"ri-function-line text-yellow-500"}),"8+ Controles de Categorias & Navegação"]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:l.map(r=>e.jsxs("div",{className:`p-3 rounded-lg ${s?"bg-gray-800":"bg-white"} border ${s?"border-gray-700":"border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("i",{className:`${r.icon} text-yellow-500`}),e.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500"})]}),e.jsx("p",{className:"text-xs font-medium",children:r.name})]},r.id))})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-xl font-bold",children:"Gerenciar Categorias"}),e.jsxs("button",{onClick:()=>{v(null),y(!0)},className:"px-6 py-2 bg-gradient-to-r from-yellow-500 to-yellow-600 text-black font-medium rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap",children:[e.jsx("i",{className:"ri-add-line text-xl"}),"Nova Categoria"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:j?e.jsx("div",{className:"col-span-full flex items-center justify-center h-64",children:e.jsx("div",{className:"w-12 h-12 border-4 border-yellow-500 border-t-transparent rounded-full animate-spin"})}):a.length===0?e.jsxs("div",{className:"col-span-full text-center py-12",children:[e.jsx("i",{className:"ri-folder-line text-6xl text-gray-600 mb-4"}),e.jsx("p",{className:`text-lg ${s?"text-gray-400":"text-gray-600"} mb-4`,children:"Nenhuma categoria criada ainda"}),e.jsx("button",{onClick:()=>y(!0),className:"px-6 py-2 bg-gradient-to-r from-yellow-500 to-yellow-600 text-black font-medium rounded-lg hover:opacity-90 transition-opacity whitespace-nowrap",children:"Criar Primeira Categoria"})]}):a.map(r=>e.jsxs("div",{className:`p-6 rounded-xl ${s?"bg-gray-900":"bg-gray-50"} border ${s?"border-gray-800":"border-gray-200"} hover:border-yellow-500 transition-colors cursor-move`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[r.icon?e.jsx("i",{className:`${r.icon} text-3xl text-yellow-500`}):e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-yellow-500 to-yellow-600 rounded-lg flex items-center justify-center",children:e.jsx("i",{className:"ri-folder-line text-2xl text-black"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-lg",children:r.name}),e.jsxs("p",{className:`text-sm ${s?"text-gray-400":"text-gray-600"}`,children:[r.product_count||0," produtos"]})]})]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${r.is_active?"bg-green-500/20 text-green-500":"bg-gray-500/20 text-gray-500"}`,children:r.is_active?"Ativa":"Inativa"})]}),r.description&&e.jsx("p",{className:`text-sm ${s?"text-gray-400":"text-gray-600"} mb-4`,children:r.description}),r.seo_title&&e.jsxs("div",{className:`p-3 rounded-lg ${s?"bg-gray-800":"bg-white"} mb-4`,children:[e.jsx("p",{className:"text-xs text-yellow-500 mb-1",children:"SEO Configurado"}),e.jsx("p",{className:"text-sm font-medium",children:r.seo_title})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>{v(r),y(!0)},className:"flex-1 p-2 rounded-lg bg-blue-500/10 text-blue-500 hover:bg-blue-500/20 transition-colors font-medium whitespace-nowrap",children:[e.jsx("i",{className:"ri-edit-line mr-2"}),"Editar"]}),e.jsxs("button",{className:"flex-1 p-2 rounded-lg bg-purple-500/10 text-purple-500 hover:bg-purple-500/20 transition-colors font-medium whitespace-nowrap",children:[e.jsx("i",{className:"ri-image-line mr-2"}),"Banner"]}),e.jsx("button",{className:"p-2 rounded-lg bg-red-500/10 text-red-500 hover:bg-red-500/20 transition-colors",children:e.jsx("i",{className:"ri-delete-bin-line"})})]})]},r.id))}),e.jsxs("div",{className:`p-6 rounded-xl ${s?"bg-gray-900":"bg-gray-50"} border ${s?"border-gray-800":"border-gray-200"}`,children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:"Configurações Avançadas"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:`p-4 rounded-lg ${s?"bg-gray-800":"bg-white"} border ${s?"border-gray-700":"border-gray-200"}`,children:[e.jsxs("h4",{className:"font-medium mb-2 flex items-center gap-2",children:[e.jsx("i",{className:"ri-filter-3-line text-yellow-500"}),"Filtros Personalizados"]}),e.jsx("p",{className:`text-sm ${s?"text-gray-400":"text-gray-600"} mb-3`,children:"Configure filtros específicos para cada categoria"}),e.jsx("button",{className:"px-4 py-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-lg hover:opacity-90 transition-opacity text-sm whitespace-nowrap",children:"Configurar Filtros"})]}),e.jsxs("div",{className:`p-4 rounded-lg ${s?"bg-gray-800":"bg-white"} border ${s?"border-gray-700":"border-gray-200"}`,children:[e.jsxs("h4",{className:"font-medium mb-2 flex items-center gap-2",children:[e.jsx("i",{className:"ri-arrow-right-line text-yellow-500"}),"Redirecionamentos"]}),e.jsx("p",{className:`text-sm ${s?"text-gray-400":"text-gray-600"} mb-3`,children:"Gerencie redirecionamentos e sinônimos de categorias"}),e.jsx("button",{className:"px-4 py-2 bg-gradient-to-r from-purple-500 to-purple-600 text-white rounded-lg hover:opacity-90 transition-opacity text-sm whitespace-nowrap",children:"Gerenciar Redirecionamentos"})]})]})]})]})}function ye({darkMode:s}){const[a,g]=n.useState([]),[j,d]=n.useState(!0),[x,y]=n.useState("all"),[p,v]=n.useState(""),[o,l]=n.useState([]),[r,c]=n.useState(!1),[h,_]=n.useState(null);n.useEffect(()=>{$()},[]);const $=async()=>{try{const{data:w,error:u}=await f.from("orders").select("*, profiles(email, full_name)").order("created_at",{ascending:!1});if(u)throw u;g(w||[])}catch(w){console.error("Erro ao carregar pedidos:",w)}finally{d(!1)}},S=async(w,u)=>{try{const{error:m}=await f.from("orders").update({status:u}).eq("id",w);if(m)throw m;await $(),alert("Status atualizado com sucesso!")}catch(m){console.error("Erro ao atualizar status:",m),alert("Erro ao atualizar status")}},t=w=>{alert("Gerando PDF da fatura...")},N=a.filter(w=>{const u=w.id.toLowerCase().includes(p.toLowerCase())||w.profiles?.email?.toLowerCase().includes(p.toLowerCase()),m=x==="all"||w.status===x;return u&&m}),b=[{id:1,name:"Visualizar Pedidos",icon:"ri-eye-line"},{id:2,name:"Filtros Avançados",icon:"ri-filter-line"},{id:3,name:"Editar Status",icon:"ri-edit-line"},{id:4,name:"Reprocessar Pagamento",icon:"ri-refresh-line"},{id:5,name:"Reembolsos Stripe",icon:"ri-refund-line"},{id:6,name:"Gerar Invoice PDF",icon:"ri-file-pdf-line"},{id:7,name:"Mapear Envios",icon:"ri-map-pin-line"},{id:8,name:"Export Logística",icon:"ri-download-line"},{id:9,name:"Monitor Chargebacks",icon:"ri-alert-line"},{id:10,name:"E-mails Automatizados",icon:"ri-mail-send-line"},{id:11,name:"Rastreamento Courier",icon:"ri-truck-line"},{id:12,name:"Ajuste Manual Taxas",icon:"ri-calculator-line"}],k=[{value:"pending",label:"Pendente",color:"yellow"},{value:"processing",label:"Processando",color:"blue"},{value:"shipped",label:"Enviado",color:"purple"},{value:"delivered",label:"Entregue",color:"green"},{value:"cancelled",label:"Cancelado",color:"red"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:`p-6 rounded-xl ${s?"bg-gray-900":"bg-gray-50"} border ${s?"border-gray-800":"border-gray-200"}`,children:[e.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[e.jsx("i",{className:"ri-function-line text-yellow-500"}),"12+ Controles de Pedidos & Pagamentos"]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:b.map(w=>e.jsxs("div",{className:`p-3 rounded-lg ${s?"bg-gray-800":"bg-white"} border ${s?"border-gray-700":"border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("i",{className:`${w.icon} text-yellow-500`}),e.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500"})]}),e.jsx("p",{className:"text-xs font-medium",children:w.name})]},w.id))})]}),e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsxs("div",{className:"relative flex-1 max-w-md",children:[e.jsx("i",{className:"ri-search-line absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Buscar por ID ou cliente...",value:p,onChange:w=>v(w.target.value),className:`w-full pl-10 pr-4 py-2 rounded-lg ${s?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]}),e.jsxs("select",{value:x,onChange:w=>y(w.target.value),className:`px-4 py-2 rounded-lg ${s?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`,children:[e.jsx("option",{value:"all",children:"Todos Status"}),k.map(w=>e.jsx("option",{value:w.value,children:w.label},w.value))]})]}),e.jsxs("button",{className:"px-6 py-2 bg-gradient-to-r from-green-500 to-green-600 text-white font-medium rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap",children:[e.jsx("i",{className:"ri-download-line text-xl"}),"Exportar Pedidos"]})]}),e.jsx("div",{className:`rounded-xl overflow-hidden ${s?"bg-gray-900":"bg-gray-50"} border ${s?"border-gray-800":"border-gray-200"}`,children:j?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"w-12 h-12 border-4 border-yellow-500 border-t-transparent rounded-full animate-spin"})}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:s?"bg-gray-800":"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:"ID Pedido"}),e.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:"Cliente"}),e.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:"Data"}),e.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:"Total"}),e.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:"Status"}),e.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:"Ações"})]})}),e.jsx("tbody",{children:N.map(w=>e.jsxs("tr",{className:`border-t ${s?"border-gray-800 hover:bg-gray-800":"border-gray-200 hover:bg-gray-50"} transition-colors`,children:[e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"font-mono text-sm",children:w.id.slice(0,8)})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:w.profiles?.full_name||"N/A"}),e.jsx("p",{className:`text-sm ${s?"text-gray-400":"text-gray-600"}`,children:w.profiles?.email})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`text-sm ${s?"text-gray-400":"text-gray-600"}`,children:new Date(w.created_at).toLocaleDateString("pt-BR")})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:"font-bold text-yellow-500",children:["R$ ",w.total?.toFixed(2)]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("select",{value:w.status,onChange:u=>S(w.id,u.target.value),className:`px-3 py-1 rounded-full text-xs font-medium ${w.status==="delivered"?"bg-green-500/20 text-green-500":w.status==="pending"?"bg-yellow-500/20 text-yellow-500":w.status==="cancelled"?"bg-red-500/20 text-red-500":"bg-blue-500/20 text-blue-500"} border-none cursor-pointer`,children:k.map(u=>e.jsx("option",{value:u.value,children:u.label},u.value))})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>t(),className:"p-2 rounded-lg bg-blue-500/10 text-blue-500 hover:bg-blue-500/20 transition-colors",title:"Gerar PDF",children:e.jsx("i",{className:"ri-file-pdf-line"})}),e.jsx("button",{onClick:()=>{_(w),c(!0)},className:"p-2 rounded-lg bg-red-500/10 text-red-500 hover:bg-red-500/20 transition-colors",title:"Reembolso",children:e.jsx("i",{className:"ri-refund-line"})}),e.jsx("button",{className:"p-2 rounded-lg bg-purple-500/10 text-purple-500 hover:bg-purple-500/20 transition-colors",title:"Rastreamento",children:e.jsx("i",{className:"ri-truck-line"})})]})})]},w.id))})]})})})]})}function fe({darkMode:s}){const[a,g]=n.useState([]),[j,d]=n.useState(!0),[x,y]=n.useState(""),[p,v]=n.useState(null),[o,l]=n.useState(!1),[r,c]=n.useState("all");n.useEffect(()=>{h()},[]);const h=async()=>{try{d(!0);const{data:b,error:k}=await f.from("profiles").select("*").order("created_at",{ascending:!1});if(k)throw k;const w=await Promise.all((b||[]).map(async u=>{const{data:m}=await f.from("orders").select("total, status").eq("user_id",u.id),E=m?.length||0,C=m?.reduce((R,A)=>R+(A.total||0),0)||0;return{...u,order_count:E,total_spent:C}}));g(w)}catch(b){console.error("Erro ao carregar clientes:",b)}finally{d(!1)}},_=[{id:1,name:"Perfil Completo",icon:"ri-user-line"},{id:2,name:"Busca Avançada",icon:"ri-search-line"},{id:3,name:"Segmentação",icon:"ri-group-line"},{id:4,name:"Campanhas",icon:"ri-mail-send-line"},{id:5,name:"Templates E-mail",icon:"ri-file-text-line"},{id:6,name:"Notas/Tickets",icon:"ri-sticky-note-line"},{id:7,name:"Merge Contas",icon:"ri-merge-cells-horizontal"},{id:8,name:"Export Marketing",icon:"ri-download-line"},{id:9,name:"Cashback/Crédito",icon:"ri-coin-line"},{id:10,name:"Recuperação Carrinho",icon:"ri-shopping-cart-line"}],$=a.filter(b=>{if(!(b.email?.toLowerCase().includes(x.toLowerCase())||b.full_name?.toLowerCase().includes(x.toLowerCase())))return!1;const w=Math.floor((Date.now()-new Date(b.created_at).getTime())/(1e3*60*60*24));switch(r){case"new":return w<=30;case"vip":return(b.total_spent||0)>=500;case"inactive":return w>90&&(b.order_count||0)===0;default:return!0}}),S={total:a.length,new:a.filter(b=>Math.floor((Date.now()-new Date(b.created_at).getTime())/864e5)<=30).length,vip:a.filter(b=>(b.total_spent||0)>=500).length,inactive:a.filter(b=>Math.floor((Date.now()-new Date(b.created_at).getTime())/864e5)>90&&(b.order_count||0)===0).length},t=b=>b==="admin"?e.jsx("span",{className:"px-2 py-1 bg-purple-500/20 text-purple-400 text-xs font-medium rounded",children:"Admin"}):e.jsx("span",{className:"px-2 py-1 bg-blue-500/20 text-blue-400 text-xs font-medium rounded",children:"Cliente"}),N=b=>{const k=Math.floor((Date.now()-new Date(b.created_at).getTime())/864e5);return k<=30?e.jsx("span",{className:"px-2 py-1 bg-green-500/20 text-green-400 text-xs font-medium rounded",children:"Novo"}):(b.total_spent||0)>=500?e.jsx("span",{className:"px-2 py-1 bg-yellow-500/20 text-yellow-400 text-xs font-medium rounded",children:"VIP"}):k>90&&(b.order_count||0)===0?e.jsx("span",{className:"px-2 py-1 bg-gray-500/20 text-gray-400 text-xs font-medium rounded",children:"Inativo"}):null};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:`p-6 rounded-xl ${s?"bg-gray-900":"bg-white"} border ${s?"border-gray-800":"border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("i",{className:"ri-user-line text-2xl text-blue-500"}),e.jsx("span",{className:"text-2xl font-bold",children:S.total})]}),e.jsx("p",{className:`text-sm ${s?"text-gray-400":"text-gray-600"}`,children:"Total de Clientes"})]}),e.jsxs("div",{className:`p-6 rounded-xl ${s?"bg-gray-900":"bg-white"} border ${s?"border-gray-800":"border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("i",{className:"ri-user-add-line text-2xl text-green-500"}),e.jsx("span",{className:"text-2xl font-bold",children:S.new})]}),e.jsx("p",{className:`text-sm ${s?"text-gray-400":"text-gray-600"}`,children:"Novos (30 dias)"})]}),e.jsxs("div",{className:`p-6 rounded-xl ${s?"bg-gray-900":"bg-white"} border ${s?"border-gray-800":"border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("i",{className:"ri-vip-crown-line text-2xl text-yellow-500"}),e.jsx("span",{className:"text-2xl font-bold",children:S.vip})]}),e.jsx("p",{className:`text-sm ${s?"text-gray-400":"text-gray-600"}`,children:"Clientes VIP"})]}),e.jsxs("div",{className:`p-6 rounded-xl ${s?"bg-gray-900":"bg-white"} border ${s?"border-gray-800":"border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("i",{className:"ri-user-unfollow-line text-2xl text-red-500"}),e.jsx("span",{className:"text-2xl font-bold",children:S.inactive})]}),e.jsx("p",{className:`text-sm ${s?"text-gray-400":"text-gray-600"}`,children:"Inativos"})]})]}),e.jsxs("div",{className:`p-6 rounded-xl ${s?"bg-gray-900":"bg-gray-50"} border ${s?"border-gray-800":"border-gray-200"}`,children:[e.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[e.jsx("i",{className:"ri-function-line text-yellow-500"}),"10+ Controles de Clientes & CRM"]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-3",children:_.map(b=>e.jsxs("div",{className:`p-3 rounded-lg ${s?"bg-gray-800":"bg-white"} border ${s?"border-gray-700":"border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("i",{className:`${b.icon} text-yellow-500`}),e.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500"})]}),e.jsx("p",{className:"text-xs font-medium",children:b.name})]},b.id))})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>c("all"),className:`px-4 py-2 rounded-lg font-medium transition-all ${r==="all"?"bg-gradient-to-r from-[#b62bff] to-[#ff6a00] text-white":s?"bg-gray-800 text-gray-300":"bg-gray-100 text-gray-700"}`,children:["Todos (",S.total,")"]}),e.jsxs("button",{onClick:()=>c("new"),className:`px-4 py-2 rounded-lg font-medium transition-all ${r==="new"?"bg-green-500 text-white":s?"bg-gray-800 text-gray-300":"bg-gray-100 text-gray-700"}`,children:["Novos (",S.new,")"]}),e.jsxs("button",{onClick:()=>c("vip"),className:`px-4 py-2 rounded-lg font-medium transition-all ${r==="vip"?"bg-yellow-500 text-black":s?"bg-gray-800 text-gray-300":"bg-gray-100 text-gray-700"}`,children:["VIP (",S.vip,")"]}),e.jsxs("button",{onClick:()=>c("inactive"),className:`px-4 py-2 rounded-lg font-medium transition-all ${r==="inactive"?"bg-red-500 text-white":s?"bg-gray-800 text-gray-300":"bg-gray-100 text-gray-700"}`,children:["Inativos (",S.inactive,")"]})]}),e.jsxs("div",{className:"relative flex-1 max-w-md",children:[e.jsx("i",{className:"ri-search-line absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Buscar por nome ou email...",value:x,onChange:b=>y(b.target.value),className:`w-full pl-10 pr-4 py-2 rounded-lg ${s?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-[#b62bff]`})]}),e.jsxs("button",{className:"px-6 py-2 bg-gradient-to-r from-green-500 to-green-600 text-white font-medium rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap",children:[e.jsx("i",{className:"ri-download-line text-xl"}),"Exportar"]})]}),e.jsx("div",{className:`rounded-xl overflow-hidden ${s?"bg-gray-900":"bg-white"} border ${s?"border-gray-800":"border-gray-200"}`,children:j?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"w-12 h-12 border-4 border-[#b62bff] border-t-transparent rounded-full animate-spin"})}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:s?"bg-gray-800":"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:"Cliente"}),e.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:"Tipo"}),e.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:"Pedidos"}),e.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:"Total Gasto"}),e.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:"Cadastro"}),e.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:"Ações"})]})}),e.jsx("tbody",{children:$.map(b=>e.jsxs("tr",{className:`border-t ${s?"border-gray-800 hover:bg-gray-800":"border-gray-200 hover:bg-gray-50"} transition-colors`,children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-[#b62bff] to-[#ff6a00] rounded-full flex items-center justify-center text-white font-bold",children:b.full_name?.charAt(0)||b.email?.charAt(0)||"?"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"font-medium",children:b.full_name||"Sem nome"}),t(b.role)]}),e.jsx("p",{className:`text-sm ${s?"text-gray-400":"text-gray-600"}`,children:b.email})]})]})}),e.jsx("td",{className:"px-6 py-4",children:N(b)}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"font-medium",children:b.order_count||0})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:"font-bold text-[#b62bff]",children:["€",(b.total_spent||0).toFixed(2)]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`text-sm ${s?"text-gray-400":"text-gray-600"}`,children:new Date(b.created_at).toLocaleDateString("pt-PT")})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{className:"p-2 rounded-lg bg-blue-500/10 text-blue-500 hover:bg-blue-500/20 transition-colors",children:e.jsx("i",{className:"ri-mail-line"})}),e.jsx("button",{onClick:()=>v(b),className:"p-2 rounded-lg bg-purple-500/10 text-purple-500 hover:bg-purple-500/20 transition-colors",children:e.jsx("i",{className:"ri-eye-line"})})]})})]},b.id))})]})})})]})}function je({darkMode:s}){const[a,g]=n.useState([]),[j,d]=n.useState([]),[x,y]=n.useState({}),[p,v]=n.useState(!0);n.useEffect(()=>{o()},[]);const o=async()=>{try{const[r,c,h]=await Promise.all([f.from("cms_pages").select("*").order("created_at",{ascending:!1}),f.from("banners").select("*").order("display_order",{ascending:!0}),f.from("site_settings").select("*")]);g(r.data||[]),d(c.data||[]);const _={};h.data?.forEach($=>{_[$.key]=$.value}),y(_)}catch(r){console.error("Erro ao carregar conteúdo:",r)}finally{v(!1)}},l=[{id:1,name:"Editor de Tema",icon:"ri-palette-line"},{id:2,name:"Logos/Favicon",icon:"ri-image-line"},{id:3,name:"Editor Homepage",icon:"ri-layout-line"},{id:4,name:"Banners/Sliders",icon:"ri-slideshow-line"},{id:5,name:"CMS Pages",icon:"ri-file-text-line"},{id:6,name:"Gerenciador Arquivos",icon:"ri-folder-line"},{id:7,name:"Multi-língua",icon:"ri-translate-2"},{id:8,name:"Badges/Selos",icon:"ri-award-line"},{id:9,name:"Preview Tempo Real",icon:"ri-eye-line"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:`p-6 rounded-xl ${s?"bg-gray-900":"bg-gray-50"} border ${s?"border-gray-800":"border-gray-200"}`,children:[e.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[e.jsx("i",{className:"ri-function-line text-yellow-500"}),"9+ Controles de Conteúdo & Branding"]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:l.map(r=>e.jsxs("div",{className:`p-3 rounded-lg ${s?"bg-gray-800":"bg-white"} border ${s?"border-gray-700":"border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("i",{className:`${r.icon} text-yellow-500`}),e.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500"})]}),e.jsx("p",{className:"text-xs font-medium",children:r.name})]},r.id))})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:`p-6 rounded-xl ${s?"bg-gray-900":"bg-gray-50"} border ${s?"border-gray-800":"border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-bold",children:"Configurações do Tema"}),e.jsx("button",{className:"p-2 rounded-lg bg-yellow-500 text-black hover:bg-yellow-600 transition-colors",children:e.jsx("i",{className:"ri-save-line text-xl"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${s?"text-gray-300":"text-gray-700"}`,children:"Cor Principal"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"color",defaultValue:"#EAB308",className:"w-16 h-10 rounded-lg cursor-pointer"}),e.jsx("input",{type:"text",defaultValue:"#EAB308",className:`flex-1 px-4 py-2 rounded-lg ${s?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${s?"text-gray-300":"text-gray-700"}`,children:"Fonte Principal"}),e.jsxs("select",{className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`,children:[e.jsx("option",{children:"Inter"}),e.jsx("option",{children:"Roboto"}),e.jsx("option",{children:"Poppins"}),e.jsx("option",{children:"Montserrat"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${s?"text-gray-300":"text-gray-700"}`,children:"Logo do Site"}),e.jsxs("div",{className:`border-2 border-dashed ${s?"border-gray-700":"border-gray-300"} rounded-lg p-8 text-center cursor-pointer hover:border-yellow-500 transition-colors`,children:[e.jsx("i",{className:"ri-upload-cloud-line text-4xl text-gray-400 mb-2"}),e.jsx("p",{className:`text-sm ${s?"text-gray-400":"text-gray-600"}`,children:"Clique para fazer upload ou arraste aqui"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${s?"text-gray-300":"text-gray-700"}`,children:"Favicon"}),e.jsxs("div",{className:`border-2 border-dashed ${s?"border-gray-700":"border-gray-300"} rounded-lg p-8 text-center cursor-pointer hover:border-yellow-500 transition-colors`,children:[e.jsx("i",{className:"ri-image-line text-4xl text-gray-400 mb-2"}),e.jsx("p",{className:`text-sm ${s?"text-gray-400":"text-gray-600"}`,children:"Upload favicon (32x32px)"})]})]})]})]}),e.jsxs("div",{className:`p-6 rounded-xl ${s?"bg-gray-900":"bg-gray-50"} border ${s?"border-gray-800":"border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-bold",children:"Páginas CMS"}),e.jsxs("button",{className:"px-4 py-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white font-medium rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap",children:[e.jsx("i",{className:"ri-add-line text-xl"}),"Nova Página"]})]}),e.jsx("div",{className:"space-y-3",children:a.length===0?e.jsx("p",{className:s?"text-gray-400":"text-gray-600",children:"Nenhuma página criada"}):a.map(r=>e.jsxs("div",{className:`p-4 rounded-lg ${s?"bg-gray-800":"bg-white"} border ${s?"border-gray-700":"border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:r.title}),e.jsxs("p",{className:`text-sm ${s?"text-gray-400":"text-gray-600"}`,children:["/",r.slug]})]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${r.is_published?"bg-green-500/20 text-green-500":"bg-gray-500/20 text-gray-500"}`,children:r.is_published?"Publicada":"Rascunho"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{className:"p-2 rounded-lg bg-blue-500/10 text-blue-500 hover:bg-blue-500/20 transition-colors",children:e.jsx("i",{className:"ri-edit-line"})}),e.jsx("button",{className:"p-2 rounded-lg bg-purple-500/10 text-purple-500 hover:bg-purple-500/20 transition-colors",children:e.jsx("i",{className:"ri-eye-line"})}),e.jsx("button",{className:"p-2 rounded-lg bg-red-500/10 text-red-500 hover:bg-red-500/20 transition-colors",children:e.jsx("i",{className:"ri-delete-bin-line"})})]})]},r.id))})]})]}),e.jsxs("div",{className:`p-6 rounded-xl ${s?"bg-gray-900":"bg-gray-50"} border ${s?"border-gray-800":"border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-bold",children:"Banners & Sliders"}),e.jsxs("button",{className:"px-4 py-2 bg-gradient-to-r from-purple-500 to-purple-600 text-white font-medium rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap",children:[e.jsx("i",{className:"ri-add-line text-xl"}),"Novo Banner"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:j.length===0?e.jsx("p",{className:s?"text-gray-400":"text-gray-600",children:"Nenhum banner criado"}):j.map(r=>e.jsxs("div",{className:`rounded-lg overflow-hidden ${s?"bg-gray-800":"bg-white"} border ${s?"border-gray-700":"border-gray-200"}`,children:[e.jsx("div",{className:"aspect-video bg-gray-700 flex items-center justify-center",children:r.image_url?e.jsx("img",{src:r.image_url,alt:r.title,className:"w-full h-full object-cover"}):e.jsx("i",{className:"ri-image-line text-4xl text-gray-500"})}),e.jsxs("div",{className:"p-4",children:[e.jsx("h4",{className:"font-medium mb-2",children:r.title}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${r.is_active?"bg-green-500/20 text-green-500":"bg-gray-500/20 text-gray-500"}`,children:r.is_active?"Ativo":"Inativo"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{className:"p-1 rounded bg-blue-500/10 text-blue-500 hover:bg-blue-500/20 transition-colors",children:e.jsx("i",{className:"ri-edit-line text-sm"})}),e.jsx("button",{className:"p-1 rounded bg-red-500/10 text-red-500 hover:bg-red-500/20 transition-colors",children:e.jsx("i",{className:"ri-delete-bin-line text-sm"})})]})]})]})]},r.id))})]})]})}function Ne({darkMode:s}){const[a,g]=n.useState([]),[j,d]=n.useState([]),[x,y]=n.useState(!0),[p,v]=n.useState(!1);n.useEffect(()=>{o()},[]);const o=async()=>{try{const[r,c]=await Promise.all([f.from("marketing_campaigns").select("*").order("created_at",{ascending:!1}),f.from("coupons").select("*").order("created_at",{ascending:!1})]);g(r.data||[]),d(c.data||[])}catch(r){console.error("Erro ao carregar dados de marketing:",r)}finally{y(!1)}},l=[{id:1,name:"Cupons de Desconto",icon:"ri-coupon-line"},{id:2,name:"Regras Promocionais",icon:"ri-price-tag-3-line"},{id:3,name:"Scheduling Promoções",icon:"ri-calendar-event-line"},{id:4,name:"ROI Campanhas",icon:"ri-line-chart-line"},{id:5,name:"Upsell One-Click",icon:"ri-arrow-up-circle-line"},{id:6,name:"Push/Web Notifications",icon:"ri-notification-3-line"},{id:7,name:"Pixel Tracking",icon:"ri-eye-line"},{id:8,name:"Banner Tool",icon:"ri-image-add-line"},{id:9,name:"A/B Landing Pages",icon:"ri-test-tube-line"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:`p-6 rounded-xl ${s?"bg-gray-900":"bg-gray-50"} border ${s?"border-gray-800":"border-gray-200"}`,children:[e.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[e.jsx("i",{className:"ri-function-line text-yellow-500"}),"9+ Controles de Promoções & Marketing"]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:l.map(r=>e.jsxs("div",{className:`p-3 rounded-lg ${s?"bg-gray-800":"bg-white"} border ${s?"border-gray-700":"border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("i",{className:`${r.icon} text-yellow-500`}),e.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500"})]}),e.jsx("p",{className:"text-xs font-medium",children:r.name})]},r.id))})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:`p-6 rounded-xl ${s?"bg-gray-900":"bg-gray-50"} border ${s?"border-gray-800":"border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-bold",children:"Cupons Ativos"}),e.jsx("button",{onClick:()=>v(!0),className:"p-2 rounded-lg bg-yellow-500 text-black hover:bg-yellow-600 transition-colors",children:e.jsx("i",{className:"ri-add-line text-xl"})})]}),e.jsx("div",{className:"space-y-3",children:j.length===0?e.jsx("p",{className:s?"text-gray-400":"text-gray-600",children:"Nenhum cupom criado"}):j.slice(0,5).map(r=>e.jsxs("div",{className:`p-4 rounded-lg ${s?"bg-gray-800":"bg-white"} border ${s?"border-gray-700":"border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"font-mono font-bold text-yellow-500",children:r.code}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${r.is_active?"bg-green-500/20 text-green-500":"bg-gray-500/20 text-gray-500"}`,children:r.is_active?"Ativo":"Inativo"})]}),e.jsx("p",{className:`text-sm ${s?"text-gray-400":"text-gray-600"} mb-2`,children:r.description}),e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsxs("span",{className:s?"text-gray-400":"text-gray-600",children:["Usado: ",r.usage_count||0,"/",r.usage_limit||"∞"]}),e.jsx("span",{className:"text-yellow-500 font-medium",children:r.discount_type==="percentage"?`${r.discount_value}%`:`R$ ${r.discount_value}`})]})]},r.id))})]}),e.jsxs("div",{className:`lg:col-span-2 p-6 rounded-xl ${s?"bg-gray-900":"bg-gray-50"} border ${s?"border-gray-800":"border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-bold",children:"Campanhas de Marketing"}),e.jsxs("button",{className:"px-4 py-2 bg-gradient-to-r from-purple-500 to-purple-600 text-white font-medium rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap",children:[e.jsx("i",{className:"ri-add-line text-xl"}),"Nova Campanha"]})]}),x?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"w-12 h-12 border-4 border-yellow-500 border-t-transparent rounded-full animate-spin"})}):a.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("i",{className:"ri-megaphone-line text-6xl text-gray-600 mb-4"}),e.jsx("p",{className:`text-lg ${s?"text-gray-400":"text-gray-600"}`,children:"Nenhuma campanha criada ainda"}),e.jsx("button",{className:"mt-4 px-6 py-2 bg-gradient-to-r from-yellow-500 to-yellow-600 text-black font-medium rounded-lg hover:opacity-90 transition-opacity whitespace-nowrap",children:"Criar Primeira Campanha"})]}):e.jsx("div",{className:"space-y-4",children:a.map(r=>e.jsxs("div",{className:`p-4 rounded-lg ${s?"bg-gray-800":"bg-white"} border ${s?"border-gray-700":"border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-lg",children:r.name}),e.jsx("p",{className:`text-sm ${s?"text-gray-400":"text-gray-600"}`,children:r.description})]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${r.status==="running"?"bg-green-500/20 text-green-500":r.status==="scheduled"?"bg-blue-500/20 text-blue-500":r.status==="completed"?"bg-gray-500/20 text-gray-500":"bg-yellow-500/20 text-yellow-500"}`,children:r.status==="running"?"Em Execução":r.status==="scheduled"?"Agendada":r.status==="completed"?"Concluída":"Rascunho"})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:`text-xs ${s?"text-gray-400":"text-gray-600"}`,children:"Enviados"}),e.jsx("p",{className:"text-lg font-bold",children:r.sent_count||0})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-xs ${s?"text-gray-400":"text-gray-600"}`,children:"Abertos"}),e.jsx("p",{className:"text-lg font-bold text-blue-500",children:r.opened_count||0})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-xs ${s?"text-gray-400":"text-gray-600"}`,children:"Cliques"}),e.jsx("p",{className:"text-lg font-bold text-purple-500",children:r.clicked_count||0})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-xs ${s?"text-gray-400":"text-gray-600"}`,children:"Conversões"}),e.jsx("p",{className:"text-lg font-bold text-green-500",children:r.conversion_count||0})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm font-medium text-yellow-500",children:["ROI: R$ ",r.revenue?.toFixed(2)||"0.00"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{className:"p-2 rounded-lg bg-blue-500/10 text-blue-500 hover:bg-blue-500/20 transition-colors",children:e.jsx("i",{className:"ri-edit-line"})}),e.jsx("button",{className:"p-2 rounded-lg bg-purple-500/10 text-purple-500 hover:bg-purple-500/20 transition-colors",children:e.jsx("i",{className:"ri-bar-chart-line"})}),e.jsx("button",{className:"p-2 rounded-lg bg-red-500/10 text-red-500 hover:bg-red-500/20 transition-colors",children:e.jsx("i",{className:"ri-delete-bin-line"})})]})]})]},r.id))})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[{title:"Taxa de Abertura",value:"24.5%",icon:"ri-mail-open-line",color:"blue"},{title:"Taxa de Clique",value:"8.2%",icon:"ri-cursor-line",color:"purple"},{title:"Taxa de Conversão",value:"3.1%",icon:"ri-shopping-cart-line",color:"green"}].map((r,c)=>e.jsxs("div",{className:`p-6 rounded-xl ${s?"bg-gray-900":"bg-gray-50"} border ${s?"border-gray-800":"border-gray-200"}`,children:[e.jsx("div",{className:`w-12 h-12 rounded-lg bg-${r.color}-500/20 flex items-center justify-center mb-4`,children:e.jsx("i",{className:`${r.icon} text-2xl text-${r.color}-500`})}),e.jsx("h3",{className:`text-sm ${s?"text-gray-400":"text-gray-600"} mb-1`,children:r.title}),e.jsx("p",{className:"text-3xl font-bold",children:r.value})]},c))})]})}function ve({darkMode:s}){const[a,g]=n.useState([]),[j,d]=n.useState(!0),[x,y]=n.useState("month"),[p,v]=n.useState({totalRevenue:0,totalRefunds:0,netRevenue:0,avgOrderValue:0});n.useEffect(()=>{o()},[x]);const o=async()=>{try{const{data:c,error:h}=await f.from("orders").select("*").order("created_at",{ascending:!1});if(h)throw h;const _=c?.reduce((S,t)=>S+(t.total||0),0)||0,$=c?.length?_/c.length:0;v({totalRevenue:_,totalRefunds:0,netRevenue:_,avgOrderValue:$}),g(c||[])}catch(c){console.error("Erro ao carregar dados financeiros:",c)}finally{d(!1)}},l=[{id:1,name:"Relatórios Periódicos",icon:"ri-calendar-line"},{id:2,name:"Por Método Pagamento",icon:"ri-bank-card-line"},{id:3,name:"Margem por Categoria",icon:"ri-pie-chart-line"},{id:4,name:"KPIs (LTV/CAC/AOV)",icon:"ri-dashboard-line"},{id:5,name:"Exports Financeiros",icon:"ri-file-excel-line"},{id:6,name:"Reconciliação Stripe",icon:"ri-refresh-line"},{id:7,name:"Impostos por Região",icon:"ri-government-line"},{id:8,name:"Plano de Contas",icon:"ri-book-line"}],r=[{label:"Receita Total",value:`R$ ${p.totalRevenue.toFixed(2)}`,icon:"ri-money-dollar-circle-line",color:"from-green-500 to-green-600",change:"+12.5%"},{label:"Receita Líquida",value:`R$ ${p.netRevenue.toFixed(2)}`,icon:"ri-line-chart-line",color:"from-blue-500 to-blue-600",change:"+8.2%"},{label:"Ticket Médio (AOV)",value:`R$ ${p.avgOrderValue.toFixed(2)}`,icon:"ri-shopping-cart-line",color:"from-purple-500 to-purple-600",change:"+5.1%"},{label:"Reembolsos",value:`R$ ${p.totalRefunds.toFixed(2)}`,icon:"ri-refund-line",color:"from-red-500 to-red-600",change:"-2.3%"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:`p-6 rounded-xl ${s?"bg-gray-900":"bg-gray-50"} border ${s?"border-gray-800":"border-gray-200"}`,children:[e.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[e.jsx("i",{className:"ri-function-line text-yellow-500"}),"8+ Controles Financeiros & Relatórios"]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:l.map(c=>e.jsxs("div",{className:`p-3 rounded-lg ${s?"bg-gray-800":"bg-white"} border ${s?"border-gray-700":"border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("i",{className:`${c.icon} text-yellow-500`}),e.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500"})]}),e.jsx("p",{className:"text-xs font-medium",children:c.name})]},c.id))})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-2",children:["day","week","month","year"].map(c=>e.jsx("button",{onClick:()=>y(c),className:`px-4 py-2 rounded-lg font-medium transition-all whitespace-nowrap ${x===c?"bg-gradient-to-r from-yellow-500 to-yellow-600 text-black":s?"bg-gray-800 text-gray-300 hover:bg-gray-700":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:c==="day"?"Hoje":c==="week"?"Semana":c==="month"?"Mês":"Ano"},c))}),e.jsxs("button",{className:"px-6 py-2 bg-gradient-to-r from-green-500 to-green-600 text-white font-medium rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap",children:[e.jsx("i",{className:"ri-file-excel-line text-xl"}),"Exportar Relatório"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:r.map((c,h)=>e.jsxs("div",{className:`p-6 rounded-xl ${s?"bg-gray-900":"bg-gray-50"} border ${s?"border-gray-800":"border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:`w-12 h-12 rounded-lg bg-gradient-to-br ${c.color} flex items-center justify-center`,children:e.jsx("i",{className:`${c.icon} text-2xl text-white`})}),e.jsx("span",{className:`text-sm font-medium ${c.change.startsWith("+")?"text-green-500":"text-red-500"}`,children:c.change})]}),e.jsx("h3",{className:`text-sm ${s?"text-gray-400":"text-gray-600"} mb-1`,children:c.label}),e.jsx("p",{className:"text-2xl font-bold",children:c.value})]},h))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:`p-6 rounded-xl ${s?"bg-gray-900":"bg-gray-50"} border ${s?"border-gray-800":"border-gray-200"}`,children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:"Receita por Método de Pagamento"}),e.jsx("div",{className:"space-y-3",children:[{method:"Cartão de Crédito",amount:45230.5,percentage:65,color:"blue"},{method:"PIX",amount:18450,percentage:25,color:"green"},{method:"Boleto",amount:7380,percentage:10,color:"yellow"}].map((c,h)=>e.jsxs("div",{className:`p-4 rounded-lg ${s?"bg-gray-800":"bg-white"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"font-medium",children:c.method}),e.jsxs("span",{className:"font-bold text-yellow-500",children:["R$ ",c.amount.toFixed(2)]})]}),e.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:`bg-${c.color}-500 h-2 rounded-full`,style:{width:`${c.percentage}%`}})}),e.jsxs("p",{className:`text-xs mt-1 ${s?"text-gray-400":"text-gray-600"}`,children:[c.percentage,"% do total"]})]},h))})]}),e.jsxs("div",{className:`p-6 rounded-xl ${s?"bg-gray-900":"bg-gray-50"} border ${s?"border-gray-800":"border-gray-200"}`,children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:"Margem por Categoria"}),e.jsx("div",{className:"space-y-3",children:[{category:"Tecnologia",revenue:35e3,cost:2e4,margin:42.8},{category:"Casa & Decoração",revenue:18e3,cost:12e3,margin:33.3},{category:"Ferramentas",revenue:12e3,cost:7e3,margin:41.6}].map((c,h)=>e.jsxs("div",{className:`p-4 rounded-lg ${s?"bg-gray-800":"bg-white"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"font-medium",children:c.category}),e.jsxs("span",{className:"text-green-500 font-bold",children:[c.margin.toFixed(1),"%"]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{className:s?"text-gray-400":"text-gray-600",children:["Receita: R$ ",c.revenue.toFixed(2)]}),e.jsxs("span",{className:s?"text-gray-400":"text-gray-600",children:["Custo: R$ ",c.cost.toFixed(2)]})]})]},h))})]})]})]})}function we({darkMode:s}){const[a,g]=n.useState([]),[j,d]=n.useState([]),[x,y]=n.useState([]),[p,v]=n.useState(!0);n.useEffect(()=>{o()},[]);const o=async()=>{try{const[r,c,h]=await Promise.all([f.from("audit_logs").select("*, profiles(email)").order("created_at",{ascending:!1}).limit(50),f.from("api_keys").select("*").order("created_at",{ascending:!1}),f.from("webhooks").select("*").order("created_at",{ascending:!1})]);g(r.data||[]),d(c.data||[]),y(h.data||[])}catch(r){console.error("Erro ao carregar dados de segurança:",r)}finally{v(!1)}},l=[{id:1,name:"Audit Log",icon:"ri-history-line"},{id:2,name:"Gestão API Keys",icon:"ri-key-line"},{id:3,name:"Webhooks",icon:"ri-webhook-line"},{id:4,name:"RLS Policies",icon:"ri-shield-check-line"},{id:5,name:"Backups Agendados",icon:"ri-database-line"},{id:6,name:"Controle de Sessões",icon:"ri-user-settings-line"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:`p-6 rounded-xl ${s?"bg-gray-900":"bg-gray-50"} border ${s?"border-gray-800":"border-gray-200"}`,children:[e.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[e.jsx("i",{className:"ri-function-line text-yellow-500"}),"6+ Controles de Segurança & Infraestrutura"]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:l.map(r=>e.jsxs("div",{className:`p-3 rounded-lg ${s?"bg-gray-800":"bg-white"} border ${s?"border-gray-700":"border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("i",{className:`${r.icon} text-yellow-500`}),e.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500"})]}),e.jsx("p",{className:"text-xs font-medium",children:r.name})]},r.id))})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:`p-6 rounded-xl ${s?"bg-gray-900":"bg-gray-50"} border ${s?"border-gray-800":"border-gray-200"}`,children:[e.jsx("div",{className:"w-12 h-12 rounded-lg bg-green-500/20 flex items-center justify-center mb-4",children:e.jsx("i",{className:"ri-shield-check-line text-2xl text-green-500"})}),e.jsx("h3",{className:`text-sm ${s?"text-gray-400":"text-gray-600"} mb-1`,children:"Status de Segurança"}),e.jsx("p",{className:"text-3xl font-bold text-green-500",children:"Seguro"}),e.jsx("p",{className:`text-xs mt-2 ${s?"text-gray-400":"text-gray-600"}`,children:"Todas as políticas ativas"})]}),e.jsxs("div",{className:`p-6 rounded-xl ${s?"bg-gray-900":"bg-gray-50"} border ${s?"border-gray-800":"border-gray-200"}`,children:[e.jsx("div",{className:"w-12 h-12 rounded-lg bg-blue-500/20 flex items-center justify-center mb-4",children:e.jsx("i",{className:"ri-key-line text-2xl text-blue-500"})}),e.jsx("h3",{className:`text-sm ${s?"text-gray-400":"text-gray-600"} mb-1`,children:"API Keys Ativas"}),e.jsx("p",{className:"text-3xl font-bold",children:j.filter(r=>r.is_active).length}),e.jsxs("p",{className:`text-xs mt-2 ${s?"text-gray-400":"text-gray-600"}`,children:[j.length," total"]})]}),e.jsxs("div",{className:`p-6 rounded-xl ${s?"bg-gray-900":"bg-gray-50"} border ${s?"border-gray-800":"border-gray-200"}`,children:[e.jsx("div",{className:"w-12 h-12 rounded-lg bg-purple-500/20 flex items-center justify-center mb-4",children:e.jsx("i",{className:"ri-database-line text-2xl text-purple-500"})}),e.jsx("h3",{className:`text-sm ${s?"text-gray-400":"text-gray-600"} mb-1`,children:"Último Backup"}),e.jsx("p",{className:"text-3xl font-bold",children:"Hoje"}),e.jsx("p",{className:`text-xs mt-2 ${s?"text-gray-400":"text-gray-600"}`,children:"Automático diário"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:`p-6 rounded-xl ${s?"bg-gray-900":"bg-gray-50"} border ${s?"border-gray-800":"border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-bold",children:"API Keys"}),e.jsxs("button",{className:"px-4 py-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white font-medium rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap",children:[e.jsx("i",{className:"ri-add-line text-xl"}),"Nova Key"]})]}),e.jsx("div",{className:"space-y-3",children:j.length===0?e.jsx("p",{className:s?"text-gray-400":"text-gray-600",children:"Nenhuma API key criada"}):j.map(r=>e.jsxs("div",{className:`p-4 rounded-lg ${s?"bg-gray-800":"bg-white"} border ${s?"border-gray-700":"border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:r.name}),e.jsxs("p",{className:`text-xs font-mono ${s?"text-gray-400":"text-gray-600"}`,children:[r.key_hash.slice(0,20),"..."]})]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${r.is_active?"bg-green-500/20 text-green-500":"bg-gray-500/20 text-gray-500"}`,children:r.is_active?"Ativa":"Inativa"})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsxs("span",{className:s?"text-gray-400":"text-gray-600",children:["Último uso: ",r.last_used?new Date(r.last_used).toLocaleDateString("pt-BR"):"Nunca"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{className:"p-1 rounded bg-blue-500/10 text-blue-500 hover:bg-blue-500/20 transition-colors",children:e.jsx("i",{className:"ri-edit-line"})}),e.jsx("button",{className:"p-1 rounded bg-red-500/10 text-red-500 hover:bg-red-500/20 transition-colors",children:e.jsx("i",{className:"ri-delete-bin-line"})})]})]})]},r.id))})]}),e.jsxs("div",{className:`p-6 rounded-xl ${s?"bg-gray-900":"bg-gray-50"} border ${s?"border-gray-800":"border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-bold",children:"Webhooks"}),e.jsxs("button",{className:"px-4 py-2 bg-gradient-to-r from-purple-500 to-purple-600 text-white font-medium rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap",children:[e.jsx("i",{className:"ri-add-line text-xl"}),"Novo Webhook"]})]}),e.jsx("div",{className:"space-y-3",children:x.length===0?e.jsx("p",{className:s?"text-gray-400":"text-gray-600",children:"Nenhum webhook configurado"}):x.map(r=>e.jsxs("div",{className:`p-4 rounded-lg ${s?"bg-gray-800":"bg-white"} border ${s?"border-gray-700":"border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex-1 mr-2",children:[e.jsx("p",{className:"font-medium",children:r.name}),e.jsx("p",{className:`text-xs ${s?"text-gray-400":"text-gray-600"} truncate`,children:r.url})]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs whitespace-nowrap ${r.is_active?"bg-green-500/20 text-green-500":"bg-gray-500/20 text-gray-500"}`,children:r.is_active?"Ativo":"Inativo"})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"text-green-500",children:["✓ ",r.success_count||0]}),e.jsxs("span",{className:"text-red-500",children:["✗ ",r.failure_count||0]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{className:"p-1 rounded bg-blue-500/10 text-blue-500 hover:bg-blue-500/20 transition-colors",children:e.jsx("i",{className:"ri-edit-line"})}),e.jsx("button",{className:"p-1 rounded bg-red-500/10 text-red-500 hover:bg-red-500/20 transition-colors",children:e.jsx("i",{className:"ri-delete-bin-line"})})]})]})]},r.id))})]})]}),e.jsxs("div",{className:`p-6 rounded-xl ${s?"bg-gray-900":"bg-gray-50"} border ${s?"border-gray-800":"border-gray-200"}`,children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:"Audit Log (Últimas 50 ações)"}),p?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"w-12 h-12 border-4 border-yellow-500 border-t-transparent rounded-full animate-spin"})}):a.length===0?e.jsx("p",{className:s?"text-gray-400":"text-gray-600",children:"Nenhuma ação registrada"}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:s?"bg-gray-800":"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:"Data/Hora"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:"Usuário"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:"Ação"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:"Tabela"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:"IP"})]})}),e.jsx("tbody",{children:a.map(r=>e.jsxs("tr",{className:`border-t ${s?"border-gray-800":"border-gray-200"}`,children:[e.jsx("td",{className:"px-4 py-3 text-sm",children:new Date(r.created_at).toLocaleString("pt-BR")}),e.jsx("td",{className:"px-4 py-3 text-sm",children:r.profiles?.email||"Sistema"}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${r.action.includes("create")||r.action.includes("insert")?"bg-green-500/20 text-green-500":r.action.includes("update")?"bg-blue-500/20 text-blue-500":r.action.includes("delete")?"bg-red-500/20 text-red-500":"bg-gray-500/20 text-gray-500"}`,children:r.action})}),e.jsx("td",{className:"px-4 py-3 text-sm",children:r.table_name||"-"}),e.jsx("td",{className:"px-4 py-3 text-sm font-mono",children:r.ip_address||"-"})]},r.id))})]})})]})]})}function _e({darkMode:s}){const[a,g]=n.useState([]),[j,d]=n.useState([]),[x,y]=n.useState([]),[p,v]=n.useState(!0);n.useEffect(()=>{o()},[]);const o=async()=>{try{const[r,c,h]=await Promise.all([f.from("automation_rules").select("*").order("created_at",{ascending:!1}),f.from("email_templates").select("*").order("created_at",{ascending:!1}),f.from("scheduled_tasks").select("*").order("created_at",{ascending:!1})]);g(r.data||[]),d(c.data||[]),y(h.data||[])}catch(r){console.error("Erro ao carregar automações:",r)}finally{v(!1)}},l=[{id:1,name:"Regras de Evento",icon:"ri-flashlight-line"},{id:2,name:"Automações E-mail",icon:"ri-mail-send-line"},{id:3,name:"Pricing Dinâmico",icon:"ri-price-tag-3-line"},{id:4,name:"Fraud Flags",icon:"ri-shield-check-line"},{id:5,name:"Autoresponder Reviews",icon:"ri-chat-smile-line"},{id:6,name:"Integração ERP",icon:"ri-links-line"},{id:7,name:"Scheduler Tarefas",icon:"ri-calendar-check-line"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:`p-6 rounded-xl ${s?"bg-gray-900":"bg-gray-50"} border ${s?"border-gray-800":"border-gray-200"}`,children:[e.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[e.jsx("i",{className:"ri-function-line text-yellow-500"}),"7+ Controles de Automação & Regras"]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:l.map(r=>e.jsxs("div",{className:`p-3 rounded-lg ${s?"bg-gray-800":"bg-white"} border ${s?"border-gray-700":"border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("i",{className:`${r.icon} text-yellow-500`}),e.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500"})]}),e.jsx("p",{className:"text-xs font-medium",children:r.name})]},r.id))})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:`p-6 rounded-xl ${s?"bg-gray-900":"bg-gray-50"} border ${s?"border-gray-800":"border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-bold",children:"Regras de Automação"}),e.jsxs("button",{className:"px-4 py-2 bg-gradient-to-r from-yellow-500 to-yellow-600 text-black font-medium rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap",children:[e.jsx("i",{className:"ri-add-line text-xl"}),"Nova Regra"]})]}),e.jsx("div",{className:"space-y-3",children:a.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("i",{className:"ri-robot-line text-6xl text-gray-600 mb-4"}),e.jsx("p",{className:`${s?"text-gray-400":"text-gray-600"} mb-4`,children:"Nenhuma regra de automação criada"}),e.jsx("button",{className:"px-6 py-2 bg-gradient-to-r from-yellow-500 to-yellow-600 text-black font-medium rounded-lg hover:opacity-90 transition-opacity whitespace-nowrap",children:"Criar Primeira Regra"})]}):a.map(r=>e.jsxs("div",{className:`p-4 rounded-lg ${s?"bg-gray-800":"bg-white"} border ${s?"border-gray-700":"border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium",children:r.name}),e.jsx("p",{className:`text-sm ${s?"text-gray-400":"text-gray-600"}`,children:r.description})]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ml-2 whitespace-nowrap ${r.is_active?"bg-green-500/20 text-green-500":"bg-gray-500/20 text-gray-500"}`,children:r.is_active?"Ativa":"Inativa"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:`text-xs ${s?"text-gray-400":"text-gray-600"}`,children:["Executada ",r.execution_count||0," vezes"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{className:"p-2 rounded-lg bg-blue-500/10 text-blue-500 hover:bg-blue-500/20 transition-colors",children:e.jsx("i",{className:"ri-edit-line"})}),e.jsx("button",{className:"p-2 rounded-lg bg-red-500/10 text-red-500 hover:bg-red-500/20 transition-colors",children:e.jsx("i",{className:"ri-delete-bin-line"})})]})]})]},r.id))})]}),e.jsxs("div",{className:`p-6 rounded-xl ${s?"bg-gray-900":"bg-gray-50"} border ${s?"border-gray-800":"border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-bold",children:"Templates de E-mail"}),e.jsxs("button",{className:"px-4 py-2 bg-gradient-to-r from-purple-500 to-purple-600 text-white font-medium rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap",children:[e.jsx("i",{className:"ri-add-line text-xl"}),"Novo Template"]})]}),e.jsx("div",{className:"space-y-3",children:j.length===0?e.jsx("p",{className:s?"text-gray-400":"text-gray-600",children:"Nenhum template criado"}):j.map(r=>e.jsxs("div",{className:`p-4 rounded-lg ${s?"bg-gray-800":"bg-white"} border ${s?"border-gray-700":"border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:r.name}),e.jsx("p",{className:`text-sm ${s?"text-gray-400":"text-gray-600"}`,children:r.subject})]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${r.is_active?"bg-green-500/20 text-green-500":"bg-gray-500/20 text-gray-500"}`,children:r.is_active?"Ativo":"Inativo"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{className:"p-2 rounded-lg bg-blue-500/10 text-blue-500 hover:bg-blue-500/20 transition-colors",children:e.jsx("i",{className:"ri-edit-line"})}),e.jsx("button",{className:"p-2 rounded-lg bg-purple-500/10 text-purple-500 hover:bg-purple-500/20 transition-colors",children:e.jsx("i",{className:"ri-eye-line"})}),e.jsx("button",{className:"p-2 rounded-lg bg-red-500/10 text-red-500 hover:bg-red-500/20 transition-colors",children:e.jsx("i",{className:"ri-delete-bin-line"})})]})]},r.id))})]})]}),e.jsxs("div",{className:`p-6 rounded-xl ${s?"bg-gray-900":"bg-gray-50"} border ${s?"border-gray-800":"border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-bold",children:"Tarefas Agendadas"}),e.jsxs("button",{className:"px-4 py-2 bg-gradient-to-r from-green-500 to-green-600 text-white font-medium rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap",children:[e.jsx("i",{className:"ri-add-line text-xl"}),"Nova Tarefa"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:x.length===0?e.jsx("p",{className:s?"text-gray-400":"text-gray-600",children:"Nenhuma tarefa agendada"}):x.map(r=>e.jsxs("div",{className:`p-4 rounded-lg ${s?"bg-gray-800":"bg-white"} border ${s?"border-gray-700":"border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"font-medium",children:r.name}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${r.is_active?"bg-green-500/20 text-green-500":"bg-gray-500/20 text-gray-500"}`,children:r.is_active?"Ativa":"Inativa"})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("i",{className:"ri-time-line text-gray-400"}),e.jsx("span",{className:s?"text-gray-400":"text-gray-600",children:r.schedule_cron})]}),r.last_run&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("i",{className:"ri-check-line text-green-500"}),e.jsxs("span",{className:s?"text-gray-400":"text-gray-600",children:["Última execução: ",new Date(r.last_run).toLocaleString("pt-BR")]})]})]})]},r.id))})]})]})}function $e({darkMode:s}){const[a,g]=n.useState([]),[j,d]=n.useState(!0),[x,y]=n.useState("all"),[p,v]=n.useState("all"),[o,l]=n.useState(null);n.useEffect(()=>{r()},[]);const r=async()=>{try{const{data:t,error:N}=await f.from("support_tickets").select(`
          *,
          profiles!support_tickets_user_id_fkey(email, full_name)
        `).order("created_at",{ascending:!1});if(N)throw N;g(t||[])}catch(t){console.error("Erro ao carregar tickets:",t)}finally{d(!1)}},c=async(t,N)=>{try{const{error:b}=await f.from("support_tickets").update({status:N}).eq("id",t);if(b)throw b;await r()}catch(b){console.error("Erro ao atualizar status:",b)}},h=[{id:1,name:"Chat Interno",icon:"ri-chat-3-line"},{id:2,name:"Sistema de Tickets",icon:"ri-ticket-line"},{id:3,name:"Import/Export Catálogo",icon:"ri-file-transfer-line"},{id:4,name:"Painel de Tarefas",icon:"ri-task-line"},{id:5,name:"Modo Manutenção",icon:"ri-tools-line"},{id:6,name:"Simular Pedido",icon:"ri-shopping-cart-2-line"}],_=a.filter(t=>{const N=x==="all"||t.status===x,b=p==="all"||t.priority===p;return N&&b}),$=[{value:"open",label:"Aberto",color:"yellow"},{value:"in_progress",label:"Em Progresso",color:"blue"},{value:"waiting",label:"Aguardando",color:"purple"},{value:"resolved",label:"Resolvido",color:"green"},{value:"closed",label:"Fechado",color:"gray"}],S=[{value:"low",label:"Baixa",color:"gray"},{value:"medium",label:"Média",color:"blue"},{value:"high",label:"Alta",color:"yellow"},{value:"urgent",label:"Urgente",color:"red"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:`p-6 rounded-xl ${s?"bg-gray-900":"bg-gray-50"} border ${s?"border-gray-800":"border-gray-200"}`,children:[e.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[e.jsx("i",{className:"ri-function-line text-yellow-500"}),"6+ Controles de Suporte & Operações"]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:h.map(t=>e.jsxs("div",{className:`p-3 rounded-lg ${s?"bg-gray-800":"bg-white"} border ${s?"border-gray-700":"border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("i",{className:`${t.icon} text-yellow-500`}),e.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500"})]}),e.jsx("p",{className:"text-xs font-medium",children:t.name})]},t.id))})]}),e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("select",{value:x,onChange:t=>y(t.target.value),className:`px-4 py-2 rounded-lg ${s?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`,children:[e.jsx("option",{value:"all",children:"Todos Status"}),$.map(t=>e.jsx("option",{value:t.value,children:t.label},t.value))]}),e.jsxs("select",{value:p,onChange:t=>v(t.target.value),className:`px-4 py-2 rounded-lg ${s?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`,children:[e.jsx("option",{value:"all",children:"Todas Prioridades"}),S.map(t=>e.jsx("option",{value:t.value,children:t.label},t.value))]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{className:"px-6 py-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white font-medium rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap",children:[e.jsx("i",{className:"ri-download-line text-xl"}),"Exportar Catálogo"]}),e.jsxs("button",{className:"px-6 py-2 bg-gradient-to-r from-green-500 to-green-600 text-white font-medium rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap",children:[e.jsx("i",{className:"ri-upload-line text-xl"}),"Importar Catálogo"]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:$.map(t=>{const N=a.filter(b=>b.status===t.value).length;return e.jsxs("div",{className:`p-4 rounded-xl ${s?"bg-gray-900":"bg-gray-50"} border ${s?"border-gray-800":"border-gray-200"}`,children:[e.jsx("div",{className:`w-10 h-10 rounded-lg bg-${t.color}-500/20 flex items-center justify-center mb-3`,children:e.jsx("i",{className:`ri-ticket-line text-xl text-${t.color}-500`})}),e.jsx("p",{className:`text-sm ${s?"text-gray-400":"text-gray-600"} mb-1`,children:t.label}),e.jsx("p",{className:"text-2xl font-bold",children:N})]},t.value)})}),e.jsx("div",{className:`rounded-xl overflow-hidden ${s?"bg-gray-900":"bg-gray-50"} border ${s?"border-gray-800":"border-gray-200"}`,children:j?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"w-12 h-12 border-4 border-yellow-500 border-t-transparent rounded-full animate-spin"})}):_.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("i",{className:"ri-customer-service-line text-6xl text-gray-600 mb-4"}),e.jsx("p",{className:`text-lg ${s?"text-gray-400":"text-gray-600"}`,children:"Nenhum ticket encontrado"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:s?"bg-gray-800":"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:"ID"}),e.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:"Assunto"}),e.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:"Cliente"}),e.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:"Prioridade"}),e.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:"Status"}),e.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:"Data"}),e.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:"Ações"})]})}),e.jsx("tbody",{children:_.map(t=>e.jsxs("tr",{className:`border-t ${s?"border-gray-800 hover:bg-gray-800":"border-gray-200 hover:bg-gray-50"} transition-colors`,children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:"font-mono text-sm",children:["#",t.id.slice(0,8)]})}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("p",{className:"font-medium",children:t.subject}),t.category&&e.jsx("span",{className:`text-xs ${s?"text-gray-400":"text-gray-600"}`,children:t.category})]}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:t.profiles?.full_name||"N/A"}),e.jsx("p",{className:`text-sm ${s?"text-gray-400":"text-gray-600"}`,children:t.profiles?.email})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${t.priority==="urgent"?"bg-red-500/20 text-red-500":t.priority==="high"?"bg-yellow-500/20 text-yellow-500":t.priority==="medium"?"bg-blue-500/20 text-blue-500":"bg-gray-500/20 text-gray-500"}`,children:S.find(N=>N.value===t.priority)?.label})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("select",{value:t.status,onChange:N=>c(t.id,N.target.value),className:`px-3 py-1 rounded-full text-xs font-medium ${t.status==="resolved"?"bg-green-500/20 text-green-500":t.status==="open"?"bg-yellow-500/20 text-yellow-500":t.status==="closed"?"bg-gray-500/20 text-gray-500":"bg-blue-500/20 text-blue-500"} border-none cursor-pointer`,children:$.map(N=>e.jsx("option",{value:N.value,children:N.label},N.value))})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`text-sm ${s?"text-gray-400":"text-gray-600"}`,children:new Date(t.created_at).toLocaleDateString("pt-BR")})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>l(t),className:"p-2 rounded-lg bg-blue-500/10 text-blue-500 hover:bg-blue-500/20 transition-colors",title:"Ver detalhes",children:e.jsx("i",{className:"ri-eye-line"})}),e.jsx("button",{className:"p-2 rounded-lg bg-green-500/10 text-green-500 hover:bg-green-500/20 transition-colors",title:"Responder",children:e.jsx("i",{className:"ri-reply-line"})})]})})]},t.id))})]})})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:`p-6 rounded-xl ${s?"bg-gray-900":"bg-gray-50"} border ${s?"border-gray-800":"border-gray-200"}`,children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:"Ferramentas de Operação"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{className:"w-full p-4 rounded-lg bg-gradient-to-r from-blue-500 to-blue-600 text-white text-left hover:opacity-90 transition-opacity",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("i",{className:"ri-shopping-cart-2-line text-2xl"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Simular Pedido"}),e.jsx("p",{className:"text-sm opacity-80",children:"Testar fluxo completo de compra"})]})]})}),e.jsx("button",{className:"w-full p-4 rounded-lg bg-gradient-to-r from-yellow-500 to-yellow-600 text-black text-left hover:opacity-90 transition-opacity",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("i",{className:"ri-tools-line text-2xl"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Modo Manutenção"}),e.jsx("p",{className:"text-sm opacity-80",children:"Ativar/desativar site temporariamente"})]})]})}),e.jsx("button",{className:"w-full p-4 rounded-lg bg-gradient-to-r from-purple-500 to-purple-600 text-white text-left hover:opacity-90 transition-opacity",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("i",{className:"ri-task-line text-2xl"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Painel de Tarefas"}),e.jsx("p",{className:"text-sm opacity-80",children:"Gerenciar tarefas da equipe"})]})]})})]})]}),e.jsxs("div",{className:`p-6 rounded-xl ${s?"bg-gray-900":"bg-gray-50"} border ${s?"border-gray-800":"border-gray-200"}`,children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:"Estatísticas de Suporte"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:s?"text-gray-400":"text-gray-600",children:"Tempo Médio de Resposta"}),e.jsx("span",{className:"font-bold text-yellow-500",children:"2.5h"})]}),e.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:"bg-yellow-500 h-2 rounded-full",style:{width:"75%"}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:s?"text-gray-400":"text-gray-600",children:"Taxa de Resolução"}),e.jsx("span",{className:"font-bold text-green-500",children:"87%"})]}),e.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:"87%"}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:s?"text-gray-400":"text-gray-600",children:"Satisfação do Cliente"}),e.jsx("span",{className:"font-bold text-blue-500",children:"4.6/5.0"})]}),e.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:"92%"}})})]})]})]})]})]})}function Ce({darkMode:s}){const[a,g]=n.useState([]),[j,d]=n.useState(!0),[x,y]=n.useState(!1),[p,v]=n.useState(null),[o,l]=n.useState({name:"",country:"",region:"",method:"standard",base_cost:0,cost_per_kg:0,cost_per_item:0,free_shipping_threshold:0,min_delivery_days:3,max_delivery_days:7,is_active:!0,is_dropshipping:!1,carrier:"",tracking_enabled:!0});n.useEffect(()=>{r()},[]);const r=async()=>{d(!0);const{data:t}=await f.from("shipping_rules").select("*").order("country");g(t||[]),d(!1)},c=async t=>{t.preventDefault();try{if(p){const{error:N}=await f.from("shipping_rules").update(o).eq("id",p.id);if(N)throw N}else{const{error:N}=await f.from("shipping_rules").insert([o]);if(N)throw N}alert("Regra de envio salva com sucesso!"),y(!1),$(),r()}catch(N){console.error("Erro:",N),alert("Erro ao salvar regra de envio")}},h=t=>{v(t),l(t),y(!0)},_=async t=>{if(!confirm("Tem certeza que deseja excluir esta regra?"))return;const{error:N}=await f.from("shipping_rules").delete().eq("id",t);N||(alert("Regra excluída com sucesso!"),r())},$=()=>{l({name:"",country:"",region:"",method:"standard",base_cost:0,cost_per_kg:0,cost_per_item:0,free_shipping_threshold:0,min_delivery_days:3,max_delivery_days:7,is_active:!0,is_dropshipping:!1,carrier:"",tracking_enabled:!0}),v(null)},S=["Portugal","França","Alemanha","Espanha","Itália","Luxemburgo","Bélgica","Holanda","Reino Unido","Suíça","Áustria","Brasil"];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[e.jsx("i",{className:"ri-truck-line text-yellow-500"}),"Gestão de Envios & Logística"]}),e.jsx("p",{className:"text-gray-400 mt-1",children:"Configure taxas de envio por país, peso e método"})]}),e.jsxs("button",{onClick:()=>{$(),y(!0)},className:"px-4 py-2 bg-gradient-to-r from-yellow-500 to-yellow-600 text-black font-medium rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap",children:[e.jsx("i",{className:"ri-add-line"}),"Nova Regra de Envio"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:`${s?"bg-gray-800":"bg-white"} rounded-xl p-6`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Total de Regras"}),e.jsx("p",{className:"text-2xl font-bold mt-1",children:a.length})]}),e.jsx("div",{className:"w-12 h-12 bg-blue-500/10 rounded-lg flex items-center justify-center",children:e.jsx("i",{className:"ri-list-check text-2xl text-blue-500"})})]})}),e.jsx("div",{className:`${s?"bg-gray-800":"bg-white"} rounded-xl p-6`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Regras Ativas"}),e.jsx("p",{className:"text-2xl font-bold mt-1",children:a.filter(t=>t.is_active).length})]}),e.jsx("div",{className:"w-12 h-12 bg-green-500/10 rounded-lg flex items-center justify-center",children:e.jsx("i",{className:"ri-checkbox-circle-line text-2xl text-green-500"})})]})}),e.jsx("div",{className:`${s?"bg-gray-800":"bg-white"} rounded-xl p-6`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Países Cobertos"}),e.jsx("p",{className:"text-2xl font-bold mt-1",children:new Set(a.map(t=>t.country)).size})]}),e.jsx("div",{className:"w-12 h-12 bg-purple-500/10 rounded-lg flex items-center justify-center",children:e.jsx("i",{className:"ri-global-line text-2xl text-purple-500"})})]})}),e.jsx("div",{className:`${s?"bg-gray-800":"bg-white"} rounded-xl p-6`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Dropshipping"}),e.jsx("p",{className:"text-2xl font-bold mt-1",children:a.filter(t=>t.is_dropshipping).length})]}),e.jsx("div",{className:"w-12 h-12 bg-yellow-500/10 rounded-lg flex items-center justify-center",children:e.jsx("i",{className:"ri-box-3-line text-2xl text-yellow-500"})})]})})]}),e.jsx("div",{className:`${s?"bg-gray-800":"bg-white"} rounded-xl overflow-hidden`,children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:`${s?"bg-gray-900":"bg-gray-50"}`,children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold",children:"Nome"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold",children:"País/Região"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold",children:"Método"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold",children:"Custo Base"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold",children:"Por Kg"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold",children:"Prazo"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold",children:"Status"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold",children:"Ações"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-700",children:j?e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"px-6 py-12 text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"w-5 h-5 border-2 border-yellow-500 border-t-transparent rounded-full animate-spin"}),"Carregando..."]})})}):a.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"px-6 py-12 text-center text-gray-400",children:"Nenhuma regra de envio cadastrada"})}):a.map(t=>e.jsxs("tr",{className:"hover:bg-gray-700/50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("i",{className:`ri-${t.is_dropshipping?"box-3":"truck"}-line text-yellow-500`}),e.jsx("span",{className:"font-medium",children:t.name})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:t.country}),t.region&&e.jsx("p",{className:"text-sm text-gray-400",children:t.region})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"px-2 py-1 bg-blue-500/10 text-blue-500 rounded text-xs font-medium",children:t.method})}),e.jsxs("td",{className:"px-6 py-4 font-medium",children:["€",t.base_cost.toFixed(2)]}),e.jsxs("td",{className:"px-6 py-4 text-gray-400",children:["€",t.cost_per_kg.toFixed(2)]}),e.jsxs("td",{className:"px-6 py-4 text-sm text-gray-400",children:[t.min_delivery_days,"-",t.max_delivery_days," dias"]}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${t.is_active?"bg-green-500/10 text-green-500":"bg-red-500/10 text-red-500"}`,children:t.is_active?"Ativo":"Inativo"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>h(t),className:"p-2 hover:bg-gray-700 rounded-lg transition-colors",title:"Editar",children:e.jsx("i",{className:"ri-edit-line text-blue-500"})}),e.jsx("button",{onClick:()=>_(t.id),className:"p-2 hover:bg-gray-700 rounded-lg transition-colors",title:"Excluir",children:e.jsx("i",{className:"ri-delete-bin-line text-red-500"})})]})})]},t.id))})]})})}),x&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:`${s?"bg-gray-900":"bg-white"} rounded-xl max-w-3xl w-full max-h-[90vh] overflow-y-auto`,children:[e.jsxs("div",{className:`sticky top-0 ${s?"bg-gray-900":"bg-white"} border-b ${s?"border-gray-800":"border-gray-200"} p-6 flex items-center justify-between`,children:[e.jsx("h3",{className:"text-xl font-bold",children:p?"Editar Regra de Envio":"Nova Regra de Envio"}),e.jsx("button",{onClick:()=>{y(!1),$()},className:"p-2 hover:bg-gray-800 rounded-lg transition-colors",children:e.jsx("i",{className:"ri-close-line text-xl"})})]}),e.jsxs("form",{onSubmit:c,className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Nome da Regra *"}),e.jsx("input",{type:"text",required:!0,value:o.name,onChange:t=>l({...o,name:t.target.value}),placeholder:"Ex: Envio Standard Portugal",className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"País *"}),e.jsxs("select",{required:!0,value:o.country,onChange:t=>l({...o,country:t.target.value}),className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`,children:[e.jsx("option",{value:"",children:"Selecione..."}),S.map(t=>e.jsx("option",{value:t,children:t},t))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Região (Opcional)"}),e.jsx("input",{type:"text",value:o.region,onChange:t=>l({...o,region:t.target.value}),placeholder:"Ex: Lisboa, Porto",className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Método de Envio"}),e.jsxs("select",{value:o.method,onChange:t=>l({...o,method:t.target.value}),className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`,children:[e.jsx("option",{value:"standard",children:"Standard"}),e.jsx("option",{value:"express",children:"Express"}),e.jsx("option",{value:"priority",children:"Priority"}),e.jsx("option",{value:"economy",children:"Economy"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Transportadora"}),e.jsx("input",{type:"text",value:o.carrier,onChange:t=>l({...o,carrier:t.target.value}),placeholder:"Ex: CTT, DHL, UPS",className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Custo Base (€)"}),e.jsx("input",{type:"number",step:"0.01",value:o.base_cost,onChange:t=>l({...o,base_cost:parseFloat(t.target.value)}),className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Custo por Kg (€)"}),e.jsx("input",{type:"number",step:"0.01",value:o.cost_per_kg,onChange:t=>l({...o,cost_per_kg:parseFloat(t.target.value)}),className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Custo por Item (€)"}),e.jsx("input",{type:"number",step:"0.01",value:o.cost_per_item,onChange:t=>l({...o,cost_per_item:parseFloat(t.target.value)}),className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Envio Grátis Acima de (€)"}),e.jsx("input",{type:"number",step:"0.01",value:o.free_shipping_threshold,onChange:t=>l({...o,free_shipping_threshold:parseFloat(t.target.value)}),className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Prazo Mínimo (dias)"}),e.jsx("input",{type:"number",value:o.min_delivery_days,onChange:t=>l({...o,min_delivery_days:parseInt(t.target.value)}),className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Prazo Máximo (dias)"}),e.jsx("input",{type:"number",value:o.max_delivery_days,onChange:t=>l({...o,max_delivery_days:parseInt(t.target.value)}),className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"is_active",checked:o.is_active,onChange:t=>l({...o,is_active:t.target.checked}),className:"w-4 h-4 rounded border-gray-300"}),e.jsx("label",{htmlFor:"is_active",className:"text-sm font-medium",children:"Regra Ativa"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"is_dropshipping",checked:o.is_dropshipping,onChange:t=>l({...o,is_dropshipping:t.target.checked}),className:"w-4 h-4 rounded border-gray-300"}),e.jsx("label",{htmlFor:"is_dropshipping",className:"text-sm font-medium",children:"Dropshipping"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"tracking_enabled",checked:o.tracking_enabled,onChange:t=>l({...o,tracking_enabled:t.target.checked}),className:"w-4 h-4 rounded border-gray-300"}),e.jsx("label",{htmlFor:"tracking_enabled",className:"text-sm font-medium",children:"Rastreamento Habilitado"})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-4 pt-6 border-t border-gray-800",children:[e.jsx("button",{type:"button",onClick:()=>{y(!1),$()},className:"px-6 py-2 rounded-lg border border-gray-700 hover:bg-gray-800 transition-colors whitespace-nowrap",children:"Cancelar"}),e.jsxs("button",{type:"submit",className:"px-6 py-2 bg-gradient-to-r from-yellow-500 to-yellow-600 text-black font-medium rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap",children:[e.jsx("i",{className:"ri-save-line"}),"Salvar Regra"]})]})]})]})})]})}function Se({darkMode:s}){const[a,g]=n.useState([]),[j,d]=n.useState(!0),[x,y]=n.useState(!1),[p,v]=n.useState(null),[o,l]=n.useState({name:"",country:"",region:"",tax_type:"vat",rate:23,is_default:!1,is_active:!0,applies_to:"all",product_categories:"",min_amount:0,max_amount:0,is_compound:!1,priority:1});n.useEffect(()=>{r()},[]);const r=async()=>{d(!0);const{data:t}=await f.from("tax_settings").select("*").order("country");g(t||[]),d(!1)},c=async t=>{t.preventDefault();try{if(p){const{error:N}=await f.from("tax_settings").update(o).eq("id",p.id);if(N)throw N}else{const{error:N}=await f.from("tax_settings").insert([o]);if(N)throw N}alert("Regra de IVA salva com sucesso!"),y(!1),$(),r()}catch(N){console.error("Erro:",N),alert("Erro ao salvar regra de IVA")}},h=t=>{v(t),l(t),y(!0)},_=async t=>{if(!confirm("Tem certeza que deseja excluir esta regra?"))return;const{error:N}=await f.from("tax_settings").delete().eq("id",t);N||(alert("Regra excluída com sucesso!"),r())},$=()=>{l({name:"",country:"",region:"",tax_type:"vat",rate:23,is_default:!1,is_active:!0,applies_to:"all",product_categories:"",min_amount:0,max_amount:0,is_compound:!1,priority:1}),v(null)},S=[{name:"Portugal",defaultVat:23},{name:"França",defaultVat:20},{name:"Alemanha",defaultVat:19},{name:"Espanha",defaultVat:21},{name:"Itália",defaultVat:22},{name:"Luxemburgo",defaultVat:17},{name:"Bélgica",defaultVat:21},{name:"Holanda",defaultVat:21},{name:"Reino Unido",defaultVat:20},{name:"Suíça",defaultVat:7.7},{name:"Áustria",defaultVat:20},{name:"Brasil",defaultVat:17}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[e.jsx("i",{className:"ri-percent-line text-yellow-500"}),"Gestão de IVA / TVA / Impostos"]}),e.jsx("p",{className:"text-gray-400 mt-1",children:"Configure taxas de IVA por país e categoria"})]}),e.jsxs("button",{onClick:()=>{$(),y(!0)},className:"px-4 py-2 bg-gradient-to-r from-yellow-500 to-yellow-600 text-black font-medium rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap",children:[e.jsx("i",{className:"ri-add-line"}),"Nova Regra de IVA"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:`${s?"bg-gray-800":"bg-white"} rounded-xl p-6`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Total de Regras"}),e.jsx("p",{className:"text-2xl font-bold mt-1",children:a.length})]}),e.jsx("div",{className:"w-12 h-12 bg-blue-500/10 rounded-lg flex items-center justify-center",children:e.jsx("i",{className:"ri-list-check text-2xl text-blue-500"})})]})}),e.jsx("div",{className:`${s?"bg-gray-800":"bg-white"} rounded-xl p-6`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Regras Ativas"}),e.jsx("p",{className:"text-2xl font-bold mt-1",children:a.filter(t=>t.is_active).length})]}),e.jsx("div",{className:"w-12 h-12 bg-green-500/10 rounded-lg flex items-center justify-center",children:e.jsx("i",{className:"ri-checkbox-circle-line text-2xl text-green-500"})})]})}),e.jsx("div",{className:`${s?"bg-gray-800":"bg-white"} rounded-xl p-6`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Países Cobertos"}),e.jsx("p",{className:"text-2xl font-bold mt-1",children:new Set(a.map(t=>t.country)).size})]}),e.jsx("div",{className:"w-12 h-12 bg-purple-500/10 rounded-lg flex items-center justify-center",children:e.jsx("i",{className:"ri-global-line text-2xl text-purple-500"})})]})}),e.jsx("div",{className:`${s?"bg-gray-800":"bg-white"} rounded-xl p-6`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Taxa Média"}),e.jsxs("p",{className:"text-2xl font-bold mt-1",children:[a.length>0?(a.reduce((t,N)=>t+N.rate,0)/a.length).toFixed(1):0,"%"]})]}),e.jsx("div",{className:"w-12 h-12 bg-yellow-500/10 rounded-lg flex items-center justify-center",children:e.jsx("i",{className:"ri-percent-line text-2xl text-yellow-500"})})]})})]}),e.jsx("div",{className:`${s?"bg-gradient-to-r from-blue-900/20 to-purple-900/20 border-blue-500/30":"bg-blue-50 border-blue-200"} border rounded-xl p-6`,children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-500/10 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx("i",{className:"ri-information-line text-2xl text-blue-500"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Modo IOSS Ready"}),e.jsx("p",{className:"text-sm text-gray-400 mb-3",children:"O sistema está preparado para o regime IOSS (Import One-Stop Shop) da União Europeia. Configure as taxas de IVA por país para vendas B2C dentro da UE."}),e.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("i",{className:"ri-checkbox-circle-line text-green-500"}),e.jsx("span",{children:"Cálculo automático de IVA"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("i",{className:"ri-checkbox-circle-line text-green-500"}),e.jsx("span",{children:"Breakdown detalhado no checkout"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("i",{className:"ri-checkbox-circle-line text-green-500"}),e.jsx("span",{children:"Suporte a dropshipping UE/Extra-UE"})]})]})]})]})}),e.jsx("div",{className:`${s?"bg-gray-800":"bg-white"} rounded-xl overflow-hidden`,children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:`${s?"bg-gray-900":"bg-gray-50"}`,children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold",children:"Nome"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold",children:"País/Região"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold",children:"Tipo"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold",children:"Taxa (%)"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold",children:"Aplica-se a"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold",children:"Prioridade"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold",children:"Status"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold",children:"Ações"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-700",children:j?e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"px-6 py-12 text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"w-5 h-5 border-2 border-yellow-500 border-t-transparent rounded-full animate-spin"}),"Carregando..."]})})}):a.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"px-6 py-12 text-center text-gray-400",children:"Nenhuma regra de IVA cadastrada"})}):a.map(t=>e.jsxs("tr",{className:"hover:bg-gray-700/50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("i",{className:"ri-percent-line text-yellow-500"}),e.jsx("span",{className:"font-medium",children:t.name}),t.is_default&&e.jsx("span",{className:"px-2 py-0.5 bg-blue-500/10 text-blue-500 rounded text-xs font-medium",children:"Padrão"})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:t.country}),t.region&&e.jsx("p",{className:"text-sm text-gray-400",children:t.region})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"px-2 py-1 bg-purple-500/10 text-purple-500 rounded text-xs font-medium uppercase",children:t.tax_type})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:"text-lg font-bold text-yellow-500",children:[t.rate,"%"]})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-400",children:t.applies_to==="all"?"Todos os produtos":t.applies_to}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"px-2 py-1 bg-gray-700 rounded text-xs font-medium",children:t.priority})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${t.is_active?"bg-green-500/10 text-green-500":"bg-red-500/10 text-red-500"}`,children:t.is_active?"Ativo":"Inativo"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>h(t),className:"p-2 hover:bg-gray-700 rounded-lg transition-colors",title:"Editar",children:e.jsx("i",{className:"ri-edit-line text-blue-500"})}),e.jsx("button",{onClick:()=>_(t.id),className:"p-2 hover:bg-gray-700 rounded-lg transition-colors",title:"Excluir",children:e.jsx("i",{className:"ri-delete-bin-line text-red-500"})})]})})]},t.id))})]})})}),x&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:`${s?"bg-gray-900":"bg-white"} rounded-xl max-w-3xl w-full max-h-[90vh] overflow-y-auto`,children:[e.jsxs("div",{className:`sticky top-0 ${s?"bg-gray-900":"bg-white"} border-b ${s?"border-gray-800":"border-gray-200"} p-6 flex items-center justify-between`,children:[e.jsx("h3",{className:"text-xl font-bold",children:p?"Editar Regra de IVA":"Nova Regra de IVA"}),e.jsx("button",{onClick:()=>{y(!1),$()},className:"p-2 hover:bg-gray-800 rounded-lg transition-colors",children:e.jsx("i",{className:"ri-close-line text-xl"})})]}),e.jsxs("form",{onSubmit:c,className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Nome da Regra *"}),e.jsx("input",{type:"text",required:!0,value:o.name,onChange:t=>l({...o,name:t.target.value}),placeholder:"Ex: IVA Portugal Standard",className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"País *"}),e.jsxs("select",{required:!0,value:o.country,onChange:t=>{const N=S.find(b=>b.name===t.target.value);l({...o,country:t.target.value,rate:N?.defaultVat||23})},className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`,children:[e.jsx("option",{value:"",children:"Selecione..."}),S.map(t=>e.jsxs("option",{value:t.name,children:[t.name," (",t.defaultVat,"%)"]},t.name))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Região (Opcional)"}),e.jsx("input",{type:"text",value:o.region,onChange:t=>l({...o,region:t.target.value}),placeholder:"Ex: Açores, Madeira",className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Tipo de Imposto"}),e.jsxs("select",{value:o.tax_type,onChange:t=>l({...o,tax_type:t.target.value}),className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`,children:[e.jsx("option",{value:"vat",children:"IVA / VAT"}),e.jsx("option",{value:"sales_tax",children:"Sales Tax"}),e.jsx("option",{value:"gst",children:"GST"}),e.jsx("option",{value:"custom",children:"Personalizado"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Taxa (%) *"}),e.jsx("input",{type:"number",step:"0.01",required:!0,value:o.rate,onChange:t=>l({...o,rate:parseFloat(t.target.value)}),className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Prioridade"}),e.jsx("input",{type:"number",value:o.priority,onChange:t=>l({...o,priority:parseInt(t.target.value)}),className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Menor número = maior prioridade"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Aplica-se a"}),e.jsxs("select",{value:o.applies_to,onChange:t=>l({...o,applies_to:t.target.value}),className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`,children:[e.jsx("option",{value:"all",children:"Todos os produtos"}),e.jsx("option",{value:"physical",children:"Apenas produtos físicos"}),e.jsx("option",{value:"digital",children:"Apenas produtos digitais"}),e.jsx("option",{value:"categories",children:"Categorias específicas"})]})]}),o.applies_to==="categories"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Categorias (IDs separados por vírgula)"}),e.jsx("input",{type:"text",value:o.product_categories,onChange:t=>l({...o,product_categories:t.target.value}),placeholder:"1,2,3",className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Valor Mínimo (€)"}),e.jsx("input",{type:"number",step:"0.01",value:o.min_amount,onChange:t=>l({...o,min_amount:parseFloat(t.target.value)}),className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Valor Máximo (€)"}),e.jsx("input",{type:"number",step:"0.01",value:o.max_amount,onChange:t=>l({...o,max_amount:parseFloat(t.target.value)}),className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"is_active",checked:o.is_active,onChange:t=>l({...o,is_active:t.target.checked}),className:"w-4 h-4 rounded border-gray-300"}),e.jsx("label",{htmlFor:"is_active",className:"text-sm font-medium",children:"Regra Ativa"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"is_default",checked:o.is_default,onChange:t=>l({...o,is_default:t.target.checked}),className:"w-4 h-4 rounded border-gray-300"}),e.jsx("label",{htmlFor:"is_default",className:"text-sm font-medium",children:"Definir como padrão para este país"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"is_compound",checked:o.is_compound,onChange:t=>l({...o,is_compound:t.target.checked}),className:"w-4 h-4 rounded border-gray-300"}),e.jsx("label",{htmlFor:"is_compound",className:"text-sm font-medium",children:"Imposto composto (aplica sobre outros impostos)"})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-4 pt-6 border-t border-gray-800",children:[e.jsx("button",{type:"button",onClick:()=>{y(!1),$()},className:"px-6 py-2 rounded-lg border border-gray-700 hover:bg-gray-800 transition-colors whitespace-nowrap",children:"Cancelar"}),e.jsxs("button",{type:"submit",className:"px-6 py-2 bg-gradient-to-r from-yellow-500 to-yellow-600 text-black font-medium rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap",children:[e.jsx("i",{className:"ri-save-line"}),"Salvar Regra"]})]})]})]})})]})}function Pe({darkMode:s}){const[a,g]=n.useState([]),[j,d]=n.useState([]),[x,y]=n.useState(!0),[p,v]=n.useState("vendors"),[o,l]=n.useState(!1),[r,c]=n.useState(null),[h,_]=n.useState({name:"",commission_type:"percentage",commission_value:15,applies_to:"all",category_ids:"",vendor_ids:"",min_order_value:0,max_order_value:0,is_active:!0,priority:1});n.useEffect(()=>{$()},[]);const $=async()=>{y(!0);const{data:u}=await f.from("vendors").select("*").order("created_at",{ascending:!1});g(u||[]);const{data:m}=await f.from("commission_rules").select("*").order("priority");d(m||[]),y(!1)},S=async u=>{u.preventDefault();try{if(r){const{error:m}=await f.from("commission_rules").update(h).eq("id",r.id);if(m)throw m}else{const{error:m}=await f.from("commission_rules").insert([h]);if(m)throw m}alert("Regra de comissão salva com sucesso!"),l(!1),k(),$()}catch(m){console.error("Erro:",m),alert("Erro ao salvar regra de comissão")}},t=async u=>{const{error:m}=await f.from("vendors").update({status:"approved",approved_at:new Date().toISOString()}).eq("id",u);m||(alert("Vendedor aprovado com sucesso!"),$())},N=async u=>{const{error:m}=await f.from("vendors").update({status:"rejected"}).eq("id",u);m||(alert("Vendedor rejeitado!"),$())},b=async u=>{const{error:m}=await f.from("vendors").update({status:"suspended"}).eq("id",u);m||(alert("Vendedor suspenso!"),$())},k=()=>{_({name:"",commission_type:"percentage",commission_value:15,applies_to:"all",category_ids:"",vendor_ids:"",min_order_value:0,max_order_value:0,is_active:!0,priority:1}),c(null)},w=u=>{switch(u){case"approved":return"bg-green-500/10 text-green-500";case"pending":return"bg-yellow-500/10 text-yellow-500";case"rejected":return"bg-red-500/10 text-red-500";case"suspended":return"bg-orange-500/10 text-orange-500";default:return"bg-gray-500/10 text-gray-500"}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[e.jsx("i",{className:"ri-store-3-line text-yellow-500"}),"Gestão de Marketplace"]}),e.jsx("p",{className:"text-gray-400 mt-1",children:"Gerencie vendedores e comissões do marketplace"})]}),p==="commissions"&&e.jsxs("button",{onClick:()=>{k(),l(!0)},className:"px-4 py-2 bg-gradient-to-r from-yellow-500 to-yellow-600 text-black font-medium rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap",children:[e.jsx("i",{className:"ri-add-line"}),"Nova Regra de Comissão"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:`${s?"bg-gray-800":"bg-white"} rounded-xl p-6`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Total de Vendedores"}),e.jsx("p",{className:"text-2xl font-bold mt-1",children:a.length})]}),e.jsx("div",{className:"w-12 h-12 bg-blue-500/10 rounded-lg flex items-center justify-center",children:e.jsx("i",{className:"ri-store-3-line text-2xl text-blue-500"})})]})}),e.jsx("div",{className:`${s?"bg-gray-800":"bg-white"} rounded-xl p-6`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Aprovados"}),e.jsx("p",{className:"text-2xl font-bold mt-1",children:a.filter(u=>u.status==="approved").length})]}),e.jsx("div",{className:"w-12 h-12 bg-green-500/10 rounded-lg flex items-center justify-center",children:e.jsx("i",{className:"ri-checkbox-circle-line text-2xl text-green-500"})})]})}),e.jsx("div",{className:`${s?"bg-gray-800":"bg-white"} rounded-xl p-6`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Pendentes"}),e.jsx("p",{className:"text-2xl font-bold mt-1",children:a.filter(u=>u.status==="pending").length})]}),e.jsx("div",{className:"w-12 h-12 bg-yellow-500/10 rounded-lg flex items-center justify-center",children:e.jsx("i",{className:"ri-time-line text-2xl text-yellow-500"})})]})}),e.jsx("div",{className:`${s?"bg-gray-800":"bg-white"} rounded-xl p-6`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Regras de Comissão"}),e.jsx("p",{className:"text-2xl font-bold mt-1",children:j.length})]}),e.jsx("div",{className:"w-12 h-12 bg-purple-500/10 rounded-lg flex items-center justify-center",children:e.jsx("i",{className:"ri-percent-line text-2xl text-purple-500"})})]})})]}),e.jsxs("div",{className:`${s?"bg-gray-800":"bg-white"} rounded-xl p-2 flex gap-2`,children:[e.jsxs("button",{onClick:()=>v("vendors"),className:`flex-1 px-4 py-2 rounded-lg font-medium transition-colors whitespace-nowrap ${p==="vendors"?"bg-gradient-to-r from-yellow-500 to-yellow-600 text-black":"hover:bg-gray-700"}`,children:[e.jsx("i",{className:"ri-store-3-line mr-2"}),"Vendedores"]}),e.jsxs("button",{onClick:()=>v("commissions"),className:`flex-1 px-4 py-2 rounded-lg font-medium transition-colors whitespace-nowrap ${p==="commissions"?"bg-gradient-to-r from-yellow-500 to-yellow-600 text-black":"hover:bg-gray-700"}`,children:[e.jsx("i",{className:"ri-percent-line mr-2"}),"Comissões"]})]}),p==="vendors"&&e.jsx("div",{className:`${s?"bg-gray-800":"bg-white"} rounded-xl overflow-hidden`,children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:`${s?"bg-gray-900":"bg-gray-50"}`,children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold",children:"Vendedor"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold",children:"Email"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold",children:"Produtos"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold",children:"Vendas"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold",children:"Comissão"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold",children:"Status"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold",children:"Ações"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-700",children:x?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-6 py-12 text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"w-5 h-5 border-2 border-yellow-500 border-t-transparent rounded-full animate-spin"}),"Carregando..."]})})}):a.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-6 py-12 text-center text-gray-400",children:"Nenhum vendedor cadastrado"})}):a.map(u=>e.jsxs("tr",{className:"hover:bg-gray-700/50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-yellow-500 to-yellow-600 rounded-full flex items-center justify-center text-black font-bold",children:u.store_name?.charAt(0)||"V"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:u.store_name}),e.jsx("p",{className:"text-sm text-gray-400",children:u.company_name})]})]})}),e.jsx("td",{className:"px-6 py-4 text-gray-400",children:u.email}),e.jsx("td",{className:"px-6 py-4 font-medium",children:u.total_products||0}),e.jsxs("td",{className:"px-6 py-4 font-medium",children:["€",u.total_sales?.toFixed(2)||"0.00"]}),e.jsxs("td",{className:"px-6 py-4 text-yellow-500 font-medium",children:[u.commission_rate||15,"%"]}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:`px-2 py-1 rounded text-xs font-medium ${w(u.status)}`,children:[u.status==="approved"&&"Aprovado",u.status==="pending"&&"Pendente",u.status==="rejected"&&"Rejeitado",u.status==="suspended"&&"Suspenso"]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[u.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>t(u.id),className:"p-2 hover:bg-gray-700 rounded-lg transition-colors",title:"Aprovar",children:e.jsx("i",{className:"ri-checkbox-circle-line text-green-500"})}),e.jsx("button",{onClick:()=>N(u.id),className:"p-2 hover:bg-gray-700 rounded-lg transition-colors",title:"Rejeitar",children:e.jsx("i",{className:"ri-close-circle-line text-red-500"})})]}),u.status==="approved"&&e.jsx("button",{onClick:()=>b(u.id),className:"p-2 hover:bg-gray-700 rounded-lg transition-colors",title:"Suspender",children:e.jsx("i",{className:"ri-forbid-line text-orange-500"})}),e.jsx("button",{className:"p-2 hover:bg-gray-700 rounded-lg transition-colors",title:"Ver Detalhes",children:e.jsx("i",{className:"ri-eye-line text-blue-500"})})]})})]},u.id))})]})})}),p==="commissions"&&e.jsx("div",{className:`${s?"bg-gray-800":"bg-white"} rounded-xl overflow-hidden`,children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:`${s?"bg-gray-900":"bg-gray-50"}`,children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold",children:"Nome"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold",children:"Tipo"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold",children:"Valor"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold",children:"Aplica-se a"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold",children:"Prioridade"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold",children:"Status"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold",children:"Ações"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-700",children:x?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-6 py-12 text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"w-5 h-5 border-2 border-yellow-500 border-t-transparent rounded-full animate-spin"}),"Carregando..."]})})}):j.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-6 py-12 text-center text-gray-400",children:"Nenhuma regra de comissão cadastrada"})}):j.map(u=>e.jsxs("tr",{className:"hover:bg-gray-700/50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("i",{className:"ri-percent-line text-yellow-500"}),e.jsx("span",{className:"font-medium",children:u.name})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"px-2 py-1 bg-purple-500/10 text-purple-500 rounded text-xs font-medium",children:u.commission_type==="percentage"?"Percentual":"Fixo"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"text-lg font-bold text-yellow-500",children:u.commission_type==="percentage"?`${u.commission_value}%`:`€${u.commission_value}`})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-400",children:u.applies_to==="all"?"Todos":u.applies_to}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"px-2 py-1 bg-gray-700 rounded text-xs font-medium",children:u.priority})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${u.is_active?"bg-green-500/10 text-green-500":"bg-red-500/10 text-red-500"}`,children:u.is_active?"Ativo":"Inativo"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>{c(u),_(u),l(!0)},className:"p-2 hover:bg-gray-700 rounded-lg transition-colors",title:"Editar",children:e.jsx("i",{className:"ri-edit-line text-blue-500"})}),e.jsx("button",{onClick:async()=>{if(!confirm("Tem certeza que deseja excluir esta regra?"))return;const{error:m}=await f.from("commission_rules").delete().eq("id",u.id);m||(alert("Regra excluída com sucesso!"),$())},className:"p-2 hover:bg-gray-700 rounded-lg transition-colors",title:"Excluir",children:e.jsx("i",{className:"ri-delete-bin-line text-red-500"})})]})})]},u.id))})]})})}),o&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:`${s?"bg-gray-900":"bg-white"} rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto`,children:[e.jsxs("div",{className:`sticky top-0 ${s?"bg-gray-900":"bg-white"} border-b ${s?"border-gray-800":"border-gray-200"} p-6 flex items-center justify-between`,children:[e.jsx("h3",{className:"text-xl font-bold",children:r?"Editar Regra de Comissão":"Nova Regra de Comissão"}),e.jsx("button",{onClick:()=>{l(!1),k()},className:"p-2 hover:bg-gray-800 rounded-lg transition-colors",children:e.jsx("i",{className:"ri-close-line text-xl"})})]}),e.jsxs("form",{onSubmit:S,className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Nome da Regra *"}),e.jsx("input",{type:"text",required:!0,value:h.name,onChange:u=>_({...h,name:u.target.value}),placeholder:"Ex: Comissão Padrão",className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Tipo de Comissão"}),e.jsxs("select",{value:h.commission_type,onChange:u=>_({...h,commission_type:u.target.value}),className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`,children:[e.jsx("option",{value:"percentage",children:"Percentual (%)"}),e.jsx("option",{value:"fixed",children:"Valor Fixo (€)"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Valor ",h.commission_type==="percentage"?"(%)":"(€)"," *"]}),e.jsx("input",{type:"number",step:"0.01",required:!0,value:h.commission_value,onChange:u=>_({...h,commission_value:parseFloat(u.target.value)}),className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Aplica-se a"}),e.jsxs("select",{value:h.applies_to,onChange:u=>_({...h,applies_to:u.target.value}),className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`,children:[e.jsx("option",{value:"all",children:"Todos os vendedores"}),e.jsx("option",{value:"categories",children:"Categorias específicas"}),e.jsx("option",{value:"vendors",children:"Vendedores específicos"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Prioridade"}),e.jsx("input",{type:"number",value:h.priority,onChange:u=>_({...h,priority:parseInt(u.target.value)}),className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Valor Mínimo do Pedido (€)"}),e.jsx("input",{type:"number",step:"0.01",value:h.min_order_value,onChange:u=>_({...h,min_order_value:parseFloat(u.target.value)}),className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Valor Máximo do Pedido (€)"}),e.jsx("input",{type:"number",step:"0.01",value:h.max_order_value,onChange:u=>_({...h,max_order_value:parseFloat(u.target.value)}),className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"is_active",checked:h.is_active,onChange:u=>_({...h,is_active:u.target.checked}),className:"w-4 h-4 rounded border-gray-300"}),e.jsx("label",{htmlFor:"is_active",className:"text-sm font-medium",children:"Regra Ativa"})]}),e.jsxs("div",{className:"flex items-center justify-end gap-4 pt-6 border-t border-gray-800",children:[e.jsx("button",{type:"button",onClick:()=>{l(!1),k()},className:"px-6 py-2 rounded-lg border border-gray-700 hover:bg-gray-800 transition-colors whitespace-nowrap",children:"Cancelar"}),e.jsxs("button",{type:"submit",className:"px-6 py-2 bg-gradient-to-r from-yellow-500 to-yellow-600 text-black font-medium rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap",children:[e.jsx("i",{className:"ri-save-line"}),"Salvar Regra"]})]})]})]})})]})}function Ee({darkMode:s}){const[a,g]=n.useState({site_name:"JokaTech",site_tagline:"Sua loja de tecnologia",primary_color:"#EAB308",secondary_color:"#000000",accent_color:"#F59E0B",success_color:"#10B981",warning_color:"#F59E0B",error_color:"#EF4444",font_family:"Inter",font_size_base:"16",logo_url:"",logo_footer_url:"",logo_mobile_url:"",favicon_url:"",header_style:"fixed",header_bg_color:"#000000",footer_bg_color:"#1F2937",enable_dark_mode:!0,default_theme:"dark"}),[j,d]=n.useState(!1),[x,y]=n.useState(!1);n.useEffect(()=>{p()},[]);const p=async()=>{const{data:l}=await f.from("site_settings").select("*").single();l&&g(r=>({...r,...l.settings}))},v=async()=>{d(!0);try{const{error:l}=await f.from("site_settings").upsert({id:1,settings:a,updated_at:new Date().toISOString()});if(l)throw l;alert("Configurações salvas com sucesso!")}catch(l){console.error("Erro ao salvar:",l),alert("Erro ao salvar configurações")}finally{d(!1)}},o=["Inter","Roboto","Open Sans","Lato","Montserrat","Poppins","Raleway","Nunito","Playfair Display","Merriweather"];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[e.jsx("i",{className:"ri-palette-line text-yellow-500"}),"Editor de Tema & Design"]}),e.jsx("p",{className:"text-gray-400 mt-1",children:"Configure a aparência visual do seu site"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:()=>y(!x),className:`px-4 py-2 rounded-lg border ${s?"border-gray-700":"border-gray-300"} hover:bg-gray-800 transition-colors flex items-center gap-2 whitespace-nowrap`,children:[e.jsx("i",{className:`ri-${x?"eye-off":"eye"}-line`}),x?"Ocultar Preview":"Mostrar Preview"]}),e.jsx("button",{onClick:v,disabled:j,className:"px-6 py-2 bg-gradient-to-r from-yellow-500 to-yellow-600 text-black font-medium rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap",children:j?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-black border-t-transparent rounded-full animate-spin"}),"Salvando..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-save-line"}),"Salvar Alterações"]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:`${s?"bg-gray-800":"bg-white"} rounded-xl p-6 space-y-4`,children:[e.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx("i",{className:"ri-information-line text-yellow-500"}),"Informações do Site"]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Nome do Site"}),e.jsx("input",{type:"text",value:a.site_name,onChange:l=>g({...a,site_name:l.target.value}),className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-900 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Slogan/Tagline"}),e.jsx("input",{type:"text",value:a.site_tagline,onChange:l=>g({...a,site_tagline:l.target.value}),className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-900 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Fonte Principal"}),e.jsx("select",{value:a.font_family,onChange:l=>g({...a,font_family:l.target.value}),className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-900 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`,children:o.map(l=>e.jsx("option",{value:l,children:l},l))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Tamanho Base da Fonte (px)"}),e.jsx("input",{type:"number",value:a.font_size_base,onChange:l=>g({...a,font_size_base:l.target.value}),className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-900 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]})]}),e.jsxs("div",{className:`${s?"bg-gray-800":"bg-white"} rounded-xl p-6 space-y-4`,children:[e.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx("i",{className:"ri-paint-brush-line text-yellow-500"}),"Paleta de Cores"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Cor Primária"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"color",value:a.primary_color,onChange:l=>g({...a,primary_color:l.target.value}),className:"w-12 h-10 rounded cursor-pointer"}),e.jsx("input",{type:"text",value:a.primary_color,onChange:l=>g({...a,primary_color:l.target.value}),className:`flex-1 px-3 py-2 rounded-lg ${s?"bg-gray-900 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Cor Secundária"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"color",value:a.secondary_color,onChange:l=>g({...a,secondary_color:l.target.value}),className:"w-12 h-10 rounded cursor-pointer"}),e.jsx("input",{type:"text",value:a.secondary_color,onChange:l=>g({...a,secondary_color:l.target.value}),className:`flex-1 px-3 py-2 rounded-lg ${s?"bg-gray-900 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Cor de Destaque"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"color",value:a.accent_color,onChange:l=>g({...a,accent_color:l.target.value}),className:"w-12 h-10 rounded cursor-pointer"}),e.jsx("input",{type:"text",value:a.accent_color,onChange:l=>g({...a,accent_color:l.target.value}),className:`flex-1 px-3 py-2 rounded-lg ${s?"bg-gray-900 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Cor de Sucesso"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"color",value:a.success_color,onChange:l=>g({...a,success_color:l.target.value}),className:"w-12 h-10 rounded cursor-pointer"}),e.jsx("input",{type:"text",value:a.success_color,onChange:l=>g({...a,success_color:l.target.value}),className:`flex-1 px-3 py-2 rounded-lg ${s?"bg-gray-900 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Cor de Aviso"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"color",value:a.warning_color,onChange:l=>g({...a,warning_color:l.target.value}),className:"w-12 h-10 rounded cursor-pointer"}),e.jsx("input",{type:"text",value:a.warning_color,onChange:l=>g({...a,warning_color:l.target.value}),className:`flex-1 px-3 py-2 rounded-lg ${s?"bg-gray-900 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Cor de Erro"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"color",value:a.error_color,onChange:l=>g({...a,error_color:l.target.value}),className:"w-12 h-10 rounded cursor-pointer"}),e.jsx("input",{type:"text",value:a.error_color,onChange:l=>g({...a,error_color:l.target.value}),className:`flex-1 px-3 py-2 rounded-lg ${s?"bg-gray-900 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]})]})]})]}),e.jsxs("div",{className:`${s?"bg-gray-800":"bg-white"} rounded-xl p-6 space-y-4`,children:[e.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx("i",{className:"ri-image-line text-yellow-500"}),"Logos & Ícones"]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Logo Principal (URL)"}),e.jsx("input",{type:"text",value:a.logo_url,onChange:l=>g({...a,logo_url:l.target.value}),placeholder:"https://exemplo.com/logo.png",className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-900 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Logo Footer (URL)"}),e.jsx("input",{type:"text",value:a.logo_footer_url,onChange:l=>g({...a,logo_footer_url:l.target.value}),placeholder:"https://exemplo.com/logo-footer.png",className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-900 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Logo Mobile (URL)"}),e.jsx("input",{type:"text",value:a.logo_mobile_url,onChange:l=>g({...a,logo_mobile_url:l.target.value}),placeholder:"https://exemplo.com/logo-mobile.png",className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-900 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Favicon (URL)"}),e.jsx("input",{type:"text",value:a.favicon_url,onChange:l=>g({...a,favicon_url:l.target.value}),placeholder:"https://exemplo.com/favicon.ico",className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-900 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]})]}),e.jsxs("div",{className:`${s?"bg-gray-800":"bg-white"} rounded-xl p-6 space-y-4`,children:[e.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx("i",{className:"ri-layout-line text-yellow-500"}),"Header & Footer"]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Estilo do Header"}),e.jsxs("select",{value:a.header_style,onChange:l=>g({...a,header_style:l.target.value}),className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-900 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`,children:[e.jsx("option",{value:"fixed",children:"Fixo no Topo"}),e.jsx("option",{value:"sticky",children:"Sticky (Cola ao Scroll)"}),e.jsx("option",{value:"static",children:"Estático"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Cor de Fundo do Header"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"color",value:a.header_bg_color,onChange:l=>g({...a,header_bg_color:l.target.value}),className:"w-12 h-10 rounded cursor-pointer"}),e.jsx("input",{type:"text",value:a.header_bg_color,onChange:l=>g({...a,header_bg_color:l.target.value}),className:`flex-1 px-3 py-2 rounded-lg ${s?"bg-gray-900 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Cor de Fundo do Footer"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"color",value:a.footer_bg_color,onChange:l=>g({...a,footer_bg_color:l.target.value}),className:"w-12 h-10 rounded cursor-pointer"}),e.jsx("input",{type:"text",value:a.footer_bg_color,onChange:l=>g({...a,footer_bg_color:l.target.value}),className:`flex-1 px-3 py-2 rounded-lg ${s?"bg-gray-900 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]})]}),e.jsxs("div",{className:"space-y-3 pt-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"enable_dark_mode",checked:a.enable_dark_mode,onChange:l=>g({...a,enable_dark_mode:l.target.checked}),className:"w-4 h-4 rounded border-gray-300"}),e.jsx("label",{htmlFor:"enable_dark_mode",className:"text-sm font-medium",children:"Habilitar Modo Escuro"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Tema Padrão"}),e.jsxs("select",{value:a.default_theme,onChange:l=>g({...a,default_theme:l.target.value}),className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-900 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`,children:[e.jsx("option",{value:"dark",children:"Escuro"}),e.jsx("option",{value:"light",children:"Claro"})]})]})]})]})]}),x&&e.jsxs("div",{className:`${s?"bg-gray-800":"bg-white"} rounded-xl p-6`,children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx("i",{className:"ri-eye-line text-yellow-500"}),"Preview em Tempo Real"]}),e.jsxs("div",{className:"border-2 border-dashed border-gray-700 rounded-lg p-8",style:{fontFamily:a.font_family,fontSize:`${a.font_size_base}px`},children:[e.jsxs("div",{className:"p-4 rounded-lg mb-4",style:{backgroundColor:a.header_bg_color},children:[e.jsx("h1",{className:"text-2xl font-bold",style:{color:a.primary_color},children:a.site_name}),e.jsx("p",{className:"text-sm",style:{color:a.accent_color},children:a.site_tagline})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-4",children:[e.jsx("div",{className:"p-4 rounded-lg text-center",style:{backgroundColor:a.primary_color},children:e.jsx("p",{className:"text-sm font-medium text-black",children:"Primária"})}),e.jsx("div",{className:"p-4 rounded-lg text-center",style:{backgroundColor:a.accent_color},children:e.jsx("p",{className:"text-sm font-medium text-black",children:"Destaque"})}),e.jsx("div",{className:"p-4 rounded-lg text-center",style:{backgroundColor:a.success_color},children:e.jsx("p",{className:"text-sm font-medium text-white",children:"Sucesso"})}),e.jsx("div",{className:"p-4 rounded-lg text-center",style:{backgroundColor:a.error_color},children:e.jsx("p",{className:"text-sm font-medium text-white",children:"Erro"})})]}),e.jsx("div",{className:"p-4 rounded-lg",style:{backgroundColor:a.footer_bg_color},children:e.jsx("p",{className:"text-sm text-center text-gray-400",children:"Footer Preview"})})]})]})]})}function ke(){const[s,a]=n.useState({topbar_email:"jokadamas616@gmail.com",topbar_phone:"+352 621 717 862",topbar_promo_text:"Envio grátis em compras acima de €50",show_topbar:!0,enable_theme_toggle:!0,primary_color:"#f59e0b",secondary_color:"#111827",accent_color:"#d97706",carousel_max_items:10,carousel_auto_play:!0,carousel_interval:3e3,footer_about_text:"Soluções digitais completas para o seu negócio. Qualidade, inovação e resultados garantidos.",footer_social_facebook:"https://facebook.com",footer_social_instagram:"https://instagram.com",footer_social_twitter:"https://twitter.com",footer_social_linkedin:"https://linkedin.com",footer_social_youtube:"https://youtube.com"}),[g,j]=n.useState(!1),[d,x]=n.useState(null),[y,p]=n.useState("header");n.useEffect(()=>{v()},[]);const v=async()=>{try{const{data:r,error:c}=await f.from("site_settings").select("*").single();if(c)throw c;r&&a({topbar_email:r.topbar_email||s.topbar_email,topbar_phone:r.topbar_phone||s.topbar_phone,topbar_promo_text:r.topbar_promo_text||s.topbar_promo_text,show_topbar:r.show_topbar??s.show_topbar,enable_theme_toggle:r.enable_theme_toggle??s.enable_theme_toggle,primary_color:r.primary_color||s.primary_color,secondary_color:r.secondary_color||s.secondary_color,accent_color:r.accent_color||s.accent_color,carousel_max_items:r.carousel_max_items||s.carousel_max_items,carousel_auto_play:r.carousel_auto_play??s.carousel_auto_play,carousel_interval:r.carousel_interval||s.carousel_interval,footer_about_text:r.footer_about_text||s.footer_about_text,footer_social_facebook:r.footer_social_facebook||s.footer_social_facebook,footer_social_instagram:r.footer_social_instagram||s.footer_social_instagram,footer_social_twitter:r.footer_social_twitter||s.footer_social_twitter,footer_social_linkedin:r.footer_social_linkedin||s.footer_social_linkedin,footer_social_youtube:r.footer_social_youtube||s.footer_social_youtube})}catch(r){console.error("Erro ao carregar configurações:",r)}},o=async()=>{j(!0),x(null);try{const{error:r}=await f.from("site_settings").upsert({id:1,...s,updated_at:new Date().toISOString()});if(r)throw r;x({type:"success",text:"Configurações salvas com sucesso!"}),setTimeout(()=>{window.location.reload()},1e3)}catch(r){console.error("Erro ao salvar:",r),x({type:"error",text:"Erro ao salvar configurações"})}finally{j(!1)}},l=[{id:"header",label:"Header & Topbar",icon:"ri-layout-top-line"},{id:"theme",label:"Tema & Cores",icon:"ri-palette-line"},{id:"carousel",label:"Carousel",icon:"ri-slideshow-line"},{id:"footer",label:"Footer & Redes Sociais",icon:"ri-layout-bottom-line"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Configurações do Site"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Controle completo sobre header, footer, tema e comportamento do site"})]}),e.jsx("button",{onClick:o,disabled:g,className:"px-6 py-3 bg-gradient-to-r from-amber-500 to-amber-600 text-white font-semibold rounded-lg hover:from-amber-600 hover:to-amber-700 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed whitespace-nowrap cursor-pointer",children:g?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-loader-4-line animate-spin mr-2"}),"A guardar..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-save-line mr-2"}),"Guardar Alterações"]})})]}),d&&e.jsx("div",{className:`p-4 rounded-lg ${d.type==="success"?"bg-green-50 dark:bg-green-900/20 text-green-800 dark:text-green-200 border border-green-200 dark:border-green-800":"bg-red-50 dark:bg-red-900/20 text-red-800 dark:text-red-200 border border-red-200 dark:border-red-800"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("i",{className:d.type==="success"?"ri-checkbox-circle-line":"ri-error-warning-line"}),e.jsx("span",{children:d.text})]})}),e.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:e.jsx("div",{className:"flex gap-2 overflow-x-auto",children:l.map(r=>e.jsxs("button",{onClick:()=>p(r.id),className:`px-6 py-3 font-medium whitespace-nowrap transition-all duration-200 border-b-2 cursor-pointer ${y===r.id?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"}`,children:[e.jsx("i",{className:`${r.icon} mr-2`}),r.label]},r.id))})}),y==="header"&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between pb-4 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Configurações do Header"}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Mostrar Topbar"}),e.jsx("input",{type:"checkbox",checked:s.show_topbar,onChange:r=>a({...s,show_topbar:r.target.checked}),className:"w-5 h-5 text-amber-600 rounded focus:ring-2 focus:ring-amber-500 cursor-pointer"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"E-mail de Contacto"}),e.jsx("input",{type:"email",value:s.topbar_email,onChange:r=>a({...s,topbar_email:r.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"email@exemplo.com"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Telefone / WhatsApp"}),e.jsx("input",{type:"text",value:s.topbar_phone,onChange:r=>a({...s,topbar_phone:r.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"+352 621 717 862"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Texto Promocional (Topbar)"}),e.jsx("input",{type:"text",value:s.topbar_promo_text,onChange:r=>a({...s,topbar_promo_text:r.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"Envio grátis em compras acima de €50"})]})]}),e.jsx("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:s.enable_theme_toggle,onChange:r=>a({...s,enable_theme_toggle:r.target.checked}),className:"w-5 h-5 text-amber-600 rounded focus:ring-2 focus:ring-amber-500 cursor-pointer"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Ativar Toggle Dark/Light Mode"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Permite aos utilizadores alternar entre modo claro e escuro"})]})]})})]}),y==="theme"&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 space-y-6",children:[e.jsxs("div",{className:"pb-4 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Cores do Tema"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Personalize as cores principais do site"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Cor Primária"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("input",{type:"color",value:s.primary_color,onChange:r=>a({...s,primary_color:r.target.value}),className:"w-16 h-12 rounded-lg cursor-pointer border-2 border-gray-300 dark:border-gray-600"}),e.jsx("input",{type:"text",value:s.primary_color,onChange:r=>a({...s,primary_color:r.target.value}),className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white font-mono text-sm"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Cor Secundária"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("input",{type:"color",value:s.secondary_color,onChange:r=>a({...s,secondary_color:r.target.value}),className:"w-16 h-12 rounded-lg cursor-pointer border-2 border-gray-300 dark:border-gray-600"}),e.jsx("input",{type:"text",value:s.secondary_color,onChange:r=>a({...s,secondary_color:r.target.value}),className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white font-mono text-sm"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Cor de Destaque"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("input",{type:"color",value:s.accent_color,onChange:r=>a({...s,accent_color:r.target.value}),className:"w-16 h-12 rounded-lg cursor-pointer border-2 border-gray-300 dark:border-gray-600"}),e.jsx("input",{type:"text",value:s.accent_color,onChange:r=>a({...s,accent_color:r.target.value}),className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white font-mono text-sm"})]})]})]}),e.jsxs("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-white mb-4",children:"Preview das Cores"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsx("div",{className:"p-4 rounded-lg text-center",style:{backgroundColor:s.primary_color},children:e.jsx("span",{className:"text-white font-semibold",children:"Primária"})}),e.jsx("div",{className:"p-4 rounded-lg text-center",style:{backgroundColor:s.secondary_color},children:e.jsx("span",{className:"text-white font-semibold",children:"Secundária"})}),e.jsx("div",{className:"p-4 rounded-lg text-center",style:{backgroundColor:s.accent_color},children:e.jsx("span",{className:"text-white font-semibold",children:"Destaque"})})]})]})]}),y==="carousel"&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 space-y-6",children:[e.jsxs("div",{className:"pb-4 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Configurações do Carousel"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Controle o comportamento do carousel de produtos em destaque"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Máximo de Itens"}),e.jsx("input",{type:"number",min:"1",max:"20",value:s.carousel_max_items,onChange:r=>a({...s,carousel_max_items:parseInt(r.target.value)||10}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Número máximo de produtos a exibir no carousel"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Intervalo de Rotação (ms)"}),e.jsx("input",{type:"number",min:"1000",max:"10000",step:"500",value:s.carousel_interval,onChange:r=>a({...s,carousel_interval:parseInt(r.target.value)||3e3}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Tempo entre cada transição (em milissegundos)"})]})]}),e.jsx("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:s.carousel_auto_play,onChange:r=>a({...s,carousel_auto_play:r.target.checked}),className:"w-5 h-5 text-amber-600 rounded focus:ring-2 focus:ring-amber-500 cursor-pointer"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Auto-Play Ativado"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"O carousel roda automaticamente"})]})]})})]}),y==="footer"&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 space-y-6",children:[e.jsxs("div",{className:"pb-4 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Configurações do Footer"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Personalize o rodapé e links de redes sociais"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Texto Sobre a Empresa"}),e.jsx("textarea",{value:s.footer_about_text,onChange:r=>a({...s,footer_about_text:r.target.value}),rows:3,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white resize-none",placeholder:"Descrição breve da empresa..."})]}),e.jsxs("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-white mb-4",children:"Redes Sociais"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 flex items-center justify-center bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 rounded-lg",children:e.jsx("i",{className:"ri-facebook-fill"})}),e.jsx("input",{type:"url",value:s.footer_social_facebook,onChange:r=>a({...s,footer_social_facebook:r.target.value}),className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"https://facebook.com/..."})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 flex items-center justify-center bg-pink-100 dark:bg-pink-900/30 text-pink-600 dark:text-pink-400 rounded-lg",children:e.jsx("i",{className:"ri-instagram-line"})}),e.jsx("input",{type:"url",value:s.footer_social_instagram,onChange:r=>a({...s,footer_social_instagram:r.target.value}),className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"https://instagram.com/..."})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 flex items-center justify-center bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-white rounded-lg",children:e.jsx("i",{className:"ri-twitter-x-line"})}),e.jsx("input",{type:"url",value:s.footer_social_twitter,onChange:r=>a({...s,footer_social_twitter:r.target.value}),className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"https://twitter.com/..."})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 flex items-center justify-center bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 rounded-lg",children:e.jsx("i",{className:"ri-linkedin-fill"})}),e.jsx("input",{type:"url",value:s.footer_social_linkedin,onChange:r=>a({...s,footer_social_linkedin:r.target.value}),className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"https://linkedin.com/..."})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 flex items-center justify-center bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400 rounded-lg",children:e.jsx("i",{className:"ri-youtube-fill"})}),e.jsx("input",{type:"url",value:s.footer_social_youtube,onChange:r=>a({...s,footer_social_youtube:r.target.value}),className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"https://youtube.com/..."})]})]})]})]})]})}function M(s,a){let g=s.trim().replace(/\/+$/,"");return!g.startsWith("http://")&&!g.startsWith("https://")&&(g=`${a?"https":"http"}://${g}`),a&&g.startsWith("http://")&&(g=g.replace("http://","https://")),g}async function Re(s){try{const a=M(s.store_url,s.use_ssl),g=`${a}/wp-json/`;try{const v=await fetch(g,{method:"GET",headers:{"Content-Type":"application/json"}});if(!v.ok)throw new Error(`API REST não acessível. Status: ${v.status}. Verifique se os permalinks estão configurados corretamente.`);const o=await v.json();if(!o.namespaces||!o.namespaces.some(l=>l.includes("wc/")))throw new Error("WooCommerce não detectado. Certifique-se que o plugin está instalado e ativo.")}catch(v){throw v.message.includes("Failed to fetch")||v.message.includes("NetworkError")?new Error(`Não foi possível conectar a ${a}. Verifique se o domínio está correto e acessível.`):v}const j=`${a}/wp-json/${s.api_version}/products?per_page=1`,d=btoa(`${s.consumer_key}:${s.consumer_secret}`),x=await fetch(j,{method:"GET",headers:{Authorization:`Basic ${d}`,"Content-Type":"application/json"}});if(!x.ok)throw x.status===401?new Error("Credenciais inválidas. Verifique o Consumer Key e Consumer Secret."):x.status===403?new Error("Acesso negado. Certifique-se que as chaves têm permissões de Leitura/Escrita."):x.status===404?new Error(`API ${s.api_version} não encontrada. Tente usar wc/v3.`):new Error(`Erro ${x.status}: ${x.statusText}`);const y=await x.json(),p=x.headers.get("X-WP-Total")||y.length;return{success:!0,message:"✅ Conexão estabelecida com sucesso!",data:{store_url:a,api_version:s.api_version,total_products:p,woocommerce_version:x.headers.get("X-WC-Version")||"Desconhecida"}}}catch(a){return console.error("Erro ao testar conexão:",a),{success:!1,message:a.message||"Erro desconhecido ao conectar com WooCommerce"}}}async function ee(s=50){try{const{data:a,error:g}=await f.from("integrations_woocommerce").select("*").maybeSingle();if(g||!a)throw new Error("Configuração WooCommerce não encontrada. Por favor, conecte primeiro.");const d=`${M(a.store_url,a.use_ssl)}/wp-json/${a.api_version}/products?per_page=${s}&status=publish`,x=btoa(`${a.consumer_key}:${a.consumer_secret}`),y=await fetch(d,{method:"GET",headers:{Authorization:`Basic ${x}`,"Content-Type":"application/json"}});if(!y.ok)throw new Error(`Erro ${y.status}: ${y.statusText}`);const p=await y.json(),v=y.headers.get("X-WP-Total")||p.length;return{success:!0,total:parseInt(v),products:p.map(o=>({id:o.id,name:o.name,slug:o.slug,sku:o.sku||`woo-${o.id}`,price:o.price||o.regular_price||"0",regular_price:o.regular_price||"0",sale_price:o.sale_price||null,stock:o.stock_quantity||0,stock_status:o.stock_status,manage_stock:o.manage_stock,image:o.images?.[0]?.src||"",images:o.images?.map(l=>l.src)||[],category:o.categories?.[0]?.name||"Sem categoria",categories:o.categories?.map(l=>l.name)||[],description:o.description||"",short_description:o.short_description||"",weight:o.weight||null,dimensions:o.dimensions||null,variations:o.variations||[],attributes:o.attributes||[],tags:o.tags?.map(l=>l.name)||[]}))}}catch(a){return console.error("Erro ao buscar produtos:",a),{success:!1,message:a.message||"Erro ao buscar produtos",products:[]}}}async function Te(s,a,g={}){try{const{data:j,error:d}=await f.from("woocommerce_import_jobs").insert({status:"pending",total_items:0,processed_items:0}).select().single();if(d)throw d;const y=await ee(s==="preview"?50:1e3);if(!y.success)throw new Error(y.message);await f.from("woocommerce_import_jobs").update({status:"running",total_items:y.products.length}).eq("id",j.id);let p=0,v=0,o=0;const l=[];for(const r of y.products)try{const{data:c}=await f.from("products").select("id").eq("sku",r.sku).maybeSingle();if(c&&a.update_existing){const h={title:r.name,updated_at:new Date().toISOString()};a.sync_stock_only?h.stock=r.stock||0:(h.description=r.description,h.price=parseFloat(r.price)||0,h.stock=r.stock||0,h.weight=r.weight,h.dimensions=r.dimensions,a.import_images&&r.images.length>0&&(h.images=r.images));const{error:_}=await f.from("products").update(h).eq("id",c.id);if(_)throw _;await f.from("product_mappings").upsert({woo_product_id:r.id,local_product_id:c.id,sku:r.sku,last_synced_at:new Date().toISOString()}),o++}else if(!c&&a.create_new){const{data:h,error:_}=await f.from("products").insert({title:r.name,description:r.description,sku:r.sku,price:parseFloat(r.price)||0,stock:r.stock||0,weight:r.weight,dimensions:r.dimensions,images:a.import_images?r.images:[],is_active:!0,created_at:new Date().toISOString()}).select().single();if(_)throw _;h&&(await f.from("product_mappings").insert({woo_product_id:r.id,local_product_id:h.id,sku:r.sku,last_synced_at:new Date().toISOString()}),v++)}p++,p%10===0&&await f.from("woocommerce_import_jobs").update({processed_items:p}).eq("id",j.id)}catch(c){console.error(`Erro ao processar produto ${r.sku}:`,c),l.push(`${r.sku}: ${c.message}`)}return await f.from("woocommerce_import_jobs").update({status:l.length>0&&p===0?"failed":"completed",processed_items:p,completed_at:new Date().toISOString(),error_message:l.length>0?l.slice(0,5).join("; "):null}).eq("id",j.id),await f.from("integrations_woocommerce").update({last_sync_at:new Date().toISOString()}).limit(1),localStorage.setItem("last_woo_sync",JSON.stringify({timestamp:new Date().toISOString(),processed:p,created:v,updated:o,errors:l.length})),{success:!0,job_id:j.id,processed:p,created:v,updated:o,total:y.products.length,errors:l}}catch(j){return console.error("Erro ao importar produtos:",j),{success:!1,message:j.message||"Erro ao importar produtos"}}}function Ae({darkMode:s}){const[a,g]=n.useState({store_url:"",consumer_key:"",consumer_secret:"",api_version:"wc/v3",use_ssl:!0,products_only:!0}),[j,d]=n.useState(!1),[x,y]=n.useState(!1),[p,v]=n.useState(null),[o,l]=n.useState(!1),[r,c]=n.useState([]),[h,_]=n.useState(!1),[$,S]=n.useState(!1),[t,N]=n.useState([]),[b,k]=n.useState([]),[w,u]=n.useState(!1),[m,E]=n.useState(null),[C,R]=n.useState(null),[A,z]=n.useState({}),[B,U]=n.useState("manual"),[I,L]=n.useState({update_existing:!0,create_new:!0,sync_stock_only:!1,import_images:!0}),[se,W]=n.useState(!0),[G,F]=n.useState(null),[V,re]=n.useState(""),[O,te]=n.useState("all"),[Fe,ae]=n.useState([]);n.useEffect(()=>{K(),H(),le()},[]);const K=async()=>{try{W(!0),F(null);const{data:i,error:P}=await f.from("integrations_woocommerce").select("*").maybeSingle();if(P)throw P;i&&(d(!0),g({store_url:i.store_url,consumer_key:"••••••••",consumer_secret:"••••••••",api_version:i.api_version||"wc/v3",use_ssl:i.use_ssl??!0,products_only:i.products_only??!0}),U(i.sync_schedule||"manual"),q())}catch(i){console.error("Erro ao carregar conexão:",i),F("Falha ao carregar configurações de conexão")}finally{W(!1)}},H=async()=>{try{F(null);const{data:i,error:P}=await f.from("woocommerce_import_jobs").select("*").order("created_at",{ascending:!1}).limit(10);if(P)throw P;N(i||[])}catch(i){console.error("Erro ao carregar jobs:",i),F("Falha ao carregar histórico de importações")}},le=async()=>{try{const{data:i,error:P}=await f.from("categories").select("*").order("name");if(P)throw P;ae(i||[])}catch(i){console.error("Erro ao carregar categorias:",i)}},q=async()=>{try{const{data:i,error:P}=await f.from("product_mappings").select(`
          woo_product_id,
          local_product_id,
          sku,
          last_synced_at,
          products (
            id,
            title,
            sku,
            price,
            sale_price,
            stock,
            images,
            description,
            short_description,
            category_id,
            weight,
            dimensions,
            manage_stock,
            stock_status,
            categories (
              name
            )
          )
        `).order("last_synced_at",{ascending:!1});if(P)throw P;const D=i?.map(T=>({id:T.products.id,woo_id:T.woo_product_id,title:T.products.title,sku:T.products.sku,price:T.products.price,sale_price:T.products.sale_price,stock:T.products.stock,images:T.products.images||[],description:T.products.description||"",short_description:T.products.short_description||"",category:T.products.categories?.name||"Sem categoria",weight:T.products.weight,dimensions:T.products.dimensions,manage_stock:T.products.manage_stock,stock_status:T.products.stock_status,last_synced_at:T.last_synced_at}))||[];k(D)}catch(i){console.error("Erro ao carregar produtos importados:",i)}},ie=async()=>{y(!0),v(null);try{const i=Date.now(),P=await Re(a),D=Date.now()-i;v({success:P.success,latency:D,message:P.message,data:P.data}),P.success&&d(!0)}catch(i){v({success:!1,message:i.message||"Erro ao testar conexão"})}finally{y(!1)}},oe=async()=>{if(!a.store_url||!a.consumer_key||!a.consumer_secret){F("Por favor, preencha todos os campos de conexão");return}try{F(null);const{error:i}=await f.from("integrations_woocommerce").upsert({store_url:a.store_url,consumer_key:a.consumer_key.replace(/•/g,""),consumer_secret:a.consumer_secret.replace(/•/g,""),api_version:a.api_version,use_ssl:a.use_ssl,products_only:a.products_only,sync_schedule:B,updated_at:new Date().toISOString()});if(i)throw i;alert("✅ Conexão salva com sucesso!"),K()}catch(i){console.error("Erro ao salvar:",i),F("Erro ao salvar conexão. Tente novamente.")}},ne=async()=>{try{_(!0);const i=await ee(50);i.success?c(i.products||[]):alert(`❌ Erro: ${i.message}`)}catch(i){console.error("Erro ao carregar preview:",i),alert("❌ Erro ao carregar preview")}},ce=async i=>{S(!0);try{const P=await Te(i,I,A);P.success?(alert(`✅ Import ${i==="preview"?"preview":"completo"} concluído!

Processados: ${P.processed}/${P.total}
Criados: ${P.created}
Atualizados: ${P.updated}`),H(),q()):alert(`❌ Erro: ${P.message}`)}catch(P){console.error("Erro ao importar:",P),alert("❌ Erro ao iniciar importação")}finally{S(!1)}},de=async()=>{if(confirm("Tem certeza que deseja desconectar o WooCommerce?"))try{F(null);const{error:i}=await f.from("integrations_woocommerce").delete().eq("store_url",a.store_url);if(i)throw i;d(!1),g({store_url:"",consumer_key:"",consumer_secret:"",api_version:"wc/v3",use_ssl:!0,products_only:!0}),N([]),c([]),_(!1),k([]),u(!1),alert("✅ Desconectado com sucesso!")}catch(i){console.error("Erro ao desconectar:",i),F("Erro ao desconectar. Tente novamente.")}},xe=async()=>{if(C)try{const{error:i}=await f.from("products").update({title:C.title,price:C.price,sale_price:C.sale_price,stock:C.stock,description:C.description,short_description:C.short_description,images:C.images,weight:C.weight,updated_at:new Date().toISOString()}).eq("id",C.id);if(i)throw i;alert("✅ Produto atualizado com sucesso!"),R(null),q()}catch(i){console.error("Erro ao salvar produto:",i),alert("❌ Erro ao salvar produto")}},J=b.filter(i=>{const P=i.title.toLowerCase().includes(V.toLowerCase())||i.sku.toLowerCase().includes(V.toLowerCase()),D=O==="all"||i.category===O;return P&&D});return se?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"w-8 h-8 border-2 border-primary border-t-transparent rounded-full animate-spin"})}):e.jsxs("div",{className:"space-y-6",children:[G&&e.jsx("div",{className:"p-4 bg-red-500/20 border border-red-500 rounded-lg",children:e.jsx("p",{className:"text-red-500 text-sm",children:G})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[e.jsx("i",{className:"ri-shopping-cart-line text-primary"}),"Integração WooCommerce"]}),e.jsx("p",{className:`${s?"text-gray-300":"text-gray-600"} mt-1`,children:"Gerir produtos do WooCommerce"})]}),j&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"px-4 py-2 bg-green-500/20 text-green-500 rounded-lg flex items-center gap-2 font-medium",children:[e.jsx("i",{className:"ri-checkbox-circle-line"}),"Conectado"]}),e.jsxs("button",{onClick:de,className:"px-4 py-2 bg-red-500/20 text-red-500 rounded-lg hover:bg-red-500/30 transition-colors whitespace-nowrap font-medium",children:[e.jsx("i",{className:"ri-link-unlink"})," Desconectar"]})]})]}),e.jsxs("div",{className:`p-6 rounded-xl ${s?"bg-gray-800/50":"bg-white"} border ${s?"border-gray-700":"border-gray-200"} shadow-lg`,children:[e.jsxs("h3",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[e.jsx("i",{className:"ri-settings-3-line text-primary"}),"Configuração da Conexão"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${s?"text-gray-200":"text-gray-700"}`,children:"URL da Loja"}),e.jsx("input",{type:"text",placeholder:"https://minhaloja.com",value:a.store_url,onChange:i=>g({...a,store_url:i.target.value}),className:`w-full px-4 py-2.5 rounded-lg ${s?"bg-gray-900 border-gray-600 text-white":"bg-gray-50 border-gray-300 text-gray-900"} border focus:outline-none focus:ring-2 focus:ring-primary`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${s?"text-gray-200":"text-gray-700"}`,children:"Versão da API"}),e.jsxs("select",{value:a.api_version,onChange:i=>g({...a,api_version:i.target.value}),className:`w-full px-4 py-2.5 rounded-lg ${s?"bg-gray-900 border-gray-600 text-white":"bg-gray-50 border-gray-300 text-gray-900"} border focus:outline-none focus:ring-2 focus:ring-primary`,children:[e.jsx("option",{value:"wc/v3",children:"WC v3 (Recomendado)"}),e.jsx("option",{value:"wc/v2",children:"WC v2"}),e.jsx("option",{value:"wc/v1",children:"WC v1"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:`block text-sm font-medium mb-2 flex items-center gap-2 ${s?"text-gray-200":"text-gray-700"}`,children:["Consumer Key",e.jsx("button",{onClick:()=>l(!o),className:"text-xs text-primary hover:underline",children:o?"Ocultar":"Mostrar"})]}),e.jsx("input",{type:o?"text":"password",placeholder:"ck_...",value:a.consumer_key,onChange:i=>g({...a,consumer_key:i.target.value}),className:`w-full px-4 py-2.5 rounded-lg ${s?"bg-gray-900 border-gray-600 text-white":"bg-gray-50 border-gray-300 text-gray-900"} border focus:outline-none focus:ring-2 focus:ring-primary`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${s?"text-gray-200":"text-gray-700"}`,children:"Consumer Secret"}),e.jsx("input",{type:o?"text":"password",placeholder:"cs_...",value:a.consumer_secret,onChange:i=>g({...a,consumer_secret:i.target.value}),className:`w-full px-4 py-2.5 rounded-lg ${s?"bg-gray-900 border-gray-600 text-white":"bg-gray-50 border-gray-300 text-gray-900"} border focus:outline-none focus:ring-2 focus:ring-primary`})]})]}),e.jsxs("div",{className:"flex items-center gap-6 mt-4",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:a.use_ssl,onChange:i=>g({...a,use_ssl:i.target.checked}),className:"w-4 h-4 rounded border-gray-300"}),e.jsx("span",{className:`text-sm ${s?"text-gray-300":"text-gray-700"}`,children:"Usar SSL (HTTPS)"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:a.products_only,onChange:i=>g({...a,products_only:i.target.checked}),className:"w-4 h-4 rounded border-gray-300"}),e.jsx("span",{className:`text-sm ${s?"text-gray-300":"text-gray-700"}`,children:"Apenas Produtos (sem pedidos)"})]})]}),e.jsxs("div",{className:"flex items-center gap-3 mt-6",children:[e.jsx("button",{onClick:ie,disabled:x||!a.store_url||!a.consumer_key||!a.consumer_secret,className:"px-6 py-2.5 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 whitespace-nowrap font-medium shadow-lg",children:x?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Testando..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-test-tube-line"}),"Testar Conexão"]})}),e.jsxs("button",{onClick:oe,disabled:!j,className:"px-6 py-2.5 bg-primary text-white rounded-lg hover:opacity-90 transition-opacity disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 whitespace-nowrap font-medium shadow-lg",children:[e.jsx("i",{className:"ri-save-line"}),"Salvar Conexão"]})]}),p&&e.jsx("div",{className:`mt-4 p-4 rounded-lg ${p.success?"bg-green-500/20 border border-green-500":"bg-red-500/20 border border-red-500"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("i",{className:`${p.success?"ri-checkbox-circle-line text-green-500":"ri-error-warning-line text-red-500"} text-xl`}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:p.message}),p.latency&&e.jsxs("p",{className:`text-sm ${s?"text-gray-400":"text-gray-600"} mt-1`,children:["Latência: ",p.latency,"ms"]}),p.data&&e.jsx("pre",{className:`text-xs mt-2 p-2 ${s?"bg-black/20":"bg-gray-100"} rounded overflow-x-auto`,children:JSON.stringify(p.data,null,2)})]})]})})]}),j&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:`p-6 rounded-xl ${s?"bg-gray-800/50":"bg-white"} border ${s?"border-gray-700":"border-gray-200"} shadow-lg`,children:[e.jsxs("h3",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[e.jsx("i",{className:"ri-download-cloud-line text-accent"}),"Importação de Produtos"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:I.update_existing,onChange:i=>L({...I,update_existing:i.target.checked}),className:"w-4 h-4 rounded border-gray-300"}),e.jsx("span",{className:`text-sm ${s?"text-gray-300":"text-gray-700"}`,children:"Atualizar produtos existentes (por SKU)"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:I.create_new,onChange:i=>L({...I,create_new:i.target.checked}),className:"w-4 h-4 rounded border-gray-300"}),e.jsx("span",{className:`text-sm ${s?"text-gray-300":"text-gray-700"}`,children:"Criar novos produtos"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:I.sync_stock_only,onChange:i=>L({...I,sync_stock_only:i.target.checked}),className:"w-4 h-4 rounded border-gray-300"}),e.jsx("span",{className:`text-sm ${s?"text-gray-300":"text-gray-700"}`,children:"Sincronizar apenas stock"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:I.import_images,onChange:i=>L({...I,import_images:i.target.checked}),className:"w-4 h-4 rounded border-gray-300"}),e.jsx("span",{className:`text-sm ${s?"text-gray-300":"text-gray-700"}`,children:"Importar imagens"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${s?"text-gray-200":"text-gray-700"}`,children:"Agendamento de Sincronização"}),e.jsxs("select",{value:B,onChange:i=>U(i.target.value),className:`w-full max-w-xs px-4 py-2.5 rounded-lg ${s?"bg-gray-900 border-gray-600 text-white":"bg-gray-50 border-gray-300 text-gray-900"} border focus:outline-none focus:ring-2 focus:ring-primary`,children:[e.jsx("option",{value:"manual",children:"Manual"}),e.jsx("option",{value:"hourly",children:"A cada hora"}),e.jsx("option",{value:"daily",children:"Diariamente"}),e.jsx("option",{value:"weekly",children:"Semanalmente"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:ne,className:"px-6 py-2.5 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors flex items-center gap-2 whitespace-nowrap font-medium shadow-lg",children:[e.jsx("i",{className:"ri-eye-line"}),"Preview (50 produtos)"]}),e.jsx("button",{onClick:()=>ce("full"),disabled:$,className:"px-6 py-2.5 bg-accent text-white rounded-lg hover:opacity-90 transition-opacity disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 whitespace-nowrap font-medium shadow-lg",children:$?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Importando..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-download-line"}),"Importar Todos"]})}),b.length>0&&e.jsxs("button",{onClick:()=>u(!w),className:"px-6 py-2.5 bg-primary text-white rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap font-medium shadow-lg",children:[e.jsx("i",{className:"ri-list-check"}),"Ver Produtos Importados (",b.length,")"]})]})]}),h&&r.length>0&&e.jsxs("div",{className:`p-6 rounded-xl ${s?"bg-gray-800/50":"bg-white"} border ${s?"border-gray-700":"border-gray-200"} shadow-lg`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-bold",children:"Preview de Produtos"}),e.jsx("button",{onClick:()=>_(!1),className:"text-gray-400 hover:text-white",children:e.jsx("i",{className:"ri-close-line text-xl"})})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:s?"bg-gray-900":"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:`px-4 py-3 text-left font-semibold ${s?"text-gray-200":"text-gray-700"}`,children:"Imagem"}),e.jsx("th",{className:`px-4 py-3 text-left font-semibold ${s?"text-gray-200":"text-gray-700"}`,children:"Nome"}),e.jsx("th",{className:`px-4 py-3 text-left font-semibold ${s?"text-gray-200":"text-gray-700"}`,children:"SKU"}),e.jsx("th",{className:`px-4 py-3 text-left font-semibold ${s?"text-gray-200":"text-gray-700"}`,children:"Preço"}),e.jsx("th",{className:`px-4 py-3 text-left font-semibold ${s?"text-gray-200":"text-gray-700"}`,children:"Stock"}),e.jsx("th",{className:`px-4 py-3 text-left font-semibold ${s?"text-gray-200":"text-gray-700"}`,children:"Categoria"})]})}),e.jsx("tbody",{children:r.slice(0,10).map((i,P)=>e.jsxs("tr",{className:`border-t ${s?"border-gray-700":"border-gray-200"}`,children:[e.jsx("td",{className:"px-4 py-3",children:e.jsx("div",{className:`w-12 h-12 ${s?"bg-gray-700":"bg-gray-200"} rounded overflow-hidden`,children:i.image&&e.jsx("img",{src:i.image,alt:i.name,className:"w-full h-full object-cover"})})}),e.jsx("td",{className:`px-4 py-3 ${s?"text-gray-200":"text-gray-800"}`,children:i.name}),e.jsx("td",{className:`px-4 py-3 text-sm ${s?"text-gray-400":"text-gray-600"}`,children:i.sku||"-"}),e.jsxs("td",{className:"px-4 py-3 text-primary font-medium",children:["€",i.price]}),e.jsx("td",{className:`px-4 py-3 ${s?"text-gray-300":"text-gray-700"}`,children:i.stock}),e.jsx("td",{className:`px-4 py-3 text-sm ${s?"text-gray-400":"text-gray-600"}`,children:i.category})]},P))})]})})]}),w&&e.jsxs("div",{className:`p-6 rounded-xl ${s?"bg-gray-800/50":"bg-white"} border ${s?"border-gray-700":"border-gray-200"} shadow-lg`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"text-lg font-bold flex items-center gap-2",children:[e.jsx("i",{className:"ri-box-3-line text-primary"}),"Produtos Importados (",J.length,")"]}),e.jsx("button",{onClick:()=>u(!1),className:`text-gray-400 hover:${s?"text-white":"text-gray-900"}`,children:e.jsx("i",{className:"ri-close-line text-xl"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${s?"text-gray-200":"text-gray-700"}`,children:"Pesquisar"}),e.jsx("input",{type:"text",placeholder:"Nome ou SKU...",value:V,onChange:i=>re(i.target.value),className:`w-full px-4 py-2.5 rounded-lg ${s?"bg-gray-900 border-gray-600 text-white":"bg-gray-50 border-gray-300 text-gray-900"} border focus:outline-none focus:ring-2 focus:ring-primary`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${s?"text-gray-200":"text-gray-700"}`,children:"Categoria"}),e.jsxs("select",{value:O,onChange:i=>te(i.target.value),className:`w-full px-4 py-2.5 rounded-lg ${s?"bg-gray-900 border-gray-600 text-white":"bg-gray-50 border-gray-300 text-gray-900"} border focus:outline-none focus:ring-2 focus:ring-primary`,children:[e.jsx("option",{value:"all",children:"Todas as categorias"}),Array.from(new Set(b.map(i=>i.category))).map(i=>e.jsx("option",{value:i,children:i},i))]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:J.map(i=>e.jsxs("div",{className:`p-4 rounded-lg ${s?"bg-gray-900":"bg-gray-50"} border ${s?"border-gray-700":"border-gray-200"} hover:border-primary transition-colors cursor-pointer`,onClick:()=>E(i),children:[e.jsx("div",{className:`w-full h-48 ${s?"bg-gray-800":"bg-gray-200"} rounded-lg overflow-hidden mb-3`,children:i.images[0]&&e.jsx("img",{src:i.images[0],alt:i.title,className:"w-full h-full object-cover"})}),e.jsx("h4",{className:`font-semibold mb-2 ${s?"text-gray-100":"text-gray-900"}`,children:i.title}),e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"text-primary font-bold text-lg",children:["€",i.price]}),i.sale_price&&e.jsxs("span",{className:`text-sm line-through ${s?"text-gray-500":"text-gray-400"}`,children:["€",i.sale_price]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{className:s?"text-gray-400":"text-gray-600",children:["SKU: ",i.sku]}),e.jsxs("span",{className:`px-2 py-1 rounded ${i.stock>0?"bg-green-500/20 text-green-500":"bg-red-500/20 text-red-500"}`,children:["Stock: ",i.stock]})]}),e.jsx("div",{className:`text-xs mt-2 ${s?"text-gray-500":"text-gray-400"}`,children:i.category})]},i.id))})]}),m&&!C&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>E(null),children:e.jsxs("div",{className:`${s?"bg-gray-800":"bg-white"} rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto`,onClick:i=>i.stopPropagation(),children:[e.jsxs("div",{className:`sticky top-0 ${s?"bg-gray-800":"bg-white"} border-b ${s?"border-gray-700":"border-gray-200"} p-6 flex items-center justify-between`,children:[e.jsx("h3",{className:"text-xl font-bold",children:"Detalhes do Produto"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>{R(m),E(null)},className:"px-4 py-2 bg-primary text-white rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap font-medium",children:[e.jsx("i",{className:"ri-edit-line"}),"Editar"]}),e.jsx("button",{onClick:()=>E(null),className:`text-gray-400 hover:${s?"text-white":"text-gray-900"}`,children:e.jsx("i",{className:"ri-close-line text-2xl"})})]})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:`font-semibold mb-3 ${s?"text-gray-200":"text-gray-800"}`,children:"Imagens"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:m.images.map((i,P)=>e.jsx("div",{className:`w-full h-48 ${s?"bg-gray-900":"bg-gray-100"} rounded-lg overflow-hidden`,children:e.jsx("img",{src:i,alt:`${m.title} ${P+1}`,className:"w-full h-full object-cover"})},P))})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`text-sm font-medium ${s?"text-gray-400":"text-gray-600"}`,children:"Nome"}),e.jsx("p",{className:`text-lg font-semibold ${s?"text-gray-100":"text-gray-900"}`,children:m.title})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`text-sm font-medium ${s?"text-gray-400":"text-gray-600"}`,children:"Preço"}),e.jsxs("p",{className:"text-xl font-bold text-primary",children:["€",m.price]})]}),m.sale_price&&e.jsxs("div",{children:[e.jsx("label",{className:`text-sm font-medium ${s?"text-gray-400":"text-gray-600"}`,children:"Preço Promocional"}),e.jsxs("p",{className:"text-xl font-bold text-accent",children:["€",m.sale_price]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`text-sm font-medium ${s?"text-gray-400":"text-gray-600"}`,children:"SKU"}),e.jsx("p",{className:s?"text-gray-200":"text-gray-800",children:m.sku})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-sm font-medium ${s?"text-gray-400":"text-gray-600"}`,children:"Stock"}),e.jsxs("p",{className:`font-semibold ${m.stock>0?"text-green-500":"text-red-500"}`,children:[m.stock," unidades"]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-sm font-medium ${s?"text-gray-400":"text-gray-600"}`,children:"Categoria"}),e.jsx("p",{className:s?"text-gray-200":"text-gray-800",children:m.category})]}),m.weight&&e.jsxs("div",{children:[e.jsx("label",{className:`text-sm font-medium ${s?"text-gray-400":"text-gray-600"}`,children:"Peso"}),e.jsxs("p",{className:s?"text-gray-200":"text-gray-800",children:[m.weight," kg"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-sm font-medium ${s?"text-gray-400":"text-gray-600"}`,children:"Status do Stock"}),e.jsx("p",{className:s?"text-gray-200":"text-gray-800",children:m.stock_status})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-sm font-medium ${s?"text-gray-400":"text-gray-600"}`,children:"Última Sincronização"}),e.jsx("p",{className:s?"text-gray-200":"text-gray-800",children:new Date(m.last_synced_at).toLocaleString("pt-PT")})]})]})]}),e.jsxs("div",{className:"mt-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`text-sm font-medium ${s?"text-gray-400":"text-gray-600"}`,children:"Descrição Curta"}),e.jsx("div",{className:`mt-2 p-4 rounded-lg ${s?"bg-gray-900":"bg-gray-50"}`,dangerouslySetInnerHTML:{__html:m.short_description||"Sem descrição curta"}})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-sm font-medium ${s?"text-gray-400":"text-gray-600"}`,children:"Descrição Completa"}),e.jsx("div",{className:`mt-2 p-4 rounded-lg ${s?"bg-gray-900":"bg-gray-50"} max-h-64 overflow-y-auto`,dangerouslySetInnerHTML:{__html:m.description||"Sem descrição"}})]})]})]})]})}),C&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>R(null),children:e.jsxs("div",{className:`${s?"bg-gray-800":"bg-white"} rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto`,onClick:i=>i.stopPropagation(),children:[e.jsxs("div",{className:`sticky top-0 ${s?"bg-gray-800":"bg-white"} border-b ${s?"border-gray-700":"border-gray-200"} p-6 flex items-center justify-between`,children:[e.jsx("h3",{className:"text-xl font-bold",children:"Editar Produto"}),e.jsx("button",{onClick:()=>R(null),className:`text-gray-400 hover:${s?"text-white":"text-gray-900"}`,children:e.jsx("i",{className:"ri-close-line text-2xl"})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${s?"text-gray-200":"text-gray-700"}`,children:"Nome do Produto"}),e.jsx("input",{type:"text",value:C.title,onChange:i=>R({...C,title:i.target.value}),className:`w-full px-4 py-2.5 rounded-lg ${s?"bg-gray-900 border-gray-600 text-white":"bg-gray-50 border-gray-300 text-gray-900"} border focus:outline-none focus:ring-2 focus:ring-primary`})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${s?"text-gray-200":"text-gray-700"}`,children:"Preço (€)"}),e.jsx("input",{type:"number",step:"0.01",value:C.price,onChange:i=>R({...C,price:parseFloat(i.target.value)}),className:`w-full px-4 py-2.5 rounded-lg ${s?"bg-gray-900 border-gray-600 text-white":"bg-gray-50 border-gray-300 text-gray-900"} border focus:outline-none focus:ring-2 focus:ring-primary`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${s?"text-gray-200":"text-gray-700"}`,children:"Preço Promocional (€)"}),e.jsx("input",{type:"number",step:"0.01",value:C.sale_price||"",onChange:i=>R({...C,sale_price:i.target.value?parseFloat(i.target.value):void 0}),className:`w-full px-4 py-2.5 rounded-lg ${s?"bg-gray-900 border-gray-600 text-white":"bg-gray-50 border-gray-300 text-gray-900"} border focus:outline-none focus:ring-2 focus:ring-primary`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${s?"text-gray-200":"text-gray-700"}`,children:"Stock"}),e.jsx("input",{type:"number",value:C.stock,onChange:i=>R({...C,stock:parseInt(i.target.value)}),className:`w-full px-4 py-2.5 rounded-lg ${s?"bg-gray-900 border-gray-600 text-white":"bg-gray-50 border-gray-300 text-gray-900"} border focus:outline-none focus:ring-2 focus:ring-primary`})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${s?"text-gray-200":"text-gray-700"}`,children:"Descrição Curta"}),e.jsx("textarea",{rows:3,value:C.short_description,onChange:i=>R({...C,short_description:i.target.value}),className:`w-full px-4 py-2.5 rounded-lg ${s?"bg-gray-900 border-gray-600 text-white":"bg-gray-50 border-gray-300 text-gray-900"} border focus:outline-none focus:ring-2 focus:ring-primary`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${s?"text-gray-200":"text-gray-700"}`,children:"Descrição Completa"}),e.jsx("textarea",{rows:6,value:C.description,onChange:i=>R({...C,description:i.target.value}),className:`w-full px-4 py-2.5 rounded-lg ${s?"bg-gray-900 border-gray-600 text-white":"bg-gray-50 border-gray-300 text-gray-900"} border focus:outline-none focus:ring-2 focus:ring-primary`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${s?"text-gray-200":"text-gray-700"}`,children:"URLs das Imagens (uma por linha)"}),e.jsx("textarea",{rows:4,value:C.images.join(`
`),onChange:i=>R({...C,images:i.target.value.split(`
`).filter(P=>P.trim())}),className:`w-full px-4 py-2.5 rounded-lg ${s?"bg-gray-900 border-gray-600 text-white":"bg-gray-50 border-gray-300 text-gray-900"} border focus:outline-none focus:ring-2 focus:ring-primary`,placeholder:`https://exemplo.com/imagem1.jpg
https://exemplo.com/imagem2.jpg`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${s?"text-gray-200":"text-gray-700"}`,children:"Peso (kg)"}),e.jsx("input",{type:"text",value:C.weight||"",onChange:i=>R({...C,weight:i.target.value}),className:`w-full px-4 py-2.5 rounded-lg ${s?"bg-gray-900 border-gray-600 text-white":"bg-gray-50 border-gray-300 text-gray-900"} border focus:outline-none focus:ring-2 focus:ring-primary`})]}),e.jsxs("div",{className:"flex items-center gap-3 pt-4",children:[e.jsxs("button",{onClick:xe,className:"px-6 py-2.5 bg-primary text-white rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap font-medium shadow-lg",children:[e.jsx("i",{className:"ri-save-line"}),"Salvar Alterações"]}),e.jsxs("button",{onClick:()=>R(null),className:`px-6 py-2.5 ${s?"bg-gray-700":"bg-gray-200"} ${s?"text-white":"text-gray-800"} rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap font-medium`,children:[e.jsx("i",{className:"ri-close-line"}),"Cancelar"]})]})]})]})}),e.jsxs("div",{className:`p-6 rounded-xl ${s?"bg-gray-800/50":"bg-white"} border ${s?"border-gray-700":"border-gray-200"} shadow-lg`,children:[e.jsxs("h3",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[e.jsx("i",{className:"ri-history-line text-primary"}),"Histórico de Importações"]}),t.length===0?e.jsx("p",{className:`${s?"text-gray-400":"text-gray-600"} text-center py-8`,children:"Nenhuma importação realizada ainda"}):e.jsx("div",{className:"space-y-3",children:t.map(i=>e.jsxs("div",{className:`p-4 rounded-lg ${s?"bg-gray-900":"bg-gray-50"} border ${s?"border-gray-700":"border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${i.status==="completed"?"bg-green-500/20 text-green-500":i.status==="failed"?"bg-red-500/20 text-red-500":i.status==="running"?"bg-blue-500/20 text-blue-500":"bg-gray-500/20 text-gray-500"}`,children:i.status==="completed"?"Concluído":i.status==="failed"?"Falhou":i.status==="running"?"Em execução":"Pendente"}),e.jsxs("span",{className:`text-sm ${s?"text-gray-300":"text-gray-700"}`,children:[i.processed_items," / ",i.total_items," produtos"]})]}),e.jsx("span",{className:`text-sm ${s?"text-gray-400":"text-gray-600"}`,children:new Date(i.created_at).toLocaleString("pt-PT")})]}),i.error_message&&e.jsx("p",{className:"text-sm text-red-500 mt-2",children:i.error_message})]},i.id))})]})]})]})}const Ie=n.lazy(()=>ge(()=>import("./ServicesManagement-BD6MXcBD.js"),__vite__mapDeps([0,1,2])));function Le(){const[s,a]=n.useState("dashboard"),[g,j]=n.useState(!0),[d,x]=n.useState("admin"),{user:y,signOut:p}=Y();Z(),n.useEffect(()=>{(async()=>{if(y)try{const{data:l,error:r}=await f.from("profiles").select("role").eq("id",y.id).single();if(r){console.error("Erro ao buscar role:",r);return}l?.role&&x(l.role)}catch(l){console.error("Erro ao buscar role:",l)}})()},[y]);const v=()=>(()=>{switch(s){case"dashboard":return e.jsx(X,{});case"products":return e.jsx(he,{});case"services":return e.jsx(n.Suspense,{fallback:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"w-12 h-12 border-4 border-[#b62bff] border-t-transparent rounded-full animate-spin"})}),children:e.jsx(Ie,{})});case"categories":return e.jsx(be,{});case"orders":return e.jsx(ye,{});case"customers":return e.jsx(fe,{});case"content":return e.jsx(je,{});case"marketing":return e.jsx(Ne,{});case"financial":return e.jsx(ve,{});case"security":return e.jsx(we,{});case"automation":return e.jsx(_e,{});case"support":return e.jsx($e,{});case"shipping":return e.jsx(Ce,{});case"tax":return e.jsx(Se,{});case"marketplace":return e.jsx(Pe,{});case"site-settings":return e.jsx(ke,{});case"theme":return e.jsx(Ee,{});case"woocommerce":return e.jsx(Ae,{});default:return e.jsx(X,{})}})();return e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-[#0b0011]",children:[e.jsx(me,{sidebarOpen:g,setSidebarOpen:j,userRole:d}),e.jsxs("div",{className:"flex",children:[e.jsx(ue,{activeSection:s,setActiveSection:a,sidebarOpen:g}),e.jsx("main",{className:`flex-1 transition-all duration-300 ${g?"ml-64":"ml-0"} pt-16`,children:e.jsx("div",{className:"p-6",children:v()})})]})]})}export{Le as default};
//# sourceMappingURL=page-CBVsu8d3.js.map
