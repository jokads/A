const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ServicesManagement-J6ilCWHJ.js","assets/index-DBg0Zut9.js","assets/index-3RuU84vg.css"])))=>i.map(i=>d[i]);
import{c as Y,u as Q,d as Z,r as o,j as e,s as j,_ as xe}from"./index-DBg0Zut9.js";function ge({sidebarOpen:s,setSidebarOpen:a,userRole:x}){const{user:h,signOut:n}=Y(),{darkMode:d,toggleDarkMode:g}=Q(),y=Z(),[w,m]=o.useState(!1),l=async()=>{await n(),y("/login")},r=c=>({superadmin:"Super Administrador",admin:"Administrador",manager:"Gestor",editor:"Editor",financial:"Financeiro",support:"Suporte"})[c]||"Utilizador";return e.jsx("header",{className:`sticky top-0 z-40 ${d?"bg-[#0b0011] border-gray-800":"bg-white border-gray-200"} border-b`,children:e.jsx("nav",{className:"px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between h-16",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>a(!s),className:`w-10 h-10 rounded-lg ${d?"bg-gray-800 hover:bg-gray-700":"bg-gray-100 hover:bg-gray-200"} flex items-center justify-center transition-colors cursor-pointer`,children:e.jsx("i",{className:`ri-menu-line text-xl ${d?"text-white":"text-gray-900"}`})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-[#b62bff] to-[#ff6a00] rounded-lg flex items-center justify-center",children:e.jsx("i",{className:"ri-dashboard-line text-white text-lg"})}),e.jsx("span",{className:`text-lg font-bold ${d?"text-white":"text-gray-900"}`,children:"Dashboard Admin"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:()=>y("/"),className:`hidden sm:flex items-center gap-2 px-4 py-2 rounded-lg ${d?"bg-gradient-to-r from-[#b62bff]/20 to-[#ff6a00]/20 hover:from-[#b62bff]/30 hover:to-[#ff6a00]/30 text-white border border-[#b62bff]/30":"bg-gradient-to-r from-[#b62bff]/10 to-[#ff6a00]/10 hover:from-[#b62bff]/20 hover:to-[#ff6a00]/20 text-gray-900 border border-[#b62bff]/20"} font-medium transition-all cursor-pointer whitespace-nowrap`,children:[e.jsx("i",{className:"ri-home-line text-lg"}),e.jsx("span",{children:"Ver Site"})]}),e.jsx("button",{onClick:g,className:`w-10 h-10 rounded-lg ${d?"bg-gray-800 hover:bg-gray-700":"bg-gray-100 hover:bg-gray-200"} flex items-center justify-center transition-colors cursor-pointer`,children:e.jsx("i",{className:`${d?"ri-sun-line":"ri-moon-line"} text-xl ${d?"text-yellow-400":"text-gray-700"}`})}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>m(!w),className:`w-10 h-10 rounded-lg ${d?"bg-gray-800 hover:bg-gray-700":"bg-gray-100 hover:bg-gray-200"} flex items-center justify-center transition-colors cursor-pointer`,children:e.jsx("i",{className:`ri-user-line text-xl ${d?"text-white":"text-gray-900"}`})}),w&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>m(!1)}),e.jsxs("div",{className:`absolute right-0 mt-2 w-72 rounded-xl shadow-2xl ${d?"bg-[#170018] border-gray-800":"bg-white border-gray-200"} border overflow-hidden z-50`,children:[e.jsx("div",{className:`p-4 border-b ${d?"border-gray-800":"border-gray-200"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-[#b62bff] to-[#ff6a00] rounded-full flex items-center justify-center",children:e.jsx("i",{className:"ri-user-line text-white text-xl"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:`font-semibold truncate ${d?"text-white":"text-gray-900"}`,children:h?.email}),e.jsx("p",{className:"text-sm text-gray-500 truncate",children:r(x)})]})]})}),e.jsxs("div",{className:"p-2",children:[e.jsxs("button",{onClick:()=>{y("/"),m(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg ${d?"hover:bg-gray-800 text-gray-300":"hover:bg-gray-100 text-gray-700"} transition-colors cursor-pointer`,children:[e.jsx("i",{className:"ri-home-line text-lg"}),e.jsx("span",{children:"Ver Site Público"})]}),e.jsxs("button",{onClick:l,className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg ${d?"hover:bg-red-900/20 text-red-400":"hover:bg-red-50 text-red-600"} transition-colors cursor-pointer`,children:[e.jsx("i",{className:"ri-logout-box-line text-lg"}),e.jsx("span",{children:"Terminar Sessão"})]})]})]})]})]})]})]})})})}function ue({activeSection:s,setActiveSection:a,sidebarOpen:x}){const{darkMode:h}=Q(),n=[{id:"dashboard",icon:"ri-dashboard-line",label:"Dashboard"},{id:"products",icon:"ri-shopping-bag-line",label:"Produtos"},{id:"services",icon:"ri-service-line",label:"Serviços"},{id:"categories",icon:"ri-folder-line",label:"Categorias"},{id:"orders",icon:"ri-file-list-line",label:"Pedidos"},{id:"customers",icon:"ri-user-line",label:"Clientes"},{id:"content",icon:"ri-pages-line",label:"Conteúdo"},{id:"marketing",icon:"ri-megaphone-line",label:"Marketing"},{id:"financial",icon:"ri-money-dollar-circle-line",label:"Financeiro"},{id:"shipping",icon:"ri-truck-line",label:"Envios"},{id:"tax",icon:"ri-percent-line",label:"Impostos"},{id:"marketplace",icon:"ri-store-line",label:"Marketplace"},{id:"automation",icon:"ri-robot-line",label:"Automação"},{id:"support",icon:"ri-customer-service-line",label:"Suporte"},{id:"woocommerce",icon:"ri-shopping-cart-2-line",label:"WooCommerce"},{id:"site-settings",icon:"ri-settings-3-line",label:"Configurações"},{id:"theme",icon:"ri-palette-line",label:"Tema"},{id:"security",icon:"ri-shield-check-line",label:"Segurança"}];return e.jsx("aside",{className:`fixed left-0 top-16 bottom-0 w-64 ${h?"bg-[#170018] border-gray-800":"bg-white border-gray-200"} border-r transition-transform duration-300 overflow-y-auto ${x?"translate-x-0":"-translate-x-full"}`,children:e.jsx("nav",{className:"p-4 space-y-1",children:n.map(d=>e.jsxs("button",{onClick:()=>a(d.id),className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all ${s===d.id?"bg-gradient-to-r from-[#b62bff] to-[#ff6a00] text-white shadow-lg":h?"text-gray-300 hover:bg-gray-800":"text-gray-700 hover:bg-gray-100"}`,children:[e.jsx("i",{className:`${d.icon} text-xl`}),e.jsx("span",{className:"font-medium",children:d.label})]},d.id))})})}function X({darkMode:s}){const[a,x]=o.useState({totalProducts:0,totalOrders:0,totalCustomers:0,totalRevenue:0,pendingOrders:0,lowStock:0,openTickets:0,activeCampaigns:0}),[h,n]=o.useState([]),[d,g]=o.useState([]),[y,w]=o.useState(!0);o.useEffect(()=>{m()},[]);const m=async()=>{try{const[c,b,$,v]=await Promise.all([j.from("products").select("id, stock, min_stock"),j.from("orders").select("id, total, status, created_at, user_id"),j.from("profiles").select("id"),j.from("support_tickets").select("id, status")]),C=c.data||[],t=b.data||[],N=$.data||[],f=v.data||[],R=t.reduce((k,E)=>k+(E.total||0),0),_=t.filter(k=>k.status==="pending").length,u=C.filter(k=>k.stock<=k.min_stock).length,p=f.filter(k=>k.status==="open").length;x({totalProducts:C.length,totalOrders:t.length,totalCustomers:N.length,totalRevenue:R,pendingOrders:_,lowStock:u,openTickets:p,activeCampaigns:0}),n(t.slice(0,5))}catch(c){console.error("Erro ao carregar dados:",c)}finally{w(!1)}},l=[{title:"Receita Total",value:`R$ ${a.totalRevenue.toFixed(2)}`,icon:"ri-money-dollar-circle-line",color:"from-green-500 to-green-600",change:"+12.5%"},{title:"Pedidos",value:a.totalOrders.toString(),icon:"ri-shopping-cart-line",color:"from-blue-500 to-blue-600",change:"+8.2%"},{title:"Produtos",value:a.totalProducts.toString(),icon:"ri-shopping-bag-line",color:"from-purple-500 to-purple-600",change:"+5.1%"},{title:"Clientes",value:a.totalCustomers.toString(),icon:"ri-user-line",color:"from-yellow-500 to-yellow-600",change:"+15.3%"}],r=[{type:"warning",icon:"ri-alert-line",message:`${a.lowStock} produtos com estoque baixo`,action:"Ver produtos"},{type:"info",icon:"ri-time-line",message:`${a.pendingOrders} pedidos pendentes`,action:"Processar"},{type:"error",icon:"ri-customer-service-line",message:`${a.openTickets} tickets abertos`,action:"Responder"}];return y?e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsx("div",{className:"w-12 h-12 border-4 border-yellow-500 border-t-transparent rounded-full animate-spin"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:l.map((c,b)=>e.jsxs("div",{className:`p-6 rounded-xl ${s?"bg-gray-900":"bg-gray-50"} border ${s?"border-gray-800":"border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:`w-12 h-12 rounded-lg bg-gradient-to-br ${c.color} flex items-center justify-center`,children:e.jsx("i",{className:`${c.icon} text-2xl text-white`})}),e.jsx("span",{className:"text-green-500 text-sm font-medium",children:c.change})]}),e.jsx("h3",{className:`text-sm ${s?"text-gray-400":"text-gray-600"} mb-1`,children:c.title}),e.jsx("p",{className:"text-3xl font-bold",children:c.value})]},b))}),r.length>0&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:r.map((c,b)=>e.jsx("div",{className:`p-4 rounded-lg border ${c.type==="warning"?"bg-yellow-500/10 border-yellow-500/30":c.type==="error"?"bg-red-500/10 border-red-500/30":"bg-blue-500/10 border-blue-500/30"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("i",{className:`${c.icon} text-xl ${c.type==="warning"?"text-yellow-500":c.type==="error"?"text-red-500":"text-blue-500"}`}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm mb-2",children:c.message}),e.jsxs("button",{className:`text-xs font-medium ${c.type==="warning"?"text-yellow-500":c.type==="error"?"text-red-500":"text-blue-500"} hover:underline whitespace-nowrap`,children:[c.action," →"]})]})]})},b))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:`p-6 rounded-xl ${s?"bg-gray-900":"bg-gray-50"} border ${s?"border-gray-800":"border-gray-200"}`,children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:"Pedidos Recentes"}),e.jsx("div",{className:"space-y-3",children:h.length===0?e.jsx("p",{className:s?"text-gray-400":"text-gray-600",children:"Nenhum pedido ainda"}):h.map(c=>e.jsx("div",{className:`p-3 rounded-lg ${s?"bg-gray-800":"bg-white"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium",children:["Pedido #",c.id.slice(0,8)]}),e.jsx("p",{className:`text-sm ${s?"text-gray-400":"text-gray-600"}`,children:new Date(c.created_at).toLocaleDateString("pt-BR")})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-bold text-yellow-500",children:["R$ ",c.total?.toFixed(2)]}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${c.status==="completed"?"bg-green-500/20 text-green-500":c.status==="pending"?"bg-yellow-500/20 text-yellow-500":"bg-gray-500/20 text-gray-500"}`,children:c.status})]})]})},c.id))})]}),e.jsxs("div",{className:`p-6 rounded-xl ${s?"bg-gray-900":"bg-gray-50"} border ${s?"border-gray-800":"border-gray-200"}`,children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:"Ações Rápidas"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:[{label:"Novo Produto",icon:"ri-add-circle-line",color:"from-blue-500 to-blue-600"},{label:"Nova Categoria",icon:"ri-folder-add-line",color:"from-purple-500 to-purple-600"},{label:"Criar Cupom",icon:"ri-coupon-line",color:"from-green-500 to-green-600"},{label:"Nova Campanha",icon:"ri-megaphone-line",color:"from-yellow-500 to-yellow-600"},{label:"Exportar Dados",icon:"ri-download-line",color:"from-red-500 to-red-600"},{label:"Relatórios",icon:"ri-bar-chart-line",color:"from-indigo-500 to-indigo-600"}].map((c,b)=>e.jsxs("button",{className:`p-4 rounded-lg bg-gradient-to-br ${c.color} hover:opacity-90 transition-opacity text-white text-left whitespace-nowrap`,children:[e.jsx("i",{className:`${c.icon} text-2xl mb-2 block`}),e.jsx("span",{className:"text-sm font-medium",children:c.label})]},b))})]})]})]})}function pe({darkMode:s,product:a,onClose:x,onSave:h}){const[n,d]=o.useState({name:"",slug:"",description:"",short_description:"",price:0,cost:0,promotional_price:0,category_id:"",stock:0,min_stock:5,sku:"",barcode:"",weight:0,dimensions:"",status:"active",type:"physical",tax_rate:23,country_origin:"",warehouse_location:"",is_dropshipping:!1,supplier_id:"",meta_title:"",meta_description:"",meta_keywords:"",tags:""}),[g,y]=o.useState([]),[w,m]=o.useState([]),[l,r]=o.useState([]),[c,b]=o.useState(!1);o.useEffect(()=>{$(),a&&(d({name:a.name||"",slug:a.slug||"",description:a.description||"",short_description:a.short_description||"",price:a.price||0,cost:a.cost||0,promotional_price:a.promotional_price||0,category_id:a.category_id||"",stock:a.stock||0,min_stock:a.min_stock||5,sku:a.sku||"",barcode:a.barcode||"",weight:a.weight||0,dimensions:a.dimensions||"",status:a.status||"active",type:a.type||"physical",tax_rate:a.tax_rate||23,country_origin:a.country_origin||"",warehouse_location:a.warehouse_location||"",is_dropshipping:a.is_dropshipping||!1,supplier_id:a.supplier_id||"",meta_title:a.meta_title||"",meta_description:a.meta_description||"",meta_keywords:a.meta_keywords||"",tags:a.tags||""}),m(a.images||[]),r(a.variants||[]))},[a]);const $=async()=>{const{data:t}=await j.from("categories").select("*").order("name");y(t||[])},v=async t=>{t.preventDefault(),b(!0);try{const N={...n,images:w,variants:l,margin:n.price-n.cost,margin_percentage:((n.price-n.cost)/n.price*100).toFixed(2),updated_at:new Date().toISOString()};if(a){const{error:f}=await j.from("products").update(N).eq("id",a.id);if(f)throw f}else{const{error:f}=await j.from("products").insert([{...N,created_at:new Date().toISOString()}]);if(f)throw f}alert("Produto salvo com sucesso!"),h(),x()}catch(N){console.error("Erro ao salvar produto:",N),alert("Erro ao salvar produto")}finally{b(!1)}},C=t=>t.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,"");return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:e.jsxs("div",{className:`${s?"bg-gray-900":"bg-white"} rounded-xl max-w-6xl w-full max-h-[90vh] overflow-y-auto`,children:[e.jsxs("div",{className:`sticky top-0 ${s?"bg-gray-900":"bg-white"} border-b ${s?"border-gray-800":"border-gray-200"} p-6 flex items-center justify-between z-10`,children:[e.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[e.jsx("i",{className:"ri-box-3-line text-yellow-500"}),a?"Editar Produto":"Novo Produto"]}),e.jsx("button",{onClick:x,className:"p-2 hover:bg-gray-800 rounded-lg transition-colors",children:e.jsx("i",{className:"ri-close-line text-xl"})})]}),e.jsxs("form",{onSubmit:v,className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx("i",{className:"ri-information-line text-yellow-500"}),"Informações Básicas"]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Nome do Produto *"}),e.jsx("input",{type:"text",required:!0,value:n.name,onChange:t=>{d({...n,name:t.target.value,slug:C(t.target.value)})},className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Slug (URL)"}),e.jsx("input",{type:"text",value:n.slug,onChange:t=>d({...n,slug:t.target.value}),className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Descrição Curta"}),e.jsx("textarea",{value:n.short_description,onChange:t=>d({...n,short_description:t.target.value}),rows:3,className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Descrição Completa"}),e.jsx("textarea",{value:n.description,onChange:t=>d({...n,description:t.target.value}),rows:6,className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Categoria *"}),e.jsxs("select",{required:!0,value:n.category_id,onChange:t=>d({...n,category_id:t.target.value}),className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`,children:[e.jsx("option",{value:"",children:"Selecione..."}),g.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Status"}),e.jsxs("select",{value:n.status,onChange:t=>d({...n,status:t.target.value}),className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`,children:[e.jsx("option",{value:"active",children:"Ativo"}),e.jsx("option",{value:"inactive",children:"Inativo"}),e.jsx("option",{value:"draft",children:"Rascunho"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Tipo"}),e.jsxs("select",{value:n.type,onChange:t=>d({...n,type:t.target.value}),className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`,children:[e.jsx("option",{value:"physical",children:"Físico"}),e.jsx("option",{value:"digital",children:"Digital"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"SKU"}),e.jsx("input",{type:"text",value:n.sku,onChange:t=>d({...n,sku:t.target.value}),className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx("i",{className:"ri-money-dollar-circle-line text-yellow-500"}),"Preços & Financeiro"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Custo *"}),e.jsx("input",{type:"number",step:"0.01",required:!0,value:n.cost,onChange:t=>d({...n,cost:parseFloat(t.target.value)}),className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Preço de Venda *"}),e.jsx("input",{type:"number",step:"0.01",required:!0,value:n.price,onChange:t=>d({...n,price:parseFloat(t.target.value)}),className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Preço Promocional"}),e.jsx("input",{type:"number",step:"0.01",value:n.promotional_price,onChange:t=>d({...n,promotional_price:parseFloat(t.target.value)}),className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Taxa IVA (%)"}),e.jsx("input",{type:"number",step:"0.01",value:n.tax_rate,onChange:t=>d({...n,tax_rate:parseFloat(t.target.value)}),className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]}),n.price>0&&n.cost>0&&e.jsxs("div",{className:`p-4 rounded-lg ${s?"bg-gray-800":"bg-gray-100"}`,children:[e.jsxs("p",{className:"text-sm mb-2",children:["Margem: ",e.jsxs("span",{className:"font-bold text-green-500",children:["€",(n.price-n.cost).toFixed(2)]})]}),e.jsxs("p",{className:"text-sm",children:["Margem %: ",e.jsxs("span",{className:"font-bold text-green-500",children:[((n.price-n.cost)/n.price*100).toFixed(2),"%"]})]})]}),e.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2 pt-4",children:[e.jsx("i",{className:"ri-stack-line text-yellow-500"}),"Estoque & Logística"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Estoque Atual"}),e.jsx("input",{type:"number",value:n.stock,onChange:t=>d({...n,stock:parseInt(t.target.value)}),className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Estoque Mínimo"}),e.jsx("input",{type:"number",value:n.min_stock,onChange:t=>d({...n,min_stock:parseInt(t.target.value)}),className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Localização no Armazém"}),e.jsx("input",{type:"text",value:n.warehouse_location,onChange:t=>d({...n,warehouse_location:t.target.value}),placeholder:"Ex: A-12-3",className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Peso (kg)"}),e.jsx("input",{type:"number",step:"0.01",value:n.weight,onChange:t=>d({...n,weight:parseFloat(t.target.value)}),className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Dimensões (LxAxP cm)"}),e.jsx("input",{type:"text",value:n.dimensions,onChange:t=>d({...n,dimensions:t.target.value}),placeholder:"30x20x10",className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"País de Origem"}),e.jsx("input",{type:"text",value:n.country_origin,onChange:t=>d({...n,country_origin:t.target.value}),placeholder:"Portugal",className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"is_dropshipping",checked:n.is_dropshipping,onChange:t=>d({...n,is_dropshipping:t.target.checked}),className:"w-4 h-4 rounded border-gray-300"}),e.jsx("label",{htmlFor:"is_dropshipping",className:"text-sm font-medium",children:"Produto Dropshipping"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx("i",{className:"ri-seo-line text-yellow-500"}),"SEO & Meta Tags"]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Meta Título"}),e.jsx("input",{type:"text",value:n.meta_title,onChange:t=>d({...n,meta_title:t.target.value}),maxLength:60,className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[n.meta_title.length,"/60 caracteres"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Meta Descrição"}),e.jsx("textarea",{value:n.meta_description,onChange:t=>d({...n,meta_description:t.target.value}),maxLength:160,rows:3,className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[n.meta_description.length,"/160 caracteres"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Palavras-chave (separadas por vírgula)"}),e.jsx("input",{type:"text",value:n.meta_keywords,onChange:t=>d({...n,meta_keywords:t.target.value}),className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Tags (separadas por vírgula)"}),e.jsx("input",{type:"text",value:n.tags,onChange:t=>d({...n,tags:t.target.value}),placeholder:"eletrônicos, tecnologia, gadgets",className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-4 pt-6 border-t border-gray-800",children:[e.jsx("button",{type:"button",onClick:x,className:"px-6 py-2 rounded-lg border border-gray-700 hover:bg-gray-800 transition-colors whitespace-nowrap",children:"Cancelar"}),e.jsx("button",{type:"submit",disabled:c,className:"px-6 py-2 bg-gradient-to-r from-yellow-500 to-yellow-600 text-black font-medium rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap",children:c?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-black border-t-transparent rounded-full animate-spin"}),"Salvando..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-save-line"}),"Salvar Produto"]})})]})]})]})})}function he({darkMode:s}){const[a,x]=o.useState([]),[h,n]=o.useState([]),[d,g]=o.useState(!0),[y,w]=o.useState(""),[m,l]=o.useState("all"),[r,c]=o.useState("all"),[b,$]=o.useState(!1),[v,C]=o.useState(null),[t,N]=o.useState([]);o.useEffect(()=>{f()},[]);const f=async()=>{try{const{data:p,error:k}=await j.from("products").select("*, categories(name)").order("created_at",{ascending:!1});if(k)throw k;x(p||[])}catch(p){console.error("Erro ao carregar produtos:",p)}finally{g(!1)}},R=()=>{const p=[["ID","Nome","SKU","Preço","Estoque","Categoria","Status"].join(","),..._.map(S=>[S.id,S.name,S.sku,S.price,S.stock,h.find(A=>A.id===S.category_id)?.name||"",S.status].join(","))].join(`
`),k=new Blob([p],{type:"text/csv"}),E=window.URL.createObjectURL(k),I=document.createElement("a");I.href=E,I.download=`produtos_${new Date().toISOString().split("T")[0]}.csv`,I.click()},_=a.filter(p=>{const k=p.name.toLowerCase().includes(y.toLowerCase())||p.sku?.toLowerCase().includes(y.toLowerCase()),E=m==="all"||p.category_id===m,I=r==="all"||p.status===r;return k&&E&&I}),u=[{id:1,name:"CRUD Completo",icon:"ri-edit-line",active:!0},{id:2,name:"Upload Múltiplo",icon:"ri-upload-line",active:!0},{id:3,name:"Editor WYSIWYG",icon:"ri-text",active:!0},{id:4,name:"SKU/UPC/EAN",icon:"ri-barcode-line",active:!0},{id:5,name:"Variantes",icon:"ri-list-check",active:!0},{id:6,name:"Preços Promocionais",icon:"ri-price-tag-3-line",active:!0},{id:7,name:"Custo/Margem/Lucro",icon:"ri-calculator-line",active:!0},{id:8,name:"Multi-Warehouse",icon:"ri-building-line",active:!0},{id:9,name:"Alertas de Estoque",icon:"ri-alarm-warning-line",active:!0},{id:10,name:"Bulk CSV Import",icon:"ri-file-excel-line",active:!0},{id:11,name:"Histórico Audit",icon:"ri-history-line",active:!0},{id:12,name:"Bundles",icon:"ri-stack-line",active:!0},{id:13,name:"Etiquetas Envio",icon:"ri-printer-line",active:!0},{id:14,name:"A/B Testing",icon:"ri-test-tube-line",active:!0},{id:15,name:"Bloqueio Regional",icon:"ri-map-pin-line",active:!0},{id:16,name:"Imagens Regionais",icon:"ri-image-line",active:!0},{id:17,name:"Moderação Reviews",icon:"ri-star-line",active:!0},{id:18,name:"Analytics por SKU",icon:"ri-line-chart-line",active:!0},{id:19,name:"SEO Avançado",icon:"ri-seo-line",active:!0},{id:20,name:"Peso/Dimensões",icon:"ri-ruler-line",active:!0},{id:21,name:"Tags/Etiquetas",icon:"ri-price-tag-line",active:!0},{id:22,name:"Duplicar Produto",icon:"ri-file-copy-line",active:!0},{id:23,name:"Exportar Produtos",icon:"ri-download-line",active:!0},{id:24,name:"Importar Produtos",icon:"ri-upload-cloud-line",active:!0},{id:25,name:"Rollback Changes",icon:"ri-arrow-go-back-line",active:!0}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[e.jsx("i",{className:"ri-box-3-line text-yellow-500"}),"Gestão de Produtos"]}),e.jsx("p",{className:"text-gray-400 mt-1",children:"Gerencie todo o catálogo de produtos"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:R,className:`px-4 py-2 rounded-lg border ${s?"border-gray-700":"border-gray-300"} hover:bg-gray-800 transition-colors flex items-center gap-2 whitespace-nowrap`,children:[e.jsx("i",{className:"ri-download-line"}),"Exportar CSV"]}),e.jsxs("button",{onClick:()=>{C(null),$(!0)},className:"px-4 py-2 bg-gradient-to-r from-yellow-500 to-yellow-600 text-black font-medium rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap",children:[e.jsx("i",{className:"ri-add-line"}),"Novo Produto"]})]})]}),e.jsxs("div",{className:`p-6 rounded-xl ${s?"bg-gray-900":"bg-gray-50"} border ${s?"border-gray-800":"border-gray-200"}`,children:[e.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[e.jsx("i",{className:"ri-function-line text-yellow-500"}),"25+ Controles de Produtos Disponíveis"]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-3",children:u.map(p=>e.jsxs("div",{className:`p-3 rounded-lg ${s?"bg-gray-800":"bg-white"} border ${s?"border-gray-700":"border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("i",{className:`${p.icon} text-yellow-500`}),e.jsx("span",{className:`w-2 h-2 rounded-full ${p.active?"bg-green-500":"bg-gray-500"}`})]}),e.jsx("p",{className:"text-xs font-medium",children:p.name})]},p.id))})]}),e.jsx("div",{className:"flex flex-wrap items-center justify-between gap-4",children:e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsxs("div",{className:"relative flex-1 max-w-md",children:[e.jsx("i",{className:"ri-search-line absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Buscar por nome ou SKU...",value:y,onChange:p=>w(p.target.value),className:`w-full pl-10 pr-4 py-2 rounded-lg ${s?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]}),e.jsxs("select",{value:r,onChange:p=>c(p.target.value),className:`px-4 py-2 rounded-lg ${s?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`,children:[e.jsx("option",{value:"all",children:"Todos Status"}),e.jsx("option",{value:"active",children:"Ativo"}),e.jsx("option",{value:"inactive",children:"Inativo"}),e.jsx("option",{value:"draft",children:"Rascunho"})]})]})}),b&&e.jsx(pe,{darkMode:s,product:v,onClose:()=>{$(!1),C(null)},onSave:f}),e.jsx("div",{className:`rounded-xl overflow-hidden ${s?"bg-gray-900":"bg-gray-50"} border ${s?"border-gray-800":"border-gray-200"}`,children:d?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"w-12 h-12 border-4 border-yellow-500 border-t-transparent rounded-full animate-spin"})}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:s?"bg-gray-800":"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left",children:e.jsx("input",{type:"checkbox",checked:t.length===_.length&&_.length>0,onChange:p=>{p.target.checked?N(_.map(k=>k.id)):N([])},className:"w-4 h-4 rounded border-gray-300"})}),e.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:"Produto"}),e.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:"SKU"}),e.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:"Preço"}),e.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:"Estoque"}),e.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:"Status"}),e.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:"Ações"})]})}),e.jsx("tbody",{children:_.map(p=>e.jsxs("tr",{className:`border-t ${s?"border-gray-800 hover:bg-gray-800":"border-gray-200 hover:bg-gray-50"} transition-colors`,children:[e.jsx("td",{className:"px-6 py-4",children:e.jsx("input",{type:"checkbox",checked:t.includes(p.id),onChange:k=>{k.target.checked?N([...t,p.id]):N(t.filter(E=>E!==p.id))},className:"w-4 h-4 rounded border-gray-300"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gray-700 rounded-lg overflow-hidden flex items-center justify-center",children:p.image?e.jsx("img",{src:p.image,alt:p.name,className:"w-full h-full object-cover"}):e.jsx("i",{className:"ri-image-line text-gray-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:p.name}),e.jsx("p",{className:`text-sm ${s?"text-gray-400":"text-gray-600"}`,children:p.categories?.name||"Sem categoria"})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`text-sm ${s?"text-gray-400":"text-gray-600"}`,children:p.sku||"-"})}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsxs("span",{className:"font-medium text-yellow-500",children:["R$ ",p.price?.toFixed(2)]}),p.promotional_price&&e.jsxs("p",{className:"text-xs text-green-500",children:["Promo: R$ ",p.promotional_price.toFixed(2)]})]}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("span",{className:`font-medium ${p.stock<=p.min_stock?"text-red-500":"text-green-500"}`,children:p.stock||0}),p.stock<=p.min_stock&&e.jsx("p",{className:"text-xs text-red-500",children:"Estoque baixo!"})]}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${p.status==="active"?"bg-green-500/20 text-green-500":p.status==="inactive"?"bg-gray-500/20 text-gray-500":"bg-yellow-500/20 text-yellow-500"}`,children:p.status==="active"?"Ativo":p.status==="inactive"?"Inativo":"Rascunho"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>{C(p),$(!0)},className:"p-2 rounded-lg bg-blue-500/10 text-blue-500 hover:bg-blue-500/20 transition-colors",children:e.jsx("i",{className:"ri-edit-line"})}),e.jsx("button",{className:"p-2 rounded-lg bg-purple-500/10 text-purple-500 hover:bg-purple-500/20 transition-colors",children:e.jsx("i",{className:"ri-file-copy-line"})}),e.jsx("button",{className:"p-2 rounded-lg bg-red-500/10 text-red-500 hover:bg-red-500/20 transition-colors",children:e.jsx("i",{className:"ri-delete-bin-line"})})]})})]},p.id))})]})})})]})}function be({darkMode:s}){const[a,x]=o.useState([]),[h,n]=o.useState(!0),[d,g]=o.useState(!1),[y,w]=o.useState(null);o.useEffect(()=>{m()},[]);const m=async()=>{try{const{data:r,error:c}=await j.from("categories").select("*").order("display_order",{ascending:!0});if(c)throw c;x(r||[])}catch(r){console.error("Erro ao carregar categorias:",r)}finally{n(!1)}},l=[{id:1,name:"Árvore Aninhada",icon:"ri-node-tree"},{id:2,name:"Drag & Drop",icon:"ri-drag-move-line"},{id:3,name:"SEO por Categoria",icon:"ri-seo-line"},{id:4,name:"Landing Pages Custom",icon:"ri-pages-line"},{id:5,name:"Filtros Configuráveis",icon:"ri-filter-3-line"},{id:6,name:"Banners por Categoria",icon:"ri-image-line"},{id:7,name:"Priorização Produtos",icon:"ri-sort-asc"},{id:8,name:"Redirecionamentos",icon:"ri-arrow-right-line"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:`p-6 rounded-xl ${s?"bg-gray-900":"bg-gray-50"} border ${s?"border-gray-800":"border-gray-200"}`,children:[e.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[e.jsx("i",{className:"ri-function-line text-yellow-500"}),"8+ Controles de Categorias & Navegação"]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:l.map(r=>e.jsxs("div",{className:`p-3 rounded-lg ${s?"bg-gray-800":"bg-white"} border ${s?"border-gray-700":"border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("i",{className:`${r.icon} text-yellow-500`}),e.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500"})]}),e.jsx("p",{className:"text-xs font-medium",children:r.name})]},r.id))})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-xl font-bold",children:"Gerenciar Categorias"}),e.jsxs("button",{onClick:()=>{w(null),g(!0)},className:"px-6 py-2 bg-gradient-to-r from-yellow-500 to-yellow-600 text-black font-medium rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap",children:[e.jsx("i",{className:"ri-add-line text-xl"}),"Nova Categoria"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:h?e.jsx("div",{className:"col-span-full flex items-center justify-center h-64",children:e.jsx("div",{className:"w-12 h-12 border-4 border-yellow-500 border-t-transparent rounded-full animate-spin"})}):a.length===0?e.jsxs("div",{className:"col-span-full text-center py-12",children:[e.jsx("i",{className:"ri-folder-line text-6xl text-gray-600 mb-4"}),e.jsx("p",{className:`text-lg ${s?"text-gray-400":"text-gray-600"} mb-4`,children:"Nenhuma categoria criada ainda"}),e.jsx("button",{onClick:()=>g(!0),className:"px-6 py-2 bg-gradient-to-r from-yellow-500 to-yellow-600 text-black font-medium rounded-lg hover:opacity-90 transition-opacity whitespace-nowrap",children:"Criar Primeira Categoria"})]}):a.map(r=>e.jsxs("div",{className:`p-6 rounded-xl ${s?"bg-gray-900":"bg-gray-50"} border ${s?"border-gray-800":"border-gray-200"} hover:border-yellow-500 transition-colors cursor-move`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[r.icon?e.jsx("i",{className:`${r.icon} text-3xl text-yellow-500`}):e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-yellow-500 to-yellow-600 rounded-lg flex items-center justify-center",children:e.jsx("i",{className:"ri-folder-line text-2xl text-black"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-lg",children:r.name}),e.jsxs("p",{className:`text-sm ${s?"text-gray-400":"text-gray-600"}`,children:[r.product_count||0," produtos"]})]})]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${r.is_active?"bg-green-500/20 text-green-500":"bg-gray-500/20 text-gray-500"}`,children:r.is_active?"Ativa":"Inativa"})]}),r.description&&e.jsx("p",{className:`text-sm ${s?"text-gray-400":"text-gray-600"} mb-4`,children:r.description}),r.seo_title&&e.jsxs("div",{className:`p-3 rounded-lg ${s?"bg-gray-800":"bg-white"} mb-4`,children:[e.jsx("p",{className:"text-xs text-yellow-500 mb-1",children:"SEO Configurado"}),e.jsx("p",{className:"text-sm font-medium",children:r.seo_title})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>{w(r),g(!0)},className:"flex-1 p-2 rounded-lg bg-blue-500/10 text-blue-500 hover:bg-blue-500/20 transition-colors font-medium whitespace-nowrap",children:[e.jsx("i",{className:"ri-edit-line mr-2"}),"Editar"]}),e.jsxs("button",{className:"flex-1 p-2 rounded-lg bg-purple-500/10 text-purple-500 hover:bg-purple-500/20 transition-colors font-medium whitespace-nowrap",children:[e.jsx("i",{className:"ri-image-line mr-2"}),"Banner"]}),e.jsx("button",{className:"p-2 rounded-lg bg-red-500/10 text-red-500 hover:bg-red-500/20 transition-colors",children:e.jsx("i",{className:"ri-delete-bin-line"})})]})]},r.id))}),e.jsxs("div",{className:`p-6 rounded-xl ${s?"bg-gray-900":"bg-gray-50"} border ${s?"border-gray-800":"border-gray-200"}`,children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:"Configurações Avançadas"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:`p-4 rounded-lg ${s?"bg-gray-800":"bg-white"} border ${s?"border-gray-700":"border-gray-200"}`,children:[e.jsxs("h4",{className:"font-medium mb-2 flex items-center gap-2",children:[e.jsx("i",{className:"ri-filter-3-line text-yellow-500"}),"Filtros Personalizados"]}),e.jsx("p",{className:`text-sm ${s?"text-gray-400":"text-gray-600"} mb-3`,children:"Configure filtros específicos para cada categoria"}),e.jsx("button",{className:"px-4 py-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-lg hover:opacity-90 transition-opacity text-sm whitespace-nowrap",children:"Configurar Filtros"})]}),e.jsxs("div",{className:`p-4 rounded-lg ${s?"bg-gray-800":"bg-white"} border ${s?"border-gray-700":"border-gray-200"}`,children:[e.jsxs("h4",{className:"font-medium mb-2 flex items-center gap-2",children:[e.jsx("i",{className:"ri-arrow-right-line text-yellow-500"}),"Redirecionamentos"]}),e.jsx("p",{className:`text-sm ${s?"text-gray-400":"text-gray-600"} mb-3`,children:"Gerencie redirecionamentos e sinônimos de categorias"}),e.jsx("button",{className:"px-4 py-2 bg-gradient-to-r from-purple-500 to-purple-600 text-white rounded-lg hover:opacity-90 transition-opacity text-sm whitespace-nowrap",children:"Gerenciar Redirecionamentos"})]})]})]})]})}function ye({darkMode:s}){const[a,x]=o.useState([]),[h,n]=o.useState(!0),[d,g]=o.useState("all"),[y,w]=o.useState(""),[m,l]=o.useState([]),[r,c]=o.useState(!1),[b,$]=o.useState(null);o.useEffect(()=>{v()},[]);const v=async()=>{try{const{data:_,error:u}=await j.from("orders").select("*, profiles(email, full_name)").order("created_at",{ascending:!1});if(u)throw u;x(_||[])}catch(_){console.error("Erro ao carregar pedidos:",_)}finally{n(!1)}},C=async(_,u)=>{try{const{error:p}=await j.from("orders").update({status:u}).eq("id",_);if(p)throw p;await v(),alert("Status atualizado com sucesso!")}catch(p){console.error("Erro ao atualizar status:",p),alert("Erro ao atualizar status")}},t=_=>{alert("Gerando PDF da fatura...")},N=a.filter(_=>{const u=_.id.toLowerCase().includes(y.toLowerCase())||_.profiles?.email?.toLowerCase().includes(y.toLowerCase()),p=d==="all"||_.status===d;return u&&p}),f=[{id:1,name:"Visualizar Pedidos",icon:"ri-eye-line"},{id:2,name:"Filtros Avançados",icon:"ri-filter-line"},{id:3,name:"Editar Status",icon:"ri-edit-line"},{id:4,name:"Reprocessar Pagamento",icon:"ri-refresh-line"},{id:5,name:"Reembolsos Stripe",icon:"ri-refund-line"},{id:6,name:"Gerar Invoice PDF",icon:"ri-file-pdf-line"},{id:7,name:"Mapear Envios",icon:"ri-map-pin-line"},{id:8,name:"Export Logística",icon:"ri-download-line"},{id:9,name:"Monitor Chargebacks",icon:"ri-alert-line"},{id:10,name:"E-mails Automatizados",icon:"ri-mail-send-line"},{id:11,name:"Rastreamento Courier",icon:"ri-truck-line"},{id:12,name:"Ajuste Manual Taxas",icon:"ri-calculator-line"}],R=[{value:"pending",label:"Pendente",color:"yellow"},{value:"processing",label:"Processando",color:"blue"},{value:"shipped",label:"Enviado",color:"purple"},{value:"delivered",label:"Entregue",color:"green"},{value:"cancelled",label:"Cancelado",color:"red"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:`p-6 rounded-xl ${s?"bg-gray-900":"bg-gray-50"} border ${s?"border-gray-800":"border-gray-200"}`,children:[e.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[e.jsx("i",{className:"ri-function-line text-yellow-500"}),"12+ Controles de Pedidos & Pagamentos"]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:f.map(_=>e.jsxs("div",{className:`p-3 rounded-lg ${s?"bg-gray-800":"bg-white"} border ${s?"border-gray-700":"border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("i",{className:`${_.icon} text-yellow-500`}),e.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500"})]}),e.jsx("p",{className:"text-xs font-medium",children:_.name})]},_.id))})]}),e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsxs("div",{className:"relative flex-1 max-w-md",children:[e.jsx("i",{className:"ri-search-line absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Buscar por ID ou cliente...",value:y,onChange:_=>w(_.target.value),className:`w-full pl-10 pr-4 py-2 rounded-lg ${s?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]}),e.jsxs("select",{value:d,onChange:_=>g(_.target.value),className:`px-4 py-2 rounded-lg ${s?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`,children:[e.jsx("option",{value:"all",children:"Todos Status"}),R.map(_=>e.jsx("option",{value:_.value,children:_.label},_.value))]})]}),e.jsxs("button",{className:"px-6 py-2 bg-gradient-to-r from-green-500 to-green-600 text-white font-medium rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap",children:[e.jsx("i",{className:"ri-download-line text-xl"}),"Exportar Pedidos"]})]}),e.jsx("div",{className:`rounded-xl overflow-hidden ${s?"bg-gray-900":"bg-gray-50"} border ${s?"border-gray-800":"border-gray-200"}`,children:h?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"w-12 h-12 border-4 border-yellow-500 border-t-transparent rounded-full animate-spin"})}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:s?"bg-gray-800":"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:"ID Pedido"}),e.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:"Cliente"}),e.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:"Data"}),e.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:"Total"}),e.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:"Status"}),e.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:"Ações"})]})}),e.jsx("tbody",{children:N.map(_=>e.jsxs("tr",{className:`border-t ${s?"border-gray-800 hover:bg-gray-800":"border-gray-200 hover:bg-gray-50"} transition-colors`,children:[e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"font-mono text-sm",children:_.id.slice(0,8)})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:_.profiles?.full_name||"N/A"}),e.jsx("p",{className:`text-sm ${s?"text-gray-400":"text-gray-600"}`,children:_.profiles?.email})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`text-sm ${s?"text-gray-400":"text-gray-600"}`,children:new Date(_.created_at).toLocaleDateString("pt-BR")})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:"font-bold text-yellow-500",children:["R$ ",_.total?.toFixed(2)]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("select",{value:_.status,onChange:u=>C(_.id,u.target.value),className:`px-3 py-1 rounded-full text-xs font-medium ${_.status==="delivered"?"bg-green-500/20 text-green-500":_.status==="pending"?"bg-yellow-500/20 text-yellow-500":_.status==="cancelled"?"bg-red-500/20 text-red-500":"bg-blue-500/20 text-blue-500"} border-none cursor-pointer`,children:R.map(u=>e.jsx("option",{value:u.value,children:u.label},u.value))})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>t(),className:"p-2 rounded-lg bg-blue-500/10 text-blue-500 hover:bg-blue-500/20 transition-colors",title:"Gerar PDF",children:e.jsx("i",{className:"ri-file-pdf-line"})}),e.jsx("button",{onClick:()=>{$(_),c(!0)},className:"p-2 rounded-lg bg-red-500/10 text-red-500 hover:bg-red-500/20 transition-colors",title:"Reembolso",children:e.jsx("i",{className:"ri-refund-line"})}),e.jsx("button",{className:"p-2 rounded-lg bg-purple-500/10 text-purple-500 hover:bg-purple-500/20 transition-colors",title:"Rastreamento",children:e.jsx("i",{className:"ri-truck-line"})})]})})]},_.id))})]})})})]})}function fe({darkMode:s}){const[a,x]=o.useState([]),[h,n]=o.useState(!0),[d,g]=o.useState(""),[y,w]=o.useState(null),[m,l]=o.useState(!1),[r,c]=o.useState("all");o.useEffect(()=>{b()},[]);const b=async()=>{try{n(!0);const{data:f,error:R}=await j.from("profiles").select("*").order("created_at",{ascending:!1});if(R)throw R;const _=await Promise.all((f||[]).map(async u=>{const{data:p}=await j.from("orders").select("total, status").eq("user_id",u.id),k=p?.length||0,E=p?.reduce((I,S)=>I+(S.total||0),0)||0;return{...u,order_count:k,total_spent:E}}));x(_)}catch(f){console.error("Erro ao carregar clientes:",f)}finally{n(!1)}},$=[{id:1,name:"Perfil Completo",icon:"ri-user-line"},{id:2,name:"Busca Avançada",icon:"ri-search-line"},{id:3,name:"Segmentação",icon:"ri-group-line"},{id:4,name:"Campanhas",icon:"ri-mail-send-line"},{id:5,name:"Templates E-mail",icon:"ri-file-text-line"},{id:6,name:"Notas/Tickets",icon:"ri-sticky-note-line"},{id:7,name:"Merge Contas",icon:"ri-merge-cells-horizontal"},{id:8,name:"Export Marketing",icon:"ri-download-line"},{id:9,name:"Cashback/Crédito",icon:"ri-coin-line"},{id:10,name:"Recuperação Carrinho",icon:"ri-shopping-cart-line"}],v=a.filter(f=>{if(!(f.email?.toLowerCase().includes(d.toLowerCase())||f.full_name?.toLowerCase().includes(d.toLowerCase())))return!1;const _=Math.floor((Date.now()-new Date(f.created_at).getTime())/(1e3*60*60*24));switch(r){case"new":return _<=30;case"vip":return(f.total_spent||0)>=500;case"inactive":return _>90&&(f.order_count||0)===0;default:return!0}}),C={total:a.length,new:a.filter(f=>Math.floor((Date.now()-new Date(f.created_at).getTime())/864e5)<=30).length,vip:a.filter(f=>(f.total_spent||0)>=500).length,inactive:a.filter(f=>Math.floor((Date.now()-new Date(f.created_at).getTime())/864e5)>90&&(f.order_count||0)===0).length},t=f=>f==="admin"?e.jsx("span",{className:"px-2 py-1 bg-purple-500/20 text-purple-400 text-xs font-medium rounded",children:"Admin"}):e.jsx("span",{className:"px-2 py-1 bg-blue-500/20 text-blue-400 text-xs font-medium rounded",children:"Cliente"}),N=f=>{const R=Math.floor((Date.now()-new Date(f.created_at).getTime())/864e5);return R<=30?e.jsx("span",{className:"px-2 py-1 bg-green-500/20 text-green-400 text-xs font-medium rounded",children:"Novo"}):(f.total_spent||0)>=500?e.jsx("span",{className:"px-2 py-1 bg-yellow-500/20 text-yellow-400 text-xs font-medium rounded",children:"VIP"}):R>90&&(f.order_count||0)===0?e.jsx("span",{className:"px-2 py-1 bg-gray-500/20 text-gray-400 text-xs font-medium rounded",children:"Inativo"}):null};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:`p-6 rounded-xl ${s?"bg-gray-900":"bg-white"} border ${s?"border-gray-800":"border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("i",{className:"ri-user-line text-2xl text-blue-500"}),e.jsx("span",{className:"text-2xl font-bold",children:C.total})]}),e.jsx("p",{className:`text-sm ${s?"text-gray-400":"text-gray-600"}`,children:"Total de Clientes"})]}),e.jsxs("div",{className:`p-6 rounded-xl ${s?"bg-gray-900":"bg-white"} border ${s?"border-gray-800":"border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("i",{className:"ri-user-add-line text-2xl text-green-500"}),e.jsx("span",{className:"text-2xl font-bold",children:C.new})]}),e.jsx("p",{className:`text-sm ${s?"text-gray-400":"text-gray-600"}`,children:"Novos (30 dias)"})]}),e.jsxs("div",{className:`p-6 rounded-xl ${s?"bg-gray-900":"bg-white"} border ${s?"border-gray-800":"border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("i",{className:"ri-vip-crown-line text-2xl text-yellow-500"}),e.jsx("span",{className:"text-2xl font-bold",children:C.vip})]}),e.jsx("p",{className:`text-sm ${s?"text-gray-400":"text-gray-600"}`,children:"Clientes VIP"})]}),e.jsxs("div",{className:`p-6 rounded-xl ${s?"bg-gray-900":"bg-white"} border ${s?"border-gray-800":"border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("i",{className:"ri-user-unfollow-line text-2xl text-red-500"}),e.jsx("span",{className:"text-2xl font-bold",children:C.inactive})]}),e.jsx("p",{className:`text-sm ${s?"text-gray-400":"text-gray-600"}`,children:"Inativos"})]})]}),e.jsxs("div",{className:`p-6 rounded-xl ${s?"bg-gray-900":"bg-gray-50"} border ${s?"border-gray-800":"border-gray-200"}`,children:[e.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[e.jsx("i",{className:"ri-function-line text-yellow-500"}),"10+ Controles de Clientes & CRM"]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-3",children:$.map(f=>e.jsxs("div",{className:`p-3 rounded-lg ${s?"bg-gray-800":"bg-white"} border ${s?"border-gray-700":"border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("i",{className:`${f.icon} text-yellow-500`}),e.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500"})]}),e.jsx("p",{className:"text-xs font-medium",children:f.name})]},f.id))})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>c("all"),className:`px-4 py-2 rounded-lg font-medium transition-all ${r==="all"?"bg-gradient-to-r from-[#b62bff] to-[#ff6a00] text-white":s?"bg-gray-800 text-gray-300":"bg-gray-100 text-gray-700"}`,children:["Todos (",C.total,")"]}),e.jsxs("button",{onClick:()=>c("new"),className:`px-4 py-2 rounded-lg font-medium transition-all ${r==="new"?"bg-green-500 text-white":s?"bg-gray-800 text-gray-300":"bg-gray-100 text-gray-700"}`,children:["Novos (",C.new,")"]}),e.jsxs("button",{onClick:()=>c("vip"),className:`px-4 py-2 rounded-lg font-medium transition-all ${r==="vip"?"bg-yellow-500 text-black":s?"bg-gray-800 text-gray-300":"bg-gray-100 text-gray-700"}`,children:["VIP (",C.vip,")"]}),e.jsxs("button",{onClick:()=>c("inactive"),className:`px-4 py-2 rounded-lg font-medium transition-all ${r==="inactive"?"bg-red-500 text-white":s?"bg-gray-800 text-gray-300":"bg-gray-100 text-gray-700"}`,children:["Inativos (",C.inactive,")"]})]}),e.jsxs("div",{className:"relative flex-1 max-w-md",children:[e.jsx("i",{className:"ri-search-line absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Buscar por nome ou email...",value:d,onChange:f=>g(f.target.value),className:`w-full pl-10 pr-4 py-2 rounded-lg ${s?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-[#b62bff]`})]}),e.jsxs("button",{className:"px-6 py-2 bg-gradient-to-r from-green-500 to-green-600 text-white font-medium rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap",children:[e.jsx("i",{className:"ri-download-line text-xl"}),"Exportar"]})]}),e.jsx("div",{className:`rounded-xl overflow-hidden ${s?"bg-gray-900":"bg-white"} border ${s?"border-gray-800":"border-gray-200"}`,children:h?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"w-12 h-12 border-4 border-[#b62bff] border-t-transparent rounded-full animate-spin"})}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:s?"bg-gray-800":"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:"Cliente"}),e.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:"Tipo"}),e.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:"Pedidos"}),e.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:"Total Gasto"}),e.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:"Cadastro"}),e.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:"Ações"})]})}),e.jsx("tbody",{children:v.map(f=>e.jsxs("tr",{className:`border-t ${s?"border-gray-800 hover:bg-gray-800":"border-gray-200 hover:bg-gray-50"} transition-colors`,children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-[#b62bff] to-[#ff6a00] rounded-full flex items-center justify-center text-white font-bold",children:f.full_name?.charAt(0)||f.email?.charAt(0)||"?"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"font-medium",children:f.full_name||"Sem nome"}),t(f.role)]}),e.jsx("p",{className:`text-sm ${s?"text-gray-400":"text-gray-600"}`,children:f.email})]})]})}),e.jsx("td",{className:"px-6 py-4",children:N(f)}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"font-medium",children:f.order_count||0})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:"font-bold text-[#b62bff]",children:["€",(f.total_spent||0).toFixed(2)]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`text-sm ${s?"text-gray-400":"text-gray-600"}`,children:new Date(f.created_at).toLocaleDateString("pt-PT")})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{className:"p-2 rounded-lg bg-blue-500/10 text-blue-500 hover:bg-blue-500/20 transition-colors",children:e.jsx("i",{className:"ri-mail-line"})}),e.jsx("button",{onClick:()=>w(f),className:"p-2 rounded-lg bg-purple-500/10 text-purple-500 hover:bg-purple-500/20 transition-colors",children:e.jsx("i",{className:"ri-eye-line"})})]})})]},f.id))})]})})})]})}function je({darkMode:s}){const[a,x]=o.useState([]),[h,n]=o.useState([]),[d,g]=o.useState({}),[y,w]=o.useState(!0);o.useEffect(()=>{m()},[]);const m=async()=>{try{const[r,c,b]=await Promise.all([j.from("cms_pages").select("*").order("created_at",{ascending:!1}),j.from("banners").select("*").order("display_order",{ascending:!0}),j.from("site_settings").select("*")]);x(r.data||[]),n(c.data||[]);const $={};b.data?.forEach(v=>{$[v.key]=v.value}),g($)}catch(r){console.error("Erro ao carregar conteúdo:",r)}finally{w(!1)}},l=[{id:1,name:"Editor de Tema",icon:"ri-palette-line"},{id:2,name:"Logos/Favicon",icon:"ri-image-line"},{id:3,name:"Editor Homepage",icon:"ri-layout-line"},{id:4,name:"Banners/Sliders",icon:"ri-slideshow-line"},{id:5,name:"CMS Pages",icon:"ri-file-text-line"},{id:6,name:"Gerenciador Arquivos",icon:"ri-folder-line"},{id:7,name:"Multi-língua",icon:"ri-translate-2"},{id:8,name:"Badges/Selos",icon:"ri-award-line"},{id:9,name:"Preview Tempo Real",icon:"ri-eye-line"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:`p-6 rounded-xl ${s?"bg-gray-900":"bg-gray-50"} border ${s?"border-gray-800":"border-gray-200"}`,children:[e.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[e.jsx("i",{className:"ri-function-line text-yellow-500"}),"9+ Controles de Conteúdo & Branding"]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:l.map(r=>e.jsxs("div",{className:`p-3 rounded-lg ${s?"bg-gray-800":"bg-white"} border ${s?"border-gray-700":"border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("i",{className:`${r.icon} text-yellow-500`}),e.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500"})]}),e.jsx("p",{className:"text-xs font-medium",children:r.name})]},r.id))})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:`p-6 rounded-xl ${s?"bg-gray-900":"bg-gray-50"} border ${s?"border-gray-800":"border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-bold",children:"Configurações do Tema"}),e.jsx("button",{className:"p-2 rounded-lg bg-yellow-500 text-black hover:bg-yellow-600 transition-colors",children:e.jsx("i",{className:"ri-save-line text-xl"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${s?"text-gray-300":"text-gray-700"}`,children:"Cor Principal"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"color",defaultValue:"#EAB308",className:"w-16 h-10 rounded-lg cursor-pointer"}),e.jsx("input",{type:"text",defaultValue:"#EAB308",className:`flex-1 px-4 py-2 rounded-lg ${s?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${s?"text-gray-300":"text-gray-700"}`,children:"Fonte Principal"}),e.jsxs("select",{className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`,children:[e.jsx("option",{children:"Inter"}),e.jsx("option",{children:"Roboto"}),e.jsx("option",{children:"Poppins"}),e.jsx("option",{children:"Montserrat"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${s?"text-gray-300":"text-gray-700"}`,children:"Logo do Site"}),e.jsxs("div",{className:`border-2 border-dashed ${s?"border-gray-700":"border-gray-300"} rounded-lg p-8 text-center cursor-pointer hover:border-yellow-500 transition-colors`,children:[e.jsx("i",{className:"ri-upload-cloud-line text-4xl text-gray-400 mb-2"}),e.jsx("p",{className:`text-sm ${s?"text-gray-400":"text-gray-600"}`,children:"Clique para fazer upload ou arraste aqui"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${s?"text-gray-300":"text-gray-700"}`,children:"Favicon"}),e.jsxs("div",{className:`border-2 border-dashed ${s?"border-gray-700":"border-gray-300"} rounded-lg p-8 text-center cursor-pointer hover:border-yellow-500 transition-colors`,children:[e.jsx("i",{className:"ri-image-line text-4xl text-gray-400 mb-2"}),e.jsx("p",{className:`text-sm ${s?"text-gray-400":"text-gray-600"}`,children:"Upload favicon (32x32px)"})]})]})]})]}),e.jsxs("div",{className:`p-6 rounded-xl ${s?"bg-gray-900":"bg-gray-50"} border ${s?"border-gray-800":"border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-bold",children:"Páginas CMS"}),e.jsxs("button",{className:"px-4 py-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white font-medium rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap",children:[e.jsx("i",{className:"ri-add-line text-xl"}),"Nova Página"]})]}),e.jsx("div",{className:"space-y-3",children:a.length===0?e.jsx("p",{className:s?"text-gray-400":"text-gray-600",children:"Nenhuma página criada"}):a.map(r=>e.jsxs("div",{className:`p-4 rounded-lg ${s?"bg-gray-800":"bg-white"} border ${s?"border-gray-700":"border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:r.title}),e.jsxs("p",{className:`text-sm ${s?"text-gray-400":"text-gray-600"}`,children:["/",r.slug]})]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${r.is_published?"bg-green-500/20 text-green-500":"bg-gray-500/20 text-gray-500"}`,children:r.is_published?"Publicada":"Rascunho"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{className:"p-2 rounded-lg bg-blue-500/10 text-blue-500 hover:bg-blue-500/20 transition-colors",children:e.jsx("i",{className:"ri-edit-line"})}),e.jsx("button",{className:"p-2 rounded-lg bg-purple-500/10 text-purple-500 hover:bg-purple-500/20 transition-colors",children:e.jsx("i",{className:"ri-eye-line"})}),e.jsx("button",{className:"p-2 rounded-lg bg-red-500/10 text-red-500 hover:bg-red-500/20 transition-colors",children:e.jsx("i",{className:"ri-delete-bin-line"})})]})]},r.id))})]})]}),e.jsxs("div",{className:`p-6 rounded-xl ${s?"bg-gray-900":"bg-gray-50"} border ${s?"border-gray-800":"border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-bold",children:"Banners & Sliders"}),e.jsxs("button",{className:"px-4 py-2 bg-gradient-to-r from-purple-500 to-purple-600 text-white font-medium rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap",children:[e.jsx("i",{className:"ri-add-line text-xl"}),"Novo Banner"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:h.length===0?e.jsx("p",{className:s?"text-gray-400":"text-gray-600",children:"Nenhum banner criado"}):h.map(r=>e.jsxs("div",{className:`rounded-lg overflow-hidden ${s?"bg-gray-800":"bg-white"} border ${s?"border-gray-700":"border-gray-200"}`,children:[e.jsx("div",{className:"aspect-video bg-gray-700 flex items-center justify-center",children:r.image_url?e.jsx("img",{src:r.image_url,alt:r.title,className:"w-full h-full object-cover"}):e.jsx("i",{className:"ri-image-line text-4xl text-gray-500"})}),e.jsxs("div",{className:"p-4",children:[e.jsx("h4",{className:"font-medium mb-2",children:r.title}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${r.is_active?"bg-green-500/20 text-green-500":"bg-gray-500/20 text-gray-500"}`,children:r.is_active?"Ativo":"Inativo"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{className:"p-1 rounded bg-blue-500/10 text-blue-500 hover:bg-blue-500/20 transition-colors",children:e.jsx("i",{className:"ri-edit-line text-sm"})}),e.jsx("button",{className:"p-1 rounded bg-red-500/10 text-red-500 hover:bg-red-500/20 transition-colors",children:e.jsx("i",{className:"ri-delete-bin-line text-sm"})})]})]})]})]},r.id))})]})]})}function Ne({darkMode:s}){const[a,x]=o.useState([]),[h,n]=o.useState([]),[d,g]=o.useState(!0),[y,w]=o.useState(!1);o.useEffect(()=>{m()},[]);const m=async()=>{try{const[r,c]=await Promise.all([j.from("marketing_campaigns").select("*").order("created_at",{ascending:!1}),j.from("coupons").select("*").order("created_at",{ascending:!1})]);x(r.data||[]),n(c.data||[])}catch(r){console.error("Erro ao carregar dados de marketing:",r)}finally{g(!1)}},l=[{id:1,name:"Cupons de Desconto",icon:"ri-coupon-line"},{id:2,name:"Regras Promocionais",icon:"ri-price-tag-3-line"},{id:3,name:"Scheduling Promoções",icon:"ri-calendar-event-line"},{id:4,name:"ROI Campanhas",icon:"ri-line-chart-line"},{id:5,name:"Upsell One-Click",icon:"ri-arrow-up-circle-line"},{id:6,name:"Push/Web Notifications",icon:"ri-notification-3-line"},{id:7,name:"Pixel Tracking",icon:"ri-eye-line"},{id:8,name:"Banner Tool",icon:"ri-image-add-line"},{id:9,name:"A/B Landing Pages",icon:"ri-test-tube-line"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:`p-6 rounded-xl ${s?"bg-gray-900":"bg-gray-50"} border ${s?"border-gray-800":"border-gray-200"}`,children:[e.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[e.jsx("i",{className:"ri-function-line text-yellow-500"}),"9+ Controles de Promoções & Marketing"]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:l.map(r=>e.jsxs("div",{className:`p-3 rounded-lg ${s?"bg-gray-800":"bg-white"} border ${s?"border-gray-700":"border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("i",{className:`${r.icon} text-yellow-500`}),e.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500"})]}),e.jsx("p",{className:"text-xs font-medium",children:r.name})]},r.id))})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:`p-6 rounded-xl ${s?"bg-gray-900":"bg-gray-50"} border ${s?"border-gray-800":"border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-bold",children:"Cupons Ativos"}),e.jsx("button",{onClick:()=>w(!0),className:"p-2 rounded-lg bg-yellow-500 text-black hover:bg-yellow-600 transition-colors",children:e.jsx("i",{className:"ri-add-line text-xl"})})]}),e.jsx("div",{className:"space-y-3",children:h.length===0?e.jsx("p",{className:s?"text-gray-400":"text-gray-600",children:"Nenhum cupom criado"}):h.slice(0,5).map(r=>e.jsxs("div",{className:`p-4 rounded-lg ${s?"bg-gray-800":"bg-white"} border ${s?"border-gray-700":"border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"font-mono font-bold text-yellow-500",children:r.code}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${r.is_active?"bg-green-500/20 text-green-500":"bg-gray-500/20 text-gray-500"}`,children:r.is_active?"Ativo":"Inativo"})]}),e.jsx("p",{className:`text-sm ${s?"text-gray-400":"text-gray-600"} mb-2`,children:r.description}),e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsxs("span",{className:s?"text-gray-400":"text-gray-600",children:["Usado: ",r.usage_count||0,"/",r.usage_limit||"∞"]}),e.jsx("span",{className:"text-yellow-500 font-medium",children:r.discount_type==="percentage"?`${r.discount_value}%`:`R$ ${r.discount_value}`})]})]},r.id))})]}),e.jsxs("div",{className:`lg:col-span-2 p-6 rounded-xl ${s?"bg-gray-900":"bg-gray-50"} border ${s?"border-gray-800":"border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-bold",children:"Campanhas de Marketing"}),e.jsxs("button",{className:"px-4 py-2 bg-gradient-to-r from-purple-500 to-purple-600 text-white font-medium rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap",children:[e.jsx("i",{className:"ri-add-line text-xl"}),"Nova Campanha"]})]}),d?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"w-12 h-12 border-4 border-yellow-500 border-t-transparent rounded-full animate-spin"})}):a.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("i",{className:"ri-megaphone-line text-6xl text-gray-600 mb-4"}),e.jsx("p",{className:`text-lg ${s?"text-gray-400":"text-gray-600"}`,children:"Nenhuma campanha criada ainda"}),e.jsx("button",{className:"mt-4 px-6 py-2 bg-gradient-to-r from-yellow-500 to-yellow-600 text-black font-medium rounded-lg hover:opacity-90 transition-opacity whitespace-nowrap",children:"Criar Primeira Campanha"})]}):e.jsx("div",{className:"space-y-4",children:a.map(r=>e.jsxs("div",{className:`p-4 rounded-lg ${s?"bg-gray-800":"bg-white"} border ${s?"border-gray-700":"border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-lg",children:r.name}),e.jsx("p",{className:`text-sm ${s?"text-gray-400":"text-gray-600"}`,children:r.description})]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${r.status==="running"?"bg-green-500/20 text-green-500":r.status==="scheduled"?"bg-blue-500/20 text-blue-500":r.status==="completed"?"bg-gray-500/20 text-gray-500":"bg-yellow-500/20 text-yellow-500"}`,children:r.status==="running"?"Em Execução":r.status==="scheduled"?"Agendada":r.status==="completed"?"Concluída":"Rascunho"})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:`text-xs ${s?"text-gray-400":"text-gray-600"}`,children:"Enviados"}),e.jsx("p",{className:"text-lg font-bold",children:r.sent_count||0})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-xs ${s?"text-gray-400":"text-gray-600"}`,children:"Abertos"}),e.jsx("p",{className:"text-lg font-bold text-blue-500",children:r.opened_count||0})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-xs ${s?"text-gray-400":"text-gray-600"}`,children:"Cliques"}),e.jsx("p",{className:"text-lg font-bold text-purple-500",children:r.clicked_count||0})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-xs ${s?"text-gray-400":"text-gray-600"}`,children:"Conversões"}),e.jsx("p",{className:"text-lg font-bold text-green-500",children:r.conversion_count||0})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm font-medium text-yellow-500",children:["ROI: R$ ",r.revenue?.toFixed(2)||"0.00"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{className:"p-2 rounded-lg bg-blue-500/10 text-blue-500 hover:bg-blue-500/20 transition-colors",children:e.jsx("i",{className:"ri-edit-line"})}),e.jsx("button",{className:"p-2 rounded-lg bg-purple-500/10 text-purple-500 hover:bg-purple-500/20 transition-colors",children:e.jsx("i",{className:"ri-bar-chart-line"})}),e.jsx("button",{className:"p-2 rounded-lg bg-red-500/10 text-red-500 hover:bg-red-500/20 transition-colors",children:e.jsx("i",{className:"ri-delete-bin-line"})})]})]})]},r.id))})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[{title:"Taxa de Abertura",value:"24.5%",icon:"ri-mail-open-line",color:"blue"},{title:"Taxa de Clique",value:"8.2%",icon:"ri-cursor-line",color:"purple"},{title:"Taxa de Conversão",value:"3.1%",icon:"ri-shopping-cart-line",color:"green"}].map((r,c)=>e.jsxs("div",{className:`p-6 rounded-xl ${s?"bg-gray-900":"bg-gray-50"} border ${s?"border-gray-800":"border-gray-200"}`,children:[e.jsx("div",{className:`w-12 h-12 rounded-lg bg-${r.color}-500/20 flex items-center justify-center mb-4`,children:e.jsx("i",{className:`${r.icon} text-2xl text-${r.color}-500`})}),e.jsx("h3",{className:`text-sm ${s?"text-gray-400":"text-gray-600"} mb-1`,children:r.title}),e.jsx("p",{className:"text-3xl font-bold",children:r.value})]},c))})]})}function ve({darkMode:s}){const[a,x]=o.useState([]),[h,n]=o.useState(!0),[d,g]=o.useState("month"),[y,w]=o.useState({totalRevenue:0,totalRefunds:0,netRevenue:0,avgOrderValue:0});o.useEffect(()=>{m()},[d]);const m=async()=>{try{const{data:c,error:b}=await j.from("orders").select("*").order("created_at",{ascending:!1});if(b)throw b;const $=c?.reduce((C,t)=>C+(t.total||0),0)||0,v=c?.length?$/c.length:0;w({totalRevenue:$,totalRefunds:0,netRevenue:$,avgOrderValue:v}),x(c||[])}catch(c){console.error("Erro ao carregar dados financeiros:",c)}finally{n(!1)}},l=[{id:1,name:"Relatórios Periódicos",icon:"ri-calendar-line"},{id:2,name:"Por Método Pagamento",icon:"ri-bank-card-line"},{id:3,name:"Margem por Categoria",icon:"ri-pie-chart-line"},{id:4,name:"KPIs (LTV/CAC/AOV)",icon:"ri-dashboard-line"},{id:5,name:"Exports Financeiros",icon:"ri-file-excel-line"},{id:6,name:"Reconciliação Stripe",icon:"ri-refresh-line"},{id:7,name:"Impostos por Região",icon:"ri-government-line"},{id:8,name:"Plano de Contas",icon:"ri-book-line"}],r=[{label:"Receita Total",value:`R$ ${y.totalRevenue.toFixed(2)}`,icon:"ri-money-dollar-circle-line",color:"from-green-500 to-green-600",change:"+12.5%"},{label:"Receita Líquida",value:`R$ ${y.netRevenue.toFixed(2)}`,icon:"ri-line-chart-line",color:"from-blue-500 to-blue-600",change:"+8.2%"},{label:"Ticket Médio (AOV)",value:`R$ ${y.avgOrderValue.toFixed(2)}`,icon:"ri-shopping-cart-line",color:"from-purple-500 to-purple-600",change:"+5.1%"},{label:"Reembolsos",value:`R$ ${y.totalRefunds.toFixed(2)}`,icon:"ri-refund-line",color:"from-red-500 to-red-600",change:"-2.3%"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:`p-6 rounded-xl ${s?"bg-gray-900":"bg-gray-50"} border ${s?"border-gray-800":"border-gray-200"}`,children:[e.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[e.jsx("i",{className:"ri-function-line text-yellow-500"}),"8+ Controles Financeiros & Relatórios"]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:l.map(c=>e.jsxs("div",{className:`p-3 rounded-lg ${s?"bg-gray-800":"bg-white"} border ${s?"border-gray-700":"border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("i",{className:`${c.icon} text-yellow-500`}),e.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500"})]}),e.jsx("p",{className:"text-xs font-medium",children:c.name})]},c.id))})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-2",children:["day","week","month","year"].map(c=>e.jsx("button",{onClick:()=>g(c),className:`px-4 py-2 rounded-lg font-medium transition-all whitespace-nowrap ${d===c?"bg-gradient-to-r from-yellow-500 to-yellow-600 text-black":s?"bg-gray-800 text-gray-300 hover:bg-gray-700":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:c==="day"?"Hoje":c==="week"?"Semana":c==="month"?"Mês":"Ano"},c))}),e.jsxs("button",{className:"px-6 py-2 bg-gradient-to-r from-green-500 to-green-600 text-white font-medium rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap",children:[e.jsx("i",{className:"ri-file-excel-line text-xl"}),"Exportar Relatório"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:r.map((c,b)=>e.jsxs("div",{className:`p-6 rounded-xl ${s?"bg-gray-900":"bg-gray-50"} border ${s?"border-gray-800":"border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:`w-12 h-12 rounded-lg bg-gradient-to-br ${c.color} flex items-center justify-center`,children:e.jsx("i",{className:`${c.icon} text-2xl text-white`})}),e.jsx("span",{className:`text-sm font-medium ${c.change.startsWith("+")?"text-green-500":"text-red-500"}`,children:c.change})]}),e.jsx("h3",{className:`text-sm ${s?"text-gray-400":"text-gray-600"} mb-1`,children:c.label}),e.jsx("p",{className:"text-2xl font-bold",children:c.value})]},b))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:`p-6 rounded-xl ${s?"bg-gray-900":"bg-gray-50"} border ${s?"border-gray-800":"border-gray-200"}`,children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:"Receita por Método de Pagamento"}),e.jsx("div",{className:"space-y-3",children:[{method:"Cartão de Crédito",amount:45230.5,percentage:65,color:"blue"},{method:"PIX",amount:18450,percentage:25,color:"green"},{method:"Boleto",amount:7380,percentage:10,color:"yellow"}].map((c,b)=>e.jsxs("div",{className:`p-4 rounded-lg ${s?"bg-gray-800":"bg-white"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"font-medium",children:c.method}),e.jsxs("span",{className:"font-bold text-yellow-500",children:["R$ ",c.amount.toFixed(2)]})]}),e.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:`bg-${c.color}-500 h-2 rounded-full`,style:{width:`${c.percentage}%`}})}),e.jsxs("p",{className:`text-xs mt-1 ${s?"text-gray-400":"text-gray-600"}`,children:[c.percentage,"% do total"]})]},b))})]}),e.jsxs("div",{className:`p-6 rounded-xl ${s?"bg-gray-900":"bg-gray-50"} border ${s?"border-gray-800":"border-gray-200"}`,children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:"Margem por Categoria"}),e.jsx("div",{className:"space-y-3",children:[{category:"Tecnologia",revenue:35e3,cost:2e4,margin:42.8},{category:"Casa & Decoração",revenue:18e3,cost:12e3,margin:33.3},{category:"Ferramentas",revenue:12e3,cost:7e3,margin:41.6}].map((c,b)=>e.jsxs("div",{className:`p-4 rounded-lg ${s?"bg-gray-800":"bg-white"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"font-medium",children:c.category}),e.jsxs("span",{className:"text-green-500 font-bold",children:[c.margin.toFixed(1),"%"]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{className:s?"text-gray-400":"text-gray-600",children:["Receita: R$ ",c.revenue.toFixed(2)]}),e.jsxs("span",{className:s?"text-gray-400":"text-gray-600",children:["Custo: R$ ",c.cost.toFixed(2)]})]})]},b))})]})]})]})}function we({darkMode:s}){const[a,x]=o.useState([]),[h,n]=o.useState([]),[d,g]=o.useState([]),[y,w]=o.useState(!0);o.useEffect(()=>{m()},[]);const m=async()=>{try{const[r,c,b]=await Promise.all([j.from("audit_logs").select("*, profiles(email)").order("created_at",{ascending:!1}).limit(50),j.from("api_keys").select("*").order("created_at",{ascending:!1}),j.from("webhooks").select("*").order("created_at",{ascending:!1})]);x(r.data||[]),n(c.data||[]),g(b.data||[])}catch(r){console.error("Erro ao carregar dados de segurança:",r)}finally{w(!1)}},l=[{id:1,name:"Audit Log",icon:"ri-history-line"},{id:2,name:"Gestão API Keys",icon:"ri-key-line"},{id:3,name:"Webhooks",icon:"ri-webhook-line"},{id:4,name:"RLS Policies",icon:"ri-shield-check-line"},{id:5,name:"Backups Agendados",icon:"ri-database-line"},{id:6,name:"Controle de Sessões",icon:"ri-user-settings-line"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:`p-6 rounded-xl ${s?"bg-gray-900":"bg-gray-50"} border ${s?"border-gray-800":"border-gray-200"}`,children:[e.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[e.jsx("i",{className:"ri-function-line text-yellow-500"}),"6+ Controles de Segurança & Infraestrutura"]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:l.map(r=>e.jsxs("div",{className:`p-3 rounded-lg ${s?"bg-gray-800":"bg-white"} border ${s?"border-gray-700":"border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("i",{className:`${r.icon} text-yellow-500`}),e.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500"})]}),e.jsx("p",{className:"text-xs font-medium",children:r.name})]},r.id))})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:`p-6 rounded-xl ${s?"bg-gray-900":"bg-gray-50"} border ${s?"border-gray-800":"border-gray-200"}`,children:[e.jsx("div",{className:"w-12 h-12 rounded-lg bg-green-500/20 flex items-center justify-center mb-4",children:e.jsx("i",{className:"ri-shield-check-line text-2xl text-green-500"})}),e.jsx("h3",{className:`text-sm ${s?"text-gray-400":"text-gray-600"} mb-1`,children:"Status de Segurança"}),e.jsx("p",{className:"text-3xl font-bold text-green-500",children:"Seguro"}),e.jsx("p",{className:`text-xs mt-2 ${s?"text-gray-400":"text-gray-600"}`,children:"Todas as políticas ativas"})]}),e.jsxs("div",{className:`p-6 rounded-xl ${s?"bg-gray-900":"bg-gray-50"} border ${s?"border-gray-800":"border-gray-200"}`,children:[e.jsx("div",{className:"w-12 h-12 rounded-lg bg-blue-500/20 flex items-center justify-center mb-4",children:e.jsx("i",{className:"ri-key-line text-2xl text-blue-500"})}),e.jsx("h3",{className:`text-sm ${s?"text-gray-400":"text-gray-600"} mb-1`,children:"API Keys Ativas"}),e.jsx("p",{className:"text-3xl font-bold",children:h.filter(r=>r.is_active).length}),e.jsxs("p",{className:`text-xs mt-2 ${s?"text-gray-400":"text-gray-600"}`,children:[h.length," total"]})]}),e.jsxs("div",{className:`p-6 rounded-xl ${s?"bg-gray-900":"bg-gray-50"} border ${s?"border-gray-800":"border-gray-200"}`,children:[e.jsx("div",{className:"w-12 h-12 rounded-lg bg-purple-500/20 flex items-center justify-center mb-4",children:e.jsx("i",{className:"ri-database-line text-2xl text-purple-500"})}),e.jsx("h3",{className:`text-sm ${s?"text-gray-400":"text-gray-600"} mb-1`,children:"Último Backup"}),e.jsx("p",{className:"text-3xl font-bold",children:"Hoje"}),e.jsx("p",{className:`text-xs mt-2 ${s?"text-gray-400":"text-gray-600"}`,children:"Automático diário"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:`p-6 rounded-xl ${s?"bg-gray-900":"bg-gray-50"} border ${s?"border-gray-800":"border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-bold",children:"API Keys"}),e.jsxs("button",{className:"px-4 py-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white font-medium rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap",children:[e.jsx("i",{className:"ri-add-line text-xl"}),"Nova Key"]})]}),e.jsx("div",{className:"space-y-3",children:h.length===0?e.jsx("p",{className:s?"text-gray-400":"text-gray-600",children:"Nenhuma API key criada"}):h.map(r=>e.jsxs("div",{className:`p-4 rounded-lg ${s?"bg-gray-800":"bg-white"} border ${s?"border-gray-700":"border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:r.name}),e.jsxs("p",{className:`text-xs font-mono ${s?"text-gray-400":"text-gray-600"}`,children:[r.key_hash.slice(0,20),"..."]})]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${r.is_active?"bg-green-500/20 text-green-500":"bg-gray-500/20 text-gray-500"}`,children:r.is_active?"Ativa":"Inativa"})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsxs("span",{className:s?"text-gray-400":"text-gray-600",children:["Último uso: ",r.last_used?new Date(r.last_used).toLocaleDateString("pt-BR"):"Nunca"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{className:"p-1 rounded bg-blue-500/10 text-blue-500 hover:bg-blue-500/20 transition-colors",children:e.jsx("i",{className:"ri-edit-line"})}),e.jsx("button",{className:"p-1 rounded bg-red-500/10 text-red-500 hover:bg-red-500/20 transition-colors",children:e.jsx("i",{className:"ri-delete-bin-line"})})]})]})]},r.id))})]}),e.jsxs("div",{className:`p-6 rounded-xl ${s?"bg-gray-900":"bg-gray-50"} border ${s?"border-gray-800":"border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-bold",children:"Webhooks"}),e.jsxs("button",{className:"px-4 py-2 bg-gradient-to-r from-purple-500 to-purple-600 text-white font-medium rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap",children:[e.jsx("i",{className:"ri-add-line text-xl"}),"Novo Webhook"]})]}),e.jsx("div",{className:"space-y-3",children:d.length===0?e.jsx("p",{className:s?"text-gray-400":"text-gray-600",children:"Nenhum webhook configurado"}):d.map(r=>e.jsxs("div",{className:`p-4 rounded-lg ${s?"bg-gray-800":"bg-white"} border ${s?"border-gray-700":"border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex-1 mr-2",children:[e.jsx("p",{className:"font-medium",children:r.name}),e.jsx("p",{className:`text-xs ${s?"text-gray-400":"text-gray-600"} truncate`,children:r.url})]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs whitespace-nowrap ${r.is_active?"bg-green-500/20 text-green-500":"bg-gray-500/20 text-gray-500"}`,children:r.is_active?"Ativo":"Inativo"})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"text-green-500",children:["✓ ",r.success_count||0]}),e.jsxs("span",{className:"text-red-500",children:["✗ ",r.failure_count||0]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{className:"p-1 rounded bg-blue-500/10 text-blue-500 hover:bg-blue-500/20 transition-colors",children:e.jsx("i",{className:"ri-edit-line"})}),e.jsx("button",{className:"p-1 rounded bg-red-500/10 text-red-500 hover:bg-red-500/20 transition-colors",children:e.jsx("i",{className:"ri-delete-bin-line"})})]})]})]},r.id))})]})]}),e.jsxs("div",{className:`p-6 rounded-xl ${s?"bg-gray-900":"bg-gray-50"} border ${s?"border-gray-800":"border-gray-200"}`,children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:"Audit Log (Últimas 50 ações)"}),y?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"w-12 h-12 border-4 border-yellow-500 border-t-transparent rounded-full animate-spin"})}):a.length===0?e.jsx("p",{className:s?"text-gray-400":"text-gray-600",children:"Nenhuma ação registrada"}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:s?"bg-gray-800":"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:"Data/Hora"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:"Usuário"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:"Ação"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:"Tabela"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:"IP"})]})}),e.jsx("tbody",{children:a.map(r=>e.jsxs("tr",{className:`border-t ${s?"border-gray-800":"border-gray-200"}`,children:[e.jsx("td",{className:"px-4 py-3 text-sm",children:new Date(r.created_at).toLocaleString("pt-BR")}),e.jsx("td",{className:"px-4 py-3 text-sm",children:r.profiles?.email||"Sistema"}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${r.action.includes("create")||r.action.includes("insert")?"bg-green-500/20 text-green-500":r.action.includes("update")?"bg-blue-500/20 text-blue-500":r.action.includes("delete")?"bg-red-500/20 text-red-500":"bg-gray-500/20 text-gray-500"}`,children:r.action})}),e.jsx("td",{className:"px-4 py-3 text-sm",children:r.table_name||"-"}),e.jsx("td",{className:"px-4 py-3 text-sm font-mono",children:r.ip_address||"-"})]},r.id))})]})})]})]})}function _e({darkMode:s}){const[a,x]=o.useState([]),[h,n]=o.useState([]),[d,g]=o.useState([]),[y,w]=o.useState(!0);o.useEffect(()=>{m()},[]);const m=async()=>{try{const[r,c,b]=await Promise.all([j.from("automation_rules").select("*").order("created_at",{ascending:!1}),j.from("email_templates").select("*").order("created_at",{ascending:!1}),j.from("scheduled_tasks").select("*").order("created_at",{ascending:!1})]);x(r.data||[]),n(c.data||[]),g(b.data||[])}catch(r){console.error("Erro ao carregar automações:",r)}finally{w(!1)}},l=[{id:1,name:"Regras de Evento",icon:"ri-flashlight-line"},{id:2,name:"Automações E-mail",icon:"ri-mail-send-line"},{id:3,name:"Pricing Dinâmico",icon:"ri-price-tag-3-line"},{id:4,name:"Fraud Flags",icon:"ri-shield-check-line"},{id:5,name:"Autoresponder Reviews",icon:"ri-chat-smile-line"},{id:6,name:"Integração ERP",icon:"ri-links-line"},{id:7,name:"Scheduler Tarefas",icon:"ri-calendar-check-line"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:`p-6 rounded-xl ${s?"bg-gray-900":"bg-gray-50"} border ${s?"border-gray-800":"border-gray-200"}`,children:[e.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[e.jsx("i",{className:"ri-function-line text-yellow-500"}),"7+ Controles de Automação & Regras"]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:l.map(r=>e.jsxs("div",{className:`p-3 rounded-lg ${s?"bg-gray-800":"bg-white"} border ${s?"border-gray-700":"border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("i",{className:`${r.icon} text-yellow-500`}),e.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500"})]}),e.jsx("p",{className:"text-xs font-medium",children:r.name})]},r.id))})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:`p-6 rounded-xl ${s?"bg-gray-900":"bg-gray-50"} border ${s?"border-gray-800":"border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-bold",children:"Regras de Automação"}),e.jsxs("button",{className:"px-4 py-2 bg-gradient-to-r from-yellow-500 to-yellow-600 text-black font-medium rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap",children:[e.jsx("i",{className:"ri-add-line text-xl"}),"Nova Regra"]})]}),e.jsx("div",{className:"space-y-3",children:a.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("i",{className:"ri-robot-line text-6xl text-gray-600 mb-4"}),e.jsx("p",{className:`${s?"text-gray-400":"text-gray-600"} mb-4`,children:"Nenhuma regra de automação criada"}),e.jsx("button",{className:"px-6 py-2 bg-gradient-to-r from-yellow-500 to-yellow-600 text-black font-medium rounded-lg hover:opacity-90 transition-opacity whitespace-nowrap",children:"Criar Primeira Regra"})]}):a.map(r=>e.jsxs("div",{className:`p-4 rounded-lg ${s?"bg-gray-800":"bg-white"} border ${s?"border-gray-700":"border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium",children:r.name}),e.jsx("p",{className:`text-sm ${s?"text-gray-400":"text-gray-600"}`,children:r.description})]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ml-2 whitespace-nowrap ${r.is_active?"bg-green-500/20 text-green-500":"bg-gray-500/20 text-gray-500"}`,children:r.is_active?"Ativa":"Inativa"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:`text-xs ${s?"text-gray-400":"text-gray-600"}`,children:["Executada ",r.execution_count||0," vezes"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{className:"p-2 rounded-lg bg-blue-500/10 text-blue-500 hover:bg-blue-500/20 transition-colors",children:e.jsx("i",{className:"ri-edit-line"})}),e.jsx("button",{className:"p-2 rounded-lg bg-red-500/10 text-red-500 hover:bg-red-500/20 transition-colors",children:e.jsx("i",{className:"ri-delete-bin-line"})})]})]})]},r.id))})]}),e.jsxs("div",{className:`p-6 rounded-xl ${s?"bg-gray-900":"bg-gray-50"} border ${s?"border-gray-800":"border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-bold",children:"Templates de E-mail"}),e.jsxs("button",{className:"px-4 py-2 bg-gradient-to-r from-purple-500 to-purple-600 text-white font-medium rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap",children:[e.jsx("i",{className:"ri-add-line text-xl"}),"Novo Template"]})]}),e.jsx("div",{className:"space-y-3",children:h.length===0?e.jsx("p",{className:s?"text-gray-400":"text-gray-600",children:"Nenhum template criado"}):h.map(r=>e.jsxs("div",{className:`p-4 rounded-lg ${s?"bg-gray-800":"bg-white"} border ${s?"border-gray-700":"border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:r.name}),e.jsx("p",{className:`text-sm ${s?"text-gray-400":"text-gray-600"}`,children:r.subject})]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${r.is_active?"bg-green-500/20 text-green-500":"bg-gray-500/20 text-gray-500"}`,children:r.is_active?"Ativo":"Inativo"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{className:"p-2 rounded-lg bg-blue-500/10 text-blue-500 hover:bg-blue-500/20 transition-colors",children:e.jsx("i",{className:"ri-edit-line"})}),e.jsx("button",{className:"p-2 rounded-lg bg-purple-500/10 text-purple-500 hover:bg-purple-500/20 transition-colors",children:e.jsx("i",{className:"ri-eye-line"})}),e.jsx("button",{className:"p-2 rounded-lg bg-red-500/10 text-red-500 hover:bg-red-500/20 transition-colors",children:e.jsx("i",{className:"ri-delete-bin-line"})})]})]},r.id))})]})]}),e.jsxs("div",{className:`p-6 rounded-xl ${s?"bg-gray-900":"bg-gray-50"} border ${s?"border-gray-800":"border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-bold",children:"Tarefas Agendadas"}),e.jsxs("button",{className:"px-4 py-2 bg-gradient-to-r from-green-500 to-green-600 text-white font-medium rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap",children:[e.jsx("i",{className:"ri-add-line text-xl"}),"Nova Tarefa"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:d.length===0?e.jsx("p",{className:s?"text-gray-400":"text-gray-600",children:"Nenhuma tarefa agendada"}):d.map(r=>e.jsxs("div",{className:`p-4 rounded-lg ${s?"bg-gray-800":"bg-white"} border ${s?"border-gray-700":"border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"font-medium",children:r.name}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${r.is_active?"bg-green-500/20 text-green-500":"bg-gray-500/20 text-gray-500"}`,children:r.is_active?"Ativa":"Inativa"})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("i",{className:"ri-time-line text-gray-400"}),e.jsx("span",{className:s?"text-gray-400":"text-gray-600",children:r.schedule_cron})]}),r.last_run&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("i",{className:"ri-check-line text-green-500"}),e.jsxs("span",{className:s?"text-gray-400":"text-gray-600",children:["Última execução: ",new Date(r.last_run).toLocaleString("pt-BR")]})]})]})]},r.id))})]})]})}function $e({darkMode:s}){const[a,x]=o.useState([]),[h,n]=o.useState(!0),[d,g]=o.useState("all"),[y,w]=o.useState("all"),[m,l]=o.useState(null);o.useEffect(()=>{r()},[]);const r=async()=>{try{const{data:t,error:N}=await j.from("support_tickets").select(`
          *,
          profiles!support_tickets_user_id_fkey(email, full_name)
        `).order("created_at",{ascending:!1});if(N)throw N;x(t||[])}catch(t){console.error("Erro ao carregar tickets:",t)}finally{n(!1)}},c=async(t,N)=>{try{const{error:f}=await j.from("support_tickets").update({status:N}).eq("id",t);if(f)throw f;await r()}catch(f){console.error("Erro ao atualizar status:",f)}},b=[{id:1,name:"Chat Interno",icon:"ri-chat-3-line"},{id:2,name:"Sistema de Tickets",icon:"ri-ticket-line"},{id:3,name:"Import/Export Catálogo",icon:"ri-file-transfer-line"},{id:4,name:"Painel de Tarefas",icon:"ri-task-line"},{id:5,name:"Modo Manutenção",icon:"ri-tools-line"},{id:6,name:"Simular Pedido",icon:"ri-shopping-cart-2-line"}],$=a.filter(t=>{const N=d==="all"||t.status===d,f=y==="all"||t.priority===y;return N&&f}),v=[{value:"open",label:"Aberto",color:"yellow"},{value:"in_progress",label:"Em Progresso",color:"blue"},{value:"waiting",label:"Aguardando",color:"purple"},{value:"resolved",label:"Resolvido",color:"green"},{value:"closed",label:"Fechado",color:"gray"}],C=[{value:"low",label:"Baixa",color:"gray"},{value:"medium",label:"Média",color:"blue"},{value:"high",label:"Alta",color:"yellow"},{value:"urgent",label:"Urgente",color:"red"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:`p-6 rounded-xl ${s?"bg-gray-900":"bg-gray-50"} border ${s?"border-gray-800":"border-gray-200"}`,children:[e.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[e.jsx("i",{className:"ri-function-line text-yellow-500"}),"6+ Controles de Suporte & Operações"]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:b.map(t=>e.jsxs("div",{className:`p-3 rounded-lg ${s?"bg-gray-800":"bg-white"} border ${s?"border-gray-700":"border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("i",{className:`${t.icon} text-yellow-500`}),e.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500"})]}),e.jsx("p",{className:"text-xs font-medium",children:t.name})]},t.id))})]}),e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("select",{value:d,onChange:t=>g(t.target.value),className:`px-4 py-2 rounded-lg ${s?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`,children:[e.jsx("option",{value:"all",children:"Todos Status"}),v.map(t=>e.jsx("option",{value:t.value,children:t.label},t.value))]}),e.jsxs("select",{value:y,onChange:t=>w(t.target.value),className:`px-4 py-2 rounded-lg ${s?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`,children:[e.jsx("option",{value:"all",children:"Todas Prioridades"}),C.map(t=>e.jsx("option",{value:t.value,children:t.label},t.value))]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{className:"px-6 py-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white font-medium rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap",children:[e.jsx("i",{className:"ri-download-line text-xl"}),"Exportar Catálogo"]}),e.jsxs("button",{className:"px-6 py-2 bg-gradient-to-r from-green-500 to-green-600 text-white font-medium rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap",children:[e.jsx("i",{className:"ri-upload-line text-xl"}),"Importar Catálogo"]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:v.map(t=>{const N=a.filter(f=>f.status===t.value).length;return e.jsxs("div",{className:`p-4 rounded-xl ${s?"bg-gray-900":"bg-gray-50"} border ${s?"border-gray-800":"border-gray-200"}`,children:[e.jsx("div",{className:`w-10 h-10 rounded-lg bg-${t.color}-500/20 flex items-center justify-center mb-3`,children:e.jsx("i",{className:`ri-ticket-line text-xl text-${t.color}-500`})}),e.jsx("p",{className:`text-sm ${s?"text-gray-400":"text-gray-600"} mb-1`,children:t.label}),e.jsx("p",{className:"text-2xl font-bold",children:N})]},t.value)})}),e.jsx("div",{className:`rounded-xl overflow-hidden ${s?"bg-gray-900":"bg-gray-50"} border ${s?"border-gray-800":"border-gray-200"}`,children:h?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"w-12 h-12 border-4 border-yellow-500 border-t-transparent rounded-full animate-spin"})}):$.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("i",{className:"ri-customer-service-line text-6xl text-gray-600 mb-4"}),e.jsx("p",{className:`text-lg ${s?"text-gray-400":"text-gray-600"}`,children:"Nenhum ticket encontrado"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:s?"bg-gray-800":"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:"ID"}),e.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:"Assunto"}),e.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:"Cliente"}),e.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:"Prioridade"}),e.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:"Status"}),e.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:"Data"}),e.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:"Ações"})]})}),e.jsx("tbody",{children:$.map(t=>e.jsxs("tr",{className:`border-t ${s?"border-gray-800 hover:bg-gray-800":"border-gray-200 hover:bg-gray-50"} transition-colors`,children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:"font-mono text-sm",children:["#",t.id.slice(0,8)]})}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("p",{className:"font-medium",children:t.subject}),t.category&&e.jsx("span",{className:`text-xs ${s?"text-gray-400":"text-gray-600"}`,children:t.category})]}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:t.profiles?.full_name||"N/A"}),e.jsx("p",{className:`text-sm ${s?"text-gray-400":"text-gray-600"}`,children:t.profiles?.email})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${t.priority==="urgent"?"bg-red-500/20 text-red-500":t.priority==="high"?"bg-yellow-500/20 text-yellow-500":t.priority==="medium"?"bg-blue-500/20 text-blue-500":"bg-gray-500/20 text-gray-500"}`,children:C.find(N=>N.value===t.priority)?.label})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("select",{value:t.status,onChange:N=>c(t.id,N.target.value),className:`px-3 py-1 rounded-full text-xs font-medium ${t.status==="resolved"?"bg-green-500/20 text-green-500":t.status==="open"?"bg-yellow-500/20 text-yellow-500":t.status==="closed"?"bg-gray-500/20 text-gray-500":"bg-blue-500/20 text-blue-500"} border-none cursor-pointer`,children:v.map(N=>e.jsx("option",{value:N.value,children:N.label},N.value))})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`text-sm ${s?"text-gray-400":"text-gray-600"}`,children:new Date(t.created_at).toLocaleDateString("pt-BR")})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>l(t),className:"p-2 rounded-lg bg-blue-500/10 text-blue-500 hover:bg-blue-500/20 transition-colors",title:"Ver detalhes",children:e.jsx("i",{className:"ri-eye-line"})}),e.jsx("button",{className:"p-2 rounded-lg bg-green-500/10 text-green-500 hover:bg-green-500/20 transition-colors",title:"Responder",children:e.jsx("i",{className:"ri-reply-line"})})]})})]},t.id))})]})})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:`p-6 rounded-xl ${s?"bg-gray-900":"bg-gray-50"} border ${s?"border-gray-800":"border-gray-200"}`,children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:"Ferramentas de Operação"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{className:"w-full p-4 rounded-lg bg-gradient-to-r from-blue-500 to-blue-600 text-white text-left hover:opacity-90 transition-opacity",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("i",{className:"ri-shopping-cart-2-line text-2xl"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Simular Pedido"}),e.jsx("p",{className:"text-sm opacity-80",children:"Testar fluxo completo de compra"})]})]})}),e.jsx("button",{className:"w-full p-4 rounded-lg bg-gradient-to-r from-yellow-500 to-yellow-600 text-black text-left hover:opacity-90 transition-opacity",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("i",{className:"ri-tools-line text-2xl"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Modo Manutenção"}),e.jsx("p",{className:"text-sm opacity-80",children:"Ativar/desativar site temporariamente"})]})]})}),e.jsx("button",{className:"w-full p-4 rounded-lg bg-gradient-to-r from-purple-500 to-purple-600 text-white text-left hover:opacity-90 transition-opacity",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("i",{className:"ri-task-line text-2xl"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Painel de Tarefas"}),e.jsx("p",{className:"text-sm opacity-80",children:"Gerenciar tarefas da equipe"})]})]})})]})]}),e.jsxs("div",{className:`p-6 rounded-xl ${s?"bg-gray-900":"bg-gray-50"} border ${s?"border-gray-800":"border-gray-200"}`,children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:"Estatísticas de Suporte"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:s?"text-gray-400":"text-gray-600",children:"Tempo Médio de Resposta"}),e.jsx("span",{className:"font-bold text-yellow-500",children:"2.5h"})]}),e.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:"bg-yellow-500 h-2 rounded-full",style:{width:"75%"}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:s?"text-gray-400":"text-gray-600",children:"Taxa de Resolução"}),e.jsx("span",{className:"font-bold text-green-500",children:"87%"})]}),e.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:"87%"}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:s?"text-gray-400":"text-gray-600",children:"Satisfação do Cliente"}),e.jsx("span",{className:"font-bold text-blue-500",children:"4.6/5.0"})]}),e.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:"92%"}})})]})]})]})]})]})}function Ce({darkMode:s}){const[a,x]=o.useState([]),[h,n]=o.useState(!0),[d,g]=o.useState(!1),[y,w]=o.useState(null),[m,l]=o.useState({name:"",country:"",region:"",method:"standard",base_cost:0,cost_per_kg:0,cost_per_item:0,free_shipping_threshold:0,min_delivery_days:3,max_delivery_days:7,is_active:!0,is_dropshipping:!1,carrier:"",tracking_enabled:!0});o.useEffect(()=>{r()},[]);const r=async()=>{n(!0);const{data:t}=await j.from("shipping_rules").select("*").order("country");x(t||[]),n(!1)},c=async t=>{t.preventDefault();try{if(y){const{error:N}=await j.from("shipping_rules").update(m).eq("id",y.id);if(N)throw N}else{const{error:N}=await j.from("shipping_rules").insert([m]);if(N)throw N}alert("Regra de envio salva com sucesso!"),g(!1),v(),r()}catch(N){console.error("Erro:",N),alert("Erro ao salvar regra de envio")}},b=t=>{w(t),l(t),g(!0)},$=async t=>{if(!confirm("Tem certeza que deseja excluir esta regra?"))return;const{error:N}=await j.from("shipping_rules").delete().eq("id",t);N||(alert("Regra excluída com sucesso!"),r())},v=()=>{l({name:"",country:"",region:"",method:"standard",base_cost:0,cost_per_kg:0,cost_per_item:0,free_shipping_threshold:0,min_delivery_days:3,max_delivery_days:7,is_active:!0,is_dropshipping:!1,carrier:"",tracking_enabled:!0}),w(null)},C=["Portugal","França","Alemanha","Espanha","Itália","Luxemburgo","Bélgica","Holanda","Reino Unido","Suíça","Áustria","Brasil"];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[e.jsx("i",{className:"ri-truck-line text-yellow-500"}),"Gestão de Envios & Logística"]}),e.jsx("p",{className:"text-gray-400 mt-1",children:"Configure taxas de envio por país, peso e método"})]}),e.jsxs("button",{onClick:()=>{v(),g(!0)},className:"px-4 py-2 bg-gradient-to-r from-yellow-500 to-yellow-600 text-black font-medium rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap",children:[e.jsx("i",{className:"ri-add-line"}),"Nova Regra de Envio"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:`${s?"bg-gray-800":"bg-white"} rounded-xl p-6`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Total de Regras"}),e.jsx("p",{className:"text-2xl font-bold mt-1",children:a.length})]}),e.jsx("div",{className:"w-12 h-12 bg-blue-500/10 rounded-lg flex items-center justify-center",children:e.jsx("i",{className:"ri-list-check text-2xl text-blue-500"})})]})}),e.jsx("div",{className:`${s?"bg-gray-800":"bg-white"} rounded-xl p-6`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Regras Ativas"}),e.jsx("p",{className:"text-2xl font-bold mt-1",children:a.filter(t=>t.is_active).length})]}),e.jsx("div",{className:"w-12 h-12 bg-green-500/10 rounded-lg flex items-center justify-center",children:e.jsx("i",{className:"ri-checkbox-circle-line text-2xl text-green-500"})})]})}),e.jsx("div",{className:`${s?"bg-gray-800":"bg-white"} rounded-xl p-6`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Países Cobertos"}),e.jsx("p",{className:"text-2xl font-bold mt-1",children:new Set(a.map(t=>t.country)).size})]}),e.jsx("div",{className:"w-12 h-12 bg-purple-500/10 rounded-lg flex items-center justify-center",children:e.jsx("i",{className:"ri-global-line text-2xl text-purple-500"})})]})}),e.jsx("div",{className:`${s?"bg-gray-800":"bg-white"} rounded-xl p-6`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Dropshipping"}),e.jsx("p",{className:"text-2xl font-bold mt-1",children:a.filter(t=>t.is_dropshipping).length})]}),e.jsx("div",{className:"w-12 h-12 bg-yellow-500/10 rounded-lg flex items-center justify-center",children:e.jsx("i",{className:"ri-box-3-line text-2xl text-yellow-500"})})]})})]}),e.jsx("div",{className:`${s?"bg-gray-800":"bg-white"} rounded-xl overflow-hidden`,children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:`${s?"bg-gray-900":"bg-gray-50"}`,children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold",children:"Nome"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold",children:"País/Região"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold",children:"Método"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold",children:"Custo Base"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold",children:"Por Kg"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold",children:"Prazo"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold",children:"Status"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold",children:"Ações"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-700",children:h?e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"px-6 py-12 text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"w-5 h-5 border-2 border-yellow-500 border-t-transparent rounded-full animate-spin"}),"Carregando..."]})})}):a.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"px-6 py-12 text-center text-gray-400",children:"Nenhuma regra de envio cadastrada"})}):a.map(t=>e.jsxs("tr",{className:"hover:bg-gray-700/50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("i",{className:`ri-${t.is_dropshipping?"box-3":"truck"}-line text-yellow-500`}),e.jsx("span",{className:"font-medium",children:t.name})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:t.country}),t.region&&e.jsx("p",{className:"text-sm text-gray-400",children:t.region})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"px-2 py-1 bg-blue-500/10 text-blue-500 rounded text-xs font-medium",children:t.method})}),e.jsxs("td",{className:"px-6 py-4 font-medium",children:["€",t.base_cost.toFixed(2)]}),e.jsxs("td",{className:"px-6 py-4 text-gray-400",children:["€",t.cost_per_kg.toFixed(2)]}),e.jsxs("td",{className:"px-6 py-4 text-sm text-gray-400",children:[t.min_delivery_days,"-",t.max_delivery_days," dias"]}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${t.is_active?"bg-green-500/10 text-green-500":"bg-red-500/10 text-red-500"}`,children:t.is_active?"Ativo":"Inativo"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>b(t),className:"p-2 hover:bg-gray-700 rounded-lg transition-colors",title:"Editar",children:e.jsx("i",{className:"ri-edit-line text-blue-500"})}),e.jsx("button",{onClick:()=>$(t.id),className:"p-2 hover:bg-gray-700 rounded-lg transition-colors",title:"Excluir",children:e.jsx("i",{className:"ri-delete-bin-line text-red-500"})})]})})]},t.id))})]})})}),d&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:`${s?"bg-gray-900":"bg-white"} rounded-xl max-w-3xl w-full max-h-[90vh] overflow-y-auto`,children:[e.jsxs("div",{className:`sticky top-0 ${s?"bg-gray-900":"bg-white"} border-b ${s?"border-gray-800":"border-gray-200"} p-6 flex items-center justify-between`,children:[e.jsx("h3",{className:"text-xl font-bold",children:y?"Editar Regra de Envio":"Nova Regra de Envio"}),e.jsx("button",{onClick:()=>{g(!1),v()},className:"p-2 hover:bg-gray-800 rounded-lg transition-colors",children:e.jsx("i",{className:"ri-close-line text-xl"})})]}),e.jsxs("form",{onSubmit:c,className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Nome da Regra *"}),e.jsx("input",{type:"text",required:!0,value:m.name,onChange:t=>l({...m,name:t.target.value}),placeholder:"Ex: Envio Standard Portugal",className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"País *"}),e.jsxs("select",{required:!0,value:m.country,onChange:t=>l({...m,country:t.target.value}),className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`,children:[e.jsx("option",{value:"",children:"Selecione..."}),C.map(t=>e.jsx("option",{value:t,children:t},t))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Região (Opcional)"}),e.jsx("input",{type:"text",value:m.region,onChange:t=>l({...m,region:t.target.value}),placeholder:"Ex: Lisboa, Porto",className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Método de Envio"}),e.jsxs("select",{value:m.method,onChange:t=>l({...m,method:t.target.value}),className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`,children:[e.jsx("option",{value:"standard",children:"Standard"}),e.jsx("option",{value:"express",children:"Express"}),e.jsx("option",{value:"priority",children:"Priority"}),e.jsx("option",{value:"economy",children:"Economy"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Transportadora"}),e.jsx("input",{type:"text",value:m.carrier,onChange:t=>l({...m,carrier:t.target.value}),placeholder:"Ex: CTT, DHL, UPS",className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Custo Base (€)"}),e.jsx("input",{type:"number",step:"0.01",value:m.base_cost,onChange:t=>l({...m,base_cost:parseFloat(t.target.value)}),className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Custo por Kg (€)"}),e.jsx("input",{type:"number",step:"0.01",value:m.cost_per_kg,onChange:t=>l({...m,cost_per_kg:parseFloat(t.target.value)}),className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Custo por Item (€)"}),e.jsx("input",{type:"number",step:"0.01",value:m.cost_per_item,onChange:t=>l({...m,cost_per_item:parseFloat(t.target.value)}),className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Envio Grátis Acima de (€)"}),e.jsx("input",{type:"number",step:"0.01",value:m.free_shipping_threshold,onChange:t=>l({...m,free_shipping_threshold:parseFloat(t.target.value)}),className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Prazo Mínimo (dias)"}),e.jsx("input",{type:"number",value:m.min_delivery_days,onChange:t=>l({...m,min_delivery_days:parseInt(t.target.value)}),className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Prazo Máximo (dias)"}),e.jsx("input",{type:"number",value:m.max_delivery_days,onChange:t=>l({...m,max_delivery_days:parseInt(t.target.value)}),className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"is_active",checked:m.is_active,onChange:t=>l({...m,is_active:t.target.checked}),className:"w-4 h-4 rounded border-gray-300"}),e.jsx("label",{htmlFor:"is_active",className:"text-sm font-medium",children:"Regra Ativa"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"is_dropshipping",checked:m.is_dropshipping,onChange:t=>l({...m,is_dropshipping:t.target.checked}),className:"w-4 h-4 rounded border-gray-300"}),e.jsx("label",{htmlFor:"is_dropshipping",className:"text-sm font-medium",children:"Dropshipping"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"tracking_enabled",checked:m.tracking_enabled,onChange:t=>l({...m,tracking_enabled:t.target.checked}),className:"w-4 h-4 rounded border-gray-300"}),e.jsx("label",{htmlFor:"tracking_enabled",className:"text-sm font-medium",children:"Rastreamento Habilitado"})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-4 pt-6 border-t border-gray-800",children:[e.jsx("button",{type:"button",onClick:()=>{g(!1),v()},className:"px-6 py-2 rounded-lg border border-gray-700 hover:bg-gray-800 transition-colors whitespace-nowrap",children:"Cancelar"}),e.jsxs("button",{type:"submit",className:"px-6 py-2 bg-gradient-to-r from-yellow-500 to-yellow-600 text-black font-medium rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap",children:[e.jsx("i",{className:"ri-save-line"}),"Salvar Regra"]})]})]})]})})]})}function Se({darkMode:s}){const[a,x]=o.useState([]),[h,n]=o.useState(!0),[d,g]=o.useState(!1),[y,w]=o.useState(null),[m,l]=o.useState({name:"",country:"",region:"",tax_type:"vat",rate:23,is_default:!1,is_active:!0,applies_to:"all",product_categories:"",min_amount:0,max_amount:0,is_compound:!1,priority:1});o.useEffect(()=>{r()},[]);const r=async()=>{n(!0);const{data:t}=await j.from("tax_settings").select("*").order("country");x(t||[]),n(!1)},c=async t=>{t.preventDefault();try{if(y){const{error:N}=await j.from("tax_settings").update(m).eq("id",y.id);if(N)throw N}else{const{error:N}=await j.from("tax_settings").insert([m]);if(N)throw N}alert("Regra de IVA salva com sucesso!"),g(!1),v(),r()}catch(N){console.error("Erro:",N),alert("Erro ao salvar regra de IVA")}},b=t=>{w(t),l(t),g(!0)},$=async t=>{if(!confirm("Tem certeza que deseja excluir esta regra?"))return;const{error:N}=await j.from("tax_settings").delete().eq("id",t);N||(alert("Regra excluída com sucesso!"),r())},v=()=>{l({name:"",country:"",region:"",tax_type:"vat",rate:23,is_default:!1,is_active:!0,applies_to:"all",product_categories:"",min_amount:0,max_amount:0,is_compound:!1,priority:1}),w(null)},C=[{name:"Portugal",defaultVat:23},{name:"França",defaultVat:20},{name:"Alemanha",defaultVat:19},{name:"Espanha",defaultVat:21},{name:"Itália",defaultVat:22},{name:"Luxemburgo",defaultVat:17},{name:"Bélgica",defaultVat:21},{name:"Holanda",defaultVat:21},{name:"Reino Unido",defaultVat:20},{name:"Suíça",defaultVat:7.7},{name:"Áustria",defaultVat:20},{name:"Brasil",defaultVat:17}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[e.jsx("i",{className:"ri-percent-line text-yellow-500"}),"Gestão de IVA / TVA / Impostos"]}),e.jsx("p",{className:"text-gray-400 mt-1",children:"Configure taxas de IVA por país e categoria"})]}),e.jsxs("button",{onClick:()=>{v(),g(!0)},className:"px-4 py-2 bg-gradient-to-r from-yellow-500 to-yellow-600 text-black font-medium rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap",children:[e.jsx("i",{className:"ri-add-line"}),"Nova Regra de IVA"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:`${s?"bg-gray-800":"bg-white"} rounded-xl p-6`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Total de Regras"}),e.jsx("p",{className:"text-2xl font-bold mt-1",children:a.length})]}),e.jsx("div",{className:"w-12 h-12 bg-blue-500/10 rounded-lg flex items-center justify-center",children:e.jsx("i",{className:"ri-list-check text-2xl text-blue-500"})})]})}),e.jsx("div",{className:`${s?"bg-gray-800":"bg-white"} rounded-xl p-6`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Regras Ativas"}),e.jsx("p",{className:"text-2xl font-bold mt-1",children:a.filter(t=>t.is_active).length})]}),e.jsx("div",{className:"w-12 h-12 bg-green-500/10 rounded-lg flex items-center justify-center",children:e.jsx("i",{className:"ri-checkbox-circle-line text-2xl text-green-500"})})]})}),e.jsx("div",{className:`${s?"bg-gray-800":"bg-white"} rounded-xl p-6`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Países Cobertos"}),e.jsx("p",{className:"text-2xl font-bold mt-1",children:new Set(a.map(t=>t.country)).size})]}),e.jsx("div",{className:"w-12 h-12 bg-purple-500/10 rounded-lg flex items-center justify-center",children:e.jsx("i",{className:"ri-global-line text-2xl text-purple-500"})})]})}),e.jsx("div",{className:`${s?"bg-gray-800":"bg-white"} rounded-xl p-6`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Taxa Média"}),e.jsxs("p",{className:"text-2xl font-bold mt-1",children:[a.length>0?(a.reduce((t,N)=>t+N.rate,0)/a.length).toFixed(1):0,"%"]})]}),e.jsx("div",{className:"w-12 h-12 bg-yellow-500/10 rounded-lg flex items-center justify-center",children:e.jsx("i",{className:"ri-percent-line text-2xl text-yellow-500"})})]})})]}),e.jsx("div",{className:`${s?"bg-gradient-to-r from-blue-900/20 to-purple-900/20 border-blue-500/30":"bg-blue-50 border-blue-200"} border rounded-xl p-6`,children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-500/10 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx("i",{className:"ri-information-line text-2xl text-blue-500"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Modo IOSS Ready"}),e.jsx("p",{className:"text-sm text-gray-400 mb-3",children:"O sistema está preparado para o regime IOSS (Import One-Stop Shop) da União Europeia. Configure as taxas de IVA por país para vendas B2C dentro da UE."}),e.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("i",{className:"ri-checkbox-circle-line text-green-500"}),e.jsx("span",{children:"Cálculo automático de IVA"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("i",{className:"ri-checkbox-circle-line text-green-500"}),e.jsx("span",{children:"Breakdown detalhado no checkout"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("i",{className:"ri-checkbox-circle-line text-green-500"}),e.jsx("span",{children:"Suporte a dropshipping UE/Extra-UE"})]})]})]})]})}),e.jsx("div",{className:`${s?"bg-gray-800":"bg-white"} rounded-xl overflow-hidden`,children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:`${s?"bg-gray-900":"bg-gray-50"}`,children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold",children:"Nome"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold",children:"País/Região"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold",children:"Tipo"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold",children:"Taxa (%)"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold",children:"Aplica-se a"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold",children:"Prioridade"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold",children:"Status"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold",children:"Ações"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-700",children:h?e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"px-6 py-12 text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"w-5 h-5 border-2 border-yellow-500 border-t-transparent rounded-full animate-spin"}),"Carregando..."]})})}):a.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"px-6 py-12 text-center text-gray-400",children:"Nenhuma regra de IVA cadastrada"})}):a.map(t=>e.jsxs("tr",{className:"hover:bg-gray-700/50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("i",{className:"ri-percent-line text-yellow-500"}),e.jsx("span",{className:"font-medium",children:t.name}),t.is_default&&e.jsx("span",{className:"px-2 py-0.5 bg-blue-500/10 text-blue-500 rounded text-xs font-medium",children:"Padrão"})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:t.country}),t.region&&e.jsx("p",{className:"text-sm text-gray-400",children:t.region})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"px-2 py-1 bg-purple-500/10 text-purple-500 rounded text-xs font-medium uppercase",children:t.tax_type})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:"text-lg font-bold text-yellow-500",children:[t.rate,"%"]})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-400",children:t.applies_to==="all"?"Todos os produtos":t.applies_to}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"px-2 py-1 bg-gray-700 rounded text-xs font-medium",children:t.priority})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${t.is_active?"bg-green-500/10 text-green-500":"bg-red-500/10 text-red-500"}`,children:t.is_active?"Ativo":"Inativo"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>b(t),className:"p-2 hover:bg-gray-700 rounded-lg transition-colors",title:"Editar",children:e.jsx("i",{className:"ri-edit-line text-blue-500"})}),e.jsx("button",{onClick:()=>$(t.id),className:"p-2 hover:bg-gray-700 rounded-lg transition-colors",title:"Excluir",children:e.jsx("i",{className:"ri-delete-bin-line text-red-500"})})]})})]},t.id))})]})})}),d&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:`${s?"bg-gray-900":"bg-white"} rounded-xl max-w-3xl w-full max-h-[90vh] overflow-y-auto`,children:[e.jsxs("div",{className:`sticky top-0 ${s?"bg-gray-900":"bg-white"} border-b ${s?"border-gray-800":"border-gray-200"} p-6 flex items-center justify-between`,children:[e.jsx("h3",{className:"text-xl font-bold",children:y?"Editar Regra de IVA":"Nova Regra de IVA"}),e.jsx("button",{onClick:()=>{g(!1),v()},className:"p-2 hover:bg-gray-800 rounded-lg transition-colors",children:e.jsx("i",{className:"ri-close-line text-xl"})})]}),e.jsxs("form",{onSubmit:c,className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Nome da Regra *"}),e.jsx("input",{type:"text",required:!0,value:m.name,onChange:t=>l({...m,name:t.target.value}),placeholder:"Ex: IVA Portugal Standard",className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"País *"}),e.jsxs("select",{required:!0,value:m.country,onChange:t=>{const N=C.find(f=>f.name===t.target.value);l({...m,country:t.target.value,rate:N?.defaultVat||23})},className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`,children:[e.jsx("option",{value:"",children:"Selecione..."}),C.map(t=>e.jsxs("option",{value:t.name,children:[t.name," (",t.defaultVat,"%)"]},t.name))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Região (Opcional)"}),e.jsx("input",{type:"text",value:m.region,onChange:t=>l({...m,region:t.target.value}),placeholder:"Ex: Açores, Madeira",className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Tipo de Imposto"}),e.jsxs("select",{value:m.tax_type,onChange:t=>l({...m,tax_type:t.target.value}),className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`,children:[e.jsx("option",{value:"vat",children:"IVA / VAT"}),e.jsx("option",{value:"sales_tax",children:"Sales Tax"}),e.jsx("option",{value:"gst",children:"GST"}),e.jsx("option",{value:"custom",children:"Personalizado"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Taxa (%) *"}),e.jsx("input",{type:"number",step:"0.01",required:!0,value:m.rate,onChange:t=>l({...m,rate:parseFloat(t.target.value)}),className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Prioridade"}),e.jsx("input",{type:"number",value:m.priority,onChange:t=>l({...m,priority:parseInt(t.target.value)}),className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Menor número = maior prioridade"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Aplica-se a"}),e.jsxs("select",{value:m.applies_to,onChange:t=>l({...m,applies_to:t.target.value}),className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`,children:[e.jsx("option",{value:"all",children:"Todos os produtos"}),e.jsx("option",{value:"physical",children:"Apenas produtos físicos"}),e.jsx("option",{value:"digital",children:"Apenas produtos digitais"}),e.jsx("option",{value:"categories",children:"Categorias específicas"})]})]}),m.applies_to==="categories"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Categorias (IDs separados por vírgula)"}),e.jsx("input",{type:"text",value:m.product_categories,onChange:t=>l({...m,product_categories:t.target.value}),placeholder:"1,2,3",className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Valor Mínimo (€)"}),e.jsx("input",{type:"number",step:"0.01",value:m.min_amount,onChange:t=>l({...m,min_amount:parseFloat(t.target.value)}),className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Valor Máximo (€)"}),e.jsx("input",{type:"number",step:"0.01",value:m.max_amount,onChange:t=>l({...m,max_amount:parseFloat(t.target.value)}),className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"is_active",checked:m.is_active,onChange:t=>l({...m,is_active:t.target.checked}),className:"w-4 h-4 rounded border-gray-300"}),e.jsx("label",{htmlFor:"is_active",className:"text-sm font-medium",children:"Regra Ativa"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"is_default",checked:m.is_default,onChange:t=>l({...m,is_default:t.target.checked}),className:"w-4 h-4 rounded border-gray-300"}),e.jsx("label",{htmlFor:"is_default",className:"text-sm font-medium",children:"Definir como padrão para este país"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"is_compound",checked:m.is_compound,onChange:t=>l({...m,is_compound:t.target.checked}),className:"w-4 h-4 rounded border-gray-300"}),e.jsx("label",{htmlFor:"is_compound",className:"text-sm font-medium",children:"Imposto composto (aplica sobre outros impostos)"})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-4 pt-6 border-t border-gray-800",children:[e.jsx("button",{type:"button",onClick:()=>{g(!1),v()},className:"px-6 py-2 rounded-lg border border-gray-700 hover:bg-gray-800 transition-colors whitespace-nowrap",children:"Cancelar"}),e.jsxs("button",{type:"submit",className:"px-6 py-2 bg-gradient-to-r from-yellow-500 to-yellow-600 text-black font-medium rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap",children:[e.jsx("i",{className:"ri-save-line"}),"Salvar Regra"]})]})]})]})})]})}function Pe({darkMode:s}){const[a,x]=o.useState([]),[h,n]=o.useState([]),[d,g]=o.useState(!0),[y,w]=o.useState("vendors"),[m,l]=o.useState(!1),[r,c]=o.useState(null),[b,$]=o.useState({name:"",commission_type:"percentage",commission_value:15,applies_to:"all",category_ids:"",vendor_ids:"",min_order_value:0,max_order_value:0,is_active:!0,priority:1});o.useEffect(()=>{v()},[]);const v=async()=>{g(!0);const{data:u}=await j.from("vendors").select("*").order("created_at",{ascending:!1});x(u||[]);const{data:p}=await j.from("commission_rules").select("*").order("priority");n(p||[]),g(!1)},C=async u=>{u.preventDefault();try{if(r){const{error:p}=await j.from("commission_rules").update(b).eq("id",r.id);if(p)throw p}else{const{error:p}=await j.from("commission_rules").insert([b]);if(p)throw p}alert("Regra de comissão salva com sucesso!"),l(!1),R(),v()}catch(p){console.error("Erro:",p),alert("Erro ao salvar regra de comissão")}},t=async u=>{const{error:p}=await j.from("vendors").update({status:"approved",approved_at:new Date().toISOString()}).eq("id",u);p||(alert("Vendedor aprovado com sucesso!"),v())},N=async u=>{const{error:p}=await j.from("vendors").update({status:"rejected"}).eq("id",u);p||(alert("Vendedor rejeitado!"),v())},f=async u=>{const{error:p}=await j.from("vendors").update({status:"suspended"}).eq("id",u);p||(alert("Vendedor suspenso!"),v())},R=()=>{$({name:"",commission_type:"percentage",commission_value:15,applies_to:"all",category_ids:"",vendor_ids:"",min_order_value:0,max_order_value:0,is_active:!0,priority:1}),c(null)},_=u=>{switch(u){case"approved":return"bg-green-500/10 text-green-500";case"pending":return"bg-yellow-500/10 text-yellow-500";case"rejected":return"bg-red-500/10 text-red-500";case"suspended":return"bg-orange-500/10 text-orange-500";default:return"bg-gray-500/10 text-gray-500"}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[e.jsx("i",{className:"ri-store-3-line text-yellow-500"}),"Gestão de Marketplace"]}),e.jsx("p",{className:"text-gray-400 mt-1",children:"Gerencie vendedores e comissões do marketplace"})]}),y==="commissions"&&e.jsxs("button",{onClick:()=>{R(),l(!0)},className:"px-4 py-2 bg-gradient-to-r from-yellow-500 to-yellow-600 text-black font-medium rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap",children:[e.jsx("i",{className:"ri-add-line"}),"Nova Regra de Comissão"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:`${s?"bg-gray-800":"bg-white"} rounded-xl p-6`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Total de Vendedores"}),e.jsx("p",{className:"text-2xl font-bold mt-1",children:a.length})]}),e.jsx("div",{className:"w-12 h-12 bg-blue-500/10 rounded-lg flex items-center justify-center",children:e.jsx("i",{className:"ri-store-3-line text-2xl text-blue-500"})})]})}),e.jsx("div",{className:`${s?"bg-gray-800":"bg-white"} rounded-xl p-6`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Aprovados"}),e.jsx("p",{className:"text-2xl font-bold mt-1",children:a.filter(u=>u.status==="approved").length})]}),e.jsx("div",{className:"w-12 h-12 bg-green-500/10 rounded-lg flex items-center justify-center",children:e.jsx("i",{className:"ri-checkbox-circle-line text-2xl text-green-500"})})]})}),e.jsx("div",{className:`${s?"bg-gray-800":"bg-white"} rounded-xl p-6`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Pendentes"}),e.jsx("p",{className:"text-2xl font-bold mt-1",children:a.filter(u=>u.status==="pending").length})]}),e.jsx("div",{className:"w-12 h-12 bg-yellow-500/10 rounded-lg flex items-center justify-center",children:e.jsx("i",{className:"ri-time-line text-2xl text-yellow-500"})})]})}),e.jsx("div",{className:`${s?"bg-gray-800":"bg-white"} rounded-xl p-6`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Regras de Comissão"}),e.jsx("p",{className:"text-2xl font-bold mt-1",children:h.length})]}),e.jsx("div",{className:"w-12 h-12 bg-purple-500/10 rounded-lg flex items-center justify-center",children:e.jsx("i",{className:"ri-percent-line text-2xl text-purple-500"})})]})})]}),e.jsxs("div",{className:`${s?"bg-gray-800":"bg-white"} rounded-xl p-2 flex gap-2`,children:[e.jsxs("button",{onClick:()=>w("vendors"),className:`flex-1 px-4 py-2 rounded-lg font-medium transition-colors whitespace-nowrap ${y==="vendors"?"bg-gradient-to-r from-yellow-500 to-yellow-600 text-black":"hover:bg-gray-700"}`,children:[e.jsx("i",{className:"ri-store-3-line mr-2"}),"Vendedores"]}),e.jsxs("button",{onClick:()=>w("commissions"),className:`flex-1 px-4 py-2 rounded-lg font-medium transition-colors whitespace-nowrap ${y==="commissions"?"bg-gradient-to-r from-yellow-500 to-yellow-600 text-black":"hover:bg-gray-700"}`,children:[e.jsx("i",{className:"ri-percent-line mr-2"}),"Comissões"]})]}),y==="vendors"&&e.jsx("div",{className:`${s?"bg-gray-800":"bg-white"} rounded-xl overflow-hidden`,children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:`${s?"bg-gray-900":"bg-gray-50"}`,children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold",children:"Vendedor"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold",children:"Email"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold",children:"Produtos"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold",children:"Vendas"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold",children:"Comissão"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold",children:"Status"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold",children:"Ações"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-700",children:d?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-6 py-12 text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"w-5 h-5 border-2 border-yellow-500 border-t-transparent rounded-full animate-spin"}),"Carregando..."]})})}):a.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-6 py-12 text-center text-gray-400",children:"Nenhum vendedor cadastrado"})}):a.map(u=>e.jsxs("tr",{className:"hover:bg-gray-700/50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-yellow-500 to-yellow-600 rounded-full flex items-center justify-center text-black font-bold",children:u.store_name?.charAt(0)||"V"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:u.store_name}),e.jsx("p",{className:"text-sm text-gray-400",children:u.company_name})]})]})}),e.jsx("td",{className:"px-6 py-4 text-gray-400",children:u.email}),e.jsx("td",{className:"px-6 py-4 font-medium",children:u.total_products||0}),e.jsxs("td",{className:"px-6 py-4 font-medium",children:["€",u.total_sales?.toFixed(2)||"0.00"]}),e.jsxs("td",{className:"px-6 py-4 text-yellow-500 font-medium",children:[u.commission_rate||15,"%"]}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:`px-2 py-1 rounded text-xs font-medium ${_(u.status)}`,children:[u.status==="approved"&&"Aprovado",u.status==="pending"&&"Pendente",u.status==="rejected"&&"Rejeitado",u.status==="suspended"&&"Suspenso"]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[u.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>t(u.id),className:"p-2 hover:bg-gray-700 rounded-lg transition-colors",title:"Aprovar",children:e.jsx("i",{className:"ri-checkbox-circle-line text-green-500"})}),e.jsx("button",{onClick:()=>N(u.id),className:"p-2 hover:bg-gray-700 rounded-lg transition-colors",title:"Rejeitar",children:e.jsx("i",{className:"ri-close-circle-line text-red-500"})})]}),u.status==="approved"&&e.jsx("button",{onClick:()=>f(u.id),className:"p-2 hover:bg-gray-700 rounded-lg transition-colors",title:"Suspender",children:e.jsx("i",{className:"ri-forbid-line text-orange-500"})}),e.jsx("button",{className:"p-2 hover:bg-gray-700 rounded-lg transition-colors",title:"Ver Detalhes",children:e.jsx("i",{className:"ri-eye-line text-blue-500"})})]})})]},u.id))})]})})}),y==="commissions"&&e.jsx("div",{className:`${s?"bg-gray-800":"bg-white"} rounded-xl overflow-hidden`,children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:`${s?"bg-gray-900":"bg-gray-50"}`,children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold",children:"Nome"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold",children:"Tipo"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold",children:"Valor"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold",children:"Aplica-se a"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold",children:"Prioridade"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold",children:"Status"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold",children:"Ações"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-700",children:d?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-6 py-12 text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"w-5 h-5 border-2 border-yellow-500 border-t-transparent rounded-full animate-spin"}),"Carregando..."]})})}):h.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-6 py-12 text-center text-gray-400",children:"Nenhuma regra de comissão cadastrada"})}):h.map(u=>e.jsxs("tr",{className:"hover:bg-gray-700/50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("i",{className:"ri-percent-line text-yellow-500"}),e.jsx("span",{className:"font-medium",children:u.name})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"px-2 py-1 bg-purple-500/10 text-purple-500 rounded text-xs font-medium",children:u.commission_type==="percentage"?"Percentual":"Fixo"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"text-lg font-bold text-yellow-500",children:u.commission_type==="percentage"?`${u.commission_value}%`:`€${u.commission_value}`})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-400",children:u.applies_to==="all"?"Todos":u.applies_to}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"px-2 py-1 bg-gray-700 rounded text-xs font-medium",children:u.priority})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${u.is_active?"bg-green-500/10 text-green-500":"bg-red-500/10 text-red-500"}`,children:u.is_active?"Ativo":"Inativo"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>{c(u),$(u),l(!0)},className:"p-2 hover:bg-gray-700 rounded-lg transition-colors",title:"Editar",children:e.jsx("i",{className:"ri-edit-line text-blue-500"})}),e.jsx("button",{onClick:async()=>{if(!confirm("Tem certeza que deseja excluir esta regra?"))return;const{error:p}=await j.from("commission_rules").delete().eq("id",u.id);p||(alert("Regra excluída com sucesso!"),v())},className:"p-2 hover:bg-gray-700 rounded-lg transition-colors",title:"Excluir",children:e.jsx("i",{className:"ri-delete-bin-line text-red-500"})})]})})]},u.id))})]})})}),m&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:`${s?"bg-gray-900":"bg-white"} rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto`,children:[e.jsxs("div",{className:`sticky top-0 ${s?"bg-gray-900":"bg-white"} border-b ${s?"border-gray-800":"border-gray-200"} p-6 flex items-center justify-between`,children:[e.jsx("h3",{className:"text-xl font-bold",children:r?"Editar Regra de Comissão":"Nova Regra de Comissão"}),e.jsx("button",{onClick:()=>{l(!1),R()},className:"p-2 hover:bg-gray-800 rounded-lg transition-colors",children:e.jsx("i",{className:"ri-close-line text-xl"})})]}),e.jsxs("form",{onSubmit:C,className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Nome da Regra *"}),e.jsx("input",{type:"text",required:!0,value:b.name,onChange:u=>$({...b,name:u.target.value}),placeholder:"Ex: Comissão Padrão",className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Tipo de Comissão"}),e.jsxs("select",{value:b.commission_type,onChange:u=>$({...b,commission_type:u.target.value}),className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`,children:[e.jsx("option",{value:"percentage",children:"Percentual (%)"}),e.jsx("option",{value:"fixed",children:"Valor Fixo (€)"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Valor ",b.commission_type==="percentage"?"(%)":"(€)"," *"]}),e.jsx("input",{type:"number",step:"0.01",required:!0,value:b.commission_value,onChange:u=>$({...b,commission_value:parseFloat(u.target.value)}),className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Aplica-se a"}),e.jsxs("select",{value:b.applies_to,onChange:u=>$({...b,applies_to:u.target.value}),className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`,children:[e.jsx("option",{value:"all",children:"Todos os vendedores"}),e.jsx("option",{value:"categories",children:"Categorias específicas"}),e.jsx("option",{value:"vendors",children:"Vendedores específicos"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Prioridade"}),e.jsx("input",{type:"number",value:b.priority,onChange:u=>$({...b,priority:parseInt(u.target.value)}),className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Valor Mínimo do Pedido (€)"}),e.jsx("input",{type:"number",step:"0.01",value:b.min_order_value,onChange:u=>$({...b,min_order_value:parseFloat(u.target.value)}),className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Valor Máximo do Pedido (€)"}),e.jsx("input",{type:"number",step:"0.01",value:b.max_order_value,onChange:u=>$({...b,max_order_value:parseFloat(u.target.value)}),className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"is_active",checked:b.is_active,onChange:u=>$({...b,is_active:u.target.checked}),className:"w-4 h-4 rounded border-gray-300"}),e.jsx("label",{htmlFor:"is_active",className:"text-sm font-medium",children:"Regra Ativa"})]}),e.jsxs("div",{className:"flex items-center justify-end gap-4 pt-6 border-t border-gray-800",children:[e.jsx("button",{type:"button",onClick:()=>{l(!1),R()},className:"px-6 py-2 rounded-lg border border-gray-700 hover:bg-gray-800 transition-colors whitespace-nowrap",children:"Cancelar"}),e.jsxs("button",{type:"submit",className:"px-6 py-2 bg-gradient-to-r from-yellow-500 to-yellow-600 text-black font-medium rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap",children:[e.jsx("i",{className:"ri-save-line"}),"Salvar Regra"]})]})]})]})})]})}function Ee({darkMode:s}){const[a,x]=o.useState({site_name:"JokaTech",site_tagline:"Sua loja de tecnologia",primary_color:"#EAB308",secondary_color:"#000000",accent_color:"#F59E0B",success_color:"#10B981",warning_color:"#F59E0B",error_color:"#EF4444",font_family:"Inter",font_size_base:"16",logo_url:"",logo_footer_url:"",logo_mobile_url:"",favicon_url:"",header_style:"fixed",header_bg_color:"#000000",footer_bg_color:"#1F2937",enable_dark_mode:!0,default_theme:"dark"}),[h,n]=o.useState(!1),[d,g]=o.useState(!1);o.useEffect(()=>{y()},[]);const y=async()=>{const{data:l}=await j.from("site_settings").select("*").single();l&&x(r=>({...r,...l.settings}))},w=async()=>{n(!0);try{const{error:l}=await j.from("site_settings").upsert({id:1,settings:a,updated_at:new Date().toISOString()});if(l)throw l;alert("Configurações salvas com sucesso!")}catch(l){console.error("Erro ao salvar:",l),alert("Erro ao salvar configurações")}finally{n(!1)}},m=["Inter","Roboto","Open Sans","Lato","Montserrat","Poppins","Raleway","Nunito","Playfair Display","Merriweather"];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[e.jsx("i",{className:"ri-palette-line text-yellow-500"}),"Editor de Tema & Design"]}),e.jsx("p",{className:"text-gray-400 mt-1",children:"Configure a aparência visual do seu site"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:()=>g(!d),className:`px-4 py-2 rounded-lg border ${s?"border-gray-700":"border-gray-300"} hover:bg-gray-800 transition-colors flex items-center gap-2 whitespace-nowrap`,children:[e.jsx("i",{className:`ri-${d?"eye-off":"eye"}-line`}),d?"Ocultar Preview":"Mostrar Preview"]}),e.jsx("button",{onClick:w,disabled:h,className:"px-6 py-2 bg-gradient-to-r from-yellow-500 to-yellow-600 text-black font-medium rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap",children:h?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-black border-t-transparent rounded-full animate-spin"}),"Salvando..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-save-line"}),"Salvar Alterações"]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:`${s?"bg-gray-800":"bg-white"} rounded-xl p-6 space-y-4`,children:[e.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx("i",{className:"ri-information-line text-yellow-500"}),"Informações do Site"]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Nome do Site"}),e.jsx("input",{type:"text",value:a.site_name,onChange:l=>x({...a,site_name:l.target.value}),className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-900 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Slogan/Tagline"}),e.jsx("input",{type:"text",value:a.site_tagline,onChange:l=>x({...a,site_tagline:l.target.value}),className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-900 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Fonte Principal"}),e.jsx("select",{value:a.font_family,onChange:l=>x({...a,font_family:l.target.value}),className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-900 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`,children:m.map(l=>e.jsx("option",{value:l,children:l},l))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Tamanho Base da Fonte (px)"}),e.jsx("input",{type:"number",value:a.font_size_base,onChange:l=>x({...a,font_size_base:l.target.value}),className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-900 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]})]}),e.jsxs("div",{className:`${s?"bg-gray-800":"bg-white"} rounded-xl p-6 space-y-4`,children:[e.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx("i",{className:"ri-paint-brush-line text-yellow-500"}),"Paleta de Cores"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Cor Primária"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"color",value:a.primary_color,onChange:l=>x({...a,primary_color:l.target.value}),className:"w-12 h-10 rounded cursor-pointer"}),e.jsx("input",{type:"text",value:a.primary_color,onChange:l=>x({...a,primary_color:l.target.value}),className:`flex-1 px-3 py-2 rounded-lg ${s?"bg-gray-900 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Cor Secundária"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"color",value:a.secondary_color,onChange:l=>x({...a,secondary_color:l.target.value}),className:"w-12 h-10 rounded cursor-pointer"}),e.jsx("input",{type:"text",value:a.secondary_color,onChange:l=>x({...a,secondary_color:l.target.value}),className:`flex-1 px-3 py-2 rounded-lg ${s?"bg-gray-900 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Cor de Destaque"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"color",value:a.accent_color,onChange:l=>x({...a,accent_color:l.target.value}),className:"w-12 h-10 rounded cursor-pointer"}),e.jsx("input",{type:"text",value:a.accent_color,onChange:l=>x({...a,accent_color:l.target.value}),className:`flex-1 px-3 py-2 rounded-lg ${s?"bg-gray-900 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Cor de Sucesso"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"color",value:a.success_color,onChange:l=>x({...a,success_color:l.target.value}),className:"w-12 h-10 rounded cursor-pointer"}),e.jsx("input",{type:"text",value:a.success_color,onChange:l=>x({...a,success_color:l.target.value}),className:`flex-1 px-3 py-2 rounded-lg ${s?"bg-gray-900 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Cor de Aviso"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"color",value:a.warning_color,onChange:l=>x({...a,warning_color:l.target.value}),className:"w-12 h-10 rounded cursor-pointer"}),e.jsx("input",{type:"text",value:a.warning_color,onChange:l=>x({...a,warning_color:l.target.value}),className:`flex-1 px-3 py-2 rounded-lg ${s?"bg-gray-900 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Cor de Erro"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"color",value:a.error_color,onChange:l=>x({...a,error_color:l.target.value}),className:"w-12 h-10 rounded cursor-pointer"}),e.jsx("input",{type:"text",value:a.error_color,onChange:l=>x({...a,error_color:l.target.value}),className:`flex-1 px-3 py-2 rounded-lg ${s?"bg-gray-900 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]})]})]})]}),e.jsxs("div",{className:`${s?"bg-gray-800":"bg-white"} rounded-xl p-6 space-y-4`,children:[e.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx("i",{className:"ri-image-line text-yellow-500"}),"Logos & Ícones"]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Logo Principal (URL)"}),e.jsx("input",{type:"text",value:a.logo_url,onChange:l=>x({...a,logo_url:l.target.value}),placeholder:"https://exemplo.com/logo.png",className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-900 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Logo Footer (URL)"}),e.jsx("input",{type:"text",value:a.logo_footer_url,onChange:l=>x({...a,logo_footer_url:l.target.value}),placeholder:"https://exemplo.com/logo-footer.png",className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-900 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Logo Mobile (URL)"}),e.jsx("input",{type:"text",value:a.logo_mobile_url,onChange:l=>x({...a,logo_mobile_url:l.target.value}),placeholder:"https://exemplo.com/logo-mobile.png",className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-900 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Favicon (URL)"}),e.jsx("input",{type:"text",value:a.favicon_url,onChange:l=>x({...a,favicon_url:l.target.value}),placeholder:"https://exemplo.com/favicon.ico",className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-900 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]})]}),e.jsxs("div",{className:`${s?"bg-gray-800":"bg-white"} rounded-xl p-6 space-y-4`,children:[e.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx("i",{className:"ri-layout-line text-yellow-500"}),"Header & Footer"]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Estilo do Header"}),e.jsxs("select",{value:a.header_style,onChange:l=>x({...a,header_style:l.target.value}),className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-900 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`,children:[e.jsx("option",{value:"fixed",children:"Fixo no Topo"}),e.jsx("option",{value:"sticky",children:"Sticky (Cola ao Scroll)"}),e.jsx("option",{value:"static",children:"Estático"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Cor de Fundo do Header"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"color",value:a.header_bg_color,onChange:l=>x({...a,header_bg_color:l.target.value}),className:"w-12 h-10 rounded cursor-pointer"}),e.jsx("input",{type:"text",value:a.header_bg_color,onChange:l=>x({...a,header_bg_color:l.target.value}),className:`flex-1 px-3 py-2 rounded-lg ${s?"bg-gray-900 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Cor de Fundo do Footer"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"color",value:a.footer_bg_color,onChange:l=>x({...a,footer_bg_color:l.target.value}),className:"w-12 h-10 rounded cursor-pointer"}),e.jsx("input",{type:"text",value:a.footer_bg_color,onChange:l=>x({...a,footer_bg_color:l.target.value}),className:`flex-1 px-3 py-2 rounded-lg ${s?"bg-gray-900 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]})]}),e.jsxs("div",{className:"space-y-3 pt-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"enable_dark_mode",checked:a.enable_dark_mode,onChange:l=>x({...a,enable_dark_mode:l.target.checked}),className:"w-4 h-4 rounded border-gray-300"}),e.jsx("label",{htmlFor:"enable_dark_mode",className:"text-sm font-medium",children:"Habilitar Modo Escuro"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Tema Padrão"}),e.jsxs("select",{value:a.default_theme,onChange:l=>x({...a,default_theme:l.target.value}),className:`w-full px-4 py-2 rounded-lg ${s?"bg-gray-900 border-gray-700":"bg-gray-50 border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`,children:[e.jsx("option",{value:"dark",children:"Escuro"}),e.jsx("option",{value:"light",children:"Claro"})]})]})]})]})]}),d&&e.jsxs("div",{className:`${s?"bg-gray-800":"bg-white"} rounded-xl p-6`,children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx("i",{className:"ri-eye-line text-yellow-500"}),"Preview em Tempo Real"]}),e.jsxs("div",{className:"border-2 border-dashed border-gray-700 rounded-lg p-8",style:{fontFamily:a.font_family,fontSize:`${a.font_size_base}px`},children:[e.jsxs("div",{className:"p-4 rounded-lg mb-4",style:{backgroundColor:a.header_bg_color},children:[e.jsx("h1",{className:"text-2xl font-bold",style:{color:a.primary_color},children:a.site_name}),e.jsx("p",{className:"text-sm",style:{color:a.accent_color},children:a.site_tagline})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-4",children:[e.jsx("div",{className:"p-4 rounded-lg text-center",style:{backgroundColor:a.primary_color},children:e.jsx("p",{className:"text-sm font-medium text-black",children:"Primária"})}),e.jsx("div",{className:"p-4 rounded-lg text-center",style:{backgroundColor:a.accent_color},children:e.jsx("p",{className:"text-sm font-medium text-black",children:"Destaque"})}),e.jsx("div",{className:"p-4 rounded-lg text-center",style:{backgroundColor:a.success_color},children:e.jsx("p",{className:"text-sm font-medium text-white",children:"Sucesso"})}),e.jsx("div",{className:"p-4 rounded-lg text-center",style:{backgroundColor:a.error_color},children:e.jsx("p",{className:"text-sm font-medium text-white",children:"Erro"})})]}),e.jsx("div",{className:"p-4 rounded-lg",style:{backgroundColor:a.footer_bg_color},children:e.jsx("p",{className:"text-sm text-center text-gray-400",children:"Footer Preview"})})]})]})]})}function ke(){const[s,a]=o.useState({topbar_email:"jokadamas616@gmail.com",topbar_phone:"+352 621 717 862",topbar_promo_text:"Envio grátis em compras acima de €50",show_topbar:!0,enable_theme_toggle:!0,primary_color:"#f59e0b",secondary_color:"#111827",accent_color:"#d97706",carousel_max_items:10,carousel_auto_play:!0,carousel_interval:3e3,footer_about_text:"Soluções digitais completas para o seu negócio. Qualidade, inovação e resultados garantidos.",footer_social_facebook:"https://facebook.com",footer_social_instagram:"https://instagram.com",footer_social_twitter:"https://twitter.com",footer_social_linkedin:"https://linkedin.com",footer_social_youtube:"https://youtube.com"}),[x,h]=o.useState(!1),[n,d]=o.useState(null),[g,y]=o.useState("header");o.useEffect(()=>{w()},[]);const w=async()=>{try{const{data:r,error:c}=await j.from("site_settings").select("*").single();if(c)throw c;r&&a({topbar_email:r.topbar_email||s.topbar_email,topbar_phone:r.topbar_phone||s.topbar_phone,topbar_promo_text:r.topbar_promo_text||s.topbar_promo_text,show_topbar:r.show_topbar??s.show_topbar,enable_theme_toggle:r.enable_theme_toggle??s.enable_theme_toggle,primary_color:r.primary_color||s.primary_color,secondary_color:r.secondary_color||s.secondary_color,accent_color:r.accent_color||s.accent_color,carousel_max_items:r.carousel_max_items||s.carousel_max_items,carousel_auto_play:r.carousel_auto_play??s.carousel_auto_play,carousel_interval:r.carousel_interval||s.carousel_interval,footer_about_text:r.footer_about_text||s.footer_about_text,footer_social_facebook:r.footer_social_facebook||s.footer_social_facebook,footer_social_instagram:r.footer_social_instagram||s.footer_social_instagram,footer_social_twitter:r.footer_social_twitter||s.footer_social_twitter,footer_social_linkedin:r.footer_social_linkedin||s.footer_social_linkedin,footer_social_youtube:r.footer_social_youtube||s.footer_social_youtube})}catch(r){console.error("Erro ao carregar configurações:",r)}},m=async()=>{h(!0),d(null);try{const{error:r}=await j.from("site_settings").upsert({id:1,...s,updated_at:new Date().toISOString()});if(r)throw r;d({type:"success",text:"Configurações salvas com sucesso!"}),setTimeout(()=>{window.location.reload()},1e3)}catch(r){console.error("Erro ao salvar:",r),d({type:"error",text:"Erro ao salvar configurações"})}finally{h(!1)}},l=[{id:"header",label:"Header & Topbar",icon:"ri-layout-top-line"},{id:"theme",label:"Tema & Cores",icon:"ri-palette-line"},{id:"carousel",label:"Carousel",icon:"ri-slideshow-line"},{id:"footer",label:"Footer & Redes Sociais",icon:"ri-layout-bottom-line"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Configurações do Site"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Controle completo sobre header, footer, tema e comportamento do site"})]}),e.jsx("button",{onClick:m,disabled:x,className:"px-6 py-3 bg-gradient-to-r from-amber-500 to-amber-600 text-white font-semibold rounded-lg hover:from-amber-600 hover:to-amber-700 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed whitespace-nowrap cursor-pointer",children:x?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-loader-4-line animate-spin mr-2"}),"A guardar..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-save-line mr-2"}),"Guardar Alterações"]})})]}),n&&e.jsx("div",{className:`p-4 rounded-lg ${n.type==="success"?"bg-green-50 dark:bg-green-900/20 text-green-800 dark:text-green-200 border border-green-200 dark:border-green-800":"bg-red-50 dark:bg-red-900/20 text-red-800 dark:text-red-200 border border-red-200 dark:border-red-800"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("i",{className:n.type==="success"?"ri-checkbox-circle-line":"ri-error-warning-line"}),e.jsx("span",{children:n.text})]})}),e.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:e.jsx("div",{className:"flex gap-2 overflow-x-auto",children:l.map(r=>e.jsxs("button",{onClick:()=>y(r.id),className:`px-6 py-3 font-medium whitespace-nowrap transition-all duration-200 border-b-2 cursor-pointer ${g===r.id?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"}`,children:[e.jsx("i",{className:`${r.icon} mr-2`}),r.label]},r.id))})}),g==="header"&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between pb-4 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Configurações do Header"}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Mostrar Topbar"}),e.jsx("input",{type:"checkbox",checked:s.show_topbar,onChange:r=>a({...s,show_topbar:r.target.checked}),className:"w-5 h-5 text-amber-600 rounded focus:ring-2 focus:ring-amber-500 cursor-pointer"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"E-mail de Contacto"}),e.jsx("input",{type:"email",value:s.topbar_email,onChange:r=>a({...s,topbar_email:r.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"email@exemplo.com"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Telefone / WhatsApp"}),e.jsx("input",{type:"text",value:s.topbar_phone,onChange:r=>a({...s,topbar_phone:r.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"+352 621 717 862"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Texto Promocional (Topbar)"}),e.jsx("input",{type:"text",value:s.topbar_promo_text,onChange:r=>a({...s,topbar_promo_text:r.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"Envio grátis em compras acima de €50"})]})]}),e.jsx("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:s.enable_theme_toggle,onChange:r=>a({...s,enable_theme_toggle:r.target.checked}),className:"w-5 h-5 text-amber-600 rounded focus:ring-2 focus:ring-amber-500 cursor-pointer"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Ativar Toggle Dark/Light Mode"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Permite aos utilizadores alternar entre modo claro e escuro"})]})]})})]}),g==="theme"&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 space-y-6",children:[e.jsxs("div",{className:"pb-4 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Cores do Tema"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Personalize as cores principais do site"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Cor Primária"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("input",{type:"color",value:s.primary_color,onChange:r=>a({...s,primary_color:r.target.value}),className:"w-16 h-12 rounded-lg cursor-pointer border-2 border-gray-300 dark:border-gray-600"}),e.jsx("input",{type:"text",value:s.primary_color,onChange:r=>a({...s,primary_color:r.target.value}),className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white font-mono text-sm"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Cor Secundária"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("input",{type:"color",value:s.secondary_color,onChange:r=>a({...s,secondary_color:r.target.value}),className:"w-16 h-12 rounded-lg cursor-pointer border-2 border-gray-300 dark:border-gray-600"}),e.jsx("input",{type:"text",value:s.secondary_color,onChange:r=>a({...s,secondary_color:r.target.value}),className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white font-mono text-sm"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Cor de Destaque"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("input",{type:"color",value:s.accent_color,onChange:r=>a({...s,accent_color:r.target.value}),className:"w-16 h-12 rounded-lg cursor-pointer border-2 border-gray-300 dark:border-gray-600"}),e.jsx("input",{type:"text",value:s.accent_color,onChange:r=>a({...s,accent_color:r.target.value}),className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white font-mono text-sm"})]})]})]}),e.jsxs("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-white mb-4",children:"Preview das Cores"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsx("div",{className:"p-4 rounded-lg text-center",style:{backgroundColor:s.primary_color},children:e.jsx("span",{className:"text-white font-semibold",children:"Primária"})}),e.jsx("div",{className:"p-4 rounded-lg text-center",style:{backgroundColor:s.secondary_color},children:e.jsx("span",{className:"text-white font-semibold",children:"Secundária"})}),e.jsx("div",{className:"p-4 rounded-lg text-center",style:{backgroundColor:s.accent_color},children:e.jsx("span",{className:"text-white font-semibold",children:"Destaque"})})]})]})]}),g==="carousel"&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 space-y-6",children:[e.jsxs("div",{className:"pb-4 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Configurações do Carousel"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Controle o comportamento do carousel de produtos em destaque"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Máximo de Itens"}),e.jsx("input",{type:"number",min:"1",max:"20",value:s.carousel_max_items,onChange:r=>a({...s,carousel_max_items:parseInt(r.target.value)||10}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Número máximo de produtos a exibir no carousel"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Intervalo de Rotação (ms)"}),e.jsx("input",{type:"number",min:"1000",max:"10000",step:"500",value:s.carousel_interval,onChange:r=>a({...s,carousel_interval:parseInt(r.target.value)||3e3}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Tempo entre cada transição (em milissegundos)"})]})]}),e.jsx("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:s.carousel_auto_play,onChange:r=>a({...s,carousel_auto_play:r.target.checked}),className:"w-5 h-5 text-amber-600 rounded focus:ring-2 focus:ring-amber-500 cursor-pointer"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Auto-Play Ativado"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"O carousel roda automaticamente"})]})]})})]}),g==="footer"&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 space-y-6",children:[e.jsxs("div",{className:"pb-4 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Configurações do Footer"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Personalize o rodapé e links de redes sociais"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Texto Sobre a Empresa"}),e.jsx("textarea",{value:s.footer_about_text,onChange:r=>a({...s,footer_about_text:r.target.value}),rows:3,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white resize-none",placeholder:"Descrição breve da empresa..."})]}),e.jsxs("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-white mb-4",children:"Redes Sociais"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 flex items-center justify-center bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 rounded-lg",children:e.jsx("i",{className:"ri-facebook-fill"})}),e.jsx("input",{type:"url",value:s.footer_social_facebook,onChange:r=>a({...s,footer_social_facebook:r.target.value}),className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"https://facebook.com/..."})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 flex items-center justify-center bg-pink-100 dark:bg-pink-900/30 text-pink-600 dark:text-pink-400 rounded-lg",children:e.jsx("i",{className:"ri-instagram-line"})}),e.jsx("input",{type:"url",value:s.footer_social_instagram,onChange:r=>a({...s,footer_social_instagram:r.target.value}),className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"https://instagram.com/..."})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 flex items-center justify-center bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-white rounded-lg",children:e.jsx("i",{className:"ri-twitter-x-line"})}),e.jsx("input",{type:"url",value:s.footer_social_twitter,onChange:r=>a({...s,footer_social_twitter:r.target.value}),className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"https://twitter.com/..."})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 flex items-center justify-center bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 rounded-lg",children:e.jsx("i",{className:"ri-linkedin-fill"})}),e.jsx("input",{type:"url",value:s.footer_social_linkedin,onChange:r=>a({...s,footer_social_linkedin:r.target.value}),className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"https://linkedin.com/..."})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 flex items-center justify-center bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400 rounded-lg",children:e.jsx("i",{className:"ri-youtube-fill"})}),e.jsx("input",{type:"url",value:s.footer_social_youtube,onChange:r=>a({...s,footer_social_youtube:r.target.value}),className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"https://youtube.com/..."})]})]})]})]})]})}function Re(s,a){let x=s.trim().replace(/\/+$/,"");return!x.startsWith("http://")&&!x.startsWith("https://")&&(x=`${a?"https":"http"}://${x}`),a&&x.startsWith("http://")&&(x=x.replace("http://","https://")),x}function Te(s,a){return`Basic ${btoa(`${s}:${a}`)}`}async function L(s,a={},x=15e3){const h=new AbortController,n=setTimeout(()=>h.abort(),x);try{const d=await fetch(s,{method:a.method||"GET",headers:{"Content-Type":"application/json",...a.headers},body:a.body,signal:h.signal});return clearTimeout(n),d}catch(d){throw clearTimeout(n),d.name==="AbortError"?new Error("Timeout: O servidor demorou muito a responder. Verifique sua conexão ou tente novamente."):d}}async function Ae(s){try{const{storeUrl:a,consumerKey:x,consumerSecret:h,apiVersion:n,useSsl:d}=s;if(!a||!x||!h)return{success:!1,message:"❌ Preencha todos os campos obrigatórios (URL, Consumer Key e Consumer Secret)"};let g=a.trim();g.endsWith("/")&&(g=g.slice(0,-1)),!g.startsWith("http://")&&!g.startsWith("https://")&&(g=d?`https://${g}`:`http://${g}`),!d&&g.startsWith("https://")&&(g=g.replace("https://","http://")),d&&g.startsWith("http://")&&(g=g.replace("http://","https://")),console.log("🔍 Testando conexão:",{url:g,ssl:d,apiVersion:n||"wc/v3"});try{console.log("📡 Verificando se o site está acessível...");const v=await L(g,{method:"GET",headers:{Accept:"text/html,application/json"}},1e4);if(!v.ok)return{success:!1,message:`❌ Site retornou erro ${v.status}

🔍 Diagnóstico:
• O domínio existe mas retornou erro
• Pode estar em manutenção ou com problemas

✅ Soluções:
1. Abra ${g} no navegador e veja o que aparece
2. Verifique o painel do InfinityFree se a conta está ativa
3. Aguarde alguns minutos e tente novamente
4. Verifique se o WordPress foi instalado corretamente`};console.log("✅ Site está acessível")}catch(v){return console.error("❌ Site não está acessível:",v),{success:!1,message:`❌ Não foi possível aceder a ${g}

🔍 Possíveis causas:
1. ⚠️ Site ainda não foi configurado no InfinityFree
2. ⚠️ WordPress não foi instalado
3. ⚠️ Domínio não está a apontar corretamente
4. ⚠️ Conta InfinityFree suspensa ou inativa
5. ⚠️ DNS ainda não propagou (pode demorar até 48h)

✅ Soluções:
1. Aceda ao painel InfinityFree e verifique se a conta está ativa
2. Abra ${g} no navegador - deve aparecer o WordPress
3. Se aparecer página em branco, instale o WordPress via Softaculous
4. Aguarde a propagação do DNS (pode demorar até 48h)
5. Tente usar HTTP em vez de HTTPS (desmarque "Usar SSL")

📚 Precisa de ajuda? Consulte: WORDPRESS_INFINITYFREE_SETUP.md`}}const y=`${g}/wp-json/`;console.log("🔍 Verificando API REST:",y);try{const v=await L(y,{method:"GET",headers:{Accept:"application/json"}},1e4);if(!v.ok)return{success:!1,message:`❌ API REST não está acessível (erro ${v.status})

🔍 Diagnóstico:
• WordPress está instalado mas a API REST não funciona
• Pode ser problema de permalinks ou .htaccess

✅ Soluções:
1. No WordPress admin, vá em Definições → Permalinks
2. Selecione "Nome do artigo"
3. Clique em "Guardar alterações"
4. Tente novamente

Se o erro persistir:
• Verifique se o ficheiro .htaccess existe na raiz do WordPress
• Confirme que mod_rewrite está ativo no servidor`};const C=await v.json();if(console.log("✅ API REST está ativa:",C),!C.namespaces||!C.namespaces.includes("wc/v3"))return{success:!1,message:`❌ WooCommerce não está instalado ou ativo

🔍 Diagnóstico:
• WordPress está funcional
• API REST está ativa
• Mas WooCommerce não foi detetado

✅ Soluções:
1. No WordPress admin, vá em Plugins
2. Procure por "WooCommerce"
3. Clique em "Instalar Agora"
4. Clique em "Ativar"
5. Tente novamente

Namespaces detetados: ${C.namespaces?.join(", ")||"nenhum"}`};console.log("✅ WooCommerce está instalado")}catch(v){return console.error("❌ Erro ao verificar API REST:",v),{success:!1,message:`❌ API REST não responde

🔍 Possíveis causas:
1. Permalinks não estão configurados
2. Ficheiro .htaccess com problemas
3. mod_rewrite não está ativo

✅ Soluções:
1. Aceda ao WordPress admin: ${g}/wp-admin
2. Vá em Definições → Permalinks
3. Selecione "Nome do artigo"
4. Clique em "Guardar alterações"
5. Tente novamente

Erro técnico: ${v.message}`}}const w=n||"wc/v3",m=`${g}/wp-json/${w}/products`;console.log("🔍 Testando credenciais WooCommerce:",m);const l=btoa(`${x}:${h}`),r=await L(`${m}?per_page=1`,{method:"GET",headers:{Authorization:`Basic ${l}`,Accept:"application/json"}},15e3);if(!r.ok){const v=await r.text();return console.error("❌ Erro na autenticação:",r.status,v),r.status===401?{success:!1,message:`❌ Credenciais inválidas (erro 401)

🔍 Diagnóstico:
• Consumer Key ou Consumer Secret estão incorretos
• Ou as chaves foram revogadas

✅ Soluções:
1. No WordPress admin, vá em WooCommerce → Definições → Avançado → REST API
2. Verifique se a chave existe e está ativa
3. Se necessário, crie uma nova chave:
   - Clique em "Adicionar chave"
   - Descrição: "Integração GitHub Pages"
   - Permissões: "Leitura/Escrita"
   - Clique em "Gerar chave API"
4. Copie as novas chaves e cole aqui
5. Tente novamente`}:r.status===404?{success:!1,message:`❌ Endpoint não encontrado (erro 404)

🔍 Diagnóstico:
• A versão da API "${w}" não existe
• Ou os permalinks não estão configurados

✅ Soluções:
1. Tente mudar a versão da API para "wc/v3"
2. Verifique os permalinks (Definições → Permalinks → Nome do artigo)
3. Tente novamente`}:{success:!1,message:`❌ Erro ao conectar (${r.status})

Detalhes: ${v.substring(0,200)}

✅ Verifique:
• Consumer Key e Consumer Secret estão corretos
• Permissões da chave estão em "Leitura/Escrita"
• Permalinks configurados como "Nome do artigo"`}}const c=await r.json();console.log("✅ Conexão bem-sucedida!",c);let b=0,$="Desconhecido";try{const v=`${g}/wp-json/${w}/system_status`,C=await L(v,{method:"GET",headers:{Authorization:`Basic ${l}`,Accept:"application/json"}},1e4);C.ok&&($=(await C.json()).environment?.version||"Desconhecido")}catch{console.warn("Não foi possível obter versão do WooCommerce")}try{const v=`${g}/wp-json/${w}/products`,C=await L(`${v}?per_page=1`,{method:"GET",headers:{Authorization:`Basic ${l}`,Accept:"application/json"}},1e4);if(C.ok){const t=C.headers.get("X-WP-Total");b=t?parseInt(t,10):0}}catch{console.warn("Não foi possível contar produtos")}return{success:!0,message:"✅ Conexão estabelecida com sucesso!",data:{totalProducts:b,wooVersion:$,apiVersion:w,storeUrl:g}}}catch(a){return console.error("❌ Erro inesperado:",a),{success:!1,message:`❌ Erro inesperado ao testar conexão

Detalhes: ${a.message}

✅ Tente:
1. Verificar se o site está online: abra no navegador
2. Verificar se o WordPress está instalado
3. Verificar se o WooCommerce está ativo
4. Aguardar alguns minutos e tentar novamente`}}}async function Ie(s,a=50,x=1){try{const n=`${Re(s.store_url,s.use_ssl)}/wp-json/${s.api_version}/products?per_page=${a}&page=${x}&status=publish&orderby=date&order=desc`,d=Te(s.consumer_key,s.consumer_secret);console.log(`🔍 Buscando produtos (página ${x}, limite ${a})...`);const g=await L(n,{method:"GET",headers:{Authorization:d}},2e4);if(!g.ok)throw new Error(`Erro ${g.status}: ${g.statusText}`);const y=await g.json(),w=parseInt(g.headers.get("X-WP-Total")||"0"),m=parseInt(g.headers.get("X-WP-TotalPages")||"1");return console.log(`✅ ${y.length} produtos carregados (${w} total)`),{success:!0,total:w,total_pages:m,current_page:x,products:y.map(l=>({id:l.id,name:l.name,slug:l.slug,sku:l.sku||`woo-${l.id}`,price:l.price||l.regular_price||"0",regular_price:l.regular_price||"0",sale_price:l.sale_price||null,stock:l.stock_quantity||0,stock_status:l.stock_status,manage_stock:l.manage_stock,image:l.images?.[0]?.src||"",images:l.images?.map(r=>r.src)||[],category:l.categories?.[0]?.name||"Sem categoria",categories:l.categories?.map(r=>r.name)||[],description:l.description||"",short_description:l.short_description||"",weight:l.weight||null,dimensions:l.dimensions||null,variations:l.variations||[],attributes:l.attributes||[],tags:l.tags?.map(r=>r.name)||[]}))}}catch(h){return console.error("❌ Erro ao buscar produtos:",h),{success:!1,message:h.message||"Erro ao buscar produtos",products:[]}}}async function M(s=50){try{const{data:a,error:x}=await j.from("integrations_woocommerce").select("*").maybeSingle();if(x||!a)throw new Error("Configuração WooCommerce não encontrada. Por favor, conecte primeiro.");const h={store_url:a.store_url,consumer_key:a.consumer_key,consumer_secret:a.consumer_secret,api_version:a.api_version||"wc/v3",use_ssl:a.use_ssl??!0,products_only:a.products_only??!0};return await Ie(h,s)}catch(a){return console.error("Erro ao buscar produtos:",a),{success:!1,message:a.message||"Erro ao buscar produtos",products:[]}}}async function De(s,a,x={}){try{const{data:h,error:n}=await j.from("woocommerce_import_jobs").insert({status:"pending",total_items:0,processed_items:0}).select().single();if(n)throw n;const g=await M(s==="preview"?50:1e3);if(!g.success)throw new Error(g.message);await j.from("woocommerce_import_jobs").update({status:"running",total_items:g.products.length}).eq("id",h.id);let y=0,w=0,m=0;const l=[];for(const r of g.products)try{const{data:c}=await j.from("products").select("id").eq("sku",r.sku).maybeSingle();if(c&&a.update_existing){const b={title:r.name,updated_at:new Date().toISOString()};a.sync_stock_only?b.stock=r.stock||0:(b.description=r.description,b.price=parseFloat(r.price)||0,b.stock=r.stock||0,b.weight=r.weight,b.dimensions=r.dimensions,a.import_images&&r.images.length>0&&(b.images=r.images));const{error:$}=await j.from("products").update(b).eq("id",c.id);if($)throw $;await j.from("product_mappings").upsert({woo_product_id:r.id,local_product_id:c.id,sku:r.sku,last_synced_at:new Date().toISOString()}),m++}else if(!c&&a.create_new){const{data:b,error:$}=await j.from("products").insert({title:r.name,description:r.description,sku:r.sku,price:parseFloat(r.price)||0,stock:r.stock||0,weight:r.weight,dimensions:r.dimensions,images:a.import_images?r.images:[],is_active:!0,created_at:new Date().toISOString()}).select().single();if($)throw $;b&&(await j.from("product_mappings").insert({woo_product_id:r.id,local_product_id:b.id,sku:r.sku,last_synced_at:new Date().toISOString()}),w++)}y++,y%10===0&&await j.from("woocommerce_import_jobs").update({processed_items:y}).eq("id",h.id)}catch(c){console.error(`Erro ao processar produto ${r.sku}:`,c),l.push(`${r.sku}: ${c.message}`)}return await j.from("woocommerce_import_jobs").update({status:l.length>0&&y===0?"failed":"completed",processed_items:y,completed_at:new Date().toISOString(),error_message:l.length>0?l.slice(0,5).join("; "):null}).eq("id",h.id),await j.from("integrations_woocommerce").update({last_sync_at:new Date().toISOString()}).limit(1),localStorage.setItem("last_woo_sync",JSON.stringify({timestamp:new Date().toISOString(),processed:y,created:w,updated:m,errors:l.length})),{success:!0,job_id:h.id,processed:y,created:w,updated:m,total:g.products.length,errors:l}}catch(h){return console.error("Erro ao importar produtos:",h),{success:!1,message:h.message||"Erro ao importar produtos"}}}function Fe({darkMode:s}){const[a,x]=o.useState({storeUrl:"",consumerKey:"",consumerSecret:"",apiVersion:"wc/v3",useSsl:!0,onlyProducts:!0}),[h,n]=o.useState(!1),[d,g]=o.useState(!1),[y,w]=o.useState(null),[m,l]=o.useState(!1),[r,c]=o.useState([]),[b,$]=o.useState(!1),[v,C]=o.useState(!1),[t,N]=o.useState(!1),[f,R]=o.useState([]),[_,u]=o.useState([]),[p,k]=o.useState(!1),[E,I]=o.useState(null),[S,A]=o.useState(null),[ee,Ve]=o.useState({}),[W,B]=o.useState("manual"),[D,q]=o.useState({update_existing:!0,create_new:!0,sync_stock_only:!1,import_images:!0}),[se,G]=o.useState(!0),[qe,F]=o.useState(null),[O,re]=o.useState(""),[U,te]=o.useState("all"),[Oe,ae]=o.useState([]);o.useEffect(()=>{K(),H(),le()},[]);const K=async()=>{try{G(!0),F(null);const{data:i,error:P}=await j.from("integrations_woocommerce").select("*").maybeSingle();if(P)throw P;i&&(n(!0),x({storeUrl:i.store_url,consumerKey:"••••••••",consumerSecret:"••••••••",apiVersion:i.api_version||"wc/v3",useSsl:i.use_ssl??!0,onlyProducts:i.products_only??!0}),B(i.sync_schedule||"manual"),z())}catch(i){console.error("Erro ao carregar conexão:",i),F("Falha ao carregar configurações de conexão")}finally{G(!1)}},H=async()=>{try{F(null);const{data:i,error:P}=await j.from("woocommerce_import_jobs").select("*").order("created_at",{ascending:!1}).limit(10);if(P)throw P;R(i||[])}catch(i){console.error("Erro ao carregar jobs:",i),F("Falha ao carregar histórico de importações")}},le=async()=>{try{const{data:i,error:P}=await j.from("categories").select("*").order("name");if(P)throw P;ae(i||[])}catch(i){console.error("Erro ao carregar categorias:",i)}},z=async()=>{try{const{data:i,error:P}=await j.from("product_mappings").select(`
          woo_product_id,
          local_product_id,
          sku,
          last_synced_at,
          products (
            id,
            title,
            sku,
            price,
            sale_price,
            stock,
            images,
            description,
            short_description,
            category_id,
            weight,
            dimensions,
            manage_stock,
            stock_status,
            categories (
              name
            )
          )
        `).order("last_synced_at",{ascending:!1});if(P)throw P;const V=i?.map(T=>({id:T.products.id,woo_id:T.woo_product_id,title:T.products.title,sku:T.products.sku,price:T.products.price,sale_price:T.products.sale_price,stock:T.products.stock,images:T.products.images||[],description:T.products.description||"",short_description:T.products.short_description||"",category:T.products.categories?.name||"Sem categoria",weight:T.products.weight,dimensions:T.products.dimensions,manage_stock:T.products.manage_stock,stock_status:T.products.stock_status,last_synced_at:T.last_synced_at}))||[];u(V)}catch(i){console.error("Erro ao carregar produtos importados:",i)}},ie=async()=>{g(!0),w(null);try{const i=Date.now(),P=await Ae(a),V=Date.now()-i;w({success:P.success,latency:V,message:P.message,data:P.data}),P.success&&n(!0)}catch(i){w({success:!1,message:i.message||"Erro ao testar conexão"})}finally{g(!1)}},oe=async()=>{if(!a.storeUrl||!a.consumerKey||!a.consumerSecret){F("Por favor, preencha todos os campos de conexão");return}try{N(!0),F(null);const{error:i}=await j.from("integrations_woocommerce").upsert({store_url:a.storeUrl,consumer_key:a.consumerKey.replace(/•/g,""),consumer_secret:a.consumerSecret.replace(/•/g,""),api_version:a.apiVersion,use_ssl:a.useSsl,products_only:a.onlyProducts,sync_schedule:W,updated_at:new Date().toISOString()});if(i)throw i;alert("✅ Conexão salva com sucesso!"),K()}catch(i){console.error("Erro ao salvar:",i),F("Erro ao salvar conexão. Tente novamente.")}finally{N(!1)}},ne=async()=>{try{$(!0);const i=await M(50);i.success?c(i.products||[]):alert(`❌ Erro: ${i.message}`)}catch(i){console.error("Erro ao carregar preview:",i),alert("❌ Erro ao carregar preview")}},ce=async i=>{C(!0);try{const P=await De(i,D,ee);P.success?(alert(`✅ Import ${i==="preview"?"preview":"completo"} concluído!

Processados: ${P.processed}/${P.total}
Criados: ${P.created}
Atualizados: ${P.updated}`),H(),z()):alert(`❌ Erro: ${P.message}`)}catch(P){console.error("Erro ao importar:",P),alert("❌ Erro ao iniciar importação")}finally{C(!1)}},de=async()=>{if(confirm("Tem certeza que deseja desconectar o WooCommerce?"))try{F(null);const{error:i}=await j.from("integrations_woocommerce").delete().eq("store_url",a.storeUrl);if(i)throw i;n(!1),x({storeUrl:"",consumerKey:"",consumerSecret:"",apiVersion:"wc/v3",useSsl:!0,onlyProducts:!0}),R([]),c([]),$(!1),u([]),k(!1),alert("✅ Desconectado com sucesso!")}catch(i){console.error("Erro ao desconectar:",i),F("Erro ao desconectar. Tente novamente.")}},me=async()=>{if(S)try{const{error:i}=await j.from("products").update({title:S.title,price:S.price,sale_price:S.sale_price,stock:S.stock,description:S.description,short_description:S.short_description,images:S.images,weight:S.weight,updated_at:new Date().toISOString()}).eq("id",S.id);if(i)throw i;alert("✅ Produto atualizado com sucesso!"),A(null),z()}catch(i){console.error("Erro ao salvar produto:",i),alert("❌ Erro ao salvar produto")}},J=_.filter(i=>{const P=i.title.toLowerCase().includes(O.toLowerCase())||i.sku.toLowerCase().includes(O.toLowerCase()),V=U==="all"||i.category===U;return P&&V});return se?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"w-8 h-8 border-2 border-primary border-t-transparent rounded-full animate-spin"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Integração WooCommerce"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Conecte sua loja WooCommerce e sincronize produtos automaticamente"})]}),h&&e.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-green-50 text-green-700 rounded-lg",children:[e.jsx("i",{className:"ri-checkbox-circle-fill text-xl"}),e.jsx("span",{className:"font-medium",children:"Conectado"})]})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("i",{className:"ri-information-fill text-blue-600 text-xl mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"📘 Guia Rápido - InfinityFree"}),e.jsxs("div",{className:"text-sm text-blue-800 space-y-2",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"1. URL da Loja:"})," Use o domínio completo (ex: ",e.jsx("code",{className:"bg-blue-100 px-1 rounded",children:"seusite.ct.ws"}),")"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"2. SSL/HTTPS:"})," Se tiver erro de conexão, ",e.jsx("strong",{children:'desative "Usar SSL"'})," primeiro para testar"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"3. Chaves API:"})," WordPress → WooCommerce → Configurações → Avançado → REST API → Adicionar chave"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"4. Permissões:"})," Selecione ",e.jsx("strong",{children:'"Leitura/Escrita"'})," ao gerar as chaves"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"5. Permalinks:"})," WordPress → Configurações → Permalinks → Selecione ",e.jsx("strong",{children:'"Nome do post"'})]})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"URL da Loja *"}),e.jsx("input",{type:"text",value:a.storeUrl,onChange:i=>x({...a,storeUrl:i.target.value}),placeholder:"https://sua-loja.com ou sua-loja.ct.ws",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Pode usar com ou sem https://"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Versão da API"}),e.jsxs("select",{value:a.apiVersion,onChange:i=>x({...a,apiVersion:i.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[e.jsx("option",{value:"wc/v3",children:"wc/v3 (Recomendado)"}),e.jsx("option",{value:"wc/v2",children:"wc/v2"}),e.jsx("option",{value:"wc/v1",children:"wc/v1"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Consumer Key *"}),e.jsx("input",{type:"text",value:a.consumerKey,onChange:i=>x({...a,consumerKey:i.target.value}),placeholder:"ck_xxxxxxxxxxxxxxxx",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent font-mono text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Consumer Secret *"}),e.jsx("input",{type:"password",value:a.consumerSecret,onChange:i=>x({...a,consumerSecret:i.target.value}),placeholder:"cs_xxxxxxxxxxxxxxxx",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent font-mono text-sm"})]})]}),e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:a.useSsl,onChange:i=>x({...a,useSsl:i.target.checked}),className:"w-5 h-5 text-purple-600 rounded focus:ring-2 focus:ring-purple-500"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Usar SSL (HTTPS)"}),e.jsx("p",{className:"text-xs text-gray-500",children:"⚠️ Se tiver erro de conexão no InfinityFree, desative esta opção primeiro"})]})]}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:a.onlyProducts,onChange:i=>x({...a,onlyProducts:i.target.checked}),className:"w-5 h-5 text-purple-600 rounded focus:ring-2 focus:ring-purple-500"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Sincronizar apenas produtos"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Ignora pedidos, clientes e outras entidades"})]})]})]}),e.jsxs("div",{className:"mt-6 flex gap-3",children:[e.jsx("button",{onClick:ie,disabled:d||!a.storeUrl||!a.consumerKey||!a.consumerSecret,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed flex items-center gap-2 whitespace-nowrap",children:d?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-loader-4-line animate-spin"}),"Testando..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-plug-line"}),"Testar Conexão"]})}),e.jsx("button",{onClick:oe,disabled:t||!y?.success,className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:bg-gray-300 disabled:cursor-not-allowed flex items-center gap-2 whitespace-nowrap",children:t?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-loader-4-line animate-spin"}),"Salvando..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-save-line"}),"Salvar Conexão"]})}),h&&e.jsxs("button",{onClick:de,className:"px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 flex items-center gap-2 whitespace-nowrap",children:[e.jsx("i",{className:"ri-link-unlink"}),"Desconectar"]})]}),y&&e.jsx("div",{className:`mt-4 p-4 rounded-lg ${y.success?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("i",{className:`${y.success?"ri-checkbox-circle-fill text-green-600":"ri-error-warning-fill text-red-600"} text-xl mt-0.5`}),e.jsxs("div",{className:"flex-1",children:[e.jsx("pre",{className:"text-sm whitespace-pre-wrap font-sans",style:{fontFamily:"inherit"},children:y.message}),y.success&&y.latency&&e.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:["⚡ Latência: ",y.latency,"ms"]})]})]})})]}),h&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:`p-6 rounded-xl ${s?"bg-gray-800/50":"bg-white"} border ${s?"border-gray-700":"border-gray-200"} shadow-lg`,children:[e.jsxs("h3",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[e.jsx("i",{className:"ri-download-cloud-line text-accent"}),"Importação de Produtos"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:D.update_existing,onChange:i=>q({...D,update_existing:i.target.checked}),className:"w-4 h-4 rounded border-gray-300"}),e.jsx("span",{className:`text-sm ${s?"text-gray-300":"text-gray-700"}`,children:"Atualizar produtos existentes (por SKU)"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:D.create_new,onChange:i=>q({...D,create_new:i.target.checked}),className:"w-4 h-4 rounded border-gray-300"}),e.jsx("span",{className:`text-sm ${s?"text-gray-300":"text-gray-700"}`,children:"Criar novos produtos"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:D.sync_stock_only,onChange:i=>q({...D,sync_stock_only:i.target.checked}),className:"w-4 h-4 rounded border-gray-300"}),e.jsx("span",{className:`text-sm ${s?"text-gray-300":"text-gray-700"}`,children:"Sincronizar apenas stock"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:D.import_images,onChange:i=>q({...D,import_images:i.target.checked}),className:"w-4 h-4 rounded border-gray-300"}),e.jsx("span",{className:`text-sm ${s?"text-gray-300":"text-gray-700"}`,children:"Importar imagens"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${s?"text-gray-200":"text-gray-700"}`,children:"Agendamento de Sincronização"}),e.jsxs("select",{value:W,onChange:i=>B(i.target.value),className:`w-full max-w-xs px-4 py-2.5 rounded-lg ${s?"bg-gray-900 border-gray-600 text-white":"bg-gray-50 border-gray-300 text-gray-900"} border focus:outline-none focus:ring-2 focus:ring-primary`,children:[e.jsx("option",{value:"manual",children:"Manual"}),e.jsx("option",{value:"hourly",children:"A cada hora"}),e.jsx("option",{value:"daily",children:"Diariamente"}),e.jsx("option",{value:"weekly",children:"Semanalmente"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:ne,className:"px-6 py-2.5 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors flex items-center gap-2 whitespace-nowrap font-medium shadow-lg",children:[e.jsx("i",{className:"ri-eye-line"}),"Preview (50 produtos)"]}),e.jsx("button",{onClick:()=>ce("full"),disabled:v,className:"px-6 py-2.5 bg-accent text-white rounded-lg hover:opacity-90 transition-opacity disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 whitespace-nowrap font-medium shadow-lg",children:v?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Importando..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-download-line"}),"Importar Todos"]})}),_.length>0&&e.jsxs("button",{onClick:()=>k(!p),className:"px-6 py-2.5 bg-primary text-white rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap font-medium shadow-lg",children:[e.jsx("i",{className:"ri-list-check"}),"Ver Produtos Importados (",_.length,")"]})]})]}),b&&r.length>0&&e.jsxs("div",{className:`p-6 rounded-xl ${s?"bg-gray-800/50":"bg-white"} border ${s?"border-gray-700":"border-gray-200"} shadow-lg`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-bold",children:"Preview de Produtos"}),e.jsx("button",{onClick:()=>$(!1),className:"text-gray-400 hover:text-white",children:e.jsx("i",{className:"ri-close-line text-xl"})})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:s?"bg-gray-900":"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:`px-4 py-3 text-left font-semibold ${s?"text-gray-200":"text-gray-700"}`,children:"Imagem"}),e.jsx("th",{className:`px-4 py-3 text-left font-semibold ${s?"text-gray-200":"text-gray-700"}`,children:"Nome"}),e.jsx("th",{className:`px-4 py-3 text-left font-semibold ${s?"text-gray-200":"text-gray-700"}`,children:"SKU"}),e.jsx("th",{className:`px-4 py-3 text-left font-semibold ${s?"text-gray-200":"text-gray-700"}`,children:"Preço"}),e.jsx("th",{className:`px-4 py-3 text-left font-semibold ${s?"text-gray-200":"text-gray-700"}`,children:"Stock"}),e.jsx("th",{className:`px-4 py-3 text-left font-semibold ${s?"text-gray-200":"text-gray-700"}`,children:"Categoria"})]})}),e.jsx("tbody",{children:r.slice(0,10).map((i,P)=>e.jsxs("tr",{className:`border-t ${s?"border-gray-700":"border-gray-200"}`,children:[e.jsx("td",{className:"px-4 py-3",children:e.jsx("div",{className:`w-12 h-12 ${s?"bg-gray-700":"bg-gray-200"} rounded overflow-hidden`,children:i.image&&e.jsx("img",{src:i.image,alt:i.name,className:"w-full h-full object-cover"})})}),e.jsx("td",{className:`px-4 py-3 ${s?"text-gray-200":"text-gray-800"}`,children:i.name}),e.jsx("td",{className:`px-4 py-3 text-sm ${s?"text-gray-400":"text-gray-600"}`,children:i.sku||"-"}),e.jsxs("td",{className:"px-4 py-3 text-primary font-medium",children:["€",i.price]}),e.jsx("td",{className:`px-4 py-3 ${s?"text-gray-300":"text-gray-700"}`,children:i.stock}),e.jsx("td",{className:`px-4 py-3 text-sm ${s?"text-gray-400":"text-gray-600"}`,children:i.category})]},P))})]})})]}),p&&e.jsxs("div",{className:`p-6 rounded-xl ${s?"bg-gray-800/50":"bg-white"} border ${s?"border-gray-700":"border-gray-200"} shadow-lg`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"text-lg font-bold flex items-center gap-2",children:[e.jsx("i",{className:"ri-box-3-line text-primary"}),"Produtos Importados (",J.length,")"]}),e.jsx("button",{onClick:()=>k(!1),className:`text-gray-400 hover:${s?"text-white":"text-gray-900"}`,children:e.jsx("i",{className:"ri-close-line text-xl"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${s?"text-gray-200":"text-gray-700"}`,children:"Pesquisar"}),e.jsx("input",{type:"text",placeholder:"Nome ou SKU...",value:O,onChange:i=>re(i.target.value),className:`w-full px-4 py-2.5 rounded-lg ${s?"bg-gray-900 border-gray-600 text-white":"bg-gray-50 border-gray-300 text-gray-900"} border focus:outline-none focus:ring-2 focus:ring-primary`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${s?"text-gray-200":"text-gray-700"}`,children:"Categoria"}),e.jsxs("select",{value:U,onChange:i=>te(i.target.value),className:`w-full px-4 py-2.5 rounded-lg ${s?"bg-gray-900 border-gray-600 text-white":"bg-gray-50 border-gray-300 text-gray-900"} border focus:outline-none focus:ring-2 focus:ring-primary`,children:[e.jsx("option",{value:"all",children:"Todas as categorias"}),Array.from(new Set(_.map(i=>i.category))).map(i=>e.jsx("option",{value:i,children:i},i))]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:J.map(i=>e.jsxs("div",{className:`p-4 rounded-lg ${s?"bg-gray-900":"bg-gray-50"} border ${s?"border-gray-700":"border-gray-200"} hover:border-primary transition-colors cursor-pointer`,onClick:()=>I(i),children:[e.jsx("div",{className:`w-full h-48 ${s?"bg-gray-800":"bg-gray-200"} rounded-lg overflow-hidden mb-3`,children:i.images[0]&&e.jsx("img",{src:i.images[0],alt:i.title,className:"w-full h-full object-cover"})}),e.jsx("h4",{className:`font-semibold mb-2 ${s?"text-gray-100":"text-gray-900"}`,children:i.title}),e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"text-primary font-bold text-lg",children:["€",i.price]}),i.sale_price&&e.jsxs("span",{className:`text-sm line-through ${s?"text-gray-500":"text-gray-400"}`,children:["€",i.sale_price]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{className:s?"text-gray-400":"text-gray-600",children:["SKU: ",i.sku]}),e.jsxs("span",{className:`px-2 py-1 rounded ${i.stock>0?"bg-green-500/20 text-green-500":"bg-red-500/20 text-red-500"}`,children:["Stock: ",i.stock]})]}),e.jsx("div",{className:`text-xs mt-2 ${s?"text-gray-500":"text-gray-400"}`,children:i.category})]},i.id))})]}),E&&!S&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>I(null),children:e.jsxs("div",{className:`${s?"bg-gray-800":"bg-white"} rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto`,onClick:i=>i.stopPropagation(),children:[e.jsxs("div",{className:`sticky top-0 ${s?"bg-gray-800":"bg-white"} border-b ${s?"border-gray-700":"border-gray-200"} p-6 flex items-center justify-between`,children:[e.jsx("h3",{className:"text-xl font-bold",children:"Detalhes do Produto"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>{A(E),I(null)},className:"px-4 py-2 bg-primary text-white rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap font-medium",children:[e.jsx("i",{className:"ri-edit-line"}),"Editar"]}),e.jsx("button",{onClick:()=>I(null),className:`text-gray-400 hover:${s?"text-white":"text-gray-900"}`,children:e.jsx("i",{className:"ri-close-line text-2xl"})})]})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:`font-semibold mb-3 ${s?"text-gray-200":"text-gray-800"}`,children:"Imagens"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:E.images.map((i,P)=>e.jsx("div",{className:`w-full h-48 ${s?"bg-gray-900":"bg-gray-100"} rounded-lg overflow-hidden`,children:e.jsx("img",{src:i,alt:`${E.title} ${P+1}`,className:"w-full h-full object-cover"})},P))})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`text-sm font-medium ${s?"text-gray-400":"text-gray-600"}`,children:"Nome"}),e.jsx("p",{className:`text-lg font-semibold ${s?"text-gray-100":"text-gray-900"}`,children:E.title})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`text-sm font-medium ${s?"text-gray-400":"text-gray-600"}`,children:"Preço"}),e.jsxs("p",{className:"text-xl font-bold text-primary",children:["€",E.price]})]}),E.sale_price&&e.jsxs("div",{children:[e.jsx("label",{className:`text-sm font-medium ${s?"text-gray-400":"text-gray-600"}`,children:"Preço Promocional"}),e.jsxs("p",{className:"text-xl font-bold text-accent",children:["€",E.sale_price]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`text-sm font-medium ${s?"text-gray-400":"text-gray-600"}`,children:"SKU"}),e.jsx("p",{className:s?"text-gray-200":"text-gray-800",children:E.sku})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-sm font-medium ${s?"text-gray-400":"text-gray-600"}`,children:"Stock"}),e.jsxs("p",{className:`font-semibold ${E.stock>0?"text-green-500":"text-red-500"}`,children:[E.stock," unidades"]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-sm font-medium ${s?"text-gray-400":"text-gray-600"}`,children:"Categoria"}),e.jsx("p",{className:s?"text-gray-200":"text-gray-800",children:E.category})]}),E.weight&&e.jsxs("div",{children:[e.jsx("label",{className:`text-sm font-medium ${s?"text-gray-400":"text-gray-600"}`,children:"Peso"}),e.jsxs("p",{className:s?"text-gray-200":"text-gray-800",children:[E.weight," kg"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-sm font-medium ${s?"text-gray-400":"text-gray-600"}`,children:"Status do Stock"}),e.jsx("p",{className:s?"text-gray-200":"text-gray-800",children:E.stock_status})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-sm font-medium ${s?"text-gray-400":"text-gray-600"}`,children:"Última Sincronização"}),e.jsx("p",{className:s?"text-gray-200":"text-gray-800",children:new Date(E.last_synced_at).toLocaleString("pt-PT")})]})]})]}),e.jsxs("div",{className:"mt-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`text-sm font-medium ${s?"text-gray-400":"text-gray-600"}`,children:"Descrição Curta"}),e.jsx("div",{className:`mt-2 p-4 rounded-lg ${s?"bg-gray-900":"bg-gray-50"}`,dangerouslySetInnerHTML:{__html:E.short_description||"Sem descrição curta"}})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-sm font-medium ${s?"text-gray-400":"text-gray-600"}`,children:"Descrição Completa"}),e.jsx("div",{className:`mt-2 p-4 rounded-lg ${s?"bg-gray-900":"bg-gray-50"} max-h-64 overflow-y-auto`,dangerouslySetInnerHTML:{__html:E.description||"Sem descrição"}})]})]})]})]})}),S&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>A(null),children:e.jsxs("div",{className:`${s?"bg-gray-800":"bg-white"} rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto`,onClick:i=>i.stopPropagation(),children:[e.jsxs("div",{className:`sticky top-0 ${s?"bg-gray-800":"bg-white"} border-b ${s?"border-gray-700":"border-gray-200"} p-6 flex items-center justify-between`,children:[e.jsx("h3",{className:"text-xl font-bold",children:"Editar Produto"}),e.jsx("button",{onClick:()=>A(null),className:`text-gray-400 hover:${s?"text-white":"text-gray-900"}`,children:e.jsx("i",{className:"ri-close-line text-2xl"})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${s?"text-gray-200":"text-gray-700"}`,children:"Nome do Produto"}),e.jsx("input",{type:"text",value:S.title,onChange:i=>A({...S,title:i.target.value}),className:`w-full px-4 py-2.5 rounded-lg ${s?"bg-gray-900 border-gray-600 text-white":"bg-gray-50 border-gray-300 text-gray-900"} border focus:outline-none focus:ring-2 focus:ring-primary`})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${s?"text-gray-200":"text-gray-700"}`,children:"Preço (€)"}),e.jsx("input",{type:"number",step:"0.01",value:S.price,onChange:i=>A({...S,price:parseFloat(i.target.value)}),className:`w-full px-4 py-2.5 rounded-lg ${s?"bg-gray-900 border-gray-600 text-white":"bg-gray-50 border-gray-300 text-gray-900"} border focus:outline-none focus:ring-2 focus:ring-primary`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${s?"text-gray-200":"text-gray-700"}`,children:"Preço Promocional (€)"}),e.jsx("input",{type:"number",step:"0.01",value:S.sale_price||"",onChange:i=>A({...S,sale_price:i.target.value?parseFloat(i.target.value):void 0}),className:`w-full px-4 py-2.5 rounded-lg ${s?"bg-gray-900 border-gray-600 text-white":"bg-gray-50 border-gray-300 text-gray-900"} border focus:outline-none focus:ring-2 focus:ring-primary`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${s?"text-gray-200":"text-gray-700"}`,children:"Stock"}),e.jsx("input",{type:"number",value:S.stock,onChange:i=>A({...S,stock:parseInt(i.target.value)}),className:`w-full px-4 py-2.5 rounded-lg ${s?"bg-gray-900 border-gray-600 text-white":"bg-gray-50 border-gray-300 text-gray-900"} border focus:outline-none focus:ring-2 focus:ring-primary`})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${s?"text-gray-200":"text-gray-700"}`,children:"Descrição Curta"}),e.jsx("textarea",{rows:3,value:S.short_description,onChange:i=>A({...S,short_description:i.target.value}),className:`w-full px-4 py-2.5 rounded-lg ${s?"bg-gray-900 border-gray-600 text-white":"bg-gray-50 border-gray-300 text-gray-900"} border focus:outline-none focus:ring-2 focus:ring-primary`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${s?"text-gray-200":"text-gray-700"}`,children:"Descrição Completa"}),e.jsx("textarea",{rows:6,value:S.description,onChange:i=>A({...S,description:i.target.value}),className:`w-full px-4 py-2.5 rounded-lg ${s?"bg-gray-900 border-gray-600 text-white":"bg-gray-50 border-gray-300 text-gray-900"} border focus:outline-none focus:ring-2 focus:ring-primary`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${s?"text-gray-200":"text-gray-700"}`,children:"URLs das Imagens (uma por linha)"}),e.jsx("textarea",{rows:4,value:S.images.join(`
`),onChange:i=>A({...S,images:i.target.value.split(`
`).filter(P=>P.trim())}),className:`w-full px-4 py-2.5 rounded-lg ${s?"bg-gray-900 border-gray-600 text-white":"bg-gray-50 border-gray-300 text-gray-900"} border focus:outline-none focus:ring-2 focus:ring-primary`,placeholder:`https://exemplo.com/imagem1.jpg
https://exemplo.com/imagem2.jpg`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${s?"text-gray-200":"text-gray-700"}`,children:"Peso (kg)"}),e.jsx("input",{type:"text",value:S.weight||"",onChange:i=>A({...S,weight:i.target.value}),className:`w-full px-4 py-2.5 rounded-lg ${s?"bg-gray-900 border-gray-600 text-white":"bg-gray-50 border-gray-300 text-gray-900"} border focus:outline-none focus:ring-2 focus:ring-primary`})]}),e.jsxs("div",{className:"flex items-center gap-3 pt-4",children:[e.jsxs("button",{onClick:me,className:"px-6 py-2.5 bg-primary text-white rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap font-medium shadow-lg",children:[e.jsx("i",{className:"ri-save-line"}),"Salvar Alterações"]}),e.jsxs("button",{onClick:()=>A(null),className:`px-6 py-2.5 ${s?"bg-gray-700":"bg-gray-200"} ${s?"text-white":"text-gray-800"} rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap font-medium`,children:[e.jsx("i",{className:"ri-close-line"}),"Cancelar"]})]})]})]})}),e.jsxs("div",{className:`p-6 rounded-xl ${s?"bg-gray-800/50":"bg-white"} border ${s?"border-gray-700":"border-gray-200"} shadow-lg`,children:[e.jsxs("h3",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[e.jsx("i",{className:"ri-history-line text-primary"}),"Histórico de Importações"]}),f.length===0?e.jsx("p",{className:`${s?"text-gray-400":"text-gray-600"} text-center py-8`,children:"Nenhuma importação realizada ainda"}):e.jsx("div",{className:"space-y-3",children:f.map(i=>e.jsxs("div",{className:`p-4 rounded-lg ${s?"bg-gray-900":"bg-gray-50"} border ${s?"border-gray-700":"border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${i.status==="completed"?"bg-green-500/20 text-green-500":i.status==="failed"?"bg-red-500/20 text-red-500":i.status==="running"?"bg-blue-500/20 text-blue-500":"bg-gray-500/20 text-gray-500"}`,children:i.status==="completed"?"Concluído":i.status==="failed"?"Falhou":i.status==="running"?"Em execução":"Pendente"}),e.jsxs("span",{className:`text-sm ${s?"text-gray-300":"text-gray-700"}`,children:[i.processed_items," / ",i.total_items," produtos"]})]}),e.jsx("span",{className:`text-sm ${s?"text-gray-400":"text-gray-600"}`,children:new Date(i.created_at).toLocaleString("pt-PT")})]}),i.error_message&&e.jsx("p",{className:"text-sm text-red-500 mt-2",children:i.error_message})]},i.id))})]})]})]})}const Le=o.lazy(()=>xe(()=>import("./ServicesManagement-J6ilCWHJ.js"),__vite__mapDeps([0,1,2])));function ze(){const[s,a]=o.useState("dashboard"),[x,h]=o.useState(!0),[n,d]=o.useState("admin"),{user:g,signOut:y}=Y();Z(),o.useEffect(()=>{(async()=>{if(g)try{const{data:l,error:r}=await j.from("profiles").select("role").eq("id",g.id).single();if(r){console.error("Erro ao buscar role:",r);return}l?.role&&d(l.role)}catch(l){console.error("Erro ao buscar role:",l)}})()},[g]);const w=()=>(()=>{switch(s){case"dashboard":return e.jsx(X,{});case"products":return e.jsx(he,{});case"services":return e.jsx(o.Suspense,{fallback:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"w-12 h-12 border-4 border-[#b62bff] border-t-transparent rounded-full animate-spin"})}),children:e.jsx(Le,{})});case"categories":return e.jsx(be,{});case"orders":return e.jsx(ye,{});case"customers":return e.jsx(fe,{});case"content":return e.jsx(je,{});case"marketing":return e.jsx(Ne,{});case"financial":return e.jsx(ve,{});case"security":return e.jsx(we,{});case"automation":return e.jsx(_e,{});case"support":return e.jsx($e,{});case"shipping":return e.jsx(Ce,{});case"tax":return e.jsx(Se,{});case"marketplace":return e.jsx(Pe,{});case"site-settings":return e.jsx(ke,{});case"theme":return e.jsx(Ee,{});case"woocommerce":return e.jsx(Fe,{});default:return e.jsx(X,{})}})();return e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-[#0b0011]",children:[e.jsx(ge,{sidebarOpen:x,setSidebarOpen:h,userRole:n}),e.jsxs("div",{className:"flex",children:[e.jsx(ue,{activeSection:s,setActiveSection:a,sidebarOpen:x}),e.jsx("main",{className:`flex-1 transition-all duration-300 ${x?"ml-64":"ml-0"} pt-16`,children:e.jsx("div",{className:"p-6",children:w()})})]})]})}export{ze as default};
//# sourceMappingURL=page-Cb-H3EUI.js.map
