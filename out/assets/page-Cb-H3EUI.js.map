{"version":3,"mappings":"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","names":["AdminHeader","sidebarOpen","setSidebarOpen","userRole","user","signOut","useAuth","darkMode","toggleDarkMode","useTheme","navigate","useNavigate","showUserMenu","setShowUserMenu","useState","handleLogout","getRoleLabel","role","jsx","jsxs","Fragment","AdminSidebar","activeSection","setActiveSection","menuItems","item","DashboardOverview","stats","setStats","recentOrders","setRecentOrders","topProducts","setTopProducts","loading","setLoading","useEffect","loadDashboardData","productsRes","ordersRes","customersRes","ticketsRes","supabase","products","orders","customers","tickets","totalRevenue","sum","order","pendingOrders","o","lowStock","p","openTickets","t","error","statCards","alerts","card","index","alert","action","ProductFormModal","product","onClose","onSave","formData","setFormData","categories","setCategories","images","setImages","variants","setVariants","loadCategories","data","handleSubmit","e","productData","generateSlug","name","cat","ProductsManagement","setProducts","searchTerm","setSearchTerm","selectedCategory","setSelectedCategory","selectedStatus","setSelectedStatus","showModal","setShowModal","editingProduct","setEditingProduct","selectedProducts","setSelectedProducts","loadProducts","handleExportCSV","csv","filteredProducts","c","blob","url","a","matchesSearch","matchesCategory","matchesStatus","controls","control","id","CategoriesManagement","editingCategory","setEditingCategory","category","OrdersManagement","setOrders","filterStatus","setFilterStatus","selectedOrders","setSelectedOrders","showRefundModal","setShowRefundModal","selectedOrder","setSelectedOrder","loadOrders","handleStatusChange","orderId","newStatus","generateInvoicePDF","filteredOrders","statusOptions","status","CustomersManagement","setCustomers","selectedCustomer","setSelectedCustomer","showSegmentModal","setShowSegmentModal","filterType","setFilterType","loadCustomers","profilesData","profilesError","customersWithStats","profile","ordersData","orderCount","totalSpent","filteredCustomers","customer","daysSinceCreated","getRoleBadge","getCustomerType","ContentManagement","pages","setPages","banners","setBanners","settings","setSettings","loadContentData","pagesRes","bannersRes","settingsRes","settingsObj","setting","page","banner","MarketingManagement","campaigns","setCampaigns","coupons","setCoupons","showCouponModal","setShowCouponModal","loadMarketingData","campaignsRes","couponsRes","coupon","campaign","stat","FinancialManagement","transactions","setTransactions","dateRange","setDateRange","loadFinancialData","avgOrderValue","kpis","range","kpi","SecurityManagement","auditLogs","setAuditLogs","apiKeys","setApiKeys","webhooks","setWebhooks","loadSecurityData","logsRes","keysRes","webhooksRes","k","key","webhook","log","AutomationManagement","rules","setRules","templates","setTemplates","tasks","setTasks","loadAutomationData","rulesRes","templatesRes","tasksRes","rule","template","task","SupportManagement","setTickets","filterPriority","setFilterPriority","selectedTicket","setSelectedTicket","loadTickets","ticketId","filteredTickets","ticket","matchesPriority","priorityOptions","priority","count","ShippingManagement","shippingRules","setShippingRules","editingRule","setEditingRule","loadShippingRules","resetForm","handleEdit","handleDelete","countries","r","country","TaxManagement","taxRules","setTaxRules","loadTaxRules","acc","MarketplaceManagement","vendors","setVendors","commissionRules","setCommissionRules","activeTab","setActiveTab","loadData","vendorsData","rulesData","handleSubmitRule","handleApproveVendor","vendorId","handleRejectVendor","handleSuspendVendor","getStatusColor","v","vendor","ThemeEditor","previewMode","setPreviewMode","loadSettings","prev","handleSave","googleFonts","font","SiteSettingsManagement","message","setMessage","tabs","tab","normalizeStoreUrl","useSSL","normalized","createAuthHeader","consumerKey","consumerSecret","fetchWooCommerce","options","timeout","controller","timeoutId","response","testWooCommerceConnection","credentials","storeUrl","apiVersion","useSsl","normalizedUrl","siteCheckResponse","siteError","wpJsonUrl","wpJsonResponse","wpJsonData","wpJsonError","version","testUrl","auth","errorText","totalProducts","wooVersion","systemStatusUrl","systemResponse","countUrl","countResponse","totalHeader","fetchWooCommerceProductsDirect","limit","totalPages","img","tag","fetchWooCommerceProducts","config","importWooCommerceProducts","mode","categoryMapping","job","jobError","result","processedCount","createdCount","updatedCount","errors","existing","updateData","updateError","newProduct","createError","WooCommerceIntegration","setCredentials","isConnected","setIsConnected","testing","setTesting","testResult","setTestResult","showCredentials","setShowCredentials","previewProducts","setPreviewProducts","showPreview","setShowPreview","importing","setImporting","saving","setSaving","importJobs","setImportJobs","importedProducts","setImportedProducts","showImportedProducts","setShowImportedProducts","selectedProduct","setSelectedProduct","setCategoryMapping","syncSchedule","setSyncSchedule","importOptions","setImportOptions","setError","filterCategory","setFilterCategory","loadConnection","loadImportJobs","loadImportedProducts","mappings","mappingsError","m","testConnection","startTime","latency","saveConnection","loadPreview","startImport","disconnectWooCommerce","saveProductEdit","idx","ServicesManagement","lazy","__vitePreload","AdminPage","setUserRole","renderContent","Suspense"],"ignoreList":[],"sources":["../../src/pages/admin/components/AdminHeader.tsx","../../src/pages/admin/components/AdminSidebar.tsx","../../src/pages/admin/components/DashboardOverview.tsx","../../src/pages/admin/components/ProductFormModal.tsx","../../src/pages/admin/components/ProductsManagement.tsx","../../src/pages/admin/components/CategoriesManagement.tsx","../../src/pages/admin/components/OrdersManagement.tsx","../../src/pages/admin/components/CustomersManagement.tsx","../../src/pages/admin/components/ContentManagement.tsx","../../src/pages/admin/components/MarketingManagement.tsx","../../src/pages/admin/components/FinancialManagement.tsx","../../src/pages/admin/components/SecurityManagement.tsx","../../src/pages/admin/components/AutomationManagement.tsx","../../src/pages/admin/components/SupportManagement.tsx","../../src/pages/admin/components/ShippingManagement.tsx","../../src/pages/admin/components/TaxManagement.tsx","../../src/pages/admin/components/MarketplaceManagement.tsx","../../src/pages/admin/components/ThemeEditor.tsx","../../src/pages/admin/components/SiteSettingsManagement.tsx","../../src/api/woocommerce.ts","../../src/pages/admin/components/WooCommerceIntegration.tsx","../../src/pages/admin/page.tsx"],"sourcesContent":["import { useAuth } from '../../../contexts/AuthContext';\nimport { useTheme } from '../../../contexts/ThemeContext';\nimport { useNavigate } from 'react-router-dom';\nimport { useState } from 'react';\n\ninterface AdminHeaderProps {\n  sidebarOpen: boolean;\n  setSidebarOpen: (open: boolean) => void;\n  userRole: string;\n}\n\nexport default function AdminHeader({ sidebarOpen, setSidebarOpen, userRole }: AdminHeaderProps) {\n  const { user, signOut } = useAuth();\n  const { darkMode, toggleDarkMode } = useTheme();\n  const navigate = useNavigate();\n  const [showUserMenu, setShowUserMenu] = useState(false);\n\n  const handleLogout = async () => {\n    await signOut();\n    navigate('/login');\n  };\n\n  const getRoleLabel = (role: string) => {\n    const roles: Record<string, string> = {\n      superadmin: 'Super Administrador',\n      admin: 'Administrador',\n      manager: 'Gestor',\n      editor: 'Editor',\n      financial: 'Financeiro',\n      support: 'Suporte'\n    };\n    return roles[role] || 'Utilizador';\n  };\n\n  return (\n    <header className={`sticky top-0 z-40 ${darkMode ? 'bg-[#0b0011] border-gray-800' : 'bg-white border-gray-200'} border-b`}>\n      <nav className=\"px-4 sm:px-6 lg:px-8\">\n        <div className=\"flex items-center justify-between h-16\">\n          {/* Left Section */}\n          <div className=\"flex items-center gap-4\">\n            {/* Toggle Sidebar Button */}\n            <button\n              onClick={() => setSidebarOpen(!sidebarOpen)}\n              className={`w-10 h-10 rounded-lg ${\n                darkMode ? 'bg-gray-800 hover:bg-gray-700' : 'bg-gray-100 hover:bg-gray-200'\n              } flex items-center justify-center transition-colors cursor-pointer`}\n            >\n              <i className={`ri-menu-line text-xl ${darkMode ? 'text-white' : 'text-gray-900'}`}></i>\n            </button>\n\n            {/* Logo */}\n            <div className=\"flex items-center gap-2\">\n              <div className=\"w-8 h-8 bg-gradient-to-br from-[#b62bff] to-[#ff6a00] rounded-lg flex items-center justify-center\">\n                <i className=\"ri-dashboard-line text-white text-lg\"></i>\n              </div>\n              <span className={`text-lg font-bold ${darkMode ? 'text-white' : 'text-gray-900'}`}>\n                Dashboard Admin\n              </span>\n            </div>\n          </div>\n\n          {/* Right Section */}\n          <div className=\"flex items-center gap-3\">\n            {/* Ver Site Button */}\n            <button\n              onClick={() => navigate('/')}\n              className={`hidden sm:flex items-center gap-2 px-4 py-2 rounded-lg ${\n                darkMode \n                  ? 'bg-gradient-to-r from-[#b62bff]/20 to-[#ff6a00]/20 hover:from-[#b62bff]/30 hover:to-[#ff6a00]/30 text-white border border-[#b62bff]/30' \n                  : 'bg-gradient-to-r from-[#b62bff]/10 to-[#ff6a00]/10 hover:from-[#b62bff]/20 hover:to-[#ff6a00]/20 text-gray-900 border border-[#b62bff]/20'\n              } font-medium transition-all cursor-pointer whitespace-nowrap`}\n            >\n              <i className=\"ri-home-line text-lg\"></i>\n              <span>Ver Site</span>\n            </button>\n\n            {/* Theme Toggle */}\n            <button\n              onClick={toggleDarkMode}\n              className={`w-10 h-10 rounded-lg ${\n                darkMode ? 'bg-gray-800 hover:bg-gray-700' : 'bg-gray-100 hover:bg-gray-200'\n              } flex items-center justify-center transition-colors cursor-pointer`}\n            >\n              <i className={`${darkMode ? 'ri-sun-line' : 'ri-moon-line'} text-xl ${\n                darkMode ? 'text-yellow-400' : 'text-gray-700'\n              }`}></i>\n            </button>\n\n            {/* User Menu */}\n            <div className=\"relative\">\n              <button\n                onClick={() => setShowUserMenu(!showUserMenu)}\n                className={`w-10 h-10 rounded-lg ${\n                  darkMode ? 'bg-gray-800 hover:bg-gray-700' : 'bg-gray-100 hover:bg-gray-200'\n                } flex items-center justify-center transition-colors cursor-pointer`}\n              >\n                <i className={`ri-user-line text-xl ${darkMode ? 'text-white' : 'text-gray-900'}`}></i>\n              </button>\n\n              {/* Dropdown Menu */}\n              {showUserMenu && (\n                <>\n                  <div \n                    className=\"fixed inset-0 z-40\" \n                    onClick={() => setShowUserMenu(false)}\n                  ></div>\n                  <div className={`absolute right-0 mt-2 w-72 rounded-xl shadow-2xl ${\n                    darkMode ? 'bg-[#170018] border-gray-800' : 'bg-white border-gray-200'\n                  } border overflow-hidden z-50`}>\n                    {/* User Info */}\n                    <div className={`p-4 border-b ${darkMode ? 'border-gray-800' : 'border-gray-200'}`}>\n                      <div className=\"flex items-center gap-3\">\n                        <div className=\"w-12 h-12 bg-gradient-to-br from-[#b62bff] to-[#ff6a00] rounded-full flex items-center justify-center\">\n                          <i className=\"ri-user-line text-white text-xl\"></i>\n                        </div>\n                        <div className=\"flex-1 min-w-0\">\n                          <p className={`font-semibold truncate ${darkMode ? 'text-white' : 'text-gray-900'}`}>\n                            {user?.email}\n                          </p>\n                          <p className=\"text-sm text-gray-500 truncate\">\n                            {getRoleLabel(userRole)}\n                          </p>\n                        </div>\n                      </div>\n                    </div>\n\n                    {/* Menu Items */}\n                    <div className=\"p-2\">\n                      <button\n                        onClick={() => {\n                          navigate('/');\n                          setShowUserMenu(false);\n                        }}\n                        className={`w-full flex items-center gap-3 px-4 py-3 rounded-lg ${\n                          darkMode ? 'hover:bg-gray-800 text-gray-300' : 'hover:bg-gray-100 text-gray-700'\n                        } transition-colors cursor-pointer`}\n                      >\n                        <i className=\"ri-home-line text-lg\"></i>\n                        <span>Ver Site Pblico</span>\n                      </button>\n\n                      <button\n                        onClick={handleLogout}\n                        className={`w-full flex items-center gap-3 px-4 py-3 rounded-lg ${\n                          darkMode ? 'hover:bg-red-900/20 text-red-400' : 'hover:bg-red-50 text-red-600'\n                        } transition-colors cursor-pointer`}\n                      >\n                        <i className=\"ri-logout-box-line text-lg\"></i>\n                        <span>Terminar Sesso</span>\n                      </button>\n                    </div>\n                  </div>\n                </>\n              )}\n            </div>\n          </div>\n        </div>\n      </nav>\n    </header>\n  );\n}\n","import { useTheme } from '../../../contexts/ThemeContext';\n\ninterface AdminSidebarProps {\n  activeSection: string;\n  setActiveSection: (section: string) => void;\n  sidebarOpen: boolean;\n}\n\nexport default function AdminSidebar({ activeSection, setActiveSection, sidebarOpen }: AdminSidebarProps) {\n  const { darkMode } = useTheme();\n\n  const menuItems = [\n    { id: 'dashboard', icon: 'ri-dashboard-line', label: 'Dashboard' },\n    { id: 'products', icon: 'ri-shopping-bag-line', label: 'Produtos' },\n    { id: 'services', icon: 'ri-service-line', label: 'Servios' },\n    { id: 'categories', icon: 'ri-folder-line', label: 'Categorias' },\n    { id: 'orders', icon: 'ri-file-list-line', label: 'Pedidos' },\n    { id: 'customers', icon: 'ri-user-line', label: 'Clientes' },\n    { id: 'content', icon: 'ri-pages-line', label: 'Contedo' },\n    { id: 'marketing', icon: 'ri-megaphone-line', label: 'Marketing' },\n    { id: 'financial', icon: 'ri-money-dollar-circle-line', label: 'Financeiro' },\n    { id: 'shipping', icon: 'ri-truck-line', label: 'Envios' },\n    { id: 'tax', icon: 'ri-percent-line', label: 'Impostos' },\n    { id: 'marketplace', icon: 'ri-store-line', label: 'Marketplace' },\n    { id: 'automation', icon: 'ri-robot-line', label: 'Automao' },\n    { id: 'support', icon: 'ri-customer-service-line', label: 'Suporte' },\n    { id: 'woocommerce', icon: 'ri-shopping-cart-2-line', label: 'WooCommerce' },\n    { id: 'site-settings', icon: 'ri-settings-3-line', label: 'Configuraes' },\n    { id: 'theme', icon: 'ri-palette-line', label: 'Tema' },\n    { id: 'security', icon: 'ri-shield-check-line', label: 'Segurana' }\n  ];\n\n  return (\n    <aside\n      className={`fixed left-0 top-16 bottom-0 w-64 ${\n        darkMode ? 'bg-[#170018] border-gray-800' : 'bg-white border-gray-200'\n      } border-r transition-transform duration-300 overflow-y-auto ${\n        sidebarOpen ? 'translate-x-0' : '-translate-x-full'\n      }`}\n    >\n      <nav className=\"p-4 space-y-1\">\n        {menuItems.map((item) => (\n          <button\n            key={item.id}\n            onClick={() => setActiveSection(item.id)}\n            className={`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all ${\n              activeSection === item.id\n                ? 'bg-gradient-to-r from-[#b62bff] to-[#ff6a00] text-white shadow-lg'\n                : darkMode\n                ? 'text-gray-300 hover:bg-gray-800'\n                : 'text-gray-700 hover:bg-gray-100'\n            }`}\n          >\n            <i className={`${item.icon} text-xl`}></i>\n            <span className=\"font-medium\">{item.label}</span>\n          </button>\n        ))}\n      </nav>\n    </aside>\n  );\n}\n","import { useState, useEffect } from 'react';\nimport { supabase } from '../../../lib/supabase';\n\ninterface DashboardOverviewProps {\n  darkMode: boolean;\n}\n\nexport default function DashboardOverview({ darkMode }: DashboardOverviewProps) {\n  const [stats, setStats] = useState({\n    totalProducts: 0,\n    totalOrders: 0,\n    totalCustomers: 0,\n    totalRevenue: 0,\n    pendingOrders: 0,\n    lowStock: 0,\n    openTickets: 0,\n    activeCampaigns: 0\n  });\n\n  const [recentOrders, setRecentOrders] = useState<any[]>([]);\n  const [topProducts, setTopProducts] = useState<any[]>([]);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    loadDashboardData();\n  }, []);\n\n  const loadDashboardData = async () => {\n    try {\n      const [productsRes, ordersRes, customersRes, ticketsRes] = await Promise.all([\n        supabase.from('products').select('id, stock, min_stock'),\n        supabase.from('orders').select('id, total, status, created_at, user_id'),\n        supabase.from('profiles').select('id'),\n        supabase.from('support_tickets').select('id, status')\n      ]);\n\n      const products = productsRes.data || [];\n      const orders = ordersRes.data || [];\n      const customers = customersRes.data || [];\n      const tickets = ticketsRes.data || [];\n\n      const totalRevenue = orders.reduce((sum, order) => sum + (order.total || 0), 0);\n      const pendingOrders = orders.filter(o => o.status === 'pending').length;\n      const lowStock = products.filter(p => p.stock <= p.min_stock).length;\n      const openTickets = tickets.filter(t => t.status === 'open').length;\n\n      setStats({\n        totalProducts: products.length,\n        totalOrders: orders.length,\n        totalCustomers: customers.length,\n        totalRevenue,\n        pendingOrders,\n        lowStock,\n        openTickets,\n        activeCampaigns: 0\n      });\n\n      setRecentOrders(orders.slice(0, 5));\n    } catch (error) {\n      console.error('Erro ao carregar dados:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const statCards = [\n    {\n      title: 'Receita Total',\n      value: `R$ ${stats.totalRevenue.toFixed(2)}`,\n      icon: 'ri-money-dollar-circle-line',\n      color: 'from-green-500 to-green-600',\n      change: '+12.5%'\n    },\n    {\n      title: 'Pedidos',\n      value: stats.totalOrders.toString(),\n      icon: 'ri-shopping-cart-line',\n      color: 'from-blue-500 to-blue-600',\n      change: '+8.2%'\n    },\n    {\n      title: 'Produtos',\n      value: stats.totalProducts.toString(),\n      icon: 'ri-shopping-bag-line',\n      color: 'from-purple-500 to-purple-600',\n      change: '+5.1%'\n    },\n    {\n      title: 'Clientes',\n      value: stats.totalCustomers.toString(),\n      icon: 'ri-user-line',\n      color: 'from-yellow-500 to-yellow-600',\n      change: '+15.3%'\n    }\n  ];\n\n  const alerts = [\n    {\n      type: 'warning',\n      icon: 'ri-alert-line',\n      message: `${stats.lowStock} produtos com estoque baixo`,\n      action: 'Ver produtos'\n    },\n    {\n      type: 'info',\n      icon: 'ri-time-line',\n      message: `${stats.pendingOrders} pedidos pendentes`,\n      action: 'Processar'\n    },\n    {\n      type: 'error',\n      icon: 'ri-customer-service-line',\n      message: `${stats.openTickets} tickets abertos`,\n      action: 'Responder'\n    }\n  ];\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center h-96\">\n        <div className=\"w-12 h-12 border-4 border-yellow-500 border-t-transparent rounded-full animate-spin\"></div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\n        {statCards.map((card, index) => (\n          <div\n            key={index}\n            className={`p-6 rounded-xl ${\n              darkMode ? 'bg-gray-900' : 'bg-gray-50'\n            } border ${darkMode ? 'border-gray-800' : 'border-gray-200'}`}\n          >\n            <div className=\"flex items-center justify-between mb-4\">\n              <div className={`w-12 h-12 rounded-lg bg-gradient-to-br ${card.color} flex items-center justify-center`}>\n                <i className={`${card.icon} text-2xl text-white`}></i>\n              </div>\n              <span className=\"text-green-500 text-sm font-medium\">{card.change}</span>\n            </div>\n            <h3 className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'} mb-1`}>{card.title}</h3>\n            <p className=\"text-3xl font-bold\">{card.value}</p>\n          </div>\n        ))}\n      </div>\n\n      {alerts.length > 0 && (\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n          {alerts.map((alert, index) => (\n            <div\n              key={index}\n              className={`p-4 rounded-lg border ${\n                alert.type === 'warning'\n                  ? 'bg-yellow-500/10 border-yellow-500/30'\n                  : alert.type === 'error'\n                  ? 'bg-red-500/10 border-red-500/30'\n                  : 'bg-blue-500/10 border-blue-500/30'\n              }`}\n            >\n              <div className=\"flex items-start gap-3\">\n                <i className={`${alert.icon} text-xl ${\n                  alert.type === 'warning'\n                    ? 'text-yellow-500'\n                    : alert.type === 'error'\n                    ? 'text-red-500'\n                    : 'text-blue-500'\n                }`}></i>\n                <div className=\"flex-1\">\n                  <p className=\"text-sm mb-2\">{alert.message}</p>\n                  <button className={`text-xs font-medium ${\n                    alert.type === 'warning'\n                      ? 'text-yellow-500'\n                      : alert.type === 'error'\n                      ? 'text-red-500'\n                      : 'text-blue-500'\n                  } hover:underline whitespace-nowrap`}>\n                    {alert.action} \n                  </button>\n                </div>\n              </div>\n            </div>\n          ))}\n        </div>\n      )}\n\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n        <div className={`p-6 rounded-xl ${darkMode ? 'bg-gray-900' : 'bg-gray-50'} border ${darkMode ? 'border-gray-800' : 'border-gray-200'}`}>\n          <h3 className=\"text-lg font-bold mb-4\">Pedidos Recentes</h3>\n          <div className=\"space-y-3\">\n            {recentOrders.length === 0 ? (\n              <p className={darkMode ? 'text-gray-400' : 'text-gray-600'}>Nenhum pedido ainda</p>\n            ) : (\n              recentOrders.map((order) => (\n                <div key={order.id} className={`p-3 rounded-lg ${darkMode ? 'bg-gray-800' : 'bg-white'}`}>\n                  <div className=\"flex items-center justify-between\">\n                    <div>\n                      <p className=\"font-medium\">Pedido #{order.id.slice(0, 8)}</p>\n                      <p className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>\n                        {new Date(order.created_at).toLocaleDateString('pt-BR')}\n                      </p>\n                    </div>\n                    <div className=\"text-right\">\n                      <p className=\"font-bold text-yellow-500\">R$ {order.total?.toFixed(2)}</p>\n                      <span className={`text-xs px-2 py-1 rounded-full ${\n                        order.status === 'completed'\n                          ? 'bg-green-500/20 text-green-500'\n                          : order.status === 'pending'\n                          ? 'bg-yellow-500/20 text-yellow-500'\n                          : 'bg-gray-500/20 text-gray-500'\n                      }`}>\n                        {order.status}\n                      </span>\n                    </div>\n                  </div>\n                </div>\n              ))\n            )}\n          </div>\n        </div>\n\n        <div className={`p-6 rounded-xl ${darkMode ? 'bg-gray-900' : 'bg-gray-50'} border ${darkMode ? 'border-gray-800' : 'border-gray-200'}`}>\n          <h3 className=\"text-lg font-bold mb-4\">Aes Rpidas</h3>\n          <div className=\"grid grid-cols-2 gap-3\">\n            {[\n              { label: 'Novo Produto', icon: 'ri-add-circle-line', color: 'from-blue-500 to-blue-600' },\n              { label: 'Nova Categoria', icon: 'ri-folder-add-line', color: 'from-purple-500 to-purple-600' },\n              { label: 'Criar Cupom', icon: 'ri-coupon-line', color: 'from-green-500 to-green-600' },\n              { label: 'Nova Campanha', icon: 'ri-megaphone-line', color: 'from-yellow-500 to-yellow-600' },\n              { label: 'Exportar Dados', icon: 'ri-download-line', color: 'from-red-500 to-red-600' },\n              { label: 'Relatrios', icon: 'ri-bar-chart-line', color: 'from-indigo-500 to-indigo-600' }\n            ].map((action, index) => (\n              <button\n                key={index}\n                className={`p-4 rounded-lg bg-gradient-to-br ${action.color} hover:opacity-90 transition-opacity text-white text-left whitespace-nowrap`}\n              >\n                <i className={`${action.icon} text-2xl mb-2 block`}></i>\n                <span className=\"text-sm font-medium\">{action.label}</span>\n              </button>\n            ))}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","\nimport { useState, useEffect } from 'react';\nimport { supabase } from '../../../lib/supabase';\n\ninterface ProductFormModalProps {\n  darkMode: boolean;\n  product: any;\n  onClose: () => void;\n  onSave: () => void;\n}\n\nexport default function ProductFormModal({ darkMode, product, onClose, onSave }: ProductFormModalProps) {\n  const [formData, setFormData] = useState({\n    name: '',\n    slug: '',\n    description: '',\n    short_description: '',\n    price: 0,\n    cost: 0,\n    promotional_price: 0,\n    category_id: '',\n    stock: 0,\n    min_stock: 5,\n    sku: '',\n    barcode: '',\n    weight: 0,\n    dimensions: '',\n    status: 'active',\n    type: 'physical',\n    tax_rate: 23,\n    country_origin: '',\n    warehouse_location: '',\n    is_dropshipping: false,\n    supplier_id: '',\n    meta_title: '',\n    meta_description: '',\n    meta_keywords: '',\n    tags: '',\n  });\n\n  const [categories, setCategories] = useState<any[]>([]);\n  const [images, setImages] = useState<string[]>([]);\n  const [variants, setVariants] = useState<any[]>([]);\n  const [loading, setLoading] = useState(false);\n\n  useEffect(() => {\n    loadCategories();\n    if (product) {\n      setFormData({\n        name: product.name || '',\n        slug: product.slug || '',\n        description: product.description || '',\n        short_description: product.short_description || '',\n        price: product.price || 0,\n        cost: product.cost || 0,\n        promotional_price: product.promotional_price || 0,\n        category_id: product.category_id || '',\n        stock: product.stock || 0,\n        min_stock: product.min_stock || 5,\n        sku: product.sku || '',\n        barcode: product.barcode || '',\n        weight: product.weight || 0,\n        dimensions: product.dimensions || '',\n        status: product.status || 'active',\n        type: product.type || 'physical',\n        tax_rate: product.tax_rate || 23,\n        country_origin: product.country_origin || '',\n        warehouse_location: product.warehouse_location || '',\n        is_dropshipping: product.is_dropshipping || false,\n        supplier_id: product.supplier_id || '',\n        meta_title: product.meta_title || '',\n        meta_description: product.meta_description || '',\n        meta_keywords: product.meta_keywords || '',\n        tags: product.tags || '',\n      });\n      setImages(product.images || []);\n      setVariants(product.variants || []);\n    }\n  }, [product]);\n\n  const loadCategories = async () => {\n    const { data } = await supabase.from('categories').select('*').order('name');\n    setCategories(data || []);\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setLoading(true);\n\n    try {\n      const productData = {\n        ...formData,\n        images,\n        variants,\n        margin: formData.price - formData.cost,\n        margin_percentage: ((formData.price - formData.cost) / formData.price * 100).toFixed(2),\n        updated_at: new Date().toISOString(),\n      };\n\n      if (product) {\n        const { error } = await supabase\n          .from('products')\n          .update(productData)\n          .eq('id', product.id);\n        if (error) throw error;\n      } else {\n        const { error } = await supabase\n          .from('products')\n          .insert([{ ...productData, created_at: new Date().toISOString() }]);\n        if (error) throw error;\n      }\n\n      alert('Produto salvo com sucesso!');\n      onSave();\n      onClose();\n    } catch (error) {\n      console.error('Erro ao salvar produto:', error);\n      alert('Erro ao salvar produto');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const generateSlug = (name: string) => {\n    return name\n      .toLowerCase()\n      .normalize('NFD')\n      .replace(/[\\u0300-\\u036f]/g, '')\n      .replace(/[^a-z0-9]+/g, '-')\n      .replace(/(^-|-$)/g, '');\n  };\n\n  return (\n    <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 overflow-y-auto\">\n      <div className={`${darkMode ? 'bg-gray-900' : 'bg-white'} rounded-xl max-w-6xl w-full max-h-[90vh] overflow-y-auto`}>\n        <div className={`sticky top-0 ${darkMode ? 'bg-gray-900' : 'bg-white'} border-b ${darkMode ? 'border-gray-800' : 'border-gray-200'} p-6 flex items-center justify-between z-10`}>\n          <h2 className=\"text-2xl font-bold flex items-center gap-2\">\n            <i className=\"ri-box-3-line text-yellow-500\"></i>\n            {product ? 'Editar Produto' : 'Novo Produto'}\n          </h2>\n          <button onClick={onClose} className=\"p-2 hover:bg-gray-800 rounded-lg transition-colors\">\n            <i className=\"ri-close-line text-xl\"></i>\n          </button>\n        </div>\n\n        <form onSubmit={handleSubmit} className=\"p-6 space-y-6\">\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n            <div className=\"space-y-4\">\n              <h3 className=\"text-lg font-semibold flex items-center gap-2\">\n                <i className=\"ri-information-line text-yellow-500\"></i>\n                Informaes Bsicas\n              </h3>\n\n              <div>\n                <label className=\"block text-sm font-medium mb-2\">Nome do Produto *</label>\n                <input\n                  type=\"text\"\n                  required\n                  value={formData.name}\n                  onChange={(e) => {\n                    setFormData({ ...formData, name: e.target.value, slug: generateSlug(e.target.value) });\n                  }}\n                  className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium mb-2\">Slug (URL)</label>\n                <input\n                  type=\"text\"\n                  value={formData.slug}\n                  onChange={(e) => setFormData({ ...formData, slug: e.target.value })}\n                  className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium mb-2\">Descrio Curta</label>\n                <textarea\n                  value={formData.short_description}\n                  onChange={(e) => setFormData({ ...formData, short_description: e.target.value })}\n                  rows={3}\n                  className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium mb-2\">Descrio Completa</label>\n                <textarea\n                  value={formData.description}\n                  onChange={(e) => setFormData({ ...formData, description: e.target.value })}\n                  rows={6}\n                  className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\n                />\n              </div>\n\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div>\n                  <label className=\"block text-sm font-medium mb-2\">Categoria *</label>\n                  <select\n                    required\n                    value={formData.category_id}\n                    onChange={(e) => setFormData({ ...formData, category_id: e.target.value })}\n                    className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\n                  >\n                    <option value=\"\">Selecione...</option>\n                    {categories.map(cat => (\n                      <option key={cat.id} value={cat.id}>{cat.name}</option>\n                    ))}\n                  </select>\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium mb-2\">Status</label>\n                  <select\n                    value={formData.status}\n                    onChange={(e) => setFormData({ ...formData, status: e.target.value })}\n                    className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\n                  >\n                    <option value=\"active\">Ativo</option>\n                    <option value=\"inactive\">Inativo</option>\n                    <option value=\"draft\">Rascunho</option>\n                  </select>\n                </div>\n              </div>\n\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div>\n                  <label className=\"block text-sm font-medium mb-2\">Tipo</label>\n                  <select\n                    value={formData.type}\n                    onChange={(e) => setFormData({ ...formData, type: e.target.value })}\n                    className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\n                  >\n                    <option value=\"physical\">Fsico</option>\n                    <option value=\"digital\">Digital</option>\n                  </select>\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium mb-2\">SKU</label>\n                  <input\n                    type=\"text\"\n                    value={formData.sku}\n                    onChange={(e) => setFormData({ ...formData, sku: e.target.value })}\n                    className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\n                  />\n                </div>\n              </div>\n            </div>\n\n            <div className=\"space-y-4\">\n              <h3 className=\"text-lg font-semibold flex items-center gap-2\">\n                <i className=\"ri-money-dollar-circle-line text-yellow-500\"></i>\n                Preos & Financeiro\n              </h3>\n\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div>\n                  <label className=\"block text-sm font-medium mb-2\">Custo *</label>\n                  <input\n                    type=\"number\"\n                    step=\"0.01\"\n                    required\n                    value={formData.cost}\n                    onChange={(e) => setFormData({ ...formData, cost: parseFloat(e.target.value) })}\n                    className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium mb-2\">Preo de Venda *</label>\n                  <input\n                    type=\"number\"\n                    step=\"0.01\"\n                    required\n                    value={formData.price}\n                    onChange={(e) => setFormData({ ...formData, price: parseFloat(e.target.value) })}\n                    className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\n                  />\n                </div>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium mb-2\">Preo Promocional</label>\n                <input\n                  type=\"number\"\n                  step=\"0.01\"\n                  value={formData.promotional_price}\n                  onChange={(e) => setFormData({ ...formData, promotional_price: parseFloat(e.target.value) })}\n                  className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium mb-2\">Taxa IVA (%)</label>\n                <input\n                  type=\"number\"\n                  step=\"0.01\"\n                  value={formData.tax_rate}\n                  onChange={(e) => setFormData({ ...formData, tax_rate: parseFloat(e.target.value) })}\n                  className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\n                />\n              </div>\n\n              {formData.price > 0 && formData.cost > 0 && (\n                <div className={`p-4 rounded-lg ${darkMode ? 'bg-gray-800' : 'bg-gray-100'}`}>\n                  <p className=\"text-sm mb-2\">Margem: <span className=\"font-bold text-green-500\">{(formData.price - formData.cost).toFixed(2)}</span></p>\n                  <p className=\"text-sm\">Margem %: <span className=\"font-bold text-green-500\">{((formData.price - formData.cost) / formData.price * 100).toFixed(2)}%</span></p>\n                </div>\n              )}\n\n              <h3 className=\"text-lg font-semibold flex items-center gap-2 pt-4\">\n                <i className=\"ri-stack-line text-yellow-500\"></i>\n                Estoque & Logstica\n              </h3>\n\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div>\n                  <label className=\"block text-sm font-medium mb-2\">Estoque Atual</label>\n                  <input\n                    type=\"number\"\n                    value={formData.stock}\n                    onChange={(e) => setFormData({ ...formData, stock: parseInt(e.target.value) })}\n                    className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium mb-2\">Estoque Mnimo</label>\n                  <input\n                    type=\"number\"\n                    value={formData.min_stock}\n                    onChange={(e) => setFormData({ ...formData, min_stock: parseInt(e.target.value) })}\n                    className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\n                  />\n                </div>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium mb-2\">Localizao no Armazm</label>\n                <input\n                  type=\"text\"\n                  value={formData.warehouse_location}\n                  onChange={(e) => setFormData({ ...formData, warehouse_location: e.target.value })}\n                  placeholder=\"Ex: A-12-3\"\n                  className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\n                />\n              </div>\n\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div>\n                  <label className=\"block text-sm font-medium mb-2\">Peso (kg)</label>\n                  <input\n                    type=\"number\"\n                    step=\"0.01\"\n                    value={formData.weight}\n                    onChange={(e) => setFormData({ ...formData, weight: parseFloat(e.target.value) })}\n                    className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium mb-2\">Dimenses (LxAxP cm)</label>\n                  <input\n                    type=\"text\"\n                    value={formData.dimensions}\n                    onChange={(e) => setFormData({ ...formData, dimensions: e.target.value })}\n                    placeholder=\"30x20x10\"\n                    className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\n                  />\n                </div>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium mb-2\">Pas de Origem</label>\n                <input\n                  type=\"text\"\n                  value={formData.country_origin}\n                  onChange={(e) => setFormData({ ...formData, country_origin: e.target.value })}\n                  placeholder=\"Portugal\"\n                  className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\n                />\n              </div>\n\n              <div className=\"flex items-center gap-2\">\n                <input\n                  type=\"checkbox\"\n                  id=\"is_dropshipping\"\n                  checked={formData.is_dropshipping}\n                  onChange={(e) => setFormData({ ...formData, is_dropshipping: e.target.checked })}\n                  className=\"w-4 h-4 rounded border-gray-300\"\n                />\n                <label htmlFor=\"is_dropshipping\" className=\"text-sm font-medium\">Produto Dropshipping</label>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"space-y-4\">\n            <h3 className=\"text-lg font-semibold flex items-center gap-2\">\n              <i className=\"ri-seo-line text-yellow-500\"></i>\n              SEO & Meta Tags\n            </h3>\n\n            <div className=\"grid grid-cols-1 gap-4\">\n              <div>\n                <label className=\"block text-sm font-medium mb-2\">Meta Ttulo</label>\n                <input\n                  type=\"text\"\n                  value={formData.meta_title}\n                  onChange={(e) => setFormData({ ...formData, meta_title: e.target.value })}\n                  maxLength={60}\n                  className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\n                />\n                <p className=\"text-xs text-gray-500 mt-1\">{formData.meta_title.length}/60 caracteres</p>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium mb-2\">Meta Descrio</label>\n                <textarea\n                  value={formData.meta_description}\n                  onChange={(e) => setFormData({ ...formData, meta_description: e.target.value })}\n                  maxLength={160}\n                  rows={3}\n                  className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\n                />\n                <p className=\"text-xs text-gray-500 mt-1\">{formData.meta_description.length}/160 caracteres</p>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium mb-2\">Palavras-chave (separadas por vrgula)</label>\n                <input\n                  type=\"text\"\n                  value={formData.meta_keywords}\n                  onChange={(e) => setFormData({ ...formData, meta_keywords: e.target.value })}\n                  className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium mb-2\">Tags (separadas por vrgula)</label>\n                <input\n                  type=\"text\"\n                  value={formData.tags}\n                  onChange={(e) => setFormData({ ...formData, tags: e.target.value })}\n                  placeholder=\"eletrnicos, tecnologia, gadgets\"\n                  className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\n                />\n              </div>\n            </div>\n          </div>\n\n          <div className=\"flex items-center justify-end gap-4 pt-6 border-t border-gray-800\">\n            <button\n              type=\"button\"\n              onClick={onClose}\n              className=\"px-6 py-2 rounded-lg border border-gray-700 hover:bg-gray-800 transition-colors whitespace-nowrap\"\n            >\n              Cancelar\n            </button>\n            <button\n              type=\"submit\"\n              disabled={loading}\n              className=\"px-6 py-2 bg-gradient-to-r from-yellow-500 to-yellow-600 text-black font-medium rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap\"\n            >\n              {loading ? (\n                <>\n                  <div className=\"w-4 h-4 border-2 border-black border-t-transparent rounded-full animate-spin\"></div>\n                  Salvando...\n                </>\n              ) : (\n                <>\n                  <i className=\"ri-save-line\"></i>\n                  Salvar Produto\n                </>\n              )}\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n}\n","import { useState, useEffect } from 'react';\nimport { supabase } from '../../../lib/supabase';\nimport ProductFormModal from './ProductFormModal';\n\ninterface ProductsManagementProps {\n  darkMode: boolean;\n}\n\nexport default function ProductsManagement({ darkMode }: ProductsManagementProps) {\n  const [products, setProducts] = useState<any[]>([]);\n  const [categories, setCategories] = useState<any[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [selectedCategory, setSelectedCategory] = useState('all');\n  const [selectedStatus, setSelectedStatus] = useState('all');\n  const [showModal, setShowModal] = useState(false);\n  const [editingProduct, setEditingProduct] = useState<any>(null);\n  const [selectedProducts, setSelectedProducts] = useState<string[]>([]);\n\n  useEffect(() => {\n    loadProducts();\n  }, []);\n\n  const loadProducts = async () => {\n    try {\n      const { data, error } = await supabase\n        .from('products')\n        .select('*, categories(name)')\n        .order('created_at', { ascending: false });\n\n      if (error) throw error;\n      setProducts(data || []);\n    } catch (error) {\n      console.error('Erro ao carregar produtos:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleEdit = (product: any) => {\n    setEditingProduct(product);\n    setShowModal(true);\n  };\n\n  const handleDelete = async (id: string) => {\n    if (!confirm('Tem certeza que deseja excluir este produto?')) return;\n    const { error } = await supabase.from('products').delete().eq('id', id);\n    if (!error) {\n      alert('Produto excludo com sucesso!');\n      loadProducts();\n    }\n  };\n\n  const handleBulkDelete = async () => {\n    if (!confirm('Tem certeza que deseja excluir os produtos selecionados?')) return;\n    // Implementar excluso em massa\n    alert('Funcionalidade em desenvolvimento');\n  };\n\n  const handleExportCSV = () => {\n    const csv = [\n      ['ID', 'Nome', 'SKU', 'Preo', 'Estoque', 'Categoria', 'Status'].join(','),\n      ...filteredProducts.map(p => [\n        p.id,\n        p.name,\n        p.sku,\n        p.price,\n        p.stock,\n        categories.find(c => c.id === p.category_id)?.name || '',\n        p.status\n      ].join(','))\n    ].join('\\n');\n\n    const blob = new Blob([csv], { type: 'text/csv' });\n    const url = window.URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = `produtos_${new Date().toISOString().split('T')[0]}.csv`;\n    a.click();\n  };\n\n  const filteredProducts = products.filter(product => {\n    const matchesSearch = product.name.toLowerCase().includes(searchTerm.toLowerCase()) ||\n                         product.sku?.toLowerCase().includes(searchTerm.toLowerCase());\n    const matchesCategory = selectedCategory === 'all' || product.category_id === selectedCategory;\n    const matchesStatus = selectedStatus === 'all' || product.status === selectedStatus;\n    \n    return matchesSearch && matchesCategory && matchesStatus;\n  });\n\n  const controls = [\n    { id: 1, name: 'CRUD Completo', icon: 'ri-edit-line', active: true },\n    { id: 2, name: 'Upload Mltiplo', icon: 'ri-upload-line', active: true },\n    { id: 3, name: 'Editor WYSIWYG', icon: 'ri-text', active: true },\n    { id: 4, name: 'SKU/UPC/EAN', icon: 'ri-barcode-line', active: true },\n    { id: 5, name: 'Variantes', icon: 'ri-list-check', active: true },\n    { id: 6, name: 'Preos Promocionais', icon: 'ri-price-tag-3-line', active: true },\n    { id: 7, name: 'Custo/Margem/Lucro', icon: 'ri-calculator-line', active: true },\n    { id: 8, name: 'Multi-Warehouse', icon: 'ri-building-line', active: true },\n    { id: 9, name: 'Alertas de Estoque', icon: 'ri-alarm-warning-line', active: true },\n    { id: 10, name: 'Bulk CSV Import', icon: 'ri-file-excel-line', active: true },\n    { id: 11, name: 'Histrico Audit', icon: 'ri-history-line', active: true },\n    { id: 12, name: 'Bundles', icon: 'ri-stack-line', active: true },\n    { id: 13, name: 'Etiquetas Envio', icon: 'ri-printer-line', active: true },\n    { id: 14, name: 'A/B Testing', icon: 'ri-test-tube-line', active: true },\n    { id: 15, name: 'Bloqueio Regional', icon: 'ri-map-pin-line', active: true },\n    { id: 16, name: 'Imagens Regionais', icon: 'ri-image-line', active: true },\n    { id: 17, name: 'Moderao Reviews', icon: 'ri-star-line', active: true },\n    { id: 18, name: 'Analytics por SKU', icon: 'ri-line-chart-line', active: true },\n    { id: 19, name: 'SEO Avanado', icon: 'ri-seo-line', active: true },\n    { id: 20, name: 'Peso/Dimenses', icon: 'ri-ruler-line', active: true },\n    { id: 21, name: 'Tags/Etiquetas', icon: 'ri-price-tag-line', active: true },\n    { id: 22, name: 'Duplicar Produto', icon: 'ri-file-copy-line', active: true },\n    { id: 23, name: 'Exportar Produtos', icon: 'ri-download-line', active: true },\n    { id: 24, name: 'Importar Produtos', icon: 'ri-upload-cloud-line', active: true },\n    { id: 25, name: 'Rollback Changes', icon: 'ri-arrow-go-back-line', active: true }\n  ];\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h2 className=\"text-2xl font-bold flex items-center gap-2\">\n            <i className=\"ri-box-3-line text-yellow-500\"></i>\n            Gesto de Produtos\n          </h2>\n          <p className=\"text-gray-400 mt-1\">Gerencie todo o catlogo de produtos</p>\n        </div>\n        <div className=\"flex items-center gap-3\">\n          <button\n            onClick={handleExportCSV}\n            className={`px-4 py-2 rounded-lg border ${darkMode ? 'border-gray-700' : 'border-gray-300'} hover:bg-gray-800 transition-colors flex items-center gap-2 whitespace-nowrap`}\n          >\n            <i className=\"ri-download-line\"></i>\n            Exportar CSV\n          </button>\n          <button\n            onClick={() => {\n              setEditingProduct(null);\n              setShowModal(true);\n            }}\n            className=\"px-4 py-2 bg-gradient-to-r from-yellow-500 to-yellow-600 text-black font-medium rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap\"\n          >\n            <i className=\"ri-add-line\"></i>\n            Novo Produto\n          </button>\n        </div>\n      </div>\n\n      <div className={`p-6 rounded-xl ${darkMode ? 'bg-gray-900' : 'bg-gray-50'} border ${darkMode ? 'border-gray-800' : 'border-gray-200'}`}>\n        <h2 className=\"text-xl font-bold mb-4 flex items-center gap-2\">\n          <i className=\"ri-function-line text-yellow-500\"></i>\n          25+ Controles de Produtos Disponveis\n        </h2>\n        <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-3\">\n          {controls.map(control => (\n            <div\n              key={control.id}\n              className={`p-3 rounded-lg ${darkMode ? 'bg-gray-800' : 'bg-white'} border ${darkMode ? 'border-gray-700' : 'border-gray-200'}`}\n            >\n              <div className=\"flex items-center gap-2 mb-1\">\n                <i className={`${control.icon} text-yellow-500`}></i>\n                <span className={`w-2 h-2 rounded-full ${control.active ? 'bg-green-500' : 'bg-gray-500'}`}></span>\n              </div>\n              <p className=\"text-xs font-medium\">{control.name}</p>\n            </div>\n          ))}\n        </div>\n      </div>\n\n      <div className=\"flex flex-wrap items-center justify-between gap-4\">\n        <div className=\"flex items-center gap-3 flex-1\">\n          <div className=\"relative flex-1 max-w-md\">\n            <i className=\"ri-search-line absolute left-3 top-1/2 -translate-y-1/2 text-gray-400\"></i>\n            <input\n              type=\"text\"\n              placeholder=\"Buscar por nome ou SKU...\"\n              value={searchTerm}\n              onChange={(e) => setSearchTerm(e.target.value)}\n              className={`w-full pl-10 pr-4 py-2 rounded-lg ${\n                darkMode ? 'bg-gray-800 border-gray-700' : 'bg-white border-gray-200'\n              } border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\n            />\n          </div>\n\n          <select\n            value={selectedStatus}\n            onChange={(e) => setSelectedStatus(e.target.value)}\n            className={`px-4 py-2 rounded-lg ${\n              darkMode ? 'bg-gray-800 border-gray-700' : 'bg-white border-gray-200'\n            } border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\n          >\n            <option value=\"all\">Todos Status</option>\n            <option value=\"active\">Ativo</option>\n            <option value=\"inactive\">Inativo</option>\n            <option value=\"draft\">Rascunho</option>\n          </select>\n        </div>\n      </div>\n\n      {showModal && (\n        <ProductFormModal\n          darkMode={darkMode}\n          product={editingProduct}\n          onClose={() => {\n            setShowModal(false);\n            setEditingProduct(null);\n          }}\n          onSave={loadProducts}\n        />\n      )}\n\n      <div className={`rounded-xl overflow-hidden ${darkMode ? 'bg-gray-900' : 'bg-gray-50'} border ${darkMode ? 'border-gray-800' : 'border-gray-200'}`}>\n        {loading ? (\n          <div className=\"flex items-center justify-center h-64\">\n            <div className=\"w-12 h-12 border-4 border-yellow-500 border-t-transparent rounded-full animate-spin\"></div>\n          </div>\n        ) : (\n          <div className=\"overflow-x-auto\">\n            <table className=\"w-full\">\n              <thead className={darkMode ? 'bg-gray-800' : 'bg-gray-100'}>\n                <tr>\n                  <th className=\"px-6 py-4 text-left\">\n                    <input\n                      type=\"checkbox\"\n                      checked={selectedProducts.length === filteredProducts.length && filteredProducts.length > 0}\n                      onChange={(e) => {\n                        if (e.target.checked) {\n                          setSelectedProducts(filteredProducts.map(p => p.id));\n                        } else {\n                          setSelectedProducts([]);\n                        }\n                      }}\n                      className=\"w-4 h-4 rounded border-gray-300\"\n                    />\n                  </th>\n                  <th className=\"px-6 py-4 text-left font-semibold\">Produto</th>\n                  <th className=\"px-6 py-4 text-left font-semibold\">SKU</th>\n                  <th className=\"px-6 py-4 text-left font-semibold\">Preo</th>\n                  <th className=\"px-6 py-4 text-left font-semibold\">Estoque</th>\n                  <th className=\"px-6 py-4 text-left font-semibold\">Status</th>\n                  <th className=\"px-6 py-4 text-left font-semibold\">Aes</th>\n                </tr>\n              </thead>\n              <tbody>\n                {filteredProducts.map((product) => (\n                  <tr\n                    key={product.id}\n                    className={`border-t ${darkMode ? 'border-gray-800 hover:bg-gray-800' : 'border-gray-200 hover:bg-gray-50'} transition-colors`}\n                  >\n                    <td className=\"px-6 py-4\">\n                      <input\n                        type=\"checkbox\"\n                        checked={selectedProducts.includes(product.id)}\n                        onChange={(e) => {\n                          if (e.target.checked) {\n                            setSelectedProducts([...selectedProducts, product.id]);\n                          } else {\n                            setSelectedProducts(selectedProducts.filter(id => id !== product.id));\n                          }\n                        }}\n                        className=\"w-4 h-4 rounded border-gray-300\"\n                      />\n                    </td>\n                    <td className=\"px-6 py-4\">\n                      <div className=\"flex items-center gap-3\">\n                        <div className=\"w-12 h-12 bg-gray-700 rounded-lg overflow-hidden flex items-center justify-center\">\n                          {product.image ? (\n                            <img src={product.image} alt={product.name} className=\"w-full h-full object-cover\" />\n                          ) : (\n                            <i className=\"ri-image-line text-gray-500\"></i>\n                          )}\n                        </div>\n                        <div>\n                          <p className=\"font-medium\">{product.name}</p>\n                          <p className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>\n                            {product.categories?.name || 'Sem categoria'}\n                          </p>\n                        </div>\n                      </div>\n                    </td>\n                    <td className=\"px-6 py-4\">\n                      <span className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>\n                        {product.sku || '-'}\n                      </span>\n                    </td>\n                    <td className=\"px-6 py-4\">\n                      <span className=\"font-medium text-yellow-500\">\n                        R$ {product.price?.toFixed(2)}\n                      </span>\n                      {product.promotional_price && (\n                        <p className=\"text-xs text-green-500\">\n                          Promo: R$ {product.promotional_price.toFixed(2)}\n                        </p>\n                      )}\n                    </td>\n                    <td className=\"px-6 py-4\">\n                      <span className={`font-medium ${\n                        product.stock <= product.min_stock ? 'text-red-500' : 'text-green-500'\n                      }`}>\n                        {product.stock || 0}\n                      </span>\n                      {product.stock <= product.min_stock && (\n                        <p className=\"text-xs text-red-500\">Estoque baixo!</p>\n                      )}\n                    </td>\n                    <td className=\"px-6 py-4\">\n                      <span className={`px-3 py-1 rounded-full text-xs font-medium ${\n                        product.status === 'active'\n                          ? 'bg-green-500/20 text-green-500'\n                          : product.status === 'inactive'\n                          ? 'bg-gray-500/20 text-gray-500'\n                          : 'bg-yellow-500/20 text-yellow-500'\n                      }`}>\n                        {product.status === 'active' ? 'Ativo' : product.status === 'inactive' ? 'Inativo' : 'Rascunho'}\n                      </span>\n                    </td>\n                    <td className=\"px-6 py-4\">\n                      <div className=\"flex items-center gap-2\">\n                        <button\n                          onClick={() => {\n                            setEditingProduct(product);\n                            setShowModal(true);\n                          }}\n                          className=\"p-2 rounded-lg bg-blue-500/10 text-blue-500 hover:bg-blue-500/20 transition-colors\"\n                        >\n                          <i className=\"ri-edit-line\"></i>\n                        </button>\n                        <button className=\"p-2 rounded-lg bg-purple-500/10 text-purple-500 hover:bg-purple-500/20 transition-colors\">\n                          <i className=\"ri-file-copy-line\"></i>\n                        </button>\n                        <button className=\"p-2 rounded-lg bg-red-500/10 text-red-500 hover:bg-red-500/20 transition-colors\">\n                          <i className=\"ri-delete-bin-line\"></i>\n                        </button>\n                      </div>\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n","import { useState, useEffect } from 'react';\nimport { supabase } from '../../../lib/supabase';\n\ninterface CategoriesManagementProps {\n  darkMode: boolean;\n}\n\nexport default function CategoriesManagement({ darkMode }: CategoriesManagementProps) {\n  const [categories, setCategories] = useState<any[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [showModal, setShowModal] = useState(false);\n  const [editingCategory, setEditingCategory] = useState<any>(null);\n\n  useEffect(() => {\n    loadCategories();\n  }, []);\n\n  const loadCategories = async () => {\n    try {\n      const { data, error } = await supabase\n        .from('categories')\n        .select('*')\n        .order('display_order', { ascending: true });\n\n      if (error) throw error;\n      setCategories(data || []);\n    } catch (error) {\n      console.error('Erro ao carregar categorias:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const controls = [\n    { id: 1, name: 'rvore Aninhada', icon: 'ri-node-tree' },\n    { id: 2, name: 'Drag & Drop', icon: 'ri-drag-move-line' },\n    { id: 3, name: 'SEO por Categoria', icon: 'ri-seo-line' },\n    { id: 4, name: 'Landing Pages Custom', icon: 'ri-pages-line' },\n    { id: 5, name: 'Filtros Configurveis', icon: 'ri-filter-3-line' },\n    { id: 6, name: 'Banners por Categoria', icon: 'ri-image-line' },\n    { id: 7, name: 'Priorizao Produtos', icon: 'ri-sort-asc' },\n    { id: 8, name: 'Redirecionamentos', icon: 'ri-arrow-right-line' }\n  ];\n\n  return (\n    <div className=\"space-y-6\">\n      <div className={`p-6 rounded-xl ${darkMode ? 'bg-gray-900' : 'bg-gray-50'} border ${darkMode ? 'border-gray-800' : 'border-gray-200'}`}>\n        <h2 className=\"text-xl font-bold mb-4 flex items-center gap-2\">\n          <i className=\"ri-function-line text-yellow-500\"></i>\n          8+ Controles de Categorias & Navegao\n        </h2>\n        <div className=\"grid grid-cols-2 md:grid-cols-4 gap-3\">\n          {controls.map(control => (\n            <div\n              key={control.id}\n              className={`p-3 rounded-lg ${darkMode ? 'bg-gray-800' : 'bg-white'} border ${darkMode ? 'border-gray-700' : 'border-gray-200'}`}\n            >\n              <div className=\"flex items-center gap-2 mb-1\">\n                <i className={`${control.icon} text-yellow-500`}></i>\n                <span className=\"w-2 h-2 rounded-full bg-green-500\"></span>\n              </div>\n              <p className=\"text-xs font-medium\">{control.name}</p>\n            </div>\n          ))}\n        </div>\n      </div>\n\n      <div className=\"flex items-center justify-between\">\n        <h3 className=\"text-xl font-bold\">Gerenciar Categorias</h3>\n        <button\n          onClick={() => {\n            setEditingCategory(null);\n            setShowModal(true);\n          }}\n          className=\"px-6 py-2 bg-gradient-to-r from-yellow-500 to-yellow-600 text-black font-medium rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap\"\n        >\n          <i className=\"ri-add-line text-xl\"></i>\n          Nova Categoria\n        </button>\n      </div>\n\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n        {loading ? (\n          <div className=\"col-span-full flex items-center justify-center h-64\">\n            <div className=\"w-12 h-12 border-4 border-yellow-500 border-t-transparent rounded-full animate-spin\"></div>\n          </div>\n        ) : categories.length === 0 ? (\n          <div className=\"col-span-full text-center py-12\">\n            <i className=\"ri-folder-line text-6xl text-gray-600 mb-4\"></i>\n            <p className={`text-lg ${darkMode ? 'text-gray-400' : 'text-gray-600'} mb-4`}>\n              Nenhuma categoria criada ainda\n            </p>\n            <button\n              onClick={() => setShowModal(true)}\n              className=\"px-6 py-2 bg-gradient-to-r from-yellow-500 to-yellow-600 text-black font-medium rounded-lg hover:opacity-90 transition-opacity whitespace-nowrap\"\n            >\n              Criar Primeira Categoria\n            </button>\n          </div>\n        ) : (\n          categories.map((category) => (\n            <div\n              key={category.id}\n              className={`p-6 rounded-xl ${darkMode ? 'bg-gray-900' : 'bg-gray-50'} border ${darkMode ? 'border-gray-800' : 'border-gray-200'} hover:border-yellow-500 transition-colors cursor-move`}\n            >\n              <div className=\"flex items-start justify-between mb-4\">\n                <div className=\"flex items-center gap-3\">\n                  {category.icon ? (\n                    <i className={`${category.icon} text-3xl text-yellow-500`}></i>\n                  ) : (\n                    <div className=\"w-12 h-12 bg-gradient-to-br from-yellow-500 to-yellow-600 rounded-lg flex items-center justify-center\">\n                      <i className=\"ri-folder-line text-2xl text-black\"></i>\n                    </div>\n                  )}\n                  <div>\n                    <h4 className=\"font-bold text-lg\">{category.name}</h4>\n                    <p className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>\n                      {category.product_count || 0} produtos\n                    </p>\n                  </div>\n                </div>\n                <span className={`px-2 py-1 rounded-full text-xs ${\n                  category.is_active ? 'bg-green-500/20 text-green-500' : 'bg-gray-500/20 text-gray-500'\n                }`}>\n                  {category.is_active ? 'Ativa' : 'Inativa'}\n                </span>\n              </div>\n\n              {category.description && (\n                <p className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'} mb-4`}>\n                  {category.description}\n                </p>\n              )}\n\n              {category.seo_title && (\n                <div className={`p-3 rounded-lg ${darkMode ? 'bg-gray-800' : 'bg-white'} mb-4`}>\n                  <p className=\"text-xs text-yellow-500 mb-1\">SEO Configurado</p>\n                  <p className=\"text-sm font-medium\">{category.seo_title}</p>\n                </div>\n              )}\n\n              <div className=\"flex items-center gap-2\">\n                <button\n                  onClick={() => {\n                    setEditingCategory(category);\n                    setShowModal(true);\n                  }}\n                  className=\"flex-1 p-2 rounded-lg bg-blue-500/10 text-blue-500 hover:bg-blue-500/20 transition-colors font-medium whitespace-nowrap\"\n                >\n                  <i className=\"ri-edit-line mr-2\"></i>\n                  Editar\n                </button>\n                <button className=\"flex-1 p-2 rounded-lg bg-purple-500/10 text-purple-500 hover:bg-purple-500/20 transition-colors font-medium whitespace-nowrap\">\n                  <i className=\"ri-image-line mr-2\"></i>\n                  Banner\n                </button>\n                <button className=\"p-2 rounded-lg bg-red-500/10 text-red-500 hover:bg-red-500/20 transition-colors\">\n                  <i className=\"ri-delete-bin-line\"></i>\n                </button>\n              </div>\n            </div>\n          ))\n        )}\n      </div>\n\n      <div className={`p-6 rounded-xl ${darkMode ? 'bg-gray-900' : 'bg-gray-50'} border ${darkMode ? 'border-gray-800' : 'border-gray-200'}`}>\n        <h3 className=\"text-lg font-bold mb-4\">Configuraes Avanadas</h3>\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n          <div className={`p-4 rounded-lg ${darkMode ? 'bg-gray-800' : 'bg-white'} border ${darkMode ? 'border-gray-700' : 'border-gray-200'}`}>\n            <h4 className=\"font-medium mb-2 flex items-center gap-2\">\n              <i className=\"ri-filter-3-line text-yellow-500\"></i>\n              Filtros Personalizados\n            </h4>\n            <p className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'} mb-3`}>\n              Configure filtros especficos para cada categoria\n            </p>\n            <button className=\"px-4 py-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-lg hover:opacity-90 transition-opacity text-sm whitespace-nowrap\">\n              Configurar Filtros\n            </button>\n          </div>\n\n          <div className={`p-4 rounded-lg ${darkMode ? 'bg-gray-800' : 'bg-white'} border ${darkMode ? 'border-gray-700' : 'border-gray-200'}`}>\n            <h4 className=\"font-medium mb-2 flex items-center gap-2\">\n              <i className=\"ri-arrow-right-line text-yellow-500\"></i>\n              Redirecionamentos\n            </h4>\n            <p className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'} mb-3`}>\n              Gerencie redirecionamentos e sinnimos de categorias\n            </p>\n            <button className=\"px-4 py-2 bg-gradient-to-r from-purple-500 to-purple-600 text-white rounded-lg hover:opacity-90 transition-opacity text-sm whitespace-nowrap\">\n              Gerenciar Redirecionamentos\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import { useState, useEffect } from 'react';\nimport { supabase } from '../../../lib/supabase';\n\ninterface OrdersManagementProps {\n  darkMode: boolean;\n}\n\nexport default function OrdersManagement({ darkMode }: OrdersManagementProps) {\n  const [orders, setOrders] = useState<any[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [filterStatus, setFilterStatus] = useState('all');\n  const [searchTerm, setSearchTerm] = useState('');\n  const [selectedOrders, setSelectedOrders] = useState<string[]>([]);\n  const [showRefundModal, setShowRefundModal] = useState(false);\n  const [selectedOrder, setSelectedOrder] = useState<any>(null);\n\n  useEffect(() => {\n    loadOrders();\n  }, []);\n\n  const loadOrders = async () => {\n    try {\n      const { data, error } = await supabase\n        .from('orders')\n        .select('*, profiles(email, full_name)')\n        .order('created_at', { ascending: false });\n\n      if (error) throw error;\n      setOrders(data || []);\n    } catch (error) {\n      console.error('Erro ao carregar pedidos:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleStatusChange = async (orderId: string, newStatus: string) => {\n    try {\n      const { error } = await supabase\n        .from('orders')\n        .update({ status: newStatus })\n        .eq('id', orderId);\n\n      if (error) throw error;\n      \n      await loadOrders();\n      alert('Status atualizado com sucesso!');\n    } catch (error) {\n      console.error('Erro ao atualizar status:', error);\n      alert('Erro ao atualizar status');\n    }\n  };\n\n  const handleRefund = async (orderId: string, amount: number, reason: string) => {\n    try {\n      const { error } = await supabase\n        .from('refunds')\n        .insert({\n          order_id: orderId,\n          amount,\n          reason,\n          status: 'pending'\n        });\n\n      if (error) throw error;\n      \n      alert('Reembolso solicitado com sucesso!');\n      setShowRefundModal(false);\n    } catch (error) {\n      console.error('Erro ao processar reembolso:', error);\n      alert('Erro ao processar reembolso');\n    }\n  };\n\n  const generateInvoicePDF = (order: any) => {\n    alert('Gerando PDF da fatura...');\n  };\n\n  const filteredOrders = orders.filter(order => {\n    const matchesSearch = order.id.toLowerCase().includes(searchTerm.toLowerCase()) ||\n                         order.profiles?.email?.toLowerCase().includes(searchTerm.toLowerCase());\n    const matchesStatus = filterStatus === 'all' || order.status === filterStatus;\n    \n    return matchesSearch && matchesStatus;\n  });\n\n  const controls = [\n    { id: 1, name: 'Visualizar Pedidos', icon: 'ri-eye-line' },\n    { id: 2, name: 'Filtros Avanados', icon: 'ri-filter-line' },\n    { id: 3, name: 'Editar Status', icon: 'ri-edit-line' },\n    { id: 4, name: 'Reprocessar Pagamento', icon: 'ri-refresh-line' },\n    { id: 5, name: 'Reembolsos Stripe', icon: 'ri-refund-line' },\n    { id: 6, name: 'Gerar Invoice PDF', icon: 'ri-file-pdf-line' },\n    { id: 7, name: 'Mapear Envios', icon: 'ri-map-pin-line' },\n    { id: 8, name: 'Export Logstica', icon: 'ri-download-line' },\n    { id: 9, name: 'Monitor Chargebacks', icon: 'ri-alert-line' },\n    { id: 10, name: 'E-mails Automatizados', icon: 'ri-mail-send-line' },\n    { id: 11, name: 'Rastreamento Courier', icon: 'ri-truck-line' },\n    { id: 12, name: 'Ajuste Manual Taxas', icon: 'ri-calculator-line' }\n  ];\n\n  const statusOptions = [\n    { value: 'pending', label: 'Pendente', color: 'yellow' },\n    { value: 'processing', label: 'Processando', color: 'blue' },\n    { value: 'shipped', label: 'Enviado', color: 'purple' },\n    { value: 'delivered', label: 'Entregue', color: 'green' },\n    { value: 'cancelled', label: 'Cancelado', color: 'red' }\n  ];\n\n  return (\n    <div className=\"space-y-6\">\n      <div className={`p-6 rounded-xl ${darkMode ? 'bg-gray-900' : 'bg-gray-50'} border ${darkMode ? 'border-gray-800' : 'border-gray-200'}`}>\n        <h2 className=\"text-xl font-bold mb-4 flex items-center gap-2\">\n          <i className=\"ri-function-line text-yellow-500\"></i>\n          12+ Controles de Pedidos & Pagamentos\n        </h2>\n        <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3\">\n          {controls.map(control => (\n            <div\n              key={control.id}\n              className={`p-3 rounded-lg ${darkMode ? 'bg-gray-800' : 'bg-white'} border ${darkMode ? 'border-gray-700' : 'border-gray-200'}`}\n            >\n              <div className=\"flex items-center gap-2 mb-1\">\n                <i className={`${control.icon} text-yellow-500`}></i>\n                <span className=\"w-2 h-2 rounded-full bg-green-500\"></span>\n              </div>\n              <p className=\"text-xs font-medium\">{control.name}</p>\n            </div>\n          ))}\n        </div>\n      </div>\n\n      <div className=\"flex flex-wrap items-center justify-between gap-4\">\n        <div className=\"flex items-center gap-3 flex-1\">\n          <div className=\"relative flex-1 max-w-md\">\n            <i className=\"ri-search-line absolute left-3 top-1/2 -translate-y-1/2 text-gray-400\"></i>\n            <input\n              type=\"text\"\n              placeholder=\"Buscar por ID ou cliente...\"\n              value={searchTerm}\n              onChange={(e) => setSearchTerm(e.target.value)}\n              className={`w-full pl-10 pr-4 py-2 rounded-lg ${\n                darkMode ? 'bg-gray-800 border-gray-700' : 'bg-white border-gray-200'\n              } border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\n            />\n          </div>\n\n          <select\n            value={filterStatus}\n            onChange={(e) => setFilterStatus(e.target.value)}\n            className={`px-4 py-2 rounded-lg ${\n              darkMode ? 'bg-gray-800 border-gray-700' : 'bg-white border-gray-200'\n            } border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\n          >\n            <option value=\"all\">Todos Status</option>\n            {statusOptions.map(status => (\n              <option key={status.value} value={status.value}>{status.label}</option>\n            ))}\n          </select>\n        </div>\n\n        <button className=\"px-6 py-2 bg-gradient-to-r from-green-500 to-green-600 text-white font-medium rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap\">\n          <i className=\"ri-download-line text-xl\"></i>\n          Exportar Pedidos\n        </button>\n      </div>\n\n      <div className={`rounded-xl overflow-hidden ${darkMode ? 'bg-gray-900' : 'bg-gray-50'} border ${darkMode ? 'border-gray-800' : 'border-gray-200'}`}>\n        {loading ? (\n          <div className=\"flex items-center justify-center h-64\">\n            <div className=\"w-12 h-12 border-4 border-yellow-500 border-t-transparent rounded-full animate-spin\"></div>\n          </div>\n        ) : (\n          <div className=\"overflow-x-auto\">\n            <table className=\"w-full\">\n              <thead className={darkMode ? 'bg-gray-800' : 'bg-gray-100'}>\n                <tr>\n                  <th className=\"px-6 py-4 text-left font-semibold\">ID Pedido</th>\n                  <th className=\"px-6 py-4 text-left font-semibold\">Cliente</th>\n                  <th className=\"px-6 py-4 text-left font-semibold\">Data</th>\n                  <th className=\"px-6 py-4 text-left font-semibold\">Total</th>\n                  <th className=\"px-6 py-4 text-left font-semibold\">Status</th>\n                  <th className=\"px-6 py-4 text-left font-semibold\">Aes</th>\n                </tr>\n              </thead>\n              <tbody>\n                {filteredOrders.map((order) => (\n                  <tr\n                    key={order.id}\n                    className={`border-t ${darkMode ? 'border-gray-800 hover:bg-gray-800' : 'border-gray-200 hover:bg-gray-50'} transition-colors`}\n                  >\n                    <td className=\"px-6 py-4\">\n                      <span className=\"font-mono text-sm\">{order.id.slice(0, 8)}</span>\n                    </td>\n                    <td className=\"px-6 py-4\">\n                      <div>\n                        <p className=\"font-medium\">{order.profiles?.full_name || 'N/A'}</p>\n                        <p className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>\n                          {order.profiles?.email}\n                        </p>\n                      </div>\n                    </td>\n                    <td className=\"px-6 py-4\">\n                      <span className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>\n                        {new Date(order.created_at).toLocaleDateString('pt-BR')}\n                      </span>\n                    </td>\n                    <td className=\"px-6 py-4\">\n                      <span className=\"font-bold text-yellow-500\">\n                        R$ {order.total?.toFixed(2)}\n                      </span>\n                    </td>\n                    <td className=\"px-6 py-4\">\n                      <select\n                        value={order.status}\n                        onChange={(e) => handleStatusChange(order.id, e.target.value)}\n                        className={`px-3 py-1 rounded-full text-xs font-medium ${\n                          order.status === 'delivered'\n                            ? 'bg-green-500/20 text-green-500'\n                            : order.status === 'pending'\n                            ? 'bg-yellow-500/20 text-yellow-500'\n                            : order.status === 'cancelled'\n                            ? 'bg-red-500/20 text-red-500'\n                            : 'bg-blue-500/20 text-blue-500'\n                        } border-none cursor-pointer`}\n                      >\n                        {statusOptions.map(status => (\n                          <option key={status.value} value={status.value}>{status.label}</option>\n                        ))}\n                      </select>\n                    </td>\n                    <td className=\"px-6 py-4\">\n                      <div className=\"flex items-center gap-2\">\n                        <button\n                          onClick={() => generateInvoicePDF(order)}\n                          className=\"p-2 rounded-lg bg-blue-500/10 text-blue-500 hover:bg-blue-500/20 transition-colors\"\n                          title=\"Gerar PDF\"\n                        >\n                          <i className=\"ri-file-pdf-line\"></i>\n                        </button>\n                        <button\n                          onClick={() => {\n                            setSelectedOrder(order);\n                            setShowRefundModal(true);\n                          }}\n                          className=\"p-2 rounded-lg bg-red-500/10 text-red-500 hover:bg-red-500/20 transition-colors\"\n                          title=\"Reembolso\"\n                        >\n                          <i className=\"ri-refund-line\"></i>\n                        </button>\n                        <button\n                          className=\"p-2 rounded-lg bg-purple-500/10 text-purple-500 hover:bg-purple-500/20 transition-colors\"\n                          title=\"Rastreamento\"\n                        >\n                          <i className=\"ri-truck-line\"></i>\n                        </button>\n                      </div>\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n","import { useState, useEffect } from 'react';\nimport { supabase } from '../../../lib/supabase';\n\ninterface CustomersManagementProps {\n  darkMode: boolean;\n}\n\ninterface Customer {\n  id: string;\n  email: string;\n  full_name: string;\n  role: string;\n  created_at: string;\n  phone?: string;\n  city?: string;\n  country?: string;\n  total_spent?: number;\n  order_count?: number;\n}\n\nexport default function CustomersManagement({ darkMode }: CustomersManagementProps) {\n  const [customers, setCustomers] = useState<Customer[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [selectedCustomer, setSelectedCustomer] = useState<any>(null);\n  const [showSegmentModal, setShowSegmentModal] = useState(false);\n  const [filterType, setFilterType] = useState<'all' | 'new' | 'vip' | 'inactive'>('all');\n\n  useEffect(() => {\n    loadCustomers();\n  }, []);\n\n  const loadCustomers = async () => {\n    try {\n      setLoading(true);\n\n      // Buscar todos os clientes com informaes de pedidos\n      const { data: profilesData, error: profilesError } = await supabase\n        .from('profiles')\n        .select('*')\n        .order('created_at', { ascending: false });\n\n      if (profilesError) throw profilesError;\n\n      // Buscar estatsticas de pedidos para cada cliente\n      const customersWithStats = await Promise.all(\n        (profilesData || []).map(async (profile) => {\n          const { data: ordersData } = await supabase\n            .from('orders')\n            .select('total, status')\n            .eq('user_id', profile.id);\n\n          const orderCount = ordersData?.length || 0;\n          const totalSpent = ordersData?.reduce((sum, order) => sum + (order.total || 0), 0) || 0;\n\n          return {\n            ...profile,\n            order_count: orderCount,\n            total_spent: totalSpent\n          };\n        })\n      );\n\n      setCustomers(customersWithStats);\n    } catch (error) {\n      console.error('Erro ao carregar clientes:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const controls = [\n    { id: 1, name: 'Perfil Completo', icon: 'ri-user-line' },\n    { id: 2, name: 'Busca Avanada', icon: 'ri-search-line' },\n    { id: 3, name: 'Segmentao', icon: 'ri-group-line' },\n    { id: 4, name: 'Campanhas', icon: 'ri-mail-send-line' },\n    { id: 5, name: 'Templates E-mail', icon: 'ri-file-text-line' },\n    { id: 6, name: 'Notas/Tickets', icon: 'ri-sticky-note-line' },\n    { id: 7, name: 'Merge Contas', icon: 'ri-merge-cells-horizontal' },\n    { id: 8, name: 'Export Marketing', icon: 'ri-download-line' },\n    { id: 9, name: 'Cashback/Crdito', icon: 'ri-coin-line' },\n    { id: 10, name: 'Recuperao Carrinho', icon: 'ri-shopping-cart-line' }\n  ];\n\n  // Filtrar clientes\n  const filteredCustomers = customers.filter(customer => {\n    const matchesSearch = customer.email?.toLowerCase().includes(searchTerm.toLowerCase()) ||\n                         customer.full_name?.toLowerCase().includes(searchTerm.toLowerCase());\n    \n    if (!matchesSearch) return false;\n\n    const daysSinceCreated = Math.floor((Date.now() - new Date(customer.created_at).getTime()) / (1000 * 60 * 60 * 24));\n    \n    switch (filterType) {\n      case 'new':\n        return daysSinceCreated <= 30; // Novos: ltimos 30 dias\n      case 'vip':\n        return (customer.total_spent || 0) >= 500; // VIP: gastou mais de 500\n      case 'inactive':\n        return daysSinceCreated > 90 && (customer.order_count || 0) === 0; // Inativos: mais de 90 dias sem pedidos\n      default:\n        return true;\n    }\n  });\n\n  // Calcular estatsticas\n  const stats = {\n    total: customers.length,\n    new: customers.filter(c => {\n      const days = Math.floor((Date.now() - new Date(c.created_at).getTime()) / (1000 * 60 * 60 * 24));\n      return days <= 30;\n    }).length,\n    vip: customers.filter(c => (c.total_spent || 0) >= 500).length,\n    inactive: customers.filter(c => {\n      const days = Math.floor((Date.now() - new Date(c.created_at).getTime()) / (1000 * 60 * 60 * 24));\n      return days > 90 && (c.order_count || 0) === 0;\n    }).length\n  };\n\n  const getRoleBadge = (role: string) => {\n    if (role === 'admin') {\n      return <span className=\"px-2 py-1 bg-purple-500/20 text-purple-400 text-xs font-medium rounded\">Admin</span>;\n    }\n    return <span className=\"px-2 py-1 bg-blue-500/20 text-blue-400 text-xs font-medium rounded\">Cliente</span>;\n  };\n\n  const getCustomerType = (customer: Customer) => {\n    const daysSinceCreated = Math.floor((Date.now() - new Date(customer.created_at).getTime()) / (1000 * 60 * 60 * 24));\n    \n    if (daysSinceCreated <= 30) {\n      return <span className=\"px-2 py-1 bg-green-500/20 text-green-400 text-xs font-medium rounded\">Novo</span>;\n    }\n    if ((customer.total_spent || 0) >= 500) {\n      return <span className=\"px-2 py-1 bg-yellow-500/20 text-yellow-400 text-xs font-medium rounded\">VIP</span>;\n    }\n    if (daysSinceCreated > 90 && (customer.order_count || 0) === 0) {\n      return <span className=\"px-2 py-1 bg-gray-500/20 text-gray-400 text-xs font-medium rounded\">Inativo</span>;\n    }\n    return null;\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Estatsticas */}\n      <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n        <div className={`p-6 rounded-xl ${darkMode ? 'bg-gray-900' : 'bg-white'} border ${darkMode ? 'border-gray-800' : 'border-gray-200'}`}>\n          <div className=\"flex items-center justify-between mb-2\">\n            <i className=\"ri-user-line text-2xl text-blue-500\"></i>\n            <span className=\"text-2xl font-bold\">{stats.total}</span>\n          </div>\n          <p className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>Total de Clientes</p>\n        </div>\n\n        <div className={`p-6 rounded-xl ${darkMode ? 'bg-gray-900' : 'bg-white'} border ${darkMode ? 'border-gray-800' : 'border-gray-200'}`}>\n          <div className=\"flex items-center justify-between mb-2\">\n            <i className=\"ri-user-add-line text-2xl text-green-500\"></i>\n            <span className=\"text-2xl font-bold\">{stats.new}</span>\n          </div>\n          <p className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>Novos (30 dias)</p>\n        </div>\n\n        <div className={`p-6 rounded-xl ${darkMode ? 'bg-gray-900' : 'bg-white'} border ${darkMode ? 'border-gray-800' : 'border-gray-200'}`}>\n          <div className=\"flex items-center justify-between mb-2\">\n            <i className=\"ri-vip-crown-line text-2xl text-yellow-500\"></i>\n            <span className=\"text-2xl font-bold\">{stats.vip}</span>\n          </div>\n          <p className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>Clientes VIP</p>\n        </div>\n\n        <div className={`p-6 rounded-xl ${darkMode ? 'bg-gray-900' : 'bg-white'} border ${darkMode ? 'border-gray-800' : 'border-gray-200'}`}>\n          <div className=\"flex items-center justify-between mb-2\">\n            <i className=\"ri-user-unfollow-line text-2xl text-red-500\"></i>\n            <span className=\"text-2xl font-bold\">{stats.inactive}</span>\n          </div>\n          <p className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>Inativos</p>\n        </div>\n      </div>\n\n      <div className={`p-6 rounded-xl ${darkMode ? 'bg-gray-900' : 'bg-gray-50'} border ${darkMode ? 'border-gray-800' : 'border-gray-200'}`}>\n        <h2 className=\"text-xl font-bold mb-4 flex items-center gap-2\">\n          <i className=\"ri-function-line text-yellow-500\"></i>\n          10+ Controles de Clientes & CRM\n        </h2>\n        <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-3\">\n          {controls.map(control => (\n            <div\n              key={control.id}\n              className={`p-3 rounded-lg ${darkMode ? 'bg-gray-800' : 'bg-white'} border ${darkMode ? 'border-gray-700' : 'border-gray-200'}`}\n            >\n              <div className=\"flex items-center gap-2 mb-1\">\n                <i className={`${control.icon} text-yellow-500`}></i>\n                <span className=\"w-2 h-2 rounded-full bg-green-500\"></span>\n              </div>\n              <p className=\"text-xs font-medium\">{control.name}</p>\n            </div>\n          ))}\n        </div>\n      </div>\n\n      {/* Filtros */}\n      <div className=\"flex flex-wrap items-center gap-4\">\n        <div className=\"flex gap-2\">\n          <button\n            onClick={() => setFilterType('all')}\n            className={`px-4 py-2 rounded-lg font-medium transition-all ${\n              filterType === 'all'\n                ? 'bg-gradient-to-r from-[#b62bff] to-[#ff6a00] text-white'\n                : darkMode ? 'bg-gray-800 text-gray-300' : 'bg-gray-100 text-gray-700'\n            }`}\n          >\n            Todos ({stats.total})\n          </button>\n          <button\n            onClick={() => setFilterType('new')}\n            className={`px-4 py-2 rounded-lg font-medium transition-all ${\n              filterType === 'new'\n                ? 'bg-green-500 text-white'\n                : darkMode ? 'bg-gray-800 text-gray-300' : 'bg-gray-100 text-gray-700'\n            }`}\n          >\n            Novos ({stats.new})\n          </button>\n          <button\n            onClick={() => setFilterType('vip')}\n            className={`px-4 py-2 rounded-lg font-medium transition-all ${\n              filterType === 'vip'\n                ? 'bg-yellow-500 text-black'\n                : darkMode ? 'bg-gray-800 text-gray-300' : 'bg-gray-100 text-gray-700'\n            }`}\n          >\n            VIP ({stats.vip})\n          </button>\n          <button\n            onClick={() => setFilterType('inactive')}\n            className={`px-4 py-2 rounded-lg font-medium transition-all ${\n              filterType === 'inactive'\n                ? 'bg-red-500 text-white'\n                : darkMode ? 'bg-gray-800 text-gray-300' : 'bg-gray-100 text-gray-700'\n            }`}\n          >\n            Inativos ({stats.inactive})\n          </button>\n        </div>\n\n        <div className=\"relative flex-1 max-w-md\">\n          <i className=\"ri-search-line absolute left-3 top-1/2 -translate-y-1/2 text-gray-400\"></i>\n          <input\n            type=\"text\"\n            placeholder=\"Buscar por nome ou email...\"\n            value={searchTerm}\n            onChange={(e) => setSearchTerm(e.target.value)}\n            className={`w-full pl-10 pr-4 py-2 rounded-lg ${\n              darkMode ? 'bg-gray-800 border-gray-700' : 'bg-white border-gray-200'\n            } border focus:outline-none focus:ring-2 focus:ring-[#b62bff]`}\n          />\n        </div>\n\n        <button className=\"px-6 py-2 bg-gradient-to-r from-green-500 to-green-600 text-white font-medium rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap\">\n          <i className=\"ri-download-line text-xl\"></i>\n          Exportar\n        </button>\n      </div>\n\n      <div className={`rounded-xl overflow-hidden ${darkMode ? 'bg-gray-900' : 'bg-white'} border ${darkMode ? 'border-gray-800' : 'border-gray-200'}`}>\n        {loading ? (\n          <div className=\"flex items-center justify-center h-64\">\n            <div className=\"w-12 h-12 border-4 border-[#b62bff] border-t-transparent rounded-full animate-spin\"></div>\n          </div>\n        ) : (\n          <div className=\"overflow-x-auto\">\n            <table className=\"w-full\">\n              <thead className={darkMode ? 'bg-gray-800' : 'bg-gray-50'}>\n                <tr>\n                  <th className=\"px-6 py-4 text-left font-semibold\">Cliente</th>\n                  <th className=\"px-6 py-4 text-left font-semibold\">Tipo</th>\n                  <th className=\"px-6 py-4 text-left font-semibold\">Pedidos</th>\n                  <th className=\"px-6 py-4 text-left font-semibold\">Total Gasto</th>\n                  <th className=\"px-6 py-4 text-left font-semibold\">Cadastro</th>\n                  <th className=\"px-6 py-4 text-left font-semibold\">Aes</th>\n                </tr>\n              </thead>\n              <tbody>\n                {filteredCustomers.map((customer) => (\n                  <tr\n                    key={customer.id}\n                    className={`border-t ${darkMode ? 'border-gray-800 hover:bg-gray-800' : 'border-gray-200 hover:bg-gray-50'} transition-colors`}\n                  >\n                    <td className=\"px-6 py-4\">\n                      <div className=\"flex items-center gap-3\">\n                        <div className=\"w-10 h-10 bg-gradient-to-br from-[#b62bff] to-[#ff6a00] rounded-full flex items-center justify-center text-white font-bold\">\n                          {customer.full_name?.charAt(0) || customer.email?.charAt(0) || '?'}\n                        </div>\n                        <div>\n                          <div className=\"flex items-center gap-2\">\n                            <p className=\"font-medium\">{customer.full_name || 'Sem nome'}</p>\n                            {getRoleBadge(customer.role)}\n                          </div>\n                          <p className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>\n                            {customer.email}\n                          </p>\n                        </div>\n                      </div>\n                    </td>\n                    <td className=\"px-6 py-4\">\n                      {getCustomerType(customer)}\n                    </td>\n                    <td className=\"px-6 py-4\">\n                      <span className=\"font-medium\">{customer.order_count || 0}</span>\n                    </td>\n                    <td className=\"px-6 py-4\">\n                      <span className=\"font-bold text-[#b62bff]\">{(customer.total_spent || 0).toFixed(2)}</span>\n                    </td>\n                    <td className=\"px-6 py-4\">\n                      <span className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>\n                        {new Date(customer.created_at).toLocaleDateString('pt-PT')}\n                      </span>\n                    </td>\n                    <td className=\"px-6 py-4\">\n                      <div className=\"flex items-center gap-2\">\n                        <button className=\"p-2 rounded-lg bg-blue-500/10 text-blue-500 hover:bg-blue-500/20 transition-colors\">\n                          <i className=\"ri-mail-line\"></i>\n                        </button>\n                        <button \n                          onClick={() => setSelectedCustomer(customer)}\n                          className=\"p-2 rounded-lg bg-purple-500/10 text-purple-500 hover:bg-purple-500/20 transition-colors\"\n                        >\n                          <i className=\"ri-eye-line\"></i>\n                        </button>\n                      </div>\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n","\nimport { useState, useEffect } from 'react';\nimport { supabase } from '../../../lib/supabase';\n\ninterface ContentManagementProps {\n  darkMode: boolean;\n}\n\nexport default function ContentManagement({ darkMode }: ContentManagementProps) {\n  const [pages, setPages] = useState<any[]>([]);\n  const [banners, setBanners] = useState<any[]>([]);\n  const [settings, setSettings] = useState<any>({});\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    loadContentData();\n  }, []);\n\n  const loadContentData = async () => {\n    try {\n      const [pagesRes, bannersRes, settingsRes] = await Promise.all([\n        supabase.from('cms_pages').select('*').order('created_at', { ascending: false }),\n        supabase.from('banners').select('*').order('display_order', { ascending: true }),\n        supabase.from('site_settings').select('*')\n      ]);\n\n      setPages(pagesRes.data || []);\n      setBanners(bannersRes.data || []);\n      \n      const settingsObj: any = {};\n      settingsRes.data?.forEach(setting => {\n        settingsObj[setting.key] = setting.value;\n      });\n      setSettings(settingsObj);\n    } catch (error) {\n      console.error('Erro ao carregar contedo:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const controls = [\n    { id: 1, name: 'Editor de Tema', icon: 'ri-palette-line' },\n    { id: 2, name: 'Logos/Favicon', icon: 'ri-image-line' },\n    { id: 3, name: 'Editor Homepage', icon: 'ri-layout-line' },\n    { id: 4, name: 'Banners/Sliders', icon: 'ri-slideshow-line' },\n    { id: 5, name: 'CMS Pages', icon: 'ri-file-text-line' },\n    { id: 6, name: 'Gerenciador Arquivos', icon: 'ri-folder-line' },\n    { id: 7, name: 'Multi-lngua', icon: 'ri-translate-2' },\n    { id: 8, name: 'Badges/Selos', icon: 'ri-award-line' },\n    { id: 9, name: 'Preview Tempo Real', icon: 'ri-eye-line' }\n  ];\n\n  return (\n    <div className=\"space-y-6\">\n      <div className={`p-6 rounded-xl ${darkMode ? 'bg-gray-900' : 'bg-gray-50'} border ${darkMode ? 'border-gray-800' : 'border-gray-200'}`}>\n        <h2 className=\"text-xl font-bold mb-4 flex items-center gap-2\">\n          <i className=\"ri-function-line text-yellow-500\"></i>\n          9+ Controles de Contedo & Branding\n        </h2>\n        <div className=\"grid grid-cols-2 md:grid-cols-3 gap-3\">\n          {controls.map(control => (\n            <div\n              key={control.id}\n              className={`p-3 rounded-lg ${darkMode ? 'bg-gray-800' : 'bg-white'} border ${darkMode ? 'border-gray-700' : 'border-gray-200'}`}\n            >\n              <div className=\"flex items-center gap-2 mb-1\">\n                <i className={`${control.icon} text-yellow-500`}></i>\n                <span className=\"w-2 h-2 rounded-full bg-green-500\"></span>\n              </div>\n              <p className=\"text-xs font-medium\">{control.name}</p>\n            </div>\n          ))}\n        </div>\n      </div>\n\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n        <div className={`p-6 rounded-xl ${darkMode ? 'bg-gray-900' : 'bg-gray-50'} border ${darkMode ? 'border-gray-800' : 'border-gray-200'}`}>\n          <div className=\"flex items-center justify-between mb-4\">\n            <h3 className=\"text-lg font-bold\">Configuraes do Tema</h3>\n            <button className=\"p-2 rounded-lg bg-yellow-500 text-black hover:bg-yellow-600 transition-colors\">\n              <i className=\"ri-save-line text-xl\"></i>\n            </button>\n          </div>\n\n          <div className=\"space-y-4\">\n            <div>\n              <label className={`block text-sm font-medium mb-2 ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>\n                Cor Principal\n              </label>\n              <div className=\"flex items-center gap-3\">\n                <input\n                  type=\"color\"\n                  defaultValue=\"#EAB308\"\n                  className=\"w-16 h-10 rounded-lg cursor-pointer\"\n                />\n                <input\n                  type=\"text\"\n                  defaultValue=\"#EAB308\"\n                  className={`flex-1 px-4 py-2 rounded-lg ${\n                    darkMode ? 'bg-gray-800 border-gray-700' : 'bg-white border-gray-200'\n                  } border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\n                />\n              </div>\n            </div>\n\n            <div>\n              <label className={`block text-sm font-medium mb-2 ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>\n                Fonte Principal\n              </label>\n              <select className={`w-full px-4 py-2 rounded-lg ${\n                darkMode ? 'bg-gray-800 border-gray-700' : 'bg-white border-gray-200'\n              } border focus:outline-none focus:ring-2 focus:ring-yellow-500`}>\n                <option>Inter</option>\n                <option>Roboto</option>\n                <option>Poppins</option>\n                <option>Montserrat</option>\n              </select>\n            </div>\n\n            <div>\n              <label className={`block text-sm font-medium mb-2 ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>\n                Logo do Site\n              </label>\n              <div className={`border-2 border-dashed ${darkMode ? 'border-gray-700' : 'border-gray-300'} rounded-lg p-8 text-center cursor-pointer hover:border-yellow-500 transition-colors`}>\n                <i className=\"ri-upload-cloud-line text-4xl text-gray-400 mb-2\"></i>\n                <p className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>\n                  Clique para fazer upload ou arraste aqui\n                </p>\n              </div>\n            </div>\n\n            <div>\n              <label className={`block text-sm font-medium mb-2 ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>\n                Favicon\n              </label>\n              <div className={`border-2 border-dashed ${darkMode ? 'border-gray-700' : 'border-gray-300'} rounded-lg p-8 text-center cursor-pointer hover:border-yellow-500 transition-colors`}>\n                <i className=\"ri-image-line text-4xl text-gray-400 mb-2\"></i>\n                <p className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>\n                  Upload favicon (32x32px)\n                </p>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div className={`p-6 rounded-xl ${darkMode ? 'bg-gray-900' : 'bg-gray-50'} border ${darkMode ? 'border-gray-800' : 'border-gray-200'}`}>\n          <div className=\"flex items-center justify-between mb-4\">\n            <h3 className=\"text-lg font-bold\">Pginas CMS</h3>\n            <button className=\"px-4 py-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white font-medium rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap\">\n              <i className=\"ri-add-line text-xl\"></i>\n              Nova Pgina\n            </button>\n          </div>\n\n          <div className=\"space-y-3\">\n            {pages.length === 0 ? (\n              <p className={darkMode ? 'text-gray-400' : 'text-gray-600'}>Nenhuma pgina criada</p>\n            ) : (\n              pages.map((page) => (\n                <div key={page.id} className={`p-4 rounded-lg ${darkMode ? 'bg-gray-800' : 'bg-white'} border ${darkMode ? 'border-gray-700' : 'border-gray-200'}`}>\n                  <div className=\"flex items-center justify-between mb-2\">\n                    <div>\n                      <h4 className=\"font-medium\">{page.title}</h4>\n                      <p className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>\n                        /{page.slug}\n                      </p>\n                    </div>\n                    <span className={`px-2 py-1 rounded-full text-xs ${\n                      page.is_published ? 'bg-green-500/20 text-green-500' : 'bg-gray-500/20 text-gray-500'\n                    }`}>\n                      {page.is_published ? 'Publicada' : 'Rascunho'}\n                    </span>\n                  </div>\n                  <div className=\"flex items-center gap-2\">\n                    <button className=\"p-2 rounded-lg bg-blue-500/10 text-blue-500 hover:bg-blue-500/20 transition-colors\">\n                      <i className=\"ri-edit-line\"></i>\n                    </button>\n                    <button className=\"p-2 rounded-lg bg-purple-500/10 text-purple-500 hover:bg-purple-500/20 transition-colors\">\n                      <i className=\"ri-eye-line\"></i>\n                    </button>\n                    <button className=\"p-2 rounded-lg bg-red-500/10 text-red-500 hover:bg-red-500/20 transition-colors\">\n                      <i className=\"ri-delete-bin-line\"></i>\n                    </button>\n                  </div>\n                </div>\n              ))\n            )}\n          </div>\n        </div>\n      </div>\n\n      <div className={`p-6 rounded-xl ${darkMode ? 'bg-gray-900' : 'bg-gray-50'} border ${darkMode ? 'border-gray-800' : 'border-gray-200'}`}>\n        <div className=\"flex items-center justify-between mb-4\">\n          <h3 className=\"text-lg font-bold\">Banners & Sliders</h3>\n          <button className=\"px-4 py-2 bg-gradient-to-r from-purple-500 to-purple-600 text-white font-medium rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap\">\n            <i className=\"ri-add-line text-xl\"></i>\n            Novo Banner\n          </button>\n        </div>\n\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n          {banners.length === 0 ? (\n            <p className={darkMode ? 'text-gray-400' : 'text-gray-600'}>Nenhum banner criado</p>\n          ) : (\n            banners.map((banner) => (\n              <div key={banner.id} className={`rounded-lg overflow-hidden ${darkMode ? 'bg-gray-800' : 'bg-white'} border ${darkMode ? 'border-gray-700' : 'border-gray-200'}`}>\n                <div className=\"aspect-video bg-gray-700 flex items-center justify-center\">\n                  {banner.image_url ? (\n                    <img src={banner.image_url} alt={banner.title} className=\"w-full h-full object-cover\" />\n                  ) : (\n                    <i className=\"ri-image-line text-4xl text-gray-500\"></i>\n                  )}\n                </div>\n                <div className=\"p-4\">\n                  <h4 className=\"font-medium mb-2\">{banner.title}</h4>\n                  <div className=\"flex items-center justify-between\">\n                    <span className={`text-xs px-2 py-1 rounded-full ${\n                      banner.is_active ? 'bg-green-500/20 text-green-500' : 'bg-gray-500/20 text-gray-500'\n                    }`}>\n                      {banner.is_active ? 'Ativo' : 'Inativo'}\n                    </span>\n                    <div className=\"flex items-center gap-1\">\n                      <button className=\"p-1 rounded bg-blue-500/10 text-blue-500 hover:bg-blue-500/20 transition-colors\">\n                        <i className=\"ri-edit-line text-sm\"></i>\n                      </button>\n                      <button className=\"p-1 rounded bg-red-500/10 text-red-500 hover:bg-red-500/20 transition-colors\">\n                        <i className=\"ri-delete-bin-line text-sm\"></i>\n                      </button>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            ))\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n","import { useState, useEffect } from 'react';\nimport { supabase } from '../../../lib/supabase';\n\ninterface MarketingManagementProps {\n  darkMode: boolean;\n}\n\nexport default function MarketingManagement({ darkMode }: MarketingManagementProps) {\n  const [campaigns, setCampaigns] = useState<any[]>([]);\n  const [coupons, setCoupons] = useState<any[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [showCouponModal, setShowCouponModal] = useState(false);\n\n  useEffect(() => {\n    loadMarketingData();\n  }, []);\n\n  const loadMarketingData = async () => {\n    try {\n      const [campaignsRes, couponsRes] = await Promise.all([\n        supabase.from('marketing_campaigns').select('*').order('created_at', { ascending: false }),\n        supabase.from('coupons').select('*').order('created_at', { ascending: false })\n      ]);\n\n      setCampaigns(campaignsRes.data || []);\n      setCoupons(couponsRes.data || []);\n    } catch (error) {\n      console.error('Erro ao carregar dados de marketing:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const controls = [\n    { id: 1, name: 'Cupons de Desconto', icon: 'ri-coupon-line' },\n    { id: 2, name: 'Regras Promocionais', icon: 'ri-price-tag-3-line' },\n    { id: 3, name: 'Scheduling Promoes', icon: 'ri-calendar-event-line' },\n    { id: 4, name: 'ROI Campanhas', icon: 'ri-line-chart-line' },\n    { id: 5, name: 'Upsell One-Click', icon: 'ri-arrow-up-circle-line' },\n    { id: 6, name: 'Push/Web Notifications', icon: 'ri-notification-3-line' },\n    { id: 7, name: 'Pixel Tracking', icon: 'ri-eye-line' },\n    { id: 8, name: 'Banner Tool', icon: 'ri-image-add-line' },\n    { id: 9, name: 'A/B Landing Pages', icon: 'ri-test-tube-line' }\n  ];\n\n  return (\n    <div className=\"space-y-6\">\n      <div className={`p-6 rounded-xl ${darkMode ? 'bg-gray-900' : 'bg-gray-50'} border ${darkMode ? 'border-gray-800' : 'border-gray-200'}`}>\n        <h2 className=\"text-xl font-bold mb-4 flex items-center gap-2\">\n          <i className=\"ri-function-line text-yellow-500\"></i>\n          9+ Controles de Promoes & Marketing\n        </h2>\n        <div className=\"grid grid-cols-2 md:grid-cols-3 gap-3\">\n          {controls.map(control => (\n            <div\n              key={control.id}\n              className={`p-3 rounded-lg ${darkMode ? 'bg-gray-800' : 'bg-white'} border ${darkMode ? 'border-gray-700' : 'border-gray-200'}`}\n            >\n              <div className=\"flex items-center gap-2 mb-1\">\n                <i className={`${control.icon} text-yellow-500`}></i>\n                <span className=\"w-2 h-2 rounded-full bg-green-500\"></span>\n              </div>\n              <p className=\"text-xs font-medium\">{control.name}</p>\n            </div>\n          ))}\n        </div>\n      </div>\n\n      <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n        <div className={`p-6 rounded-xl ${darkMode ? 'bg-gray-900' : 'bg-gray-50'} border ${darkMode ? 'border-gray-800' : 'border-gray-200'}`}>\n          <div className=\"flex items-center justify-between mb-4\">\n            <h3 className=\"text-lg font-bold\">Cupons Ativos</h3>\n            <button\n              onClick={() => setShowCouponModal(true)}\n              className=\"p-2 rounded-lg bg-yellow-500 text-black hover:bg-yellow-600 transition-colors\"\n            >\n              <i className=\"ri-add-line text-xl\"></i>\n            </button>\n          </div>\n          <div className=\"space-y-3\">\n            {coupons.length === 0 ? (\n              <p className={darkMode ? 'text-gray-400' : 'text-gray-600'}>Nenhum cupom criado</p>\n            ) : (\n              coupons.slice(0, 5).map((coupon) => (\n                <div key={coupon.id} className={`p-4 rounded-lg ${darkMode ? 'bg-gray-800' : 'bg-white'} border ${darkMode ? 'border-gray-700' : 'border-gray-200'}`}>\n                  <div className=\"flex items-center justify-between mb-2\">\n                    <span className=\"font-mono font-bold text-yellow-500\">{coupon.code}</span>\n                    <span className={`px-2 py-1 rounded-full text-xs ${\n                      coupon.is_active ? 'bg-green-500/20 text-green-500' : 'bg-gray-500/20 text-gray-500'\n                    }`}>\n                      {coupon.is_active ? 'Ativo' : 'Inativo'}\n                    </span>\n                  </div>\n                  <p className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'} mb-2`}>\n                    {coupon.description}\n                  </p>\n                  <div className=\"flex items-center justify-between text-xs\">\n                    <span className={darkMode ? 'text-gray-400' : 'text-gray-600'}>\n                      Usado: {coupon.usage_count || 0}/{coupon.usage_limit || ''}\n                    </span>\n                    <span className=\"text-yellow-500 font-medium\">\n                      {coupon.discount_type === 'percentage' ? `${coupon.discount_value}%` : `R$ ${coupon.discount_value}`}\n                    </span>\n                  </div>\n                </div>\n              ))\n            )}\n          </div>\n        </div>\n\n        <div className={`lg:col-span-2 p-6 rounded-xl ${darkMode ? 'bg-gray-900' : 'bg-gray-50'} border ${darkMode ? 'border-gray-800' : 'border-gray-200'}`}>\n          <div className=\"flex items-center justify-between mb-4\">\n            <h3 className=\"text-lg font-bold\">Campanhas de Marketing</h3>\n            <button className=\"px-4 py-2 bg-gradient-to-r from-purple-500 to-purple-600 text-white font-medium rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap\">\n              <i className=\"ri-add-line text-xl\"></i>\n              Nova Campanha\n            </button>\n          </div>\n\n          {loading ? (\n            <div className=\"flex items-center justify-center h-64\">\n              <div className=\"w-12 h-12 border-4 border-yellow-500 border-t-transparent rounded-full animate-spin\"></div>\n            </div>\n          ) : campaigns.length === 0 ? (\n            <div className=\"text-center py-12\">\n              <i className=\"ri-megaphone-line text-6xl text-gray-600 mb-4\"></i>\n              <p className={`text-lg ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>\n                Nenhuma campanha criada ainda\n              </p>\n              <button className=\"mt-4 px-6 py-2 bg-gradient-to-r from-yellow-500 to-yellow-600 text-black font-medium rounded-lg hover:opacity-90 transition-opacity whitespace-nowrap\">\n                Criar Primeira Campanha\n              </button>\n            </div>\n          ) : (\n            <div className=\"space-y-4\">\n              {campaigns.map((campaign) => (\n                <div key={campaign.id} className={`p-4 rounded-lg ${darkMode ? 'bg-gray-800' : 'bg-white'} border ${darkMode ? 'border-gray-700' : 'border-gray-200'}`}>\n                  <div className=\"flex items-start justify-between mb-3\">\n                    <div>\n                      <h4 className=\"font-bold text-lg\">{campaign.name}</h4>\n                      <p className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>\n                        {campaign.description}\n                      </p>\n                    </div>\n                    <span className={`px-3 py-1 rounded-full text-xs font-medium ${\n                      campaign.status === 'running'\n                        ? 'bg-green-500/20 text-green-500'\n                        : campaign.status === 'scheduled'\n                        ? 'bg-blue-500/20 text-blue-500'\n                        : campaign.status === 'completed'\n                        ? 'bg-gray-500/20 text-gray-500'\n                        : 'bg-yellow-500/20 text-yellow-500'\n                    }`}>\n                      {campaign.status === 'running' ? 'Em Execuo' : \n                       campaign.status === 'scheduled' ? 'Agendada' :\n                       campaign.status === 'completed' ? 'Concluda' : 'Rascunho'}\n                    </span>\n                  </div>\n\n                  <div className=\"grid grid-cols-4 gap-4 mb-3\">\n                    <div>\n                      <p className={`text-xs ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>Enviados</p>\n                      <p className=\"text-lg font-bold\">{campaign.sent_count || 0}</p>\n                    </div>\n                    <div>\n                      <p className={`text-xs ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>Abertos</p>\n                      <p className=\"text-lg font-bold text-blue-500\">{campaign.opened_count || 0}</p>\n                    </div>\n                    <div>\n                      <p className={`text-xs ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>Cliques</p>\n                      <p className=\"text-lg font-bold text-purple-500\">{campaign.clicked_count || 0}</p>\n                    </div>\n                    <div>\n                      <p className={`text-xs ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>Converses</p>\n                      <p className=\"text-lg font-bold text-green-500\">{campaign.conversion_count || 0}</p>\n                    </div>\n                  </div>\n\n                  <div className=\"flex items-center justify-between\">\n                    <span className=\"text-sm font-medium text-yellow-500\">\n                      ROI: R$ {campaign.revenue?.toFixed(2) || '0.00'}\n                    </span>\n                    <div className=\"flex items-center gap-2\">\n                      <button className=\"p-2 rounded-lg bg-blue-500/10 text-blue-500 hover:bg-blue-500/20 transition-colors\">\n                        <i className=\"ri-edit-line\"></i>\n                      </button>\n                      <button className=\"p-2 rounded-lg bg-purple-500/10 text-purple-500 hover:bg-purple-500/20 transition-colors\">\n                        <i className=\"ri-bar-chart-line\"></i>\n                      </button>\n                      <button className=\"p-2 rounded-lg bg-red-500/10 text-red-500 hover:bg-red-500/20 transition-colors\">\n                        <i className=\"ri-delete-bin-line\"></i>\n                      </button>\n                    </div>\n                  </div>\n                </div>\n              ))}\n            </div>\n          )}\n        </div>\n      </div>\n\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n        {[\n          { title: 'Taxa de Abertura', value: '24.5%', icon: 'ri-mail-open-line', color: 'blue' },\n          { title: 'Taxa de Clique', value: '8.2%', icon: 'ri-cursor-line', color: 'purple' },\n          { title: 'Taxa de Converso', value: '3.1%', icon: 'ri-shopping-cart-line', color: 'green' }\n        ].map((stat, index) => (\n          <div\n            key={index}\n            className={`p-6 rounded-xl ${darkMode ? 'bg-gray-900' : 'bg-gray-50'} border ${darkMode ? 'border-gray-800' : 'border-gray-200'}`}\n          >\n            <div className={`w-12 h-12 rounded-lg bg-${stat.color}-500/20 flex items-center justify-center mb-4`}>\n              <i className={`${stat.icon} text-2xl text-${stat.color}-500`}></i>\n            </div>\n            <h3 className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'} mb-1`}>{stat.title}</h3>\n            <p className=\"text-3xl font-bold\">{stat.value}</p>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n}\n","import { useState, useEffect } from 'react';\nimport { supabase } from '../../../lib/supabase';\n\ninterface FinancialManagementProps {\n  darkMode: boolean;\n}\n\nexport default function FinancialManagement({ darkMode }: FinancialManagementProps) {\n  const [transactions, setTransactions] = useState<any[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [dateRange, setDateRange] = useState('month');\n  const [stats, setStats] = useState({\n    totalRevenue: 0,\n    totalRefunds: 0,\n    netRevenue: 0,\n    avgOrderValue: 0\n  });\n\n  useEffect(() => {\n    loadFinancialData();\n  }, [dateRange]);\n\n  const loadFinancialData = async () => {\n    try {\n      const { data: orders, error } = await supabase\n        .from('orders')\n        .select('*')\n        .order('created_at', { ascending: false });\n\n      if (error) throw error;\n\n      const totalRevenue = orders?.reduce((sum, order) => sum + (order.total || 0), 0) || 0;\n      const avgOrderValue = orders?.length ? totalRevenue / orders.length : 0;\n\n      setStats({\n        totalRevenue,\n        totalRefunds: 0,\n        netRevenue: totalRevenue,\n        avgOrderValue\n      });\n\n      setTransactions(orders || []);\n    } catch (error) {\n      console.error('Erro ao carregar dados financeiros:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const controls = [\n    { id: 1, name: 'Relatrios Peridicos', icon: 'ri-calendar-line' },\n    { id: 2, name: 'Por Mtodo Pagamento', icon: 'ri-bank-card-line' },\n    { id: 3, name: 'Margem por Categoria', icon: 'ri-pie-chart-line' },\n    { id: 4, name: 'KPIs (LTV/CAC/AOV)', icon: 'ri-dashboard-line' },\n    { id: 5, name: 'Exports Financeiros', icon: 'ri-file-excel-line' },\n    { id: 6, name: 'Reconciliao Stripe', icon: 'ri-refresh-line' },\n    { id: 7, name: 'Impostos por Regio', icon: 'ri-government-line' },\n    { id: 8, name: 'Plano de Contas', icon: 'ri-book-line' }\n  ];\n\n  const kpis = [\n    {\n      label: 'Receita Total',\n      value: `R$ ${stats.totalRevenue.toFixed(2)}`,\n      icon: 'ri-money-dollar-circle-line',\n      color: 'from-green-500 to-green-600',\n      change: '+12.5%'\n    },\n    {\n      label: 'Receita Lquida',\n      value: `R$ ${stats.netRevenue.toFixed(2)}`,\n      icon: 'ri-line-chart-line',\n      color: 'from-blue-500 to-blue-600',\n      change: '+8.2%'\n    },\n    {\n      label: 'Ticket Mdio (AOV)',\n      value: `R$ ${stats.avgOrderValue.toFixed(2)}`,\n      icon: 'ri-shopping-cart-line',\n      color: 'from-purple-500 to-purple-600',\n      change: '+5.1%'\n    },\n    {\n      label: 'Reembolsos',\n      value: `R$ ${stats.totalRefunds.toFixed(2)}`,\n      icon: 'ri-refund-line',\n      color: 'from-red-500 to-red-600',\n      change: '-2.3%'\n    }\n  ];\n\n  return (\n    <div className=\"space-y-6\">\n      <div className={`p-6 rounded-xl ${darkMode ? 'bg-gray-900' : 'bg-gray-50'} border ${darkMode ? 'border-gray-800' : 'border-gray-200'}`}>\n        <h2 className=\"text-xl font-bold mb-4 flex items-center gap-2\">\n          <i className=\"ri-function-line text-yellow-500\"></i>\n          8+ Controles Financeiros & Relatrios\n        </h2>\n        <div className=\"grid grid-cols-2 md:grid-cols-4 gap-3\">\n          {controls.map(control => (\n            <div\n              key={control.id}\n              className={`p-3 rounded-lg ${darkMode ? 'bg-gray-800' : 'bg-white'} border ${darkMode ? 'border-gray-700' : 'border-gray-200'}`}\n            >\n              <div className=\"flex items-center gap-2 mb-1\">\n                <i className={`${control.icon} text-yellow-500`}></i>\n                <span className=\"w-2 h-2 rounded-full bg-green-500\"></span>\n              </div>\n              <p className=\"text-xs font-medium\">{control.name}</p>\n            </div>\n          ))}\n        </div>\n      </div>\n\n      <div className=\"flex items-center justify-between\">\n        <div className=\"flex items-center gap-2\">\n          {['day', 'week', 'month', 'year'].map((range) => (\n            <button\n              key={range}\n              onClick={() => setDateRange(range)}\n              className={`px-4 py-2 rounded-lg font-medium transition-all whitespace-nowrap ${\n                dateRange === range\n                  ? 'bg-gradient-to-r from-yellow-500 to-yellow-600 text-black'\n                  : darkMode\n                  ? 'bg-gray-800 text-gray-300 hover:bg-gray-700'\n                  : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\n              }`}\n            >\n              {range === 'day' ? 'Hoje' : range === 'week' ? 'Semana' : range === 'month' ? 'Ms' : 'Ano'}\n            </button>\n          ))}\n        </div>\n\n        <button className=\"px-6 py-2 bg-gradient-to-r from-green-500 to-green-600 text-white font-medium rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap\">\n          <i className=\"ri-file-excel-line text-xl\"></i>\n          Exportar Relatrio\n        </button>\n      </div>\n\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\n        {kpis.map((kpi, index) => (\n          <div\n            key={index}\n            className={`p-6 rounded-xl ${darkMode ? 'bg-gray-900' : 'bg-gray-50'} border ${darkMode ? 'border-gray-800' : 'border-gray-200'}`}\n          >\n            <div className=\"flex items-center justify-between mb-4\">\n              <div className={`w-12 h-12 rounded-lg bg-gradient-to-br ${kpi.color} flex items-center justify-center`}>\n                <i className={`${kpi.icon} text-2xl text-white`}></i>\n              </div>\n              <span className={`text-sm font-medium ${kpi.change.startsWith('+') ? 'text-green-500' : 'text-red-500'}`}>\n                {kpi.change}\n              </span>\n            </div>\n            <h3 className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'} mb-1`}>{kpi.label}</h3>\n            <p className=\"text-2xl font-bold\">{kpi.value}</p>\n          </div>\n        ))}\n      </div>\n\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n        <div className={`p-6 rounded-xl ${darkMode ? 'bg-gray-900' : 'bg-gray-50'} border ${darkMode ? 'border-gray-800' : 'border-gray-200'}`}>\n          <h3 className=\"text-lg font-bold mb-4\">Receita por Mtodo de Pagamento</h3>\n          <div className=\"space-y-3\">\n            {[\n              { method: 'Carto de Crdito', amount: 45230.50, percentage: 65, color: 'blue' },\n              { method: 'PIX', amount: 18450.00, percentage: 25, color: 'green' },\n              { method: 'Boleto', amount: 7380.00, percentage: 10, color: 'yellow' }\n            ].map((item, index) => (\n              <div key={index} className={`p-4 rounded-lg ${darkMode ? 'bg-gray-800' : 'bg-white'}`}>\n                <div className=\"flex items-center justify-between mb-2\">\n                  <span className=\"font-medium\">{item.method}</span>\n                  <span className=\"font-bold text-yellow-500\">R$ {item.amount.toFixed(2)}</span>\n                </div>\n                <div className=\"w-full bg-gray-700 rounded-full h-2\">\n                  <div\n                    className={`bg-${item.color}-500 h-2 rounded-full`}\n                    style={{ width: `${item.percentage}%` }}\n                  ></div>\n                </div>\n                <p className={`text-xs mt-1 ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>\n                  {item.percentage}% do total\n                </p>\n              </div>\n            ))}\n          </div>\n        </div>\n\n        <div className={`p-6 rounded-xl ${darkMode ? 'bg-gray-900' : 'bg-gray-50'} border ${darkMode ? 'border-gray-800' : 'border-gray-200'}`}>\n          <h3 className=\"text-lg font-bold mb-4\">Margem por Categoria</h3>\n          <div className=\"space-y-3\">\n            {[\n              { category: 'Tecnologia', revenue: 35000, cost: 20000, margin: 42.8 },\n              { category: 'Casa & Decorao', revenue: 18000, cost: 12000, margin: 33.3 },\n              { category: 'Ferramentas', revenue: 12000, cost: 7000, margin: 41.6 }\n            ].map((item, index) => (\n              <div key={index} className={`p-4 rounded-lg ${darkMode ? 'bg-gray-800' : 'bg-white'}`}>\n                <div className=\"flex items-center justify-between mb-2\">\n                  <span className=\"font-medium\">{item.category}</span>\n                  <span className=\"text-green-500 font-bold\">{item.margin.toFixed(1)}%</span>\n                </div>\n                <div className=\"flex items-center justify-between text-sm\">\n                  <span className={darkMode ? 'text-gray-400' : 'text-gray-600'}>\n                    Receita: R$ {item.revenue.toFixed(2)}\n                  </span>\n                  <span className={darkMode ? 'text-gray-400' : 'text-gray-600'}>\n                    Custo: R$ {item.cost.toFixed(2)}\n                  </span>\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import { useState, useEffect } from 'react';\nimport { supabase } from '../../../lib/supabase';\n\ninterface SecurityManagementProps {\n  darkMode: boolean;\n}\n\nexport default function SecurityManagement({ darkMode }: SecurityManagementProps) {\n  const [auditLogs, setAuditLogs] = useState<any[]>([]);\n  const [apiKeys, setApiKeys] = useState<any[]>([]);\n  const [webhooks, setWebhooks] = useState<any[]>([]);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    loadSecurityData();\n  }, []);\n\n  const loadSecurityData = async () => {\n    try {\n      const [logsRes, keysRes, webhooksRes] = await Promise.all([\n        supabase.from('audit_logs').select('*, profiles(email)').order('created_at', { ascending: false }).limit(50),\n        supabase.from('api_keys').select('*').order('created_at', { ascending: false }),\n        supabase.from('webhooks').select('*').order('created_at', { ascending: false })\n      ]);\n\n      setAuditLogs(logsRes.data || []);\n      setApiKeys(keysRes.data || []);\n      setWebhooks(webhooksRes.data || []);\n    } catch (error) {\n      console.error('Erro ao carregar dados de segurana:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const controls = [\n    { id: 1, name: 'Audit Log', icon: 'ri-history-line' },\n    { id: 2, name: 'Gesto API Keys', icon: 'ri-key-line' },\n    { id: 3, name: 'Webhooks', icon: 'ri-webhook-line' },\n    { id: 4, name: 'RLS Policies', icon: 'ri-shield-check-line' },\n    { id: 5, name: 'Backups Agendados', icon: 'ri-database-line' },\n    { id: 6, name: 'Controle de Sesses', icon: 'ri-user-settings-line' }\n  ];\n\n  return (\n    <div className=\"space-y-6\">\n      <div className={`p-6 rounded-xl ${darkMode ? 'bg-gray-900' : 'bg-gray-50'} border ${darkMode ? 'border-gray-800' : 'border-gray-200'}`}>\n        <h2 className=\"text-xl font-bold mb-4 flex items-center gap-2\">\n          <i className=\"ri-function-line text-yellow-500\"></i>\n          6+ Controles de Segurana & Infraestrutura\n        </h2>\n        <div className=\"grid grid-cols-2 md:grid-cols-3 gap-3\">\n          {controls.map(control => (\n            <div\n              key={control.id}\n              className={`p-3 rounded-lg ${darkMode ? 'bg-gray-800' : 'bg-white'} border ${darkMode ? 'border-gray-700' : 'border-gray-200'}`}\n            >\n              <div className=\"flex items-center gap-2 mb-1\">\n                <i className={`${control.icon} text-yellow-500`}></i>\n                <span className=\"w-2 h-2 rounded-full bg-green-500\"></span>\n              </div>\n              <p className=\"text-xs font-medium\">{control.name}</p>\n            </div>\n          ))}\n        </div>\n      </div>\n\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n        <div className={`p-6 rounded-xl ${darkMode ? 'bg-gray-900' : 'bg-gray-50'} border ${darkMode ? 'border-gray-800' : 'border-gray-200'}`}>\n          <div className=\"w-12 h-12 rounded-lg bg-green-500/20 flex items-center justify-center mb-4\">\n            <i className=\"ri-shield-check-line text-2xl text-green-500\"></i>\n          </div>\n          <h3 className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'} mb-1`}>Status de Segurana</h3>\n          <p className=\"text-3xl font-bold text-green-500\">Seguro</p>\n          <p className={`text-xs mt-2 ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>\n            Todas as polticas ativas\n          </p>\n        </div>\n\n        <div className={`p-6 rounded-xl ${darkMode ? 'bg-gray-900' : 'bg-gray-50'} border ${darkMode ? 'border-gray-800' : 'border-gray-200'}`}>\n          <div className=\"w-12 h-12 rounded-lg bg-blue-500/20 flex items-center justify-center mb-4\">\n            <i className=\"ri-key-line text-2xl text-blue-500\"></i>\n          </div>\n          <h3 className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'} mb-1`}>API Keys Ativas</h3>\n          <p className=\"text-3xl font-bold\">{apiKeys.filter(k => k.is_active).length}</p>\n          <p className={`text-xs mt-2 ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>\n            {apiKeys.length} total\n          </p>\n        </div>\n\n        <div className={`p-6 rounded-xl ${darkMode ? 'bg-gray-900' : 'bg-gray-50'} border ${darkMode ? 'border-gray-800' : 'border-gray-200'}`}>\n          <div className=\"w-12 h-12 rounded-lg bg-purple-500/20 flex items-center justify-center mb-4\">\n            <i className=\"ri-database-line text-2xl text-purple-500\"></i>\n          </div>\n          <h3 className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'} mb-1`}>ltimo Backup</h3>\n          <p className=\"text-3xl font-bold\">Hoje</p>\n          <p className={`text-xs mt-2 ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>\n            Automtico dirio\n          </p>\n        </div>\n      </div>\n\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n        <div className={`p-6 rounded-xl ${darkMode ? 'bg-gray-900' : 'bg-gray-50'} border ${darkMode ? 'border-gray-800' : 'border-gray-200'}`}>\n          <div className=\"flex items-center justify-between mb-4\">\n            <h3 className=\"text-lg font-bold\">API Keys</h3>\n            <button className=\"px-4 py-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white font-medium rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap\">\n              <i className=\"ri-add-line text-xl\"></i>\n              Nova Key\n            </button>\n          </div>\n\n          <div className=\"space-y-3\">\n            {apiKeys.length === 0 ? (\n              <p className={darkMode ? 'text-gray-400' : 'text-gray-600'}>Nenhuma API key criada</p>\n            ) : (\n              apiKeys.map((key) => (\n                <div key={key.id} className={`p-4 rounded-lg ${darkMode ? 'bg-gray-800' : 'bg-white'} border ${darkMode ? 'border-gray-700' : 'border-gray-200'}`}>\n                  <div className=\"flex items-center justify-between mb-2\">\n                    <div>\n                      <p className=\"font-medium\">{key.name}</p>\n                      <p className={`text-xs font-mono ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>\n                        {key.key_hash.slice(0, 20)}...\n                      </p>\n                    </div>\n                    <span className={`px-2 py-1 rounded-full text-xs ${\n                      key.is_active ? 'bg-green-500/20 text-green-500' : 'bg-gray-500/20 text-gray-500'\n                    }`}>\n                      {key.is_active ? 'Ativa' : 'Inativa'}\n                    </span>\n                  </div>\n                  <div className=\"flex items-center justify-between text-xs\">\n                    <span className={darkMode ? 'text-gray-400' : 'text-gray-600'}>\n                      ltimo uso: {key.last_used ? new Date(key.last_used).toLocaleDateString('pt-BR') : 'Nunca'}\n                    </span>\n                    <div className=\"flex items-center gap-2\">\n                      <button className=\"p-1 rounded bg-blue-500/10 text-blue-500 hover:bg-blue-500/20 transition-colors\">\n                        <i className=\"ri-edit-line\"></i>\n                      </button>\n                      <button className=\"p-1 rounded bg-red-500/10 text-red-500 hover:bg-red-500/20 transition-colors\">\n                        <i className=\"ri-delete-bin-line\"></i>\n                      </button>\n                    </div>\n                  </div>\n                </div>\n              ))\n            )}\n          </div>\n        </div>\n\n        <div className={`p-6 rounded-xl ${darkMode ? 'bg-gray-900' : 'bg-gray-50'} border ${darkMode ? 'border-gray-800' : 'border-gray-200'}`}>\n          <div className=\"flex items-center justify-between mb-4\">\n            <h3 className=\"text-lg font-bold\">Webhooks</h3>\n            <button className=\"px-4 py-2 bg-gradient-to-r from-purple-500 to-purple-600 text-white font-medium rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap\">\n              <i className=\"ri-add-line text-xl\"></i>\n              Novo Webhook\n            </button>\n          </div>\n\n          <div className=\"space-y-3\">\n            {webhooks.length === 0 ? (\n              <p className={darkMode ? 'text-gray-400' : 'text-gray-600'}>Nenhum webhook configurado</p>\n            ) : (\n              webhooks.map((webhook) => (\n                <div key={webhook.id} className={`p-4 rounded-lg ${darkMode ? 'bg-gray-800' : 'bg-white'} border ${darkMode ? 'border-gray-700' : 'border-gray-200'}`}>\n                  <div className=\"flex items-center justify-between mb-2\">\n                    <div className=\"flex-1 mr-2\">\n                      <p className=\"font-medium\">{webhook.name}</p>\n                      <p className={`text-xs ${darkMode ? 'text-gray-400' : 'text-gray-600'} truncate`}>\n                        {webhook.url}\n                      </p>\n                    </div>\n                    <span className={`px-2 py-1 rounded-full text-xs whitespace-nowrap ${\n                      webhook.is_active ? 'bg-green-500/20 text-green-500' : 'bg-gray-500/20 text-gray-500'\n                    }`}>\n                      {webhook.is_active ? 'Ativo' : 'Inativo'}\n                    </span>\n                  </div>\n                  <div className=\"flex items-center justify-between text-xs\">\n                    <div className=\"flex items-center gap-3\">\n                      <span className=\"text-green-500\"> {webhook.success_count || 0}</span>\n                      <span className=\"text-red-500\"> {webhook.failure_count || 0}</span>\n                    </div>\n                    <div className=\"flex items-center gap-2\">\n                      <button className=\"p-1 rounded bg-blue-500/10 text-blue-500 hover:bg-blue-500/20 transition-colors\">\n                        <i className=\"ri-edit-line\"></i>\n                      </button>\n                      <button className=\"p-1 rounded bg-red-500/10 text-red-500 hover:bg-red-500/20 transition-colors\">\n                        <i className=\"ri-delete-bin-line\"></i>\n                      </button>\n                    </div>\n                  </div>\n                </div>\n              ))\n            )}\n          </div>\n        </div>\n      </div>\n\n      <div className={`p-6 rounded-xl ${darkMode ? 'bg-gray-900' : 'bg-gray-50'} border ${darkMode ? 'border-gray-800' : 'border-gray-200'}`}>\n        <h3 className=\"text-lg font-bold mb-4\">Audit Log (ltimas 50 aes)</h3>\n        \n        {loading ? (\n          <div className=\"flex items-center justify-center h-64\">\n            <div className=\"w-12 h-12 border-4 border-yellow-500 border-t-transparent rounded-full animate-spin\"></div>\n          </div>\n        ) : auditLogs.length === 0 ? (\n          <p className={darkMode ? 'text-gray-400' : 'text-gray-600'}>Nenhuma ao registrada</p>\n        ) : (\n          <div className=\"overflow-x-auto\">\n            <table className=\"w-full\">\n              <thead className={darkMode ? 'bg-gray-800' : 'bg-gray-100'}>\n                <tr>\n                  <th className=\"px-4 py-3 text-left text-sm font-semibold\">Data/Hora</th>\n                  <th className=\"px-4 py-3 text-left text-sm font-semibold\">Usurio</th>\n                  <th className=\"px-4 py-3 text-left text-sm font-semibold\">Ao</th>\n                  <th className=\"px-4 py-3 text-left text-sm font-semibold\">Tabela</th>\n                  <th className=\"px-4 py-3 text-left text-sm font-semibold\">IP</th>\n                </tr>\n              </thead>\n              <tbody>\n                {auditLogs.map((log) => (\n                  <tr\n                    key={log.id}\n                    className={`border-t ${darkMode ? 'border-gray-800' : 'border-gray-200'}`}\n                  >\n                    <td className=\"px-4 py-3 text-sm\">\n                      {new Date(log.created_at).toLocaleString('pt-BR')}\n                    </td>\n                    <td className=\"px-4 py-3 text-sm\">\n                      {log.profiles?.email || 'Sistema'}\n                    </td>\n                    <td className=\"px-4 py-3\">\n                      <span className={`px-2 py-1 rounded-full text-xs font-medium ${\n                        log.action.includes('create') || log.action.includes('insert')\n                          ? 'bg-green-500/20 text-green-500'\n                          : log.action.includes('update')\n                          ? 'bg-blue-500/20 text-blue-500'\n                          : log.action.includes('delete')\n                          ? 'bg-red-500/20 text-red-500'\n                          : 'bg-gray-500/20 text-gray-500'\n                      }`}>\n                        {log.action}\n                      </span>\n                    </td>\n                    <td className=\"px-4 py-3 text-sm\">{log.table_name || '-'}</td>\n                    <td className=\"px-4 py-3 text-sm font-mono\">{log.ip_address || '-'}</td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n","import { useState, useEffect } from 'react';\nimport { supabase } from '../../../lib/supabase';\n\ninterface AutomationManagementProps {\n  darkMode: boolean;\n}\n\nexport default function AutomationManagement({ darkMode }: AutomationManagementProps) {\n  const [rules, setRules] = useState<any[]>([]);\n  const [templates, setTemplates] = useState<any[]>([]);\n  const [tasks, setTasks] = useState<any[]>([]);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    loadAutomationData();\n  }, []);\n\n  const loadAutomationData = async () => {\n    try {\n      const [rulesRes, templatesRes, tasksRes] = await Promise.all([\n        supabase.from('automation_rules').select('*').order('created_at', { ascending: false }),\n        supabase.from('email_templates').select('*').order('created_at', { ascending: false }),\n        supabase.from('scheduled_tasks').select('*').order('created_at', { ascending: false })\n      ]);\n\n      setRules(rulesRes.data || []);\n      setTemplates(templatesRes.data || []);\n      setTasks(tasksRes.data || []);\n    } catch (error) {\n      console.error('Erro ao carregar automaes:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const controls = [\n    { id: 1, name: 'Regras de Evento', icon: 'ri-flashlight-line' },\n    { id: 2, name: 'Automaes E-mail', icon: 'ri-mail-send-line' },\n    { id: 3, name: 'Pricing Dinmico', icon: 'ri-price-tag-3-line' },\n    { id: 4, name: 'Fraud Flags', icon: 'ri-shield-check-line' },\n    { id: 5, name: 'Autoresponder Reviews', icon: 'ri-chat-smile-line' },\n    { id: 6, name: 'Integrao ERP', icon: 'ri-links-line' },\n    { id: 7, name: 'Scheduler Tarefas', icon: 'ri-calendar-check-line' }\n  ];\n\n  return (\n    <div className=\"space-y-6\">\n      <div className={`p-6 rounded-xl ${darkMode ? 'bg-gray-900' : 'bg-gray-50'} border ${darkMode ? 'border-gray-800' : 'border-gray-200'}`}>\n        <h2 className=\"text-xl font-bold mb-4 flex items-center gap-2\">\n          <i className=\"ri-function-line text-yellow-500\"></i>\n          7+ Controles de Automao & Regras\n        </h2>\n        <div className=\"grid grid-cols-2 md:grid-cols-4 gap-3\">\n          {controls.map(control => (\n            <div\n              key={control.id}\n              className={`p-3 rounded-lg ${darkMode ? 'bg-gray-800' : 'bg-white'} border ${darkMode ? 'border-gray-700' : 'border-gray-200'}`}\n            >\n              <div className=\"flex items-center gap-2 mb-1\">\n                <i className={`${control.icon} text-yellow-500`}></i>\n                <span className=\"w-2 h-2 rounded-full bg-green-500\"></span>\n              </div>\n              <p className=\"text-xs font-medium\">{control.name}</p>\n            </div>\n          ))}\n        </div>\n      </div>\n\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n        <div className={`p-6 rounded-xl ${darkMode ? 'bg-gray-900' : 'bg-gray-50'} border ${darkMode ? 'border-gray-800' : 'border-gray-200'}`}>\n          <div className=\"flex items-center justify-between mb-4\">\n            <h3 className=\"text-lg font-bold\">Regras de Automao</h3>\n            <button className=\"px-4 py-2 bg-gradient-to-r from-yellow-500 to-yellow-600 text-black font-medium rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap\">\n              <i className=\"ri-add-line text-xl\"></i>\n              Nova Regra\n            </button>\n          </div>\n\n          <div className=\"space-y-3\">\n            {rules.length === 0 ? (\n              <div className=\"text-center py-8\">\n                <i className=\"ri-robot-line text-6xl text-gray-600 mb-4\"></i>\n                <p className={`${darkMode ? 'text-gray-400' : 'text-gray-600'} mb-4`}>\n                  Nenhuma regra de automao criada\n                </p>\n                <button className=\"px-6 py-2 bg-gradient-to-r from-yellow-500 to-yellow-600 text-black font-medium rounded-lg hover:opacity-90 transition-opacity whitespace-nowrap\">\n                  Criar Primeira Regra\n                </button>\n              </div>\n            ) : (\n              rules.map((rule) => (\n                <div key={rule.id} className={`p-4 rounded-lg ${darkMode ? 'bg-gray-800' : 'bg-white'} border ${darkMode ? 'border-gray-700' : 'border-gray-200'}`}>\n                  <div className=\"flex items-start justify-between mb-2\">\n                    <div className=\"flex-1\">\n                      <h4 className=\"font-medium\">{rule.name}</h4>\n                      <p className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>\n                        {rule.description}\n                      </p>\n                    </div>\n                    <span className={`px-2 py-1 rounded-full text-xs ml-2 whitespace-nowrap ${\n                      rule.is_active ? 'bg-green-500/20 text-green-500' : 'bg-gray-500/20 text-gray-500'\n                    }`}>\n                      {rule.is_active ? 'Ativa' : 'Inativa'}\n                    </span>\n                  </div>\n                  <div className=\"flex items-center justify-between\">\n                    <span className={`text-xs ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>\n                      Executada {rule.execution_count || 0} vezes\n                    </span>\n                    <div className=\"flex items-center gap-2\">\n                      <button className=\"p-2 rounded-lg bg-blue-500/10 text-blue-500 hover:bg-blue-500/20 transition-colors\">\n                        <i className=\"ri-edit-line\"></i>\n                      </button>\n                      <button className=\"p-2 rounded-lg bg-red-500/10 text-red-500 hover:bg-red-500/20 transition-colors\">\n                        <i className=\"ri-delete-bin-line\"></i>\n                      </button>\n                    </div>\n                  </div>\n                </div>\n              ))\n            )}\n          </div>\n        </div>\n\n        <div className={`p-6 rounded-xl ${darkMode ? 'bg-gray-900' : 'bg-gray-50'} border ${darkMode ? 'border-gray-800' : 'border-gray-200'}`}>\n          <div className=\"flex items-center justify-between mb-4\">\n            <h3 className=\"text-lg font-bold\">Templates de E-mail</h3>\n            <button className=\"px-4 py-2 bg-gradient-to-r from-purple-500 to-purple-600 text-white font-medium rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap\">\n              <i className=\"ri-add-line text-xl\"></i>\n              Novo Template\n            </button>\n          </div>\n\n          <div className=\"space-y-3\">\n            {templates.length === 0 ? (\n              <p className={darkMode ? 'text-gray-400' : 'text-gray-600'}>Nenhum template criado</p>\n            ) : (\n              templates.map((template) => (\n                <div key={template.id} className={`p-4 rounded-lg ${darkMode ? 'bg-gray-800' : 'bg-white'} border ${darkMode ? 'border-gray-700' : 'border-gray-200'}`}>\n                  <div className=\"flex items-start justify-between mb-2\">\n                    <div>\n                      <h4 className=\"font-medium\">{template.name}</h4>\n                      <p className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>\n                        {template.subject}\n                      </p>\n                    </div>\n                    <span className={`px-2 py-1 rounded-full text-xs ${\n                      template.is_active ? 'bg-green-500/20 text-green-500' : 'bg-gray-500/20 text-gray-500'\n                    }`}>\n                      {template.is_active ? 'Ativo' : 'Inativo'}\n                    </span>\n                  </div>\n                  <div className=\"flex items-center gap-2\">\n                    <button className=\"p-2 rounded-lg bg-blue-500/10 text-blue-500 hover:bg-blue-500/20 transition-colors\">\n                      <i className=\"ri-edit-line\"></i>\n                    </button>\n                    <button className=\"p-2 rounded-lg bg-purple-500/10 text-purple-500 hover:bg-purple-500/20 transition-colors\">\n                      <i className=\"ri-eye-line\"></i>\n                    </button>\n                    <button className=\"p-2 rounded-lg bg-red-500/10 text-red-500 hover:bg-red-500/20 transition-colors\">\n                      <i className=\"ri-delete-bin-line\"></i>\n                    </button>\n                  </div>\n                </div>\n              ))\n            )}\n          </div>\n        </div>\n      </div>\n\n      <div className={`p-6 rounded-xl ${darkMode ? 'bg-gray-900' : 'bg-gray-50'} border ${darkMode ? 'border-gray-800' : 'border-gray-200'}`}>\n        <div className=\"flex items-center justify-between mb-4\">\n          <h3 className=\"text-lg font-bold\">Tarefas Agendadas</h3>\n          <button className=\"px-4 py-2 bg-gradient-to-r from-green-500 to-green-600 text-white font-medium rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap\">\n            <i className=\"ri-add-line text-xl\"></i>\n            Nova Tarefa\n          </button>\n        </div>\n\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n          {tasks.length === 0 ? (\n            <p className={darkMode ? 'text-gray-400' : 'text-gray-600'}>Nenhuma tarefa agendada</p>\n          ) : (\n            tasks.map((task) => (\n              <div key={task.id} className={`p-4 rounded-lg ${darkMode ? 'bg-gray-800' : 'bg-white'} border ${darkMode ? 'border-gray-700' : 'border-gray-200'}`}>\n                <div className=\"flex items-center justify-between mb-3\">\n                  <h4 className=\"font-medium\">{task.name}</h4>\n                  <span className={`px-2 py-1 rounded-full text-xs ${\n                    task.is_active ? 'bg-green-500/20 text-green-500' : 'bg-gray-500/20 text-gray-500'\n                  }`}>\n                    {task.is_active ? 'Ativa' : 'Inativa'}\n                  </span>\n                </div>\n                <div className=\"space-y-2 text-sm\">\n                  <div className=\"flex items-center gap-2\">\n                    <i className=\"ri-time-line text-gray-400\"></i>\n                    <span className={darkMode ? 'text-gray-400' : 'text-gray-600'}>\n                      {task.schedule_cron}\n                    </span>\n                  </div>\n                  {task.last_run && (\n                    <div className=\"flex items-center gap-2\">\n                      <i className=\"ri-check-line text-green-500\"></i>\n                      <span className={darkMode ? 'text-gray-400' : 'text-gray-600'}>\n                        ltima execuo: {new Date(task.last_run).toLocaleString('pt-BR')}\n                      </span>\n                    </div>\n                  )}\n                </div>\n              </div>\n            ))\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n","import { useState, useEffect } from 'react';\nimport { supabase } from '../../../lib/supabase';\n\ninterface SupportManagementProps {\n  darkMode: boolean;\n}\n\nexport default function SupportManagement({ darkMode }: SupportManagementProps) {\n  const [tickets, setTickets] = useState<any[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [filterStatus, setFilterStatus] = useState('all');\n  const [filterPriority, setFilterPriority] = useState('all');\n  const [selectedTicket, setSelectedTicket] = useState<any>(null);\n\n  useEffect(() => {\n    loadTickets();\n  }, []);\n\n  const loadTickets = async () => {\n    try {\n      const { data, error } = await supabase\n        .from('support_tickets')\n        .select(`\n          *,\n          profiles!support_tickets_user_id_fkey(email, full_name)\n        `)\n        .order('created_at', { ascending: false });\n\n      if (error) throw error;\n      setTickets(data || []);\n    } catch (error) {\n      console.error('Erro ao carregar tickets:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleStatusChange = async (ticketId: string, newStatus: string) => {\n    try {\n      const { error } = await supabase\n        .from('support_tickets')\n        .update({ status: newStatus })\n        .eq('id', ticketId);\n\n      if (error) throw error;\n      await loadTickets();\n    } catch (error) {\n      console.error('Erro ao atualizar status:', error);\n    }\n  };\n\n  const controls = [\n    { id: 1, name: 'Chat Interno', icon: 'ri-chat-3-line' },\n    { id: 2, name: 'Sistema de Tickets', icon: 'ri-ticket-line' },\n    { id: 3, name: 'Import/Export Catlogo', icon: 'ri-file-transfer-line' },\n    { id: 4, name: 'Painel de Tarefas', icon: 'ri-task-line' },\n    { id: 5, name: 'Modo Manuteno', icon: 'ri-tools-line' },\n    { id: 6, name: 'Simular Pedido', icon: 'ri-shopping-cart-2-line' }\n  ];\n\n  const filteredTickets = tickets.filter(ticket => {\n    const matchesStatus = filterStatus === 'all' || ticket.status === filterStatus;\n    const matchesPriority = filterPriority === 'all' || ticket.priority === filterPriority;\n    return matchesStatus && matchesPriority;\n  });\n\n  const statusOptions = [\n    { value: 'open', label: 'Aberto', color: 'yellow' },\n    { value: 'in_progress', label: 'Em Progresso', color: 'blue' },\n    { value: 'waiting', label: 'Aguardando', color: 'purple' },\n    { value: 'resolved', label: 'Resolvido', color: 'green' },\n    { value: 'closed', label: 'Fechado', color: 'gray' }\n  ];\n\n  const priorityOptions = [\n    { value: 'low', label: 'Baixa', color: 'gray' },\n    { value: 'medium', label: 'Mdia', color: 'blue' },\n    { value: 'high', label: 'Alta', color: 'yellow' },\n    { value: 'urgent', label: 'Urgente', color: 'red' }\n  ];\n\n  return (\n    <div className=\"space-y-6\">\n      <div className={`p-6 rounded-xl ${darkMode ? 'bg-gray-900' : 'bg-gray-50'} border ${darkMode ? 'border-gray-800' : 'border-gray-200'}`}>\n        <h2 className=\"text-xl font-bold mb-4 flex items-center gap-2\">\n          <i className=\"ri-function-line text-yellow-500\"></i>\n          6+ Controles de Suporte & Operaes\n        </h2>\n        <div className=\"grid grid-cols-2 md:grid-cols-3 gap-3\">\n          {controls.map(control => (\n            <div\n              key={control.id}\n              className={`p-3 rounded-lg ${darkMode ? 'bg-gray-800' : 'bg-white'} border ${darkMode ? 'border-gray-700' : 'border-gray-200'}`}\n            >\n              <div className=\"flex items-center gap-2 mb-1\">\n                <i className={`${control.icon} text-yellow-500`}></i>\n                <span className=\"w-2 h-2 rounded-full bg-green-500\"></span>\n              </div>\n              <p className=\"text-xs font-medium\">{control.name}</p>\n            </div>\n          ))}\n        </div>\n      </div>\n\n      <div className=\"flex flex-wrap items-center justify-between gap-4\">\n        <div className=\"flex items-center gap-3\">\n          <select\n            value={filterStatus}\n            onChange={(e) => setFilterStatus(e.target.value)}\n            className={`px-4 py-2 rounded-lg ${\n              darkMode ? 'bg-gray-800 border-gray-700' : 'bg-white border-gray-200'\n            } border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\n          >\n            <option value=\"all\">Todos Status</option>\n            {statusOptions.map(status => (\n              <option key={status.value} value={status.value}>{status.label}</option>\n            ))}\n          </select>\n\n          <select\n            value={filterPriority}\n            onChange={(e) => setFilterPriority(e.target.value)}\n            className={`px-4 py-2 rounded-lg ${\n              darkMode ? 'bg-gray-800 border-gray-700' : 'bg-white border-gray-200'\n            } border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\n          >\n            <option value=\"all\">Todas Prioridades</option>\n            {priorityOptions.map(priority => (\n              <option key={priority.value} value={priority.value}>{priority.label}</option>\n            ))}\n          </select>\n        </div>\n\n        <div className=\"flex items-center gap-2\">\n          <button className=\"px-6 py-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white font-medium rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap\">\n            <i className=\"ri-download-line text-xl\"></i>\n            Exportar Catlogo\n          </button>\n          <button className=\"px-6 py-2 bg-gradient-to-r from-green-500 to-green-600 text-white font-medium rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap\">\n            <i className=\"ri-upload-line text-xl\"></i>\n            Importar Catlogo\n          </button>\n        </div>\n      </div>\n\n      <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n        {statusOptions.map((status) => {\n          const count = tickets.filter(t => t.status === status.value).length;\n          return (\n            <div\n              key={status.value}\n              className={`p-4 rounded-xl ${darkMode ? 'bg-gray-900' : 'bg-gray-50'} border ${darkMode ? 'border-gray-800' : 'border-gray-200'}`}\n            >\n              <div className={`w-10 h-10 rounded-lg bg-${status.color}-500/20 flex items-center justify-center mb-3`}>\n                <i className={`ri-ticket-line text-xl text-${status.color}-500`}></i>\n              </div>\n              <p className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'} mb-1`}>{status.label}</p>\n              <p className=\"text-2xl font-bold\">{count}</p>\n            </div>\n          );\n        })}\n      </div>\n\n      <div className={`rounded-xl overflow-hidden ${darkMode ? 'bg-gray-900' : 'bg-gray-50'} border ${darkMode ? 'border-gray-800' : 'border-gray-200'}`}>\n        {loading ? (\n          <div className=\"flex items-center justify-center h-64\">\n            <div className=\"w-12 h-12 border-4 border-yellow-500 border-t-transparent rounded-full animate-spin\"></div>\n          </div>\n        ) : filteredTickets.length === 0 ? (\n          <div className=\"text-center py-12\">\n            <i className=\"ri-customer-service-line text-6xl text-gray-600 mb-4\"></i>\n            <p className={`text-lg ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>\n              Nenhum ticket encontrado\n            </p>\n          </div>\n        ) : (\n          <div className=\"overflow-x-auto\">\n            <table className=\"w-full\">\n              <thead className={darkMode ? 'bg-gray-800' : 'bg-gray-100'}>\n                <tr>\n                  <th className=\"px-6 py-4 text-left font-semibold\">ID</th>\n                  <th className=\"px-6 py-4 text-left font-semibold\">Assunto</th>\n                  <th className=\"px-6 py-4 text-left font-semibold\">Cliente</th>\n                  <th className=\"px-6 py-4 text-left font-semibold\">Prioridade</th>\n                  <th className=\"px-6 py-4 text-left font-semibold\">Status</th>\n                  <th className=\"px-6 py-4 text-left font-semibold\">Data</th>\n                  <th className=\"px-6 py-4 text-left font-semibold\">Aes</th>\n                </tr>\n              </thead>\n              <tbody>\n                {filteredTickets.map((ticket) => (\n                  <tr\n                    key={ticket.id}\n                    className={`border-t ${darkMode ? 'border-gray-800 hover:bg-gray-800' : 'border-gray-200 hover:bg-gray-50'} transition-colors`}\n                  >\n                    <td className=\"px-6 py-4\">\n                      <span className=\"font-mono text-sm\">#{ticket.id.slice(0, 8)}</span>\n                    </td>\n                    <td className=\"px-6 py-4\">\n                      <p className=\"font-medium\">{ticket.subject}</p>\n                      {ticket.category && (\n                        <span className={`text-xs ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>\n                          {ticket.category}\n                        </span>\n                      )}\n                    </td>\n                    <td className=\"px-6 py-4\">\n                      <div>\n                        <p className=\"font-medium\">{ticket.profiles?.full_name || 'N/A'}</p>\n                        <p className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>\n                          {ticket.profiles?.email}\n                        </p>\n                      </div>\n                    </td>\n                    <td className=\"px-6 py-4\">\n                      <span className={`px-3 py-1 rounded-full text-xs font-medium ${\n                        ticket.priority === 'urgent'\n                          ? 'bg-red-500/20 text-red-500'\n                          : ticket.priority === 'high'\n                          ? 'bg-yellow-500/20 text-yellow-500'\n                          : ticket.priority === 'medium'\n                          ? 'bg-blue-500/20 text-blue-500'\n                          : 'bg-gray-500/20 text-gray-500'\n                      }`}>\n                        {priorityOptions.find(p => p.value === ticket.priority)?.label}\n                      </span>\n                    </td>\n                    <td className=\"px-6 py-4\">\n                      <select\n                        value={ticket.status}\n                        onChange={(e) => handleStatusChange(ticket.id, e.target.value)}\n                        className={`px-3 py-1 rounded-full text-xs font-medium ${\n                          ticket.status === 'resolved'\n                            ? 'bg-green-500/20 text-green-500'\n                            : ticket.status === 'open'\n                            ? 'bg-yellow-500/20 text-yellow-500'\n                            : ticket.status === 'closed'\n                            ? 'bg-gray-500/20 text-gray-500'\n                            : 'bg-blue-500/20 text-blue-500'\n                        } border-none cursor-pointer`}\n                      >\n                        {statusOptions.map(status => (\n                          <option key={status.value} value={status.value}>{status.label}</option>\n                        ))}\n                      </select>\n                    </td>\n                    <td className=\"px-6 py-4\">\n                      <span className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>\n                        {new Date(ticket.created_at).toLocaleDateString('pt-BR')}\n                      </span>\n                    </td>\n                    <td className=\"px-6 py-4\">\n                      <div className=\"flex items-center gap-2\">\n                        <button\n                          onClick={() => setSelectedTicket(ticket)}\n                          className=\"p-2 rounded-lg bg-blue-500/10 text-blue-500 hover:bg-blue-500/20 transition-colors\"\n                          title=\"Ver detalhes\"\n                        >\n                          <i className=\"ri-eye-line\"></i>\n                        </button>\n                        <button\n                          className=\"p-2 rounded-lg bg-green-500/10 text-green-500 hover:bg-green-500/20 transition-colors\"\n                          title=\"Responder\"\n                        >\n                          <i className=\"ri-reply-line\"></i>\n                        </button>\n                      </div>\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n        )}\n      </div>\n\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n        <div className={`p-6 rounded-xl ${darkMode ? 'bg-gray-900' : 'bg-gray-50'} border ${darkMode ? 'border-gray-800' : 'border-gray-200'}`}>\n          <h3 className=\"text-lg font-bold mb-4\">Ferramentas de Operao</h3>\n          <div className=\"space-y-3\">\n            <button className=\"w-full p-4 rounded-lg bg-gradient-to-r from-blue-500 to-blue-600 text-white text-left hover:opacity-90 transition-opacity\">\n              <div className=\"flex items-center gap-3\">\n                <i className=\"ri-shopping-cart-2-line text-2xl\"></i>\n                <div>\n                  <p className=\"font-medium\">Simular Pedido</p>\n                  <p className=\"text-sm opacity-80\">Testar fluxo completo de compra</p>\n                </div>\n              </div>\n            </button>\n\n            <button className=\"w-full p-4 rounded-lg bg-gradient-to-r from-yellow-500 to-yellow-600 text-black text-left hover:opacity-90 transition-opacity\">\n              <div className=\"flex items-center gap-3\">\n                <i className=\"ri-tools-line text-2xl\"></i>\n                <div>\n                  <p className=\"font-medium\">Modo Manuteno</p>\n                  <p className=\"text-sm opacity-80\">Ativar/desativar site temporariamente</p>\n                </div>\n              </div>\n            </button>\n\n            <button className=\"w-full p-4 rounded-lg bg-gradient-to-r from-purple-500 to-purple-600 text-white text-left hover:opacity-90 transition-opacity\">\n              <div className=\"flex items-center gap-3\">\n                <i className=\"ri-task-line text-2xl\"></i>\n                <div>\n                  <p className=\"font-medium\">Painel de Tarefas</p>\n                  <p className=\"text-sm opacity-80\">Gerenciar tarefas da equipe</p>\n                </div>\n              </div>\n            </button>\n          </div>\n        </div>\n\n        <div className={`p-6 rounded-xl ${darkMode ? 'bg-gray-900' : 'bg-gray-50'} border ${darkMode ? 'border-gray-800' : 'border-gray-200'}`}>\n          <h3 className=\"text-lg font-bold mb-4\">Estatsticas de Suporte</h3>\n          <div className=\"space-y-4\">\n            <div>\n              <div className=\"flex items-center justify-between mb-2\">\n                <span className={darkMode ? 'text-gray-400' : 'text-gray-600'}>Tempo Mdio de Resposta</span>\n                <span className=\"font-bold text-yellow-500\">2.5h</span>\n              </div>\n              <div className=\"w-full bg-gray-700 rounded-full h-2\">\n                <div className=\"bg-yellow-500 h-2 rounded-full\" style={{ width: '75%' }}></div>\n              </div>\n            </div>\n\n            <div>\n              <div className=\"flex items-center justify-between mb-2\">\n                <span className={darkMode ? 'text-gray-400' : 'text-gray-600'}>Taxa de Resoluo</span>\n                <span className=\"font-bold text-green-500\">87%</span>\n              </div>\n              <div className=\"w-full bg-gray-700 rounded-full h-2\">\n                <div className=\"bg-green-500 h-2 rounded-full\" style={{ width: '87%' }}></div>\n              </div>\n            </div>\n\n            <div>\n              <div className=\"flex items-center justify-between mb-2\">\n                <span className={darkMode ? 'text-gray-400' : 'text-gray-600'}>Satisfao do Cliente</span>\n                <span className=\"font-bold text-blue-500\">4.6/5.0</span>\n              </div>\n              <div className=\"w-full bg-gray-700 rounded-full h-2\">\n                <div className=\"bg-blue-500 h-2 rounded-full\" style={{ width: '92%' }}></div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","\nimport { useState, useEffect } from 'react';\nimport { supabase } from '../../../lib/supabase';\n\ninterface ShippingManagementProps {\n  darkMode: boolean;\n}\n\nexport default function ShippingManagement({ darkMode }: ShippingManagementProps) {\n  const [shippingRules, setShippingRules] = useState<any[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [showModal, setShowModal] = useState(false);\n  const [editingRule, setEditingRule] = useState<any>(null);\n\n  const [formData, setFormData] = useState({\n    name: '',\n    country: '',\n    region: '',\n    method: 'standard',\n    base_cost: 0,\n    cost_per_kg: 0,\n    cost_per_item: 0,\n    free_shipping_threshold: 0,\n    min_delivery_days: 3,\n    max_delivery_days: 7,\n    is_active: true,\n    is_dropshipping: false,\n    carrier: '',\n    tracking_enabled: true,\n  });\n\n  useEffect(() => {\n    loadShippingRules();\n  }, []);\n\n  const loadShippingRules = async () => {\n    setLoading(true);\n    const { data } = await supabase\n      .from('shipping_rules')\n      .select('*')\n      .order('country');\n    setShippingRules(data || []);\n    setLoading(false);\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    try {\n      if (editingRule) {\n        const { error } = await supabase\n          .from('shipping_rules')\n          .update(formData)\n          .eq('id', editingRule.id);\n        if (error) throw error;\n      } else {\n        const { error } = await supabase\n          .from('shipping_rules')\n          .insert([formData]);\n        if (error) throw error;\n      }\n      alert('Regra de envio salva com sucesso!');\n      setShowModal(false);\n      resetForm();\n      loadShippingRules();\n    } catch (error) {\n      console.error('Erro:', error);\n      alert('Erro ao salvar regra de envio');\n    }\n  };\n\n  const handleEdit = (rule: any) => {\n    setEditingRule(rule);\n    setFormData(rule);\n    setShowModal(true);\n  };\n\n  const handleDelete = async (id: string) => {\n    if (!confirm('Tem certeza que deseja excluir esta regra?')) return;\n    const { error } = await supabase.from('shipping_rules').delete().eq('id', id);\n    if (!error) {\n      alert('Regra excluda com sucesso!');\n      loadShippingRules();\n    }\n  };\n\n  const resetForm = () => {\n    setFormData({\n      name: '',\n      country: '',\n      region: '',\n      method: 'standard',\n      base_cost: 0,\n      cost_per_kg: 0,\n      cost_per_item: 0,\n      free_shipping_threshold: 0,\n      min_delivery_days: 3,\n      max_delivery_days: 7,\n      is_active: true,\n      is_dropshipping: false,\n      carrier: '',\n      tracking_enabled: true,\n    });\n    setEditingRule(null);\n  };\n\n  const countries = [\n    'Portugal', 'Frana', 'Alemanha', 'Espanha', 'Itlia', 'Luxemburgo',\n    'Blgica', 'Holanda', 'Reino Unido', 'Sua', 'ustria', 'Brasil'\n  ];\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h2 className=\"text-2xl font-bold flex items-center gap-2\">\n            <i className=\"ri-truck-line text-yellow-500\"></i>\n            Gesto de Envios & Logstica\n          </h2>\n          <p className=\"text-gray-400 mt-1\">Configure taxas de envio por pas, peso e mtodo</p>\n        </div>\n        <button\n          onClick={() => {\n            resetForm();\n            setShowModal(true);\n          }}\n          className=\"px-4 py-2 bg-gradient-to-r from-yellow-500 to-yellow-600 text-black font-medium rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap\"\n        >\n          <i className=\"ri-add-line\"></i>\n          Nova Regra de Envio\n        </button>\n      </div>\n\n      {/* Estatsticas */}\n      <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n        <div className={`${darkMode ? 'bg-gray-800' : 'bg-white'} rounded-xl p-6`}>\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <p className=\"text-gray-400 text-sm\">Total de Regras</p>\n              <p className=\"text-2xl font-bold mt-1\">{shippingRules.length}</p>\n            </div>\n            <div className=\"w-12 h-12 bg-blue-500/10 rounded-lg flex items-center justify-center\">\n              <i className=\"ri-list-check text-2xl text-blue-500\"></i>\n            </div>\n          </div>\n        </div>\n\n        <div className={`${darkMode ? 'bg-gray-800' : 'bg-white'} rounded-xl p-6`}>\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <p className=\"text-gray-400 text-sm\">Regras Ativas</p>\n              <p className=\"text-2xl font-bold mt-1\">\n                {shippingRules.filter(r => r.is_active).length}\n              </p>\n            </div>\n            <div className=\"w-12 h-12 bg-green-500/10 rounded-lg flex items-center justify-center\">\n              <i className=\"ri-checkbox-circle-line text-2xl text-green-500\"></i>\n            </div>\n          </div>\n        </div>\n\n        <div className={`${darkMode ? 'bg-gray-800' : 'bg-white'} rounded-xl p-6`}>\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <p className=\"text-gray-400 text-sm\">Pases Cobertos</p>\n              <p className=\"text-2xl font-bold mt-1\">\n                {new Set(shippingRules.map(r => r.country)).size}\n              </p>\n            </div>\n            <div className=\"w-12 h-12 bg-purple-500/10 rounded-lg flex items-center justify-center\">\n              <i className=\"ri-global-line text-2xl text-purple-500\"></i>\n            </div>\n          </div>\n        </div>\n\n        <div className={`${darkMode ? 'bg-gray-800' : 'bg-white'} rounded-xl p-6`}>\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <p className=\"text-gray-400 text-sm\">Dropshipping</p>\n              <p className=\"text-2xl font-bold mt-1\">\n                {shippingRules.filter(r => r.is_dropshipping).length}\n              </p>\n            </div>\n            <div className=\"w-12 h-12 bg-yellow-500/10 rounded-lg flex items-center justify-center\">\n              <i className=\"ri-box-3-line text-2xl text-yellow-500\"></i>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Lista de Regras */}\n      <div className={`${darkMode ? 'bg-gray-800' : 'bg-white'} rounded-xl overflow-hidden`}>\n        <div className=\"overflow-x-auto\">\n          <table className=\"w-full\">\n            <thead className={`${darkMode ? 'bg-gray-900' : 'bg-gray-50'}`}>\n              <tr>\n                <th className=\"px-6 py-4 text-left text-sm font-semibold\">Nome</th>\n                <th className=\"px-6 py-4 text-left text-sm font-semibold\">Pas/Regio</th>\n                <th className=\"px-6 py-4 text-left text-sm font-semibold\">Mtodo</th>\n                <th className=\"px-6 py-4 text-left text-sm font-semibold\">Custo Base</th>\n                <th className=\"px-6 py-4 text-left text-sm font-semibold\">Por Kg</th>\n                <th className=\"px-6 py-4 text-left text-sm font-semibold\">Prazo</th>\n                <th className=\"px-6 py-4 text-left text-sm font-semibold\">Status</th>\n                <th className=\"px-6 py-4 text-left text-sm font-semibold\">Aes</th>\n              </tr>\n            </thead>\n            <tbody className=\"divide-y divide-gray-700\">\n              {loading ? (\n                <tr>\n                  <td colSpan={8} className=\"px-6 py-12 text-center\">\n                    <div className=\"flex items-center justify-center gap-2\">\n                      <div className=\"w-5 h-5 border-2 border-yellow-500 border-t-transparent rounded-full animate-spin\"></div>\n                      Carregando...\n                    </div>\n                  </td>\n                </tr>\n              ) : shippingRules.length === 0 ? (\n                <tr>\n                  <td colSpan={8} className=\"px-6 py-12 text-center text-gray-400\">\n                    Nenhuma regra de envio cadastrada\n                  </td>\n                </tr>\n              ) : (\n                shippingRules.map((rule) => (\n                  <tr key={rule.id} className=\"hover:bg-gray-700/50 transition-colors\">\n                    <td className=\"px-6 py-4\">\n                      <div className=\"flex items-center gap-2\">\n                        <i className={`ri-${rule.is_dropshipping ? 'box-3' : 'truck'}-line text-yellow-500`}></i>\n                        <span className=\"font-medium\">{rule.name}</span>\n                      </div>\n                    </td>\n                    <td className=\"px-6 py-4\">\n                      <div>\n                        <p className=\"font-medium\">{rule.country}</p>\n                        {rule.region && <p className=\"text-sm text-gray-400\">{rule.region}</p>}\n                      </div>\n                    </td>\n                    <td className=\"px-6 py-4\">\n                      <span className=\"px-2 py-1 bg-blue-500/10 text-blue-500 rounded text-xs font-medium\">\n                        {rule.method}\n                      </span>\n                    </td>\n                    <td className=\"px-6 py-4 font-medium\">{rule.base_cost.toFixed(2)}</td>\n                    <td className=\"px-6 py-4 text-gray-400\">{rule.cost_per_kg.toFixed(2)}</td>\n                    <td className=\"px-6 py-4 text-sm text-gray-400\">\n                      {rule.min_delivery_days}-{rule.max_delivery_days} dias\n                    </td>\n                    <td className=\"px-6 py-4\">\n                      <span className={`px-2 py-1 rounded text-xs font-medium ${\n                        rule.is_active \n                          ? 'bg-green-500/10 text-green-500' \n                          : 'bg-red-500/10 text-red-500'\n                      }`}>\n                        {rule.is_active ? 'Ativo' : 'Inativo'}\n                      </span>\n                    </td>\n                    <td className=\"px-6 py-4\">\n                      <div className=\"flex items-center gap-2\">\n                        <button\n                          onClick={() => handleEdit(rule)}\n                          className=\"p-2 hover:bg-gray-700 rounded-lg transition-colors\"\n                          title=\"Editar\"\n                        >\n                          <i className=\"ri-edit-line text-blue-500\"></i>\n                        </button>\n                        <button\n                          onClick={() => handleDelete(rule.id)}\n                          className=\"p-2 hover:bg-gray-700 rounded-lg transition-colors\"\n                          title=\"Excluir\"\n                        >\n                          <i className=\"ri-delete-bin-line text-red-500\"></i>\n                        </button>\n                      </div>\n                    </td>\n                  </tr>\n                ))\n              )}\n            </tbody>\n          </table>\n        </div>\n      </div>\n\n      {/* Modal de Formulrio */}\n      {showModal && (\n        <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\">\n          <div className={`${darkMode ? 'bg-gray-900' : 'bg-white'} rounded-xl max-w-3xl w-full max-h-[90vh] overflow-y-auto`}>\n            <div className={`sticky top-0 ${darkMode ? 'bg-gray-900' : 'bg-white'} border-b ${darkMode ? 'border-gray-800' : 'border-gray-200'} p-6 flex items-center justify-between`}>\n              <h3 className=\"text-xl font-bold\">\n                {editingRule ? 'Editar Regra de Envio' : 'Nova Regra de Envio'}\n              </h3>\n              <button\n                onClick={() => {\n                  setShowModal(false);\n                  resetForm();\n                }}\n                className=\"p-2 hover:bg-gray-800 rounded-lg transition-colors\"\n              >\n                <i className=\"ri-close-line text-xl\"></i>\n              </button>\n            </div>\n\n            <form onSubmit={handleSubmit} className=\"p-6 space-y-6\">\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                <div>\n                  <label className=\"block text-sm font-medium mb-2\">Nome da Regra *</label>\n                  <input\n                    type=\"text\"\n                    required\n                    value={formData.name}\n                    onChange={(e) => setFormData({ ...formData, name: e.target.value })}\n                    placeholder=\"Ex: Envio Standard Portugal\"\n                    className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium mb-2\">Pas *</label>\n                  <select\n                    required\n                    value={formData.country}\n                    onChange={(e) => setFormData({ ...formData, country: e.target.value })}\n                    className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\n                  >\n                    <option value=\"\">Selecione...</option>\n                    {countries.map(country => (\n                      <option key={country} value={country}>{country}</option>\n                    ))}\n                  </select>\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium mb-2\">Regio (Opcional)</label>\n                  <input\n                    type=\"text\"\n                    value={formData.region}\n                    onChange={(e) => setFormData({ ...formData, region: e.target.value })}\n                    placeholder=\"Ex: Lisboa, Porto\"\n                    className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium mb-2\">Mtodo de Envio</label>\n                  <select\n                    value={formData.method}\n                    onChange={(e) => setFormData({ ...formData, method: e.target.value })}\n                    className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\n                  >\n                    <option value=\"standard\">Standard</option>\n                    <option value=\"express\">Express</option>\n                    <option value=\"priority\">Priority</option>\n                    <option value=\"economy\">Economy</option>\n                  </select>\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium mb-2\">Transportadora</label>\n                  <input\n                    type=\"text\"\n                    value={formData.carrier}\n                    onChange={(e) => setFormData({ ...formData, carrier: e.target.value })}\n                    placeholder=\"Ex: CTT, DHL, UPS\"\n                    className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium mb-2\">Custo Base ()</label>\n                  <input\n                    type=\"number\"\n                    step=\"0.01\"\n                    value={formData.base_cost}\n                    onChange={(e) => setFormData({ ...formData, base_cost: parseFloat(e.target.value) })}\n                    className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium mb-2\">Custo por Kg ()</label>\n                  <input\n                    type=\"number\"\n                    step=\"0.01\"\n                    value={formData.cost_per_kg}\n                    onChange={(e) => setFormData({ ...formData, cost_per_kg: parseFloat(e.target.value) })}\n                    className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium mb-2\">Custo por Item ()</label>\n                  <input\n                    type=\"number\"\n                    step=\"0.01\"\n                    value={formData.cost_per_item}\n                    onChange={(e) => setFormData({ ...formData, cost_per_item: parseFloat(e.target.value) })}\n                    className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium mb-2\">Envio Grtis Acima de ()</label>\n                  <input\n                    type=\"number\"\n                    step=\"0.01\"\n                    value={formData.free_shipping_threshold}\n                    onChange={(e) => setFormData({ ...formData, free_shipping_threshold: parseFloat(e.target.value) })}\n                    className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium mb-2\">Prazo Mnimo (dias)</label>\n                  <input\n                    type=\"number\"\n                    value={formData.min_delivery_days}\n                    onChange={(e) => setFormData({ ...formData, min_delivery_days: parseInt(e.target.value) })}\n                    className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium mb-2\">Prazo Mximo (dias)</label>\n                  <input\n                    type=\"number\"\n                    value={formData.max_delivery_days}\n                    onChange={(e) => setFormData({ ...formData, max_delivery_days: parseInt(e.target.value) })}\n                    className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\n                  />\n                </div>\n              </div>\n\n              <div className=\"space-y-3\">\n                <div className=\"flex items-center gap-2\">\n                  <input\n                    type=\"checkbox\"\n                    id=\"is_active\"\n                    checked={formData.is_active}\n                    onChange={(e) => setFormData({ ...formData, is_active: e.target.checked })}\n                    className=\"w-4 h-4 rounded border-gray-300\"\n                  />\n                  <label htmlFor=\"is_active\" className=\"text-sm font-medium\">Regra Ativa</label>\n                </div>\n\n                <div className=\"flex items-center gap-2\">\n                  <input\n                    type=\"checkbox\"\n                    id=\"is_dropshipping\"\n                    checked={formData.is_dropshipping}\n                    onChange={(e) => setFormData({ ...formData, is_dropshipping: e.target.checked })}\n                    className=\"w-4 h-4 rounded border-gray-300\"\n                  />\n                  <label htmlFor=\"is_dropshipping\" className=\"text-sm font-medium\">Dropshipping</label>\n                </div>\n\n                <div className=\"flex items-center gap-2\">\n                  <input\n                    type=\"checkbox\"\n                    id=\"tracking_enabled\"\n                    checked={formData.tracking_enabled}\n                    onChange={(e) => setFormData({ ...formData, tracking_enabled: e.target.checked })}\n                    className=\"w-4 h-4 rounded border-gray-300\"\n                  />\n                  <label htmlFor=\"tracking_enabled\" className=\"text-sm font-medium\">Rastreamento Habilitado</label>\n                </div>\n              </div>\n\n              <div className=\"flex items-center justify-end gap-4 pt-6 border-t border-gray-800\">\n                <button\n                  type=\"button\"\n                  onClick={() => {\n                    setShowModal(false);\n                    resetForm();\n                  }}\n                  className=\"px-6 py-2 rounded-lg border border-gray-700 hover:bg-gray-800 transition-colors whitespace-nowrap\"\n                >\n                  Cancelar\n                </button>\n                <button\n                  type=\"submit\"\n                  className=\"px-6 py-2 bg-gradient-to-r from-yellow-500 to-yellow-600 text-black font-medium rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap\"\n                >\n                  <i className=\"ri-save-line\"></i>\n                  Salvar Regra\n                </button>\n              </div>\n            </form>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n","\nimport { useState, useEffect } from 'react';\nimport { supabase } from '../../../lib/supabase';\n\ninterface TaxManagementProps {\n  darkMode: boolean;\n}\n\nexport default function TaxManagement({ darkMode }: TaxManagementProps) {\n  const [taxRules, setTaxRules] = useState<any[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [showModal, setShowModal] = useState(false);\n  const [editingRule, setEditingRule] = useState<any>(null);\n\n  const [formData, setFormData] = useState({\n    name: '',\n    country: '',\n    region: '',\n    tax_type: 'vat',\n    rate: 23,\n    is_default: false,\n    is_active: true,\n    applies_to: 'all',\n    product_categories: '',\n    min_amount: 0,\n    max_amount: 0,\n    is_compound: false,\n    priority: 1,\n  });\n\n  useEffect(() => {\n    loadTaxRules();\n  }, []);\n\n  const loadTaxRules = async () => {\n    setLoading(true);\n    const { data } = await supabase\n      .from('tax_settings')\n      .select('*')\n      .order('country');\n    setTaxRules(data || []);\n    setLoading(false);\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    try {\n      if (editingRule) {\n        const { error } = await supabase\n          .from('tax_settings')\n          .update(formData)\n          .eq('id', editingRule.id);\n        if (error) throw error;\n      } else {\n        const { error } = await supabase\n          .from('tax_settings')\n          .insert([formData]);\n        if (error) throw error;\n      }\n      alert('Regra de IVA salva com sucesso!');\n      setShowModal(false);\n      resetForm();\n      loadTaxRules();\n    } catch (error) {\n      console.error('Erro:', error);\n      alert('Erro ao salvar regra de IVA');\n    }\n  };\n\n  const handleEdit = (rule: any) => {\n    setEditingRule(rule);\n    setFormData(rule);\n    setShowModal(true);\n  };\n\n  const handleDelete = async (id: string) => {\n    if (!confirm('Tem certeza que deseja excluir esta regra?')) return;\n    const { error } = await supabase.from('tax_settings').delete().eq('id', id);\n    if (!error) {\n      alert('Regra excluda com sucesso!');\n      loadTaxRules();\n    }\n  };\n\n  const resetForm = () => {\n    setFormData({\n      name: '',\n      country: '',\n      region: '',\n      tax_type: 'vat',\n      rate: 23,\n      is_default: false,\n      is_active: true,\n      applies_to: 'all',\n      product_categories: '',\n      min_amount: 0,\n      max_amount: 0,\n      is_compound: false,\n      priority: 1,\n    });\n    setEditingRule(null);\n  };\n\n  const countries = [\n    { name: 'Portugal', defaultVat: 23 },\n    { name: 'Frana', defaultVat: 20 },\n    { name: 'Alemanha', defaultVat: 19 },\n    { name: 'Espanha', defaultVat: 21 },\n    { name: 'Itlia', defaultVat: 22 },\n    { name: 'Luxemburgo', defaultVat: 17 },\n    { name: 'Blgica', defaultVat: 21 },\n    { name: 'Holanda', defaultVat: 21 },\n    { name: 'Reino Unido', defaultVat: 20 },\n    { name: 'Sua', defaultVat: 7.7 },\n    { name: 'ustria', defaultVat: 20 },\n    { name: 'Brasil', defaultVat: 17 },\n  ];\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h2 className=\"text-2xl font-bold flex items-center gap-2\">\n            <i className=\"ri-percent-line text-yellow-500\"></i>\n            Gesto de IVA / TVA / Impostos\n          </h2>\n          <p className=\"text-gray-400 mt-1\">Configure taxas de IVA por pas e categoria</p>\n        </div>\n        <button\n          onClick={() => {\n            resetForm();\n            setShowModal(true);\n          }}\n          className=\"px-4 py-2 bg-gradient-to-r from-yellow-500 to-yellow-600 text-black font-medium rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap\"\n        >\n          <i className=\"ri-add-line\"></i>\n          Nova Regra de IVA\n        </button>\n      </div>\n\n      {/* Estatsticas */}\n      <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n        <div className={`${darkMode ? 'bg-gray-800' : 'bg-white'} rounded-xl p-6`}>\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <p className=\"text-gray-400 text-sm\">Total de Regras</p>\n              <p className=\"text-2xl font-bold mt-1\">{taxRules.length}</p>\n            </div>\n            <div className=\"w-12 h-12 bg-blue-500/10 rounded-lg flex items-center justify-center\">\n              <i className=\"ri-list-check text-2xl text-blue-500\"></i>\n            </div>\n          </div>\n        </div>\n\n        <div className={`${darkMode ? 'bg-gray-800' : 'bg-white'} rounded-xl p-6`}>\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <p className=\"text-gray-400 text-sm\">Regras Ativas</p>\n              <p className=\"text-2xl font-bold mt-1\">\n                {taxRules.filter(r => r.is_active).length}\n              </p>\n            </div>\n            <div className=\"w-12 h-12 bg-green-500/10 rounded-lg flex items-center justify-center\">\n              <i className=\"ri-checkbox-circle-line text-2xl text-green-500\"></i>\n            </div>\n          </div>\n        </div>\n\n        <div className={`${darkMode ? 'bg-gray-800' : 'bg-white'} rounded-xl p-6`}>\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <p className=\"text-gray-400 text-sm\">Pases Cobertos</p>\n              <p className=\"text-2xl font-bold mt-1\">\n                {new Set(taxRules.map(r => r.country)).size}\n              </p>\n            </div>\n            <div className=\"w-12 h-12 bg-purple-500/10 rounded-lg flex items-center justify-center\">\n              <i className=\"ri-global-line text-2xl text-purple-500\"></i>\n            </div>\n          </div>\n        </div>\n\n        <div className={`${darkMode ? 'bg-gray-800' : 'bg-white'} rounded-xl p-6`}>\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <p className=\"text-gray-400 text-sm\">Taxa Mdia</p>\n              <p className=\"text-2xl font-bold mt-1\">\n                {taxRules.length > 0 \n                  ? (taxRules.reduce((acc, r) => acc + r.rate, 0) / taxRules.length).toFixed(1)\n                  : 0}%\n              </p>\n            </div>\n            <div className=\"w-12 h-12 bg-yellow-500/10 rounded-lg flex items-center justify-center\">\n              <i className=\"ri-percent-line text-2xl text-yellow-500\"></i>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Informao IOSS */}\n      <div className={`${darkMode ? 'bg-gradient-to-r from-blue-900/20 to-purple-900/20 border-blue-500/30' : 'bg-blue-50 border-blue-200'} border rounded-xl p-6`}>\n        <div className=\"flex items-start gap-4\">\n          <div className=\"w-12 h-12 bg-blue-500/10 rounded-lg flex items-center justify-center flex-shrink-0\">\n            <i className=\"ri-information-line text-2xl text-blue-500\"></i>\n          </div>\n          <div>\n            <h3 className=\"text-lg font-semibold mb-2\">Modo IOSS Ready</h3>\n            <p className=\"text-sm text-gray-400 mb-3\">\n              O sistema est preparado para o regime IOSS (Import One-Stop Shop) da Unio Europeia. \n              Configure as taxas de IVA por pas para vendas B2C dentro da UE.\n            </p>\n            <div className=\"flex items-center gap-4 text-sm\">\n              <div className=\"flex items-center gap-2\">\n                <i className=\"ri-checkbox-circle-line text-green-500\"></i>\n                <span>Clculo automtico de IVA</span>\n              </div>\n              <div className=\"flex items-center gap-2\">\n                <i className=\"ri-checkbox-circle-line text-green-500\"></i>\n                <span>Breakdown detalhado no checkout</span>\n              </div>\n              <div className=\"flex items-center gap-2\">\n                <i className=\"ri-checkbox-circle-line text-green-500\"></i>\n                <span>Suporte a dropshipping UE/Extra-UE</span>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Lista de Regras */}\n      <div className={`${darkMode ? 'bg-gray-800' : 'bg-white'} rounded-xl overflow-hidden`}>\n        <div className=\"overflow-x-auto\">\n          <table className=\"w-full\">\n            <thead className={`${darkMode ? 'bg-gray-900' : 'bg-gray-50'}`}>\n              <tr>\n                <th className=\"px-6 py-4 text-left text-sm font-semibold\">Nome</th>\n                <th className=\"px-6 py-4 text-left text-sm font-semibold\">Pas/Regio</th>\n                <th className=\"px-6 py-4 text-left text-sm font-semibold\">Tipo</th>\n                <th className=\"px-6 py-4 text-left text-sm font-semibold\">Taxa (%)</th>\n                <th className=\"px-6 py-4 text-left text-sm font-semibold\">Aplica-se a</th>\n                <th className=\"px-6 py-4 text-left text-sm font-semibold\">Prioridade</th>\n                <th className=\"px-6 py-4 text-left text-sm font-semibold\">Status</th>\n                <th className=\"px-6 py-4 text-left text-sm font-semibold\">Aes</th>\n              </tr>\n            </thead>\n            <tbody className=\"divide-y divide-gray-700\">\n              {loading ? (\n                <tr>\n                  <td colSpan={8} className=\"px-6 py-12 text-center\">\n                    <div className=\"flex items-center justify-center gap-2\">\n                      <div className=\"w-5 h-5 border-2 border-yellow-500 border-t-transparent rounded-full animate-spin\"></div>\n                      Carregando...\n                    </div>\n                  </td>\n                </tr>\n              ) : taxRules.length === 0 ? (\n                <tr>\n                  <td colSpan={8} className=\"px-6 py-12 text-center text-gray-400\">\n                    Nenhuma regra de IVA cadastrada\n                  </td>\n                </tr>\n              ) : (\n                taxRules.map((rule) => (\n                  <tr key={rule.id} className=\"hover:bg-gray-700/50 transition-colors\">\n                    <td className=\"px-6 py-4\">\n                      <div className=\"flex items-center gap-2\">\n                        <i className=\"ri-percent-line text-yellow-500\"></i>\n                        <span className=\"font-medium\">{rule.name}</span>\n                        {rule.is_default && (\n                          <span className=\"px-2 py-0.5 bg-blue-500/10 text-blue-500 rounded text-xs font-medium\">\n                            Padro\n                          </span>\n                        )}\n                      </div>\n                    </td>\n                    <td className=\"px-6 py-4\">\n                      <div>\n                        <p className=\"font-medium\">{rule.country}</p>\n                        {rule.region && <p className=\"text-sm text-gray-400\">{rule.region}</p>}\n                      </div>\n                    </td>\n                    <td className=\"px-6 py-4\">\n                      <span className=\"px-2 py-1 bg-purple-500/10 text-purple-500 rounded text-xs font-medium uppercase\">\n                        {rule.tax_type}\n                      </span>\n                    </td>\n                    <td className=\"px-6 py-4\">\n                      <span className=\"text-lg font-bold text-yellow-500\">{rule.rate}%</span>\n                    </td>\n                    <td className=\"px-6 py-4 text-sm text-gray-400\">\n                      {rule.applies_to === 'all' ? 'Todos os produtos' : rule.applies_to}\n                    </td>\n                    <td className=\"px-6 py-4\">\n                      <span className=\"px-2 py-1 bg-gray-700 rounded text-xs font-medium\">\n                        {rule.priority}\n                      </span>\n                    </td>\n                    <td className=\"px-6 py-4\">\n                      <span className={`px-2 py-1 rounded text-xs font-medium ${\n                        rule.is_active \n                          ? 'bg-green-500/10 text-green-500' \n                          : 'bg-red-500/10 text-red-500'\n                      }`}>\n                        {rule.is_active ? 'Ativo' : 'Inativo'}\n                      </span>\n                    </td>\n                    <td className=\"px-6 py-4\">\n                      <div className=\"flex items-center gap-2\">\n                        <button\n                          onClick={() => handleEdit(rule)}\n                          className=\"p-2 hover:bg-gray-700 rounded-lg transition-colors\"\n                          title=\"Editar\"\n                        >\n                          <i className=\"ri-edit-line text-blue-500\"></i>\n                        </button>\n                        <button\n                          onClick={() => handleDelete(rule.id)}\n                          className=\"p-2 hover:bg-gray-700 rounded-lg transition-colors\"\n                          title=\"Excluir\"\n                        >\n                          <i className=\"ri-delete-bin-line text-red-500\"></i>\n                        </button>\n                      </div>\n                    </td>\n                  </tr>\n                ))\n              )}\n            </tbody>\n          </table>\n        </div>\n      </div>\n\n      {/* Modal de Formulrio */}\n      {showModal && (\n        <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\">\n          <div className={`${darkMode ? 'bg-gray-900' : 'bg-white'} rounded-xl max-w-3xl w-full max-h-[90vh] overflow-y-auto`}>\n            <div className={`sticky top-0 ${darkMode ? 'bg-gray-900' : 'bg-white'} border-b ${darkMode ? 'border-gray-800' : 'border-gray-200'} p-6 flex items-center justify-between`}>\n              <h3 className=\"text-xl font-bold\">\n                {editingRule ? 'Editar Regra de IVA' : 'Nova Regra de IVA'}\n              </h3>\n              <button\n                onClick={() => {\n                  setShowModal(false);\n                  resetForm();\n                }}\n                className=\"p-2 hover:bg-gray-800 rounded-lg transition-colors\"\n              >\n                <i className=\"ri-close-line text-xl\"></i>\n              </button>\n            </div>\n\n            <form onSubmit={handleSubmit} className=\"p-6 space-y-6\">\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                <div>\n                  <label className=\"block text-sm font-medium mb-2\">Nome da Regra *</label>\n                  <input\n                    type=\"text\"\n                    required\n                    value={formData.name}\n                    onChange={(e) => setFormData({ ...formData, name: e.target.value })}\n                    placeholder=\"Ex: IVA Portugal Standard\"\n                    className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium mb-2\">Pas *</label>\n                  <select\n                    required\n                    value={formData.country}\n                    onChange={(e) => {\n                      const country = countries.find(c => c.name === e.target.value);\n                      setFormData({ \n                        ...formData, \n                        country: e.target.value,\n                        rate: country?.defaultVat || 23\n                      });\n                    }}\n                    className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\n                  >\n                    <option value=\"\">Selecione...</option>\n                    {countries.map(country => (\n                      <option key={country.name} value={country.name}>\n                        {country.name} ({country.defaultVat}%)\n                      </option>\n                    ))}\n                  </select>\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium mb-2\">Regio (Opcional)</label>\n                  <input\n                    type=\"text\"\n                    value={formData.region}\n                    onChange={(e) => setFormData({ ...formData, region: e.target.value })}\n                    placeholder=\"Ex: Aores, Madeira\"\n                    className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium mb-2\">Tipo de Imposto</label>\n                  <select\n                    value={formData.tax_type}\n                    onChange={(e) => setFormData({ ...formData, tax_type: e.target.value })}\n                    className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\n                  >\n                    <option value=\"vat\">IVA / VAT</option>\n                    <option value=\"sales_tax\">Sales Tax</option>\n                    <option value=\"gst\">GST</option>\n                    <option value=\"custom\">Personalizado</option>\n                  </select>\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium mb-2\">Taxa (%) *</label>\n                  <input\n                    type=\"number\"\n                    step=\"0.01\"\n                    required\n                    value={formData.rate}\n                    onChange={(e) => setFormData({ ...formData, rate: parseFloat(e.target.value) })}\n                    className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium mb-2\">Prioridade</label>\n                  <input\n                    type=\"number\"\n                    value={formData.priority}\n                    onChange={(e) => setFormData({ ...formData, priority: parseInt(e.target.value) })}\n                    className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\n                  />\n                  <p className=\"text-xs text-gray-500 mt-1\">Menor nmero = maior prioridade</p>\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium mb-2\">Aplica-se a</label>\n                  <select\n                    value={formData.applies_to}\n                    onChange={(e) => setFormData({ ...formData, applies_to: e.target.value })}\n                    className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\n                  >\n                    <option value=\"all\">Todos os produtos</option>\n                    <option value=\"physical\">Apenas produtos fsicos</option>\n                    <option value=\"digital\">Apenas produtos digitais</option>\n                    <option value=\"categories\">Categorias especficas</option>\n                  </select>\n                </div>\n\n                {formData.applies_to === 'categories' && (\n                  <div>\n                    <label className=\"block text-sm font-medium mb-2\">Categorias (IDs separados por vrgula)</label>\n                    <input\n                      type=\"text\"\n                      value={formData.product_categories}\n                      onChange={(e) => setFormData({ ...formData, product_categories: e.target.value })}\n                      placeholder=\"1,2,3\"\n                      className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\n                    />\n                  </div>\n                )}\n\n                <div>\n                  <label className=\"block text-sm font-medium mb-2\">Valor Mnimo ()</label>\n                  <input\n                    type=\"number\"\n                    step=\"0.01\"\n                    value={formData.min_amount}\n                    onChange={(e) => setFormData({ ...formData, min_amount: parseFloat(e.target.value) })}\n                    className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium mb-2\">Valor Mximo ()</label>\n                  <input\n                    type=\"number\"\n                    step=\"0.01\"\n                    value={formData.max_amount}\n                    onChange={(e) => setFormData({ ...formData, max_amount: parseFloat(e.target.value) })}\n                    className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\n                  />\n                </div>\n              </div>\n\n              <div className=\"space-y-3\">\n                <div className=\"flex items-center gap-2\">\n                  <input\n                    type=\"checkbox\"\n                    id=\"is_active\"\n                    checked={formData.is_active}\n                    onChange={(e) => setFormData({ ...formData, is_active: e.target.checked })}\n                    className=\"w-4 h-4 rounded border-gray-300\"\n                  />\n                  <label htmlFor=\"is_active\" className=\"text-sm font-medium\">Regra Ativa</label>\n                </div>\n\n                <div className=\"flex items-center gap-2\">\n                  <input\n                    type=\"checkbox\"\n                    id=\"is_default\"\n                    checked={formData.is_default}\n                    onChange={(e) => setFormData({ ...formData, is_default: e.target.checked })}\n                    className=\"w-4 h-4 rounded border-gray-300\"\n                  />\n                  <label htmlFor=\"is_default\" className=\"text-sm font-medium\">Definir como padro para este pas</label>\n                </div>\n\n                <div className=\"flex items-center gap-2\">\n                  <input\n                    type=\"checkbox\"\n                    id=\"is_compound\"\n                    checked={formData.is_compound}\n                    onChange={(e) => setFormData({ ...formData, is_compound: e.target.checked })}\n                    className=\"w-4 h-4 rounded border-gray-300\"\n                  />\n                  <label htmlFor=\"is_compound\" className=\"text-sm font-medium\">Imposto composto (aplica sobre outros impostos)</label>\n                </div>\n              </div>\n\n              <div className=\"flex items-center justify-end gap-4 pt-6 border-t border-gray-800\">\n                <button\n                  type=\"button\"\n                  onClick={() => {\n                    setShowModal(false);\n                    resetForm();\n                  }}\n                  className=\"px-6 py-2 rounded-lg border border-gray-700 hover:bg-gray-800 transition-colors whitespace-nowrap\"\n                >\n                  Cancelar\n                </button>\n                <button\n                  type=\"submit\"\n                  className=\"px-6 py-2 bg-gradient-to-r from-yellow-500 to-yellow-600 text-black font-medium rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap\"\n                >\n                  <i className=\"ri-save-line\"></i>\n                  Salvar Regra\n                </button>\n              </div>\n            </form>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n","\nimport { useState, useEffect } from 'react';\nimport { supabase } from '../../../lib/supabase';\n\ninterface MarketplaceManagementProps {\n  darkMode: boolean;\n}\n\nexport default function MarketplaceManagement({ darkMode }: MarketplaceManagementProps) {\n  const [vendors, setVendors] = useState<any[]>([]);\n  const [commissionRules, setCommissionRules] = useState<any[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [activeTab, setActiveTab] = useState('vendors');\n  const [showModal, setShowModal] = useState(false);\n  const [editingRule, setEditingRule] = useState<any>(null);\n\n  const [formData, setFormData] = useState({\n    name: '',\n    commission_type: 'percentage',\n    commission_value: 15,\n    applies_to: 'all',\n    category_ids: '',\n    vendor_ids: '',\n    min_order_value: 0,\n    max_order_value: 0,\n    is_active: true,\n    priority: 1,\n  });\n\n  useEffect(() => {\n    loadData();\n  }, []);\n\n  const loadData = async () => {\n    setLoading(true);\n    \n    // Carregar vendedores\n    const { data: vendorsData } = await supabase\n      .from('vendors')\n      .select('*')\n      .order('created_at', { ascending: false });\n    setVendors(vendorsData || []);\n\n    // Carregar regras de comisso\n    const { data: rulesData } = await supabase\n      .from('commission_rules')\n      .select('*')\n      .order('priority');\n    setCommissionRules(rulesData || []);\n\n    setLoading(false);\n  };\n\n  const handleSubmitRule = async (e: React.FormEvent) => {\n    e.preventDefault();\n    try {\n      if (editingRule) {\n        const { error } = await supabase\n          .from('commission_rules')\n          .update(formData)\n          .eq('id', editingRule.id);\n        if (error) throw error;\n      } else {\n        const { error } = await supabase\n          .from('commission_rules')\n          .insert([formData]);\n        if (error) throw error;\n      }\n      alert('Regra de comisso salva com sucesso!');\n      setShowModal(false);\n      resetForm();\n      loadData();\n    } catch (error) {\n      console.error('Erro:', error);\n      alert('Erro ao salvar regra de comisso');\n    }\n  };\n\n  const handleApproveVendor = async (vendorId: string) => {\n    const { error } = await supabase\n      .from('vendors')\n      .update({ status: 'approved', approved_at: new Date().toISOString() })\n      .eq('id', vendorId);\n    \n    if (!error) {\n      alert('Vendedor aprovado com sucesso!');\n      loadData();\n    }\n  };\n\n  const handleRejectVendor = async (vendorId: string) => {\n    const { error } = await supabase\n      .from('vendors')\n      .update({ status: 'rejected' })\n      .eq('id', vendorId);\n    \n    if (!error) {\n      alert('Vendedor rejeitado!');\n      loadData();\n    }\n  };\n\n  const handleSuspendVendor = async (vendorId: string) => {\n    const { error } = await supabase\n      .from('vendors')\n      .update({ status: 'suspended' })\n      .eq('id', vendorId);\n    \n    if (!error) {\n      alert('Vendedor suspenso!');\n      loadData();\n    }\n  };\n\n  const resetForm = () => {\n    setFormData({\n      name: '',\n      commission_type: 'percentage',\n      commission_value: 15,\n      applies_to: 'all',\n      category_ids: '',\n      vendor_ids: '',\n      min_order_value: 0,\n      max_order_value: 0,\n      is_active: true,\n      priority: 1,\n    });\n    setEditingRule(null);\n  };\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case 'approved': return 'bg-green-500/10 text-green-500';\n      case 'pending': return 'bg-yellow-500/10 text-yellow-500';\n      case 'rejected': return 'bg-red-500/10 text-red-500';\n      case 'suspended': return 'bg-orange-500/10 text-orange-500';\n      default: return 'bg-gray-500/10 text-gray-500';\n    }\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h2 className=\"text-2xl font-bold flex items-center gap-2\">\n            <i className=\"ri-store-3-line text-yellow-500\"></i>\n            Gesto de Marketplace\n          </h2>\n          <p className=\"text-gray-400 mt-1\">Gerencie vendedores e comisses do marketplace</p>\n        </div>\n        {activeTab === 'commissions' && (\n          <button\n            onClick={() => {\n              resetForm();\n              setShowModal(true);\n            }}\n            className=\"px-4 py-2 bg-gradient-to-r from-yellow-500 to-yellow-600 text-black font-medium rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap\"\n          >\n            <i className=\"ri-add-line\"></i>\n            Nova Regra de Comisso\n          </button>\n        )}\n      </div>\n\n      {/* Estatsticas */}\n      <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n        <div className={`${darkMode ? 'bg-gray-800' : 'bg-white'} rounded-xl p-6`}>\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <p className=\"text-gray-400 text-sm\">Total de Vendedores</p>\n              <p className=\"text-2xl font-bold mt-1\">{vendors.length}</p>\n            </div>\n            <div className=\"w-12 h-12 bg-blue-500/10 rounded-lg flex items-center justify-center\">\n              <i className=\"ri-store-3-line text-2xl text-blue-500\"></i>\n            </div>\n          </div>\n        </div>\n\n        <div className={`${darkMode ? 'bg-gray-800' : 'bg-white'} rounded-xl p-6`}>\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <p className=\"text-gray-400 text-sm\">Aprovados</p>\n              <p className=\"text-2xl font-bold mt-1\">\n                {vendors.filter(v => v.status === 'approved').length}\n              </p>\n            </div>\n            <div className=\"w-12 h-12 bg-green-500/10 rounded-lg flex items-center justify-center\">\n              <i className=\"ri-checkbox-circle-line text-2xl text-green-500\"></i>\n            </div>\n          </div>\n        </div>\n\n        <div className={`${darkMode ? 'bg-gray-800' : 'bg-white'} rounded-xl p-6`}>\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <p className=\"text-gray-400 text-sm\">Pendentes</p>\n              <p className=\"text-2xl font-bold mt-1\">\n                {vendors.filter(v => v.status === 'pending').length}\n              </p>\n            </div>\n            <div className=\"w-12 h-12 bg-yellow-500/10 rounded-lg flex items-center justify-center\">\n              <i className=\"ri-time-line text-2xl text-yellow-500\"></i>\n            </div>\n          </div>\n        </div>\n\n        <div className={`${darkMode ? 'bg-gray-800' : 'bg-white'} rounded-xl p-6`}>\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <p className=\"text-gray-400 text-sm\">Regras de Comisso</p>\n              <p className=\"text-2xl font-bold mt-1\">{commissionRules.length}</p>\n            </div>\n            <div className=\"w-12 h-12 bg-purple-500/10 rounded-lg flex items-center justify-center\">\n              <i className=\"ri-percent-line text-2xl text-purple-500\"></i>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Tabs */}\n      <div className={`${darkMode ? 'bg-gray-800' : 'bg-white'} rounded-xl p-2 flex gap-2`}>\n        <button\n          onClick={() => setActiveTab('vendors')}\n          className={`flex-1 px-4 py-2 rounded-lg font-medium transition-colors whitespace-nowrap ${\n            activeTab === 'vendors'\n              ? 'bg-gradient-to-r from-yellow-500 to-yellow-600 text-black'\n              : 'hover:bg-gray-700'\n          }`}\n        >\n          <i className=\"ri-store-3-line mr-2\"></i>\n          Vendedores\n        </button>\n        <button\n          onClick={() => setActiveTab('commissions')}\n          className={`flex-1 px-4 py-2 rounded-lg font-medium transition-colors whitespace-nowrap ${\n            activeTab === 'commissions'\n              ? 'bg-gradient-to-r from-yellow-500 to-yellow-600 text-black'\n              : 'hover:bg-gray-700'\n          }`}\n        >\n          <i className=\"ri-percent-line mr-2\"></i>\n          Comisses\n        </button>\n      </div>\n\n      {/* Contedo das Tabs */}\n      {activeTab === 'vendors' && (\n        <div className={`${darkMode ? 'bg-gray-800' : 'bg-white'} rounded-xl overflow-hidden`}>\n          <div className=\"overflow-x-auto\">\n            <table className=\"w-full\">\n              <thead className={`${darkMode ? 'bg-gray-900' : 'bg-gray-50'}`}>\n                <tr>\n                  <th className=\"px-6 py-4 text-left text-sm font-semibold\">Vendedor</th>\n                  <th className=\"px-6 py-4 text-left text-sm font-semibold\">Email</th>\n                  <th className=\"px-6 py-4 text-left text-sm font-semibold\">Produtos</th>\n                  <th className=\"px-6 py-4 text-left text-sm font-semibold\">Vendas</th>\n                  <th className=\"px-6 py-4 text-left text-sm font-semibold\">Comisso</th>\n                  <th className=\"px-6 py-4 text-left text-sm font-semibold\">Status</th>\n                  <th className=\"px-6 py-4 text-left text-sm font-semibold\">Aes</th>\n                </tr>\n              </thead>\n              <tbody className=\"divide-y divide-gray-700\">\n                {loading ? (\n                  <tr>\n                    <td colSpan={7} className=\"px-6 py-12 text-center\">\n                      <div className=\"flex items-center justify-center gap-2\">\n                        <div className=\"w-5 h-5 border-2 border-yellow-500 border-t-transparent rounded-full animate-spin\"></div>\n                        Carregando...\n                      </div>\n                    </td>\n                  </tr>\n                ) : vendors.length === 0 ? (\n                  <tr>\n                    <td colSpan={7} className=\"px-6 py-12 text-center text-gray-400\">\n                      Nenhum vendedor cadastrado\n                    </td>\n                  </tr>\n                ) : (\n                  vendors.map((vendor) => (\n                    <tr key={vendor.id} className=\"hover:bg-gray-700/50 transition-colors\">\n                      <td className=\"px-6 py-4\">\n                        <div className=\"flex items-center gap-3\">\n                          <div className=\"w-10 h-10 bg-gradient-to-br from-yellow-500 to-yellow-600 rounded-full flex items-center justify-center text-black font-bold\">\n                            {vendor.store_name?.charAt(0) || 'V'}\n                          </div>\n                          <div>\n                            <p className=\"font-medium\">{vendor.store_name}</p>\n                            <p className=\"text-sm text-gray-400\">{vendor.company_name}</p>\n                          </div>\n                        </div>\n                      </td>\n                      <td className=\"px-6 py-4 text-gray-400\">{vendor.email}</td>\n                      <td className=\"px-6 py-4 font-medium\">{vendor.total_products || 0}</td>\n                      <td className=\"px-6 py-4 font-medium\">{vendor.total_sales?.toFixed(2) || '0.00'}</td>\n                      <td className=\"px-6 py-4 text-yellow-500 font-medium\">{vendor.commission_rate || 15}%</td>\n                      <td className=\"px-6 py-4\">\n                        <span className={`px-2 py-1 rounded text-xs font-medium ${getStatusColor(vendor.status)}`}>\n                          {vendor.status === 'approved' && 'Aprovado'}\n                          {vendor.status === 'pending' && 'Pendente'}\n                          {vendor.status === 'rejected' && 'Rejeitado'}\n                          {vendor.status === 'suspended' && 'Suspenso'}\n                        </span>\n                      </td>\n                      <td className=\"px-6 py-4\">\n                        <div className=\"flex items-center gap-2\">\n                          {vendor.status === 'pending' && (\n                            <>\n                              <button\n                                onClick={() => handleApproveVendor(vendor.id)}\n                                className=\"p-2 hover:bg-gray-700 rounded-lg transition-colors\"\n                                title=\"Aprovar\"\n                              >\n                                <i className=\"ri-checkbox-circle-line text-green-500\"></i>\n                              </button>\n                              <button\n                                onClick={() => handleRejectVendor(vendor.id)}\n                                className=\"p-2 hover:bg-gray-700 rounded-lg transition-colors\"\n                                title=\"Rejeitar\"\n                              >\n                                <i className=\"ri-close-circle-line text-red-500\"></i>\n                              </button>\n                            </>\n                          )}\n                          {vendor.status === 'approved' && (\n                            <button\n                              onClick={() => handleSuspendVendor(vendor.id)}\n                              className=\"p-2 hover:bg-gray-700 rounded-lg transition-colors\"\n                              title=\"Suspender\"\n                            >\n                              <i className=\"ri-forbid-line text-orange-500\"></i>\n                            </button>\n                          )}\n                          <button\n                            className=\"p-2 hover:bg-gray-700 rounded-lg transition-colors\"\n                            title=\"Ver Detalhes\"\n                          >\n                            <i className=\"ri-eye-line text-blue-500\"></i>\n                          </button>\n                        </div>\n                      </td>\n                    </tr>\n                  ))\n                )}\n              </tbody>\n            </table>\n          </div>\n        </div>\n      )}\n\n      {activeTab === 'commissions' && (\n        <div className={`${darkMode ? 'bg-gray-800' : 'bg-white'} rounded-xl overflow-hidden`}>\n          <div className=\"overflow-x-auto\">\n            <table className=\"w-full\">\n              <thead className={`${darkMode ? 'bg-gray-900' : 'bg-gray-50'}`}>\n                <tr>\n                  <th className=\"px-6 py-4 text-left text-sm font-semibold\">Nome</th>\n                  <th className=\"px-6 py-4 text-left text-sm font-semibold\">Tipo</th>\n                  <th className=\"px-6 py-4 text-left text-sm font-semibold\">Valor</th>\n                  <th className=\"px-6 py-4 text-left text-sm font-semibold\">Aplica-se a</th>\n                  <th className=\"px-6 py-4 text-left text-sm font-semibold\">Prioridade</th>\n                  <th className=\"px-6 py-4 text-left text-sm font-semibold\">Status</th>\n                  <th className=\"px-6 py-4 text-left text-sm font-semibold\">Aes</th>\n                </tr>\n              </thead>\n              <tbody className=\"divide-y divide-gray-700\">\n                {loading ? (\n                  <tr>\n                    <td colSpan={7} className=\"px-6 py-12 text-center\">\n                      <div className=\"flex items-center justify-center gap-2\">\n                        <div className=\"w-5 h-5 border-2 border-yellow-500 border-t-transparent rounded-full animate-spin\"></div>\n                        Carregando...\n                      </div>\n                    </td>\n                  </tr>\n                ) : commissionRules.length === 0 ? (\n                  <tr>\n                    <td colSpan={7} className=\"px-6 py-12 text-center text-gray-400\">\n                      Nenhuma regra de comisso cadastrada\n                    </td>\n                  </tr>\n                ) : (\n                  commissionRules.map((rule) => (\n                    <tr key={rule.id} className=\"hover:bg-gray-700/50 transition-colors\">\n                      <td className=\"px-6 py-4\">\n                        <div className=\"flex items-center gap-2\">\n                          <i className=\"ri-percent-line text-yellow-500\"></i>\n                          <span className=\"font-medium\">{rule.name}</span>\n                        </div>\n                      </td>\n                      <td className=\"px-6 py-4\">\n                        <span className=\"px-2 py-1 bg-purple-500/10 text-purple-500 rounded text-xs font-medium\">\n                          {rule.commission_type === 'percentage' ? 'Percentual' : 'Fixo'}\n                        </span>\n                      </td>\n                      <td className=\"px-6 py-4\">\n                        <span className=\"text-lg font-bold text-yellow-500\">\n                          {rule.commission_type === 'percentage' ? `${rule.commission_value}%` : `${rule.commission_value}`}\n                        </span>\n                      </td>\n                      <td className=\"px-6 py-4 text-sm text-gray-400\">\n                        {rule.applies_to === 'all' ? 'Todos' : rule.applies_to}\n                      </td>\n                      <td className=\"px-6 py-4\">\n                        <span className=\"px-2 py-1 bg-gray-700 rounded text-xs font-medium\">\n                          {rule.priority}\n                        </span>\n                      </td>\n                      <td className=\"px-6 py-4\">\n                        <span className={`px-2 py-1 rounded text-xs font-medium ${\n                          rule.is_active \n                            ? 'bg-green-500/10 text-green-500' \n                            : 'bg-red-500/10 text-red-500'\n                        }`}>\n                          {rule.is_active ? 'Ativo' : 'Inativo'}\n                        </span>\n                      </td>\n                      <td className=\"px-6 py-4\">\n                        <div className=\"flex items-center gap-2\">\n                          <button\n                            onClick={() => {\n                              setEditingRule(rule);\n                              setFormData(rule);\n                              setShowModal(true);\n                            }}\n                            className=\"p-2 hover:bg-gray-700 rounded-lg transition-colors\"\n                            title=\"Editar\"\n                          >\n                            <i className=\"ri-edit-line text-blue-500\"></i>\n                          </button>\n                          <button\n                            onClick={async () => {\n                              if (!confirm('Tem certeza que deseja excluir esta regra?')) return;\n                              const { error } = await supabase.from('commission_rules').delete().eq('id', rule.id);\n                              if (!error) {\n                                alert('Regra excluda com sucesso!');\n                                loadData();\n                              }\n                            }}\n                            className=\"p-2 hover:bg-gray-700 rounded-lg transition-colors\"\n                            title=\"Excluir\"\n                          >\n                            <i className=\"ri-delete-bin-line text-red-500\"></i>\n                          </button>\n                        </div>\n                      </td>\n                    </tr>\n                  ))\n                )}\n              </tbody>\n            </table>\n          </div>\n        </div>\n      )}\n\n      {/* Modal de Formulrio de Comisso */}\n      {showModal && (\n        <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\">\n          <div className={`${darkMode ? 'bg-gray-900' : 'bg-white'} rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto`}>\n            <div className={`sticky top-0 ${darkMode ? 'bg-gray-900' : 'bg-white'} border-b ${darkMode ? 'border-gray-800' : 'border-gray-200'} p-6 flex items-center justify-between`}>\n              <h3 className=\"text-xl font-bold\">\n                {editingRule ? 'Editar Regra de Comisso' : 'Nova Regra de Comisso'}\n              </h3>\n              <button\n                onClick={() => {\n                  setShowModal(false);\n                  resetForm();\n                }}\n                className=\"p-2 hover:bg-gray-800 rounded-lg transition-colors\"\n              >\n                <i className=\"ri-close-line text-xl\"></i>\n              </button>\n            </div>\n\n            <form onSubmit={handleSubmitRule} className=\"p-6 space-y-6\">\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                <div className=\"md:col-span-2\">\n                  <label className=\"block text-sm font-medium mb-2\">Nome da Regra *</label>\n                  <input\n                    type=\"text\"\n                    required\n                    value={formData.name}\n                    onChange={(e) => setFormData({ ...formData, name: e.target.value })}\n                    placeholder=\"Ex: Comisso Padro\"\n                    className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium mb-2\">Tipo de Comisso</label>\n                  <select\n                    value={formData.commission_type}\n                    onChange={(e) => setFormData({ ...formData, commission_type: e.target.value })}\n                    className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\n                  >\n                    <option value=\"percentage\">Percentual (%)</option>\n                    <option value=\"fixed\">Valor Fixo ()</option>\n                  </select>\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium mb-2\">\n                    Valor {formData.commission_type === 'percentage' ? '(%)' : '()'} *\n                  </label>\n                  <input\n                    type=\"number\"\n                    step=\"0.01\"\n                    required\n                    value={formData.commission_value}\n                    onChange={(e) => setFormData({ ...formData, commission_value: parseFloat(e.target.value) })}\n                    className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium mb-2\">Aplica-se a</label>\n                  <select\n                    value={formData.applies_to}\n                    onChange={(e) => setFormData({ ...formData, applies_to: e.target.value })}\n                    className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\n                  >\n                    <option value=\"all\">Todos os vendedores</option>\n                    <option value=\"categories\">Categorias especficas</option>\n                    <option value=\"vendors\">Vendedores especficos</option>\n                  </select>\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium mb-2\">Prioridade</label>\n                  <input\n                    type=\"number\"\n                    value={formData.priority}\n                    onChange={(e) => setFormData({ ...formData, priority: parseInt(e.target.value) })}\n                    className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium mb-2\">Valor Mnimo do Pedido ()</label>\n                  <input\n                    type=\"number\"\n                    step=\"0.01\"\n                    value={formData.min_order_value}\n                    onChange={(e) => setFormData({ ...formData, min_order_value: parseFloat(e.target.value) })}\n                    className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium mb-2\">Valor Mximo do Pedido ()</label>\n                  <input\n                    type=\"number\"\n                    step=\"0.01\"\n                    value={formData.max_order_value}\n                    onChange={(e) => setFormData({ ...formData, max_order_value: parseFloat(e.target.value) })}\n                    className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\n                  />\n                </div>\n              </div>\n\n              <div className=\"flex items-center gap-2\">\n                <input\n                  type=\"checkbox\"\n                  id=\"is_active\"\n                  checked={formData.is_active}\n                  onChange={(e) => setFormData({ ...formData, is_active: e.target.checked })}\n                  className=\"w-4 h-4 rounded border-gray-300\"\n                />\n                <label htmlFor=\"is_active\" className=\"text-sm font-medium\">Regra Ativa</label>\n              </div>\n\n              <div className=\"flex items-center justify-end gap-4 pt-6 border-t border-gray-800\">\n                <button\n                  type=\"button\"\n                  onClick={() => {\n                    setShowModal(false);\n                    resetForm();\n                  }}\n                  className=\"px-6 py-2 rounded-lg border border-gray-700 hover:bg-gray-800 transition-colors whitespace-nowrap\"\n                >\n                  Cancelar\n                </button>\n                <button\n                  type=\"submit\"\n                  className=\"px-6 py-2 bg-gradient-to-r from-yellow-500 to-yellow-600 text-black font-medium rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap\"\n                >\n                  <i className=\"ri-save-line\"></i>\n                  Salvar Regra\n                </button>\n              </div>\n            </form>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n","\nimport { useState, useEffect } from 'react';\nimport { supabase } from '../../../lib/supabase';\n\ninterface ThemeEditorProps {\n  darkMode: boolean;\n}\n\nexport default function ThemeEditor({ darkMode }: ThemeEditorProps) {\n  const [settings, setSettings] = useState({\n    site_name: 'JokaTech',\n    site_tagline: 'Sua loja de tecnologia',\n    primary_color: '#EAB308',\n    secondary_color: '#000000',\n    accent_color: '#F59E0B',\n    success_color: '#10B981',\n    warning_color: '#F59E0B',\n    error_color: '#EF4444',\n    font_family: 'Inter',\n    font_size_base: '16',\n    logo_url: '',\n    logo_footer_url: '',\n    logo_mobile_url: '',\n    favicon_url: '',\n    header_style: 'fixed',\n    header_bg_color: '#000000',\n    footer_bg_color: '#1F2937',\n    enable_dark_mode: true,\n    default_theme: 'dark',\n  });\n\n  const [loading, setLoading] = useState(false);\n  const [previewMode, setPreviewMode] = useState(false);\n\n  useEffect(() => {\n    loadSettings();\n  }, []);\n\n  const loadSettings = async () => {\n    const { data } = await supabase\n      .from('site_settings')\n      .select('*')\n      .single();\n    \n    if (data) {\n      setSettings(prev => ({ ...prev, ...data.settings }));\n    }\n  };\n\n  const handleSave = async () => {\n    setLoading(true);\n    try {\n      const { error } = await supabase\n        .from('site_settings')\n        .upsert({\n          id: 1,\n          settings,\n          updated_at: new Date().toISOString(),\n        });\n\n      if (error) throw error;\n      alert('Configuraes salvas com sucesso!');\n    } catch (error) {\n      console.error('Erro ao salvar:', error);\n      alert('Erro ao salvar configuraes');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const googleFonts = [\n    'Inter', 'Roboto', 'Open Sans', 'Lato', 'Montserrat', 'Poppins', \n    'Raleway', 'Nunito', 'Playfair Display', 'Merriweather'\n  ];\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h2 className=\"text-2xl font-bold flex items-center gap-2\">\n            <i className=\"ri-palette-line text-yellow-500\"></i>\n            Editor de Tema & Design\n          </h2>\n          <p className=\"text-gray-400 mt-1\">Configure a aparncia visual do seu site</p>\n        </div>\n        <div className=\"flex items-center gap-3\">\n          <button\n            onClick={() => setPreviewMode(!previewMode)}\n            className={`px-4 py-2 rounded-lg border ${darkMode ? 'border-gray-700' : 'border-gray-300'} hover:bg-gray-800 transition-colors flex items-center gap-2 whitespace-nowrap`}\n          >\n            <i className={`ri-${previewMode ? 'eye-off' : 'eye'}-line`}></i>\n            {previewMode ? 'Ocultar Preview' : 'Mostrar Preview'}\n          </button>\n          <button\n            onClick={handleSave}\n            disabled={loading}\n            className=\"px-6 py-2 bg-gradient-to-r from-yellow-500 to-yellow-600 text-black font-medium rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap\"\n          >\n            {loading ? (\n              <>\n                <div className=\"w-4 h-4 border-2 border-black border-t-transparent rounded-full animate-spin\"></div>\n                Salvando...\n              </>\n            ) : (\n              <>\n                <i className=\"ri-save-line\"></i>\n                Salvar Alteraes\n              </>\n            )}\n          </button>\n        </div>\n      </div>\n\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n        {/* Informaes Bsicas */}\n        <div className={`${darkMode ? 'bg-gray-800' : 'bg-white'} rounded-xl p-6 space-y-4`}>\n          <h3 className=\"text-lg font-semibold flex items-center gap-2\">\n            <i className=\"ri-information-line text-yellow-500\"></i>\n            Informaes do Site\n          </h3>\n\n          <div>\n            <label className=\"block text-sm font-medium mb-2\">Nome do Site</label>\n            <input\n              type=\"text\"\n              value={settings.site_name}\n              onChange={(e) => setSettings({ ...settings, site_name: e.target.value })}\n              className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-900 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\n            />\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium mb-2\">Slogan/Tagline</label>\n            <input\n              type=\"text\"\n              value={settings.site_tagline}\n              onChange={(e) => setSettings({ ...settings, site_tagline: e.target.value })}\n              className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-900 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\n            />\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium mb-2\">Fonte Principal</label>\n            <select\n              value={settings.font_family}\n              onChange={(e) => setSettings({ ...settings, font_family: e.target.value })}\n              className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-900 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\n            >\n              {googleFonts.map(font => (\n                <option key={font} value={font}>{font}</option>\n              ))}\n            </select>\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium mb-2\">Tamanho Base da Fonte (px)</label>\n            <input\n              type=\"number\"\n              value={settings.font_size_base}\n              onChange={(e) => setSettings({ ...settings, font_size_base: e.target.value })}\n              className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-900 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\n            />\n          </div>\n        </div>\n\n        {/* Cores do Tema */}\n        <div className={`${darkMode ? 'bg-gray-800' : 'bg-white'} rounded-xl p-6 space-y-4`}>\n          <h3 className=\"text-lg font-semibold flex items-center gap-2\">\n            <i className=\"ri-paint-brush-line text-yellow-500\"></i>\n            Paleta de Cores\n          </h3>\n\n          <div className=\"grid grid-cols-2 gap-4\">\n            <div>\n              <label className=\"block text-sm font-medium mb-2\">Cor Primria</label>\n              <div className=\"flex items-center gap-2\">\n                <input\n                  type=\"color\"\n                  value={settings.primary_color}\n                  onChange={(e) => setSettings({ ...settings, primary_color: e.target.value })}\n                  className=\"w-12 h-10 rounded cursor-pointer\"\n                />\n                <input\n                  type=\"text\"\n                  value={settings.primary_color}\n                  onChange={(e) => setSettings({ ...settings, primary_color: e.target.value })}\n                  className={`flex-1 px-3 py-2 rounded-lg ${darkMode ? 'bg-gray-900 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\n                />\n              </div>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium mb-2\">Cor Secundria</label>\n              <div className=\"flex items-center gap-2\">\n                <input\n                  type=\"color\"\n                  value={settings.secondary_color}\n                  onChange={(e) => setSettings({ ...settings, secondary_color: e.target.value })}\n                  className=\"w-12 h-10 rounded cursor-pointer\"\n                />\n                <input\n                  type=\"text\"\n                  value={settings.secondary_color}\n                  onChange={(e) => setSettings({ ...settings, secondary_color: e.target.value })}\n                  className={`flex-1 px-3 py-2 rounded-lg ${darkMode ? 'bg-gray-900 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\n                />\n              </div>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium mb-2\">Cor de Destaque</label>\n              <div className=\"flex items-center gap-2\">\n                <input\n                  type=\"color\"\n                  value={settings.accent_color}\n                  onChange={(e) => setSettings({ ...settings, accent_color: e.target.value })}\n                  className=\"w-12 h-10 rounded cursor-pointer\"\n                />\n                <input\n                  type=\"text\"\n                  value={settings.accent_color}\n                  onChange={(e) => setSettings({ ...settings, accent_color: e.target.value })}\n                  className={`flex-1 px-3 py-2 rounded-lg ${darkMode ? 'bg-gray-900 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\n                />\n              </div>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium mb-2\">Cor de Sucesso</label>\n              <div className=\"flex items-center gap-2\">\n                <input\n                  type=\"color\"\n                  value={settings.success_color}\n                  onChange={(e) => setSettings({ ...settings, success_color: e.target.value })}\n                  className=\"w-12 h-10 rounded cursor-pointer\"\n                />\n                <input\n                  type=\"text\"\n                  value={settings.success_color}\n                  onChange={(e) => setSettings({ ...settings, success_color: e.target.value })}\n                  className={`flex-1 px-3 py-2 rounded-lg ${darkMode ? 'bg-gray-900 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\n                />\n              </div>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium mb-2\">Cor de Aviso</label>\n              <div className=\"flex items-center gap-2\">\n                <input\n                  type=\"color\"\n                  value={settings.warning_color}\n                  onChange={(e) => setSettings({ ...settings, warning_color: e.target.value })}\n                  className=\"w-12 h-10 rounded cursor-pointer\"\n                />\n                <input\n                  type=\"text\"\n                  value={settings.warning_color}\n                  onChange={(e) => setSettings({ ...settings, warning_color: e.target.value })}\n                  className={`flex-1 px-3 py-2 rounded-lg ${darkMode ? 'bg-gray-900 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\n                />\n              </div>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium mb-2\">Cor de Erro</label>\n              <div className=\"flex items-center gap-2\">\n                <input\n                  type=\"color\"\n                  value={settings.error_color}\n                  onChange={(e) => setSettings({ ...settings, error_color: e.target.value })}\n                  className=\"w-12 h-10 rounded cursor-pointer\"\n                />\n                <input\n                  type=\"text\"\n                  value={settings.error_color}\n                  onChange={(e) => setSettings({ ...settings, error_color: e.target.value })}\n                  className={`flex-1 px-3 py-2 rounded-lg ${darkMode ? 'bg-gray-900 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\n                />\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Logos */}\n        <div className={`${darkMode ? 'bg-gray-800' : 'bg-white'} rounded-xl p-6 space-y-4`}>\n          <h3 className=\"text-lg font-semibold flex items-center gap-2\">\n            <i className=\"ri-image-line text-yellow-500\"></i>\n            Logos & cones\n          </h3>\n\n          <div>\n            <label className=\"block text-sm font-medium mb-2\">Logo Principal (URL)</label>\n            <input\n              type=\"text\"\n              value={settings.logo_url}\n              onChange={(e) => setSettings({ ...settings, logo_url: e.target.value })}\n              placeholder=\"https://exemplo.com/logo.png\"\n              className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-900 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\n            />\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium mb-2\">Logo Footer (URL)</label>\n            <input\n              type=\"text\"\n              value={settings.logo_footer_url}\n              onChange={(e) => setSettings({ ...settings, logo_footer_url: e.target.value })}\n              placeholder=\"https://exemplo.com/logo-footer.png\"\n              className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-900 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\n            />\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium mb-2\">Logo Mobile (URL)</label>\n            <input\n              type=\"text\"\n              value={settings.logo_mobile_url}\n              onChange={(e) => setSettings({ ...settings, logo_mobile_url: e.target.value })}\n              placeholder=\"https://exemplo.com/logo-mobile.png\"\n              className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-900 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\n            />\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium mb-2\">Favicon (URL)</label>\n            <input\n              type=\"text\"\n              value={settings.favicon_url}\n              onChange={(e) => setSettings({ ...settings, favicon_url: e.target.value })}\n              placeholder=\"https://exemplo.com/favicon.ico\"\n              className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-900 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\n            />\n          </div>\n        </div>\n\n        {/* Header & Footer */}\n        <div className={`${darkMode ? 'bg-gray-800' : 'bg-white'} rounded-xl p-6 space-y-4`}>\n          <h3 className=\"text-lg font-semibold flex items-center gap-2\">\n            <i className=\"ri-layout-line text-yellow-500\"></i>\n            Header & Footer\n          </h3>\n\n          <div>\n            <label className=\"block text-sm font-medium mb-2\">Estilo do Header</label>\n            <select\n              value={settings.header_style}\n              onChange={(e) => setSettings({ ...settings, header_style: e.target.value })}\n              className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-900 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\n            >\n              <option value=\"fixed\">Fixo no Topo</option>\n              <option value=\"sticky\">Sticky (Cola ao Scroll)</option>\n              <option value=\"static\">Esttico</option>\n            </select>\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium mb-2\">Cor de Fundo do Header</label>\n            <div className=\"flex items-center gap-2\">\n              <input\n                type=\"color\"\n                value={settings.header_bg_color}\n                onChange={(e) => setSettings({ ...settings, header_bg_color: e.target.value })}\n                className=\"w-12 h-10 rounded cursor-pointer\"\n              />\n              <input\n                type=\"text\"\n                value={settings.header_bg_color}\n                onChange={(e) => setSettings({ ...settings, header_bg_color: e.target.value })}\n                className={`flex-1 px-3 py-2 rounded-lg ${darkMode ? 'bg-gray-900 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\n              />\n            </div>\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium mb-2\">Cor de Fundo do Footer</label>\n            <div className=\"flex items-center gap-2\">\n              <input\n                type=\"color\"\n                value={settings.footer_bg_color}\n                onChange={(e) => setSettings({ ...settings, footer_bg_color: e.target.value })}\n                className=\"w-12 h-10 rounded cursor-pointer\"\n              />\n              <input\n                type=\"text\"\n                value={settings.footer_bg_color}\n                onChange={(e) => setSettings({ ...settings, footer_bg_color: e.target.value })}\n                className={`flex-1 px-3 py-2 rounded-lg ${darkMode ? 'bg-gray-900 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\n              />\n            </div>\n          </div>\n\n          <div className=\"space-y-3 pt-4\">\n            <div className=\"flex items-center gap-2\">\n              <input\n                type=\"checkbox\"\n                id=\"enable_dark_mode\"\n                checked={settings.enable_dark_mode}\n                onChange={(e) => setSettings({ ...settings, enable_dark_mode: e.target.checked })}\n                className=\"w-4 h-4 rounded border-gray-300\"\n              />\n              <label htmlFor=\"enable_dark_mode\" className=\"text-sm font-medium\">Habilitar Modo Escuro</label>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium mb-2\">Tema Padro</label>\n              <select\n                value={settings.default_theme}\n                onChange={(e) => setSettings({ ...settings, default_theme: e.target.value })}\n                className={`w-full px-4 py-2 rounded-lg ${darkMode ? 'bg-gray-900 border-gray-700' : 'bg-gray-50 border-gray-200'} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}\n              >\n                <option value=\"dark\">Escuro</option>\n                <option value=\"light\">Claro</option>\n              </select>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Preview em Tempo Real */}\n      {previewMode && (\n        <div className={`${darkMode ? 'bg-gray-800' : 'bg-white'} rounded-xl p-6`}>\n          <h3 className=\"text-lg font-semibold mb-4 flex items-center gap-2\">\n            <i className=\"ri-eye-line text-yellow-500\"></i>\n            Preview em Tempo Real\n          </h3>\n          <div \n            className=\"border-2 border-dashed border-gray-700 rounded-lg p-8\"\n            style={{\n              fontFamily: settings.font_family,\n              fontSize: `${settings.font_size_base}px`,\n            }}\n          >\n            <div \n              className=\"p-4 rounded-lg mb-4\"\n              style={{ backgroundColor: settings.header_bg_color }}\n            >\n              <h1 className=\"text-2xl font-bold\" style={{ color: settings.primary_color }}>\n                {settings.site_name}\n              </h1>\n              <p className=\"text-sm\" style={{ color: settings.accent_color }}>\n                {settings.site_tagline}\n              </p>\n            </div>\n\n            <div className=\"grid grid-cols-4 gap-4 mb-4\">\n              <div className=\"p-4 rounded-lg text-center\" style={{ backgroundColor: settings.primary_color }}>\n                <p className=\"text-sm font-medium text-black\">Primria</p>\n              </div>\n              <div className=\"p-4 rounded-lg text-center\" style={{ backgroundColor: settings.accent_color }}>\n                <p className=\"text-sm font-medium text-black\">Destaque</p>\n              </div>\n              <div className=\"p-4 rounded-lg text-center\" style={{ backgroundColor: settings.success_color }}>\n                <p className=\"text-sm font-medium text-white\">Sucesso</p>\n              </div>\n              <div className=\"p-4 rounded-lg text-center\" style={{ backgroundColor: settings.error_color }}>\n                <p className=\"text-sm font-medium text-white\">Erro</p>\n              </div>\n            </div>\n\n            <div \n              className=\"p-4 rounded-lg\"\n              style={{ backgroundColor: settings.footer_bg_color }}\n            >\n              <p className=\"text-sm text-center text-gray-400\">Footer Preview</p>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n","import { useState, useEffect } from 'react';\nimport { supabase } from '../../../lib/supabase';\n\ninterface SiteSettings {\n  topbar_email: string;\n  topbar_phone: string;\n  topbar_promo_text: string;\n  show_topbar: boolean;\n  enable_theme_toggle: boolean;\n  primary_color: string;\n  secondary_color: string;\n  accent_color: string;\n  carousel_max_items: number;\n  carousel_auto_play: boolean;\n  carousel_interval: number;\n  footer_about_text: string;\n  footer_social_facebook: string;\n  footer_social_instagram: string;\n  footer_social_twitter: string;\n  footer_social_linkedin: string;\n  footer_social_youtube: string;\n}\n\nexport default function SiteSettingsManagement() {\n  const [settings, setSettings] = useState<SiteSettings>({\n    topbar_email: 'jokadamas616@gmail.com',\n    topbar_phone: '+352 621 717 862',\n    topbar_promo_text: 'Envio grtis em compras acima de 50',\n    show_topbar: true,\n    enable_theme_toggle: true,\n    primary_color: '#f59e0b',\n    secondary_color: '#111827',\n    accent_color: '#d97706',\n    carousel_max_items: 10,\n    carousel_auto_play: true,\n    carousel_interval: 3000,\n    footer_about_text: 'Solues digitais completas para o seu negcio. Qualidade, inovao e resultados garantidos.',\n    footer_social_facebook: 'https://facebook.com',\n    footer_social_instagram: 'https://instagram.com',\n    footer_social_twitter: 'https://twitter.com',\n    footer_social_linkedin: 'https://linkedin.com',\n    footer_social_youtube: 'https://youtube.com'\n  });\n\n  const [loading, setLoading] = useState(false);\n  const [message, setMessage] = useState<{ type: 'success' | 'error'; text: string } | null>(null);\n  const [activeTab, setActiveTab] = useState<'header' | 'theme' | 'carousel' | 'footer'>('header');\n\n  useEffect(() => {\n    loadSettings();\n  }, []);\n\n  const loadSettings = async () => {\n    try {\n      const { data, error } = await supabase\n        .from('site_settings')\n        .select('*')\n        .single();\n\n      if (error) throw error;\n\n      if (data) {\n        setSettings({\n          topbar_email: data.topbar_email || settings.topbar_email,\n          topbar_phone: data.topbar_phone || settings.topbar_phone,\n          topbar_promo_text: data.topbar_promo_text || settings.topbar_promo_text,\n          show_topbar: data.show_topbar ?? settings.show_topbar,\n          enable_theme_toggle: data.enable_theme_toggle ?? settings.enable_theme_toggle,\n          primary_color: data.primary_color || settings.primary_color,\n          secondary_color: data.secondary_color || settings.secondary_color,\n          accent_color: data.accent_color || settings.accent_color,\n          carousel_max_items: data.carousel_max_items || settings.carousel_max_items,\n          carousel_auto_play: data.carousel_auto_play ?? settings.carousel_auto_play,\n          carousel_interval: data.carousel_interval || settings.carousel_interval,\n          footer_about_text: data.footer_about_text || settings.footer_about_text,\n          footer_social_facebook: data.footer_social_facebook || settings.footer_social_facebook,\n          footer_social_instagram: data.footer_social_instagram || settings.footer_social_instagram,\n          footer_social_twitter: data.footer_social_twitter || settings.footer_social_twitter,\n          footer_social_linkedin: data.footer_social_linkedin || settings.footer_social_linkedin,\n          footer_social_youtube: data.footer_social_youtube || settings.footer_social_youtube\n        });\n      }\n    } catch (error) {\n      console.error('Erro ao carregar configuraes:', error);\n    }\n  };\n\n  const handleSave = async () => {\n    setLoading(true);\n    setMessage(null);\n\n    try {\n      const { error } = await supabase\n        .from('site_settings')\n        .upsert({\n          id: 1,\n          ...settings,\n          updated_at: new Date().toISOString()\n        });\n\n      if (error) throw error;\n\n      setMessage({ type: 'success', text: 'Configuraes salvas com sucesso!' });\n      \n      // Recarregar pgina aps 1 segundo para aplicar mudanas\n      setTimeout(() => {\n        window.location.reload();\n      }, 1000);\n    } catch (error) {\n      console.error('Erro ao salvar:', error);\n      setMessage({ type: 'error', text: 'Erro ao salvar configuraes' });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const tabs = [\n    { id: 'header', label: 'Header & Topbar', icon: 'ri-layout-top-line' },\n    { id: 'theme', label: 'Tema & Cores', icon: 'ri-palette-line' },\n    { id: 'carousel', label: 'Carousel', icon: 'ri-slideshow-line' },\n    { id: 'footer', label: 'Footer & Redes Sociais', icon: 'ri-layout-bottom-line' }\n  ];\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h2 className=\"text-2xl font-bold text-gray-900 dark:text-white\">Configuraes do Site</h2>\n          <p className=\"text-gray-600 dark:text-gray-400 mt-1\">\n            Controle completo sobre header, footer, tema e comportamento do site\n          </p>\n        </div>\n        <button\n          onClick={handleSave}\n          disabled={loading}\n          className=\"px-6 py-3 bg-gradient-to-r from-amber-500 to-amber-600 text-white font-semibold rounded-lg hover:from-amber-600 hover:to-amber-700 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed whitespace-nowrap cursor-pointer\"\n        >\n          {loading ? (\n            <>\n              <i className=\"ri-loader-4-line animate-spin mr-2\"></i>\n              A guardar...\n            </>\n          ) : (\n            <>\n              <i className=\"ri-save-line mr-2\"></i>\n              Guardar Alteraes\n            </>\n          )}\n        </button>\n      </div>\n\n      {message && (\n        <div className={`p-4 rounded-lg ${\n          message.type === 'success' \n            ? 'bg-green-50 dark:bg-green-900/20 text-green-800 dark:text-green-200 border border-green-200 dark:border-green-800' \n            : 'bg-red-50 dark:bg-red-900/20 text-red-800 dark:text-red-200 border border-red-200 dark:border-red-800'\n        }`}>\n          <div className=\"flex items-center gap-2\">\n            <i className={message.type === 'success' ? 'ri-checkbox-circle-line' : 'ri-error-warning-line'}></i>\n            <span>{message.text}</span>\n          </div>\n        </div>\n      )}\n\n      {/* Tabs */}\n      <div className=\"border-b border-gray-200 dark:border-gray-700\">\n        <div className=\"flex gap-2 overflow-x-auto\">\n          {tabs.map((tab) => (\n            <button\n              key={tab.id}\n              onClick={() => setActiveTab(tab.id as typeof activeTab)}\n              className={`px-6 py-3 font-medium whitespace-nowrap transition-all duration-200 border-b-2 cursor-pointer ${\n                activeTab === tab.id\n                  ? 'border-amber-500 text-amber-600 dark:text-amber-400'\n                  : 'border-transparent text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200'\n              }`}\n            >\n              <i className={`${tab.icon} mr-2`}></i>\n              {tab.label}\n            </button>\n          ))}\n        </div>\n      </div>\n\n      {/* Header & Topbar Settings */}\n      {activeTab === 'header' && (\n        <div className=\"bg-white dark:bg-gray-800 rounded-xl p-6 space-y-6\">\n          <div className=\"flex items-center justify-between pb-4 border-b border-gray-200 dark:border-gray-700\">\n            <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white\">Configuraes do Header</h3>\n            <label className=\"flex items-center gap-3 cursor-pointer\">\n              <span className=\"text-sm text-gray-600 dark:text-gray-400\">Mostrar Topbar</span>\n              <input\n                type=\"checkbox\"\n                checked={settings.show_topbar}\n                onChange={(e) => setSettings({ ...settings, show_topbar: e.target.checked })}\n                className=\"w-5 h-5 text-amber-600 rounded focus:ring-2 focus:ring-amber-500 cursor-pointer\"\n              />\n            </label>\n          </div>\n\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                E-mail de Contacto\n              </label>\n              <input\n                type=\"email\"\n                value={settings.topbar_email}\n                onChange={(e) => setSettings({ ...settings, topbar_email: e.target.value })}\n                className=\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\n                placeholder=\"email@exemplo.com\"\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                Telefone / WhatsApp\n              </label>\n              <input\n                type=\"text\"\n                value={settings.topbar_phone}\n                onChange={(e) => setSettings({ ...settings, topbar_phone: e.target.value })}\n                className=\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\n                placeholder=\"+352 621 717 862\"\n              />\n            </div>\n\n            <div className=\"md:col-span-2\">\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                Texto Promocional (Topbar)\n              </label>\n              <input\n                type=\"text\"\n                value={settings.topbar_promo_text}\n                onChange={(e) => setSettings({ ...settings, topbar_promo_text: e.target.value })}\n                className=\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\n                placeholder=\"Envio grtis em compras acima de 50\"\n              />\n            </div>\n          </div>\n\n          <div className=\"pt-4 border-t border-gray-200 dark:border-gray-700\">\n            <label className=\"flex items-center gap-3 cursor-pointer\">\n              <input\n                type=\"checkbox\"\n                checked={settings.enable_theme_toggle}\n                onChange={(e) => setSettings({ ...settings, enable_theme_toggle: e.target.checked })}\n                className=\"w-5 h-5 text-amber-600 rounded focus:ring-2 focus:ring-amber-500 cursor-pointer\"\n              />\n              <div>\n                <span className=\"text-sm font-medium text-gray-900 dark:text-white\">Ativar Toggle Dark/Light Mode</span>\n                <p className=\"text-xs text-gray-500 dark:text-gray-400\">Permite aos utilizadores alternar entre modo claro e escuro</p>\n              </div>\n            </label>\n          </div>\n        </div>\n      )}\n\n      {/* Theme & Colors Settings */}\n      {activeTab === 'theme' && (\n        <div className=\"bg-white dark:bg-gray-800 rounded-xl p-6 space-y-6\">\n          <div className=\"pb-4 border-b border-gray-200 dark:border-gray-700\">\n            <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white\">Cores do Tema</h3>\n            <p className=\"text-sm text-gray-600 dark:text-gray-400 mt-1\">\n              Personalize as cores principais do site\n            </p>\n          </div>\n\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                Cor Primria\n              </label>\n              <div className=\"flex gap-3\">\n                <input\n                  type=\"color\"\n                  value={settings.primary_color}\n                  onChange={(e) => setSettings({ ...settings, primary_color: e.target.value })}\n                  className=\"w-16 h-12 rounded-lg cursor-pointer border-2 border-gray-300 dark:border-gray-600\"\n                />\n                <input\n                  type=\"text\"\n                  value={settings.primary_color}\n                  onChange={(e) => setSettings({ ...settings, primary_color: e.target.value })}\n                  className=\"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white font-mono text-sm\"\n                />\n              </div>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                Cor Secundria\n              </label>\n              <div className=\"flex gap-3\">\n                <input\n                  type=\"color\"\n                  value={settings.secondary_color}\n                  onChange={(e) => setSettings({ ...settings, secondary_color: e.target.value })}\n                  className=\"w-16 h-12 rounded-lg cursor-pointer border-2 border-gray-300 dark:border-gray-600\"\n                />\n                <input\n                  type=\"text\"\n                  value={settings.secondary_color}\n                  onChange={(e) => setSettings({ ...settings, secondary_color: e.target.value })}\n                  className=\"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white font-mono text-sm\"\n                />\n              </div>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                Cor de Destaque\n              </label>\n              <div className=\"flex gap-3\">\n                <input\n                  type=\"color\"\n                  value={settings.accent_color}\n                  onChange={(e) => setSettings({ ...settings, accent_color: e.target.value })}\n                  className=\"w-16 h-12 rounded-lg cursor-pointer border-2 border-gray-300 dark:border-gray-600\"\n                />\n                <input\n                  type=\"text\"\n                  value={settings.accent_color}\n                  onChange={(e) => setSettings({ ...settings, accent_color: e.target.value })}\n                  className=\"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white font-mono text-sm\"\n                />\n              </div>\n            </div>\n          </div>\n\n          <div className=\"pt-4 border-t border-gray-200 dark:border-gray-700\">\n            <h4 className=\"text-sm font-medium text-gray-900 dark:text-white mb-4\">Preview das Cores</h4>\n            <div className=\"grid grid-cols-3 gap-4\">\n              <div className=\"p-4 rounded-lg text-center\" style={{ backgroundColor: settings.primary_color }}>\n                <span className=\"text-white font-semibold\">Primria</span>\n              </div>\n              <div className=\"p-4 rounded-lg text-center\" style={{ backgroundColor: settings.secondary_color }}>\n                <span className=\"text-white font-semibold\">Secundria</span>\n              </div>\n              <div className=\"p-4 rounded-lg text-center\" style={{ backgroundColor: settings.accent_color }}>\n                <span className=\"text-white font-semibold\">Destaque</span>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Carousel Settings */}\n      {activeTab === 'carousel' && (\n        <div className=\"bg-white dark:bg-gray-800 rounded-xl p-6 space-y-6\">\n          <div className=\"pb-4 border-b border-gray-200 dark:border-gray-700\">\n            <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white\">Configuraes do Carousel</h3>\n            <p className=\"text-sm text-gray-600 dark:text-gray-400 mt-1\">\n              Controle o comportamento do carousel de produtos em destaque\n            </p>\n          </div>\n\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                Mximo de Itens\n              </label>\n              <input\n                type=\"number\"\n                min=\"1\"\n                max=\"20\"\n                value={settings.carousel_max_items}\n                onChange={(e) => setSettings({ ...settings, carousel_max_items: parseInt(e.target.value) || 10 })}\n                className=\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\n              />\n              <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-1\">\n                Nmero mximo de produtos a exibir no carousel\n              </p>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                Intervalo de Rotao (ms)\n              </label>\n              <input\n                type=\"number\"\n                min=\"1000\"\n                max=\"10000\"\n                step=\"500\"\n                value={settings.carousel_interval}\n                onChange={(e) => setSettings({ ...settings, carousel_interval: parseInt(e.target.value) || 3000 })}\n                className=\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\n              />\n              <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-1\">\n                Tempo entre cada transio (em milissegundos)\n              </p>\n            </div>\n          </div>\n\n          <div className=\"pt-4 border-t border-gray-200 dark:border-gray-700\">\n            <label className=\"flex items-center gap-3 cursor-pointer\">\n              <input\n                type=\"checkbox\"\n                checked={settings.carousel_auto_play}\n                onChange={(e) => setSettings({ ...settings, carousel_auto_play: e.target.checked })}\n                className=\"w-5 h-5 text-amber-600 rounded focus:ring-2 focus:ring-amber-500 cursor-pointer\"\n              />\n              <div>\n                <span className=\"text-sm font-medium text-gray-900 dark:text-white\">Auto-Play Ativado</span>\n                <p className=\"text-xs text-gray-500 dark:text-gray-400\">O carousel roda automaticamente</p>\n              </div>\n            </label>\n          </div>\n        </div>\n      )}\n\n      {/* Footer Settings */}\n      {activeTab === 'footer' && (\n        <div className=\"bg-white dark:bg-gray-800 rounded-xl p-6 space-y-6\">\n          <div className=\"pb-4 border-b border-gray-200 dark:border-gray-700\">\n            <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white\">Configuraes do Footer</h3>\n            <p className=\"text-sm text-gray-600 dark:text-gray-400 mt-1\">\n              Personalize o rodap e links de redes sociais\n            </p>\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n              Texto Sobre a Empresa\n            </label>\n            <textarea\n              value={settings.footer_about_text}\n              onChange={(e) => setSettings({ ...settings, footer_about_text: e.target.value })}\n              rows={3}\n              className=\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white resize-none\"\n              placeholder=\"Descrio breve da empresa...\"\n            />\n          </div>\n\n          <div className=\"pt-4 border-t border-gray-200 dark:border-gray-700\">\n            <h4 className=\"text-sm font-medium text-gray-900 dark:text-white mb-4\">Redes Sociais</h4>\n            <div className=\"space-y-4\">\n              <div className=\"flex items-center gap-3\">\n                <div className=\"w-10 h-10 flex items-center justify-center bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 rounded-lg\">\n                  <i className=\"ri-facebook-fill\"></i>\n                </div>\n                <input\n                  type=\"url\"\n                  value={settings.footer_social_facebook}\n                  onChange={(e) => setSettings({ ...settings, footer_social_facebook: e.target.value })}\n                  className=\"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\n                  placeholder=\"https://facebook.com/...\"\n                />\n              </div>\n\n              <div className=\"flex items-center gap-3\">\n                <div className=\"w-10 h-10 flex items-center justify-center bg-pink-100 dark:bg-pink-900/30 text-pink-600 dark:text-pink-400 rounded-lg\">\n                  <i className=\"ri-instagram-line\"></i>\n                </div>\n                <input\n                  type=\"url\"\n                  value={settings.footer_social_instagram}\n                  onChange={(e) => setSettings({ ...settings, footer_social_instagram: e.target.value })}\n                  className=\"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\n                  placeholder=\"https://instagram.com/...\"\n                />\n              </div>\n\n              <div className=\"flex items-center gap-3\">\n                <div className=\"w-10 h-10 flex items-center justify-center bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-white rounded-lg\">\n                  <i className=\"ri-twitter-x-line\"></i>\n                </div>\n                <input\n                  type=\"url\"\n                  value={settings.footer_social_twitter}\n                  onChange={(e) => setSettings({ ...settings, footer_social_twitter: e.target.value })}\n                  className=\"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\n                  placeholder=\"https://twitter.com/...\"\n                />\n              </div>\n\n              <div className=\"flex items-center gap-3\">\n                <div className=\"w-10 h-10 flex items-center justify-center bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 rounded-lg\">\n                  <i className=\"ri-linkedin-fill\"></i>\n                </div>\n                <input\n                  type=\"url\"\n                  value={settings.footer_social_linkedin}\n                  onChange={(e) => setSettings({ ...settings, footer_social_linkedin: e.target.value })}\n                  className=\"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\n                  placeholder=\"https://linkedin.com/...\"\n                />\n              </div>\n\n              <div className=\"flex items-center gap-3\">\n                <div className=\"w-10 h-10 flex items-center justify-center bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400 rounded-lg\">\n                  <i className=\"ri-youtube-fill\"></i>\n                </div>\n                <input\n                  type=\"url\"\n                  value={settings.footer_social_youtube}\n                  onChange={(e) => setSettings({ ...settings, footer_social_youtube: e.target.value })}\n                  className=\"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\n                  placeholder=\"https://youtube.com/...\"\n                />\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n","// API Client para WooCommerce - Otimizado para GitHub Pages + InfinityFree\n\nimport { supabase } from '../lib/supabase';\n\nconst WOOCOMMERCE_API_BASE = '/api/integrations/woocommerce';\n\ninterface WooCredentials {\n  store_url: string;\n  consumer_key: string;\n  consumer_secret: string;\n  api_version: string;\n  use_ssl: boolean;\n  products_only: boolean;\n}\n\n//  ADICIONAR INTERFACE PARA CREDENCIAIS DO TESTE DE CONEXO\ninterface WooCommerceCredentials {\n  storeUrl: string;\n  consumerKey: string;\n  consumerSecret: string;\n  apiVersion: string;\n  useSsl: boolean;\n}\n\n//  ADICIONAR INTERFACE PARA RESULTADO DO TESTE\ninterface WooCommerceTestResult {\n  success: boolean;\n  message: string;\n  data?: {\n    totalProducts: number;\n    wooVersion: string;\n    apiVersion: string;\n    storeUrl: string;\n  };\n}\n\ninterface ImportOptions {\n  update_existing: boolean;\n  create_new: boolean;\n  sync_stock_only: boolean;\n  import_images: boolean;\n}\n\ninterface WooProduct {\n  id: number;\n  name: string;\n  slug: string;\n  sku: string;\n  price: string;\n  regular_price: string;\n  sale_price: string;\n  stock_quantity: number;\n  stock_status: string;\n  manage_stock: boolean;\n  images: Array<{ src: string; alt: string }>;\n  categories: Array<{ id: number; name: string }>;\n  tags: Array<{ id: number; name: string }>;\n  description: string;\n  short_description: string;\n  weight: string;\n  dimensions: any;\n  variations: number[];\n  attributes: any[];\n}\n\n/**\n * Normalizar URL da loja (remover trailing slash, garantir protocolo)\n */\nfunction normalizeStoreUrl(url: string, useSSL: boolean): string {\n  let normalized = url.trim().replace(/\\/+$/, ''); // Remove trailing slashes\n  \n  // Adicionar protocolo se no existir\n  if (!normalized.startsWith('http://') && !normalized.startsWith('https://')) {\n    normalized = `${useSSL ? 'https' : 'http'}://${normalized}`;\n  }\n  \n  // Forar HTTPS se useSSL for true\n  if (useSSL && normalized.startsWith('http://')) {\n    normalized = normalized.replace('http://', 'https://');\n  }\n  \n  return normalized;\n}\n\n/**\n * Criar header de autenticao Basic Auth\n */\nfunction createAuthHeader(consumerKey: string, consumerSecret: string): string {\n  return `Basic ${btoa(`${consumerKey}:${consumerSecret}`)}`;\n}\n\n/**\n * Fazer requisio ao WooCommerce com retry e timeout\n */\nasync function fetchWooCommerce(\n  url: string,\n  options: {\n    method?: string;\n    headers?: Record<string, string>;\n    body?: string;\n    signal?: AbortSignal;\n  } = {},\n  timeout: number = 15000\n): Promise<Response> {\n  const controller = new AbortController();\n  const timeoutId = setTimeout(() => controller.abort(), timeout);\n\n  try {\n    const response = await fetch(url, {\n      method: options.method || 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n        ...options.headers\n      },\n      body: options.body,\n      signal: controller.signal\n    });\n\n    clearTimeout(timeoutId);\n    return response;\n  } catch (error: any) {\n    clearTimeout(timeoutId);\n    \n    if (error.name === 'AbortError') {\n      throw new Error('Timeout: O servidor demorou muito a responder. Verifique sua conexo ou tente novamente.');\n    }\n    \n    throw error;\n  }\n}\n\n/**\n * Testa a conexo com a API WooCommerce\n */\nexport async function testWooCommerceConnection(\n  credentials: WooCommerceCredentials\n): Promise<WooCommerceTestResult> {\n  try {\n    const { storeUrl, consumerKey, consumerSecret, apiVersion, useSsl } = credentials;\n\n    // Validar campos obrigatrios\n    if (!storeUrl || !consumerKey || !consumerSecret) {\n      return {\n        success: false,\n        message: ' Preencha todos os campos obrigatrios (URL, Consumer Key e Consumer Secret)',\n      };\n    }\n\n    // Normalizar URL\n    let normalizedUrl = storeUrl.trim();\n    \n    // Remover barra final\n    if (normalizedUrl.endsWith('/')) {\n      normalizedUrl = normalizedUrl.slice(0, -1);\n    }\n\n    // Adicionar protocolo se no tiver\n    if (!normalizedUrl.startsWith('http://') && !normalizedUrl.startsWith('https://')) {\n      normalizedUrl = useSsl ? `https://${normalizedUrl}` : `http://${normalizedUrl}`;\n    }\n\n    // Forar HTTP se useSsl = false\n    if (!useSsl && normalizedUrl.startsWith('https://')) {\n      normalizedUrl = normalizedUrl.replace('https://', 'http://');\n    }\n\n    // Forar HTTPS se useSsl = true\n    if (useSsl && normalizedUrl.startsWith('http://')) {\n      normalizedUrl = normalizedUrl.replace('http://', 'https://');\n    }\n\n    console.log(' Testando conexo:', {\n      url: normalizedUrl,\n      ssl: useSsl,\n      apiVersion: apiVersion || 'wc/v3'\n    });\n\n    // PASSO 1: Verificar se o site est online\n    try {\n      console.log(' Verificando se o site est acessvel...');\n      const siteCheckResponse = await fetchWooCommerce(\n        normalizedUrl,\n        {\n          method: 'GET',\n          headers: {\n            'Accept': 'text/html,application/json',\n          }\n        },\n        10000 // 10s timeout\n      );\n\n      if (!siteCheckResponse.ok) {\n        return {\n          success: false,\n          message: ` Site retornou erro ${siteCheckResponse.status}\n\n Diagnstico:\n O domnio existe mas retornou erro\n Pode estar em manuteno ou com problemas\n\n Solues:\n1. Abra ${normalizedUrl} no navegador e veja o que aparece\n2. Verifique o painel do InfinityFree se a conta est ativa\n3. Aguarde alguns minutos e tente novamente\n4. Verifique se o WordPress foi instalado corretamente`,\n        };\n      }\n\n      console.log(' Site est acessvel');\n    } catch (siteError: any) {\n      console.error(' Site no est acessvel:', siteError);\n      \n      return {\n        success: false,\n        message: ` No foi possvel aceder a ${normalizedUrl}\n\n Possveis causas:\n1.  Site ainda no foi configurado no InfinityFree\n2.  WordPress no foi instalado\n3.  Domnio no est a apontar corretamente\n4.  Conta InfinityFree suspensa ou inativa\n5.  DNS ainda no propagou (pode demorar at 48h)\n\n Solues:\n1. Aceda ao painel InfinityFree e verifique se a conta est ativa\n2. Abra ${normalizedUrl} no navegador - deve aparecer o WordPress\n3. Se aparecer pgina em branco, instale o WordPress via Softaculous\n4. Aguarde a propagao do DNS (pode demorar at 48h)\n5. Tente usar HTTP em vez de HTTPS (desmarque \"Usar SSL\")\n\n Precisa de ajuda? Consulte: WORDPRESS_INFINITYFREE_SETUP.md`,\n      };\n    }\n\n    // PASSO 2: Verificar se a API REST est ativa\n    const wpJsonUrl = `${normalizedUrl}/wp-json/`;\n    console.log(' Verificando API REST:', wpJsonUrl);\n\n    try {\n      const wpJsonResponse = await fetchWooCommerce(\n        wpJsonUrl,\n        {\n          method: 'GET',\n          headers: {\n            'Accept': 'application/json',\n          }\n        },\n        10000\n      );\n\n      if (!wpJsonResponse.ok) {\n        return {\n          success: false,\n          message: ` API REST no est acessvel (erro ${wpJsonResponse.status})\n\n Diagnstico:\n WordPress est instalado mas a API REST no funciona\n Pode ser problema de permalinks ou .htaccess\n\n Solues:\n1. No WordPress admin, v em Definies  Permalinks\n2. Selecione \"Nome do artigo\"\n3. Clique em \"Guardar alteraes\"\n4. Tente novamente\n\nSe o erro persistir:\n Verifique se o ficheiro .htaccess existe na raiz do WordPress\n Confirme que mod_rewrite est ativo no servidor`,\n        };\n      }\n\n      const wpJsonData = await wpJsonResponse.json();\n      console.log(' API REST est ativa:', wpJsonData);\n\n      // Verificar se WooCommerce est instalado\n      if (!wpJsonData.namespaces || !wpJsonData.namespaces.includes('wc/v3')) {\n        return {\n          success: false,\n          message: ` WooCommerce no est instalado ou ativo\n\n Diagnstico:\n WordPress est funcional\n API REST est ativa\n Mas WooCommerce no foi detetado\n\n Solues:\n1. No WordPress admin, v em Plugins\n2. Procure por \"WooCommerce\"\n3. Clique em \"Instalar Agora\"\n4. Clique em \"Ativar\"\n5. Tente novamente\n\nNamespaces detetados: ${wpJsonData.namespaces?.join(', ') || 'nenhum'}`,\n        };\n      }\n\n      console.log(' WooCommerce est instalado');\n    } catch (wpJsonError: any) {\n      console.error(' Erro ao verificar API REST:', wpJsonError);\n      \n      return {\n        success: false,\n        message: ` API REST no responde\n\n Possveis causas:\n1. Permalinks no esto configurados\n2. Ficheiro .htaccess com problemas\n3. mod_rewrite no est ativo\n\n Solues:\n1. Aceda ao WordPress admin: ${normalizedUrl}/wp-admin\n2. V em Definies  Permalinks\n3. Selecione \"Nome do artigo\"\n4. Clique em \"Guardar alteraes\"\n5. Tente novamente\n\nErro tcnico: ${wpJsonError.message}`,\n      };\n    }\n\n    // PASSO 3: Testar credenciais WooCommerce\n    const version = apiVersion || 'wc/v3';\n    const testUrl = `${normalizedUrl}/wp-json/${version}/products`;\n    \n    console.log(' Testando credenciais WooCommerce:', testUrl);\n\n    const auth = btoa(`${consumerKey}:${consumerSecret}`);\n    \n    const response = await fetchWooCommerce(\n      `${testUrl}?per_page=1`,\n      {\n        method: 'GET',\n        headers: {\n          'Authorization': `Basic ${auth}`,\n          'Accept': 'application/json',\n        }\n      },\n      15000\n    );\n\n    if (!response.ok) {\n      const errorText = await response.text();\n      console.error(' Erro na autenticao:', response.status, errorText);\n\n      if (response.status === 401) {\n        return {\n          success: false,\n          message: ` Credenciais invlidas (erro 401)\n\n Diagnstico:\n Consumer Key ou Consumer Secret esto incorretos\n Ou as chaves foram revogadas\n\n Solues:\n1. No WordPress admin, v em WooCommerce  Definies  Avanado  REST API\n2. Verifique se a chave existe e est ativa\n3. Se necessrio, crie uma nova chave:\n   - Clique em \"Adicionar chave\"\n   - Descrio: \"Integrao GitHub Pages\"\n   - Permisses: \"Leitura/Escrita\"\n   - Clique em \"Gerar chave API\"\n4. Copie as novas chaves e cole aqui\n5. Tente novamente`,\n        };\n      }\n\n      if (response.status === 404) {\n        return {\n          success: false,\n          message: ` Endpoint no encontrado (erro 404)\n\n Diagnstico:\n A verso da API \"${version}\" no existe\n Ou os permalinks no esto configurados\n\n Solues:\n1. Tente mudar a verso da API para \"wc/v3\"\n2. Verifique os permalinks (Definies  Permalinks  Nome do artigo)\n3. Tente novamente`,\n        };\n      }\n\n      return {\n        success: false,\n        message: ` Erro ao conectar (${response.status})\n\nDetalhes: ${errorText.substring(0, 200)}\n\n Verifique:\n Consumer Key e Consumer Secret esto corretos\n Permisses da chave esto em \"Leitura/Escrita\"\n Permalinks configurados como \"Nome do artigo\"`,\n      };\n    }\n\n    const data = await response.json();\n    console.log(' Conexo bem-sucedida!', data);\n\n    // Obter informaes adicionais\n    let totalProducts = 0;\n    let wooVersion = 'Desconhecido';\n\n    try {\n      const systemStatusUrl = `${normalizedUrl}/wp-json/${version}/system_status`;\n      const systemResponse = await fetchWooCommerce(\n        systemStatusUrl,\n        {\n          method: 'GET',\n          headers: {\n            'Authorization': `Basic ${auth}`,\n            'Accept': 'application/json',\n          }\n        },\n        10000\n      );\n\n      if (systemResponse.ok) {\n        const systemData = await systemResponse.json();\n        wooVersion = systemData.environment?.version || 'Desconhecido';\n      }\n    } catch (e) {\n      console.warn('No foi possvel obter verso do WooCommerce');\n    }\n\n    // Contar produtos\n    try {\n      const countUrl = `${normalizedUrl}/wp-json/${version}/products`;\n      const countResponse = await fetchWooCommerce(\n        `${countUrl}?per_page=1`,\n        {\n          method: 'GET',\n          headers: {\n            'Authorization': `Basic ${auth}`,\n            'Accept': 'application/json',\n          }\n        },\n        10000\n      );\n\n      if (countResponse.ok) {\n        const totalHeader = countResponse.headers.get('X-WP-Total');\n        totalProducts = totalHeader ? parseInt(totalHeader, 10) : 0;\n      }\n    } catch (e) {\n      console.warn('No foi possvel contar produtos');\n    }\n\n    return {\n      success: true,\n      message: ' Conexo estabelecida com sucesso!',\n      data: {\n        totalProducts,\n        wooVersion,\n        apiVersion: version,\n        storeUrl: normalizedUrl,\n      },\n    };\n\n  } catch (error: any) {\n    console.error(' Erro inesperado:', error);\n    \n    return {\n      success: false,\n      message: ` Erro inesperado ao testar conexo\n\nDetalhes: ${error.message}\n\n Tente:\n1. Verificar se o site est online: abra no navegador\n2. Verificar se o WordPress est instalado\n3. Verificar se o WooCommerce est ativo\n4. Aguardar alguns minutos e tentar novamente`,\n    };\n  }\n}\n\n/**\n * Buscar produtos do WooCommerce diretamente (sem Supabase)\n * Otimizado para InfinityFree (cache + retry)\n */\nexport async function fetchWooCommerceProductsDirect(\n  credentials: WooCredentials,\n  limit: number = 50,\n  page: number = 1\n) {\n  try {\n    const storeUrl = normalizeStoreUrl(credentials.store_url, credentials.use_ssl);\n    const url = `${storeUrl}/wp-json/${credentials.api_version}/products?per_page=${limit}&page=${page}&status=publish&orderby=date&order=desc`;\n    const auth = createAuthHeader(credentials.consumer_key, credentials.consumer_secret);\n    \n    console.log(` Buscando produtos (pgina ${page}, limite ${limit})...`);\n    \n    const response = await fetchWooCommerce(url, {\n      method: 'GET',\n      headers: {\n        'Authorization': auth\n      }\n    }, 20000); // 20s timeout para InfinityFree\n\n    if (!response.ok) {\n      throw new Error(`Erro ${response.status}: ${response.statusText}`);\n    }\n\n    const products: WooProduct[] = await response.json();\n    const totalProducts = parseInt(response.headers.get('X-WP-Total') || '0');\n    const totalPages = parseInt(response.headers.get('X-WP-TotalPages') || '1');\n    \n    console.log(` ${products.length} produtos carregados (${totalProducts} total)`);\n    \n    // Mapear produtos para formato interno\n    return {\n      success: true,\n      total: totalProducts,\n      total_pages: totalPages,\n      current_page: page,\n      products: products.map((p: WooProduct) => ({\n        id: p.id,\n        name: p.name,\n        slug: p.slug,\n        sku: p.sku || `woo-${p.id}`,\n        price: p.price || p.regular_price || '0',\n        regular_price: p.regular_price || '0',\n        sale_price: p.sale_price || null,\n        stock: p.stock_quantity || 0,\n        stock_status: p.stock_status,\n        manage_stock: p.manage_stock,\n        image: p.images?.[0]?.src || '',\n        images: p.images?.map((img) => img.src) || [],\n        category: p.categories?.[0]?.name || 'Sem categoria',\n        categories: p.categories?.map((cat) => cat.name) || [],\n        description: p.description || '',\n        short_description: p.short_description || '',\n        weight: p.weight || null,\n        dimensions: p.dimensions || null,\n        variations: p.variations || [],\n        attributes: p.attributes || [],\n        tags: p.tags?.map((tag) => tag.name) || []\n      }))\n    };\n  } catch (error: any) {\n    console.error(' Erro ao buscar produtos:', error);\n    return {\n      success: false,\n      message: error.message || 'Erro ao buscar produtos',\n      products: []\n    };\n  }\n}\n\n/**\n * Buscar produtos do WooCommerce (preview) - Mantm compatibilidade com cdigo existente\n */\nexport async function fetchWooCommerceProducts(limit: number = 50) {\n  try {\n    // Buscar credenciais do Supabase\n    const { data: config, error } = await supabase\n      .from('integrations_woocommerce')\n      .select('*')\n      .maybeSingle();\n\n    if (error || !config) {\n      throw new Error('Configurao WooCommerce no encontrada. Por favor, conecte primeiro.');\n    }\n\n    const credentials: WooCredentials = {\n      store_url: config.store_url,\n      consumer_key: config.consumer_key,\n      consumer_secret: config.consumer_secret,\n      api_version: config.api_version || 'wc/v3',\n      use_ssl: config.use_ssl ?? true,\n      products_only: config.products_only ?? true\n    };\n\n    return await fetchWooCommerceProductsDirect(credentials, limit);\n  } catch (error: any) {\n    console.error('Erro ao buscar produtos:', error);\n    return {\n      success: false,\n      message: error.message || 'Erro ao buscar produtos',\n      products: []\n    };\n  }\n}\n\n/**\n * Criar produto no WooCommerce\n */\nexport async function createWooCommerceProduct(\n  credentials: WooCredentials,\n  productData: {\n    name: string;\n    sku: string;\n    regular_price: string;\n    description?: string;\n    short_description?: string;\n    categories?: Array<{ id: number }>;\n    images?: Array<{ src: string }>;\n    stock_quantity?: number;\n    manage_stock?: boolean;\n  }\n) {\n  try {\n    const storeUrl = normalizeStoreUrl(credentials.store_url, credentials.use_ssl);\n    const url = `${storeUrl}/wp-json/${credentials.api_version}/products`;\n    const auth = createAuthHeader(credentials.consumer_key, credentials.consumer_secret);\n    \n    console.log(' Criando produto:', productData.name);\n    \n    const response = await fetchWooCommerce(url, {\n      method: 'POST',\n      headers: {\n        'Authorization': auth\n      },\n      body: JSON.stringify(productData)\n    });\n\n    if (!response.ok) {\n      const errorData = await response.json();\n      throw new Error(errorData.message || `Erro ${response.status}`);\n    }\n\n    const product = await response.json();\n    console.log(' Produto criado com sucesso! ID:', product.id);\n    \n    return {\n      success: true,\n      product\n    };\n  } catch (error: any) {\n    console.error(' Erro ao criar produto:', error);\n    return {\n      success: false,\n      message: error.message || 'Erro ao criar produto'\n    };\n  }\n}\n\n/**\n * Atualizar produto no WooCommerce\n */\nexport async function updateWooCommerceProduct(\n  credentials: WooCredentials,\n  productId: number,\n  productData: Partial<{\n    name: string;\n    sku: string;\n    regular_price: string;\n    sale_price: string;\n    description: string;\n    short_description: string;\n    stock_quantity: number;\n    manage_stock: boolean;\n    images: Array<{ src: string }>;\n  }>\n) {\n  try {\n    const storeUrl = normalizeStoreUrl(credentials.store_url, credentials.use_ssl);\n    const url = `${storeUrl}/wp-json/${credentials.api_version}/products/${productId}`;\n    const auth = createAuthHeader(credentials.consumer_key, credentials.consumer_secret);\n    \n    console.log(' Atualizando produto ID:', productId);\n    \n    const response = await fetchWooCommerce(url, {\n      method: 'PUT',\n      headers: {\n        'Authorization': auth\n      },\n      body: JSON.stringify(productData)\n    });\n\n    if (!response.ok) {\n      const errorData = await response.json();\n      throw new Error(errorData.message || `Erro ${response.status}`);\n    }\n\n    const product = await response.json();\n    console.log(' Produto atualizado com sucesso!');\n    \n    return {\n      success: true,\n      product\n    };\n  } catch (error: any) {\n    console.error(' Erro ao atualizar produto:', error);\n    return {\n      success: false,\n      message: error.message || 'Erro ao atualizar produto'\n    };\n  }\n}\n\n/**\n * Deletar produto no WooCommerce\n */\nexport async function deleteWooCommerceProduct(\n  credentials: WooCredentials,\n  productId: number,\n  force: boolean = false\n) {\n  try {\n    const storeUrl = normalizeStoreUrl(credentials.store_url, credentials.use_ssl);\n    const url = `${storeUrl}/wp-json/${credentials.api_version}/products/${productId}?force=${force}`;\n    const auth = createAuthHeader(credentials.consumer_key, credentials.consumer_secret);\n    \n    console.log(' Deletando produto ID:', productId);\n    \n    const response = await fetchWooCommerce(url, {\n      method: 'DELETE',\n      headers: {\n        'Authorization': auth\n      }\n    });\n\n    if (!response.ok) {\n      const errorData = await response.json();\n      throw new Error(errorData.message || `Erro ${response.status}`);\n    }\n\n    console.log(' Produto deletado com sucesso!');\n    \n    return {\n      success: true\n    };\n  } catch (error: any) {\n    console.error(' Erro ao deletar produto:', error);\n    return {\n      success: false,\n      message: error.message || 'Erro ao deletar produto'\n    };\n  }\n}\n\n/**\n * Atualizar apenas stock de um produto\n */\nexport async function updateWooCommerceStock(\n  credentials: WooCredentials,\n  productId: number,\n  stockQuantity: number\n) {\n  return updateWooCommerceProduct(credentials, productId, {\n    stock_quantity: stockQuantity,\n    manage_stock: true\n  });\n}\n\n/**\n * Atualizar apenas preo de um produto\n */\nexport async function updateWooCommercePrice(\n  credentials: WooCredentials,\n  productId: number,\n  regularPrice: string,\n  salePrice?: string\n) {\n  return updateWooCommerceProduct(credentials, productId, {\n    regular_price: regularPrice,\n    sale_price: salePrice\n  });\n}\n\n/**\n * Importar produtos do WooCommerce\n */\nexport async function importWooCommerceProducts(\n  mode: 'preview' | 'full',\n  options: ImportOptions,\n  categoryMapping: Record<string, string> = {}\n) {\n  try {\n    // Criar job de importao\n    const { data: job, error: jobError } = await supabase\n      .from('woocommerce_import_jobs')\n      .insert({\n        status: 'pending',\n        total_items: 0,\n        processed_items: 0\n      })\n      .select()\n      .single();\n\n    if (jobError) throw jobError;\n\n    // Buscar produtos\n    const limit = mode === 'preview' ? 50 : 1000;\n    const result = await fetchWooCommerceProducts(limit);\n    \n    if (!result.success) {\n      throw new Error(result.message);\n    }\n\n    // Atualizar job com total de items\n    await supabase\n      .from('woocommerce_import_jobs')\n      .update({\n        status: 'running',\n        total_items: result.products.length\n      })\n      .eq('id', job.id);\n\n    let processedCount = 0;\n    let createdCount = 0;\n    let updatedCount = 0;\n    const errors: string[] = [];\n\n    // Processar cada produto\n    for (const product of result.products) {\n      try {\n        // Verificar se produto j existe (por SKU)\n        const { data: existing } = await supabase\n          .from('products')\n          .select('id')\n          .eq('sku', product.sku)\n          .maybeSingle();\n\n        if (existing && options.update_existing) {\n          // Atualizar produto existente\n          const updateData: any = {\n            title: product.name,\n            updated_at: new Date().toISOString()\n          };\n\n          if (options.sync_stock_only) {\n            // Apenas atualizar stock\n            updateData.stock = product.stock || 0;\n          } else {\n            // Atualizao completa\n            updateData.description = product.description;\n            updateData.price = parseFloat(product.price) || 0;\n            updateData.stock = product.stock || 0;\n            updateData.weight = product.weight;\n            updateData.dimensions = product.dimensions;\n            \n            if (options.import_images && product.images.length > 0) {\n              updateData.images = product.images;\n            }\n          }\n\n          const { error: updateError } = await supabase\n            .from('products')\n            .update(updateData)\n            .eq('id', existing.id);\n\n          if (updateError) throw updateError;\n\n          // Atualizar mapeamento\n          await supabase\n            .from('product_mappings')\n            .upsert({\n              woo_product_id: product.id,\n              local_product_id: existing.id,\n              sku: product.sku,\n              last_synced_at: new Date().toISOString()\n            });\n\n          updatedCount++;\n\n        } else if (!existing && options.create_new) {\n          // Criar novo produto\n          const { data: newProduct, error: createError } = await supabase\n            .from('products')\n            .insert({\n              title: product.name,\n              description: product.description,\n              sku: product.sku,\n              price: parseFloat(product.price) || 0,\n              stock: product.stock || 0,\n              weight: product.weight,\n              dimensions: product.dimensions,\n              images: options.import_images ? product.images : [],\n              is_active: true,\n              created_at: new Date().toISOString()\n            })\n            .select()\n            .single();\n\n          if (createError) throw createError;\n\n          if (newProduct) {\n            // Criar mapeamento\n            await supabase\n              .from('product_mappings')\n              .insert({\n                woo_product_id: product.id,\n                local_product_id: newProduct.id,\n                sku: product.sku,\n                last_synced_at: new Date().toISOString()\n              });\n\n            createdCount++;\n          }\n        }\n\n        processedCount++;\n\n        // Atualizar progresso do job a cada 10 produtos\n        if (processedCount % 10 === 0) {\n          await supabase\n            .from('woocommerce_import_jobs')\n            .update({ processed_items: processedCount })\n            .eq('id', job.id);\n        }\n\n      } catch (error: any) {\n        console.error(`Erro ao processar produto ${product.sku}:`, error);\n        errors.push(`${product.sku}: ${error.message}`);\n      }\n    }\n\n    // Finalizar job\n    await supabase\n      .from('woocommerce_import_jobs')\n      .update({\n        status: errors.length > 0 && processedCount === 0 ? 'failed' : 'completed',\n        processed_items: processedCount,\n        completed_at: new Date().toISOString(),\n        error_message: errors.length > 0 ? errors.slice(0, 5).join('; ') : null\n      })\n      .eq('id', job.id);\n\n    // Atualizar ltimo sync\n    await supabase\n      .from('integrations_woocommerce')\n      .update({ last_sync_at: new Date().toISOString() })\n      .limit(1);\n\n    // Salvar no localStorage para debug panel\n    localStorage.setItem('last_woo_sync', JSON.stringify({\n      timestamp: new Date().toISOString(),\n      processed: processedCount,\n      created: createdCount,\n      updated: updatedCount,\n      errors: errors.length\n    }));\n\n    return {\n      success: true,\n      job_id: job.id,\n      processed: processedCount,\n      created: createdCount,\n      updated: updatedCount,\n      total: result.products.length,\n      errors\n    };\n\n  } catch (error: any) {\n    console.error('Erro ao importar produtos:', error);\n    return {\n      success: false,\n      message: error.message || 'Erro ao importar produtos'\n    };\n  }\n}\n\n/**\n * Buscar status de um job de importao\n */\nexport async function getImportJobStatus(jobId: string) {\n  try {\n    const { data, error } = await supabase\n      .from('woocommerce_import_jobs')\n      .select('*')\n      .eq('id', jobId)\n      .single();\n\n    if (error) throw error;\n\n    return {\n      success: true,\n      job: data\n    };\n  } catch (error: any) {\n    return {\n      success: false,\n      message: error.message || 'Erro ao buscar status do job'\n    };\n  }\n}\n\n/**\n * Verificar sade da conexo WooCommerce\n */\nexport async function checkWooCommerceHealth() {\n  try {\n    const { data: config, error } = await supabase\n      .from('integrations_woocommerce')\n      .select('*')\n      .maybeSingle();\n\n    if (error || !config) {\n      return {\n        connected: false,\n        message: 'No conectado'\n      };\n    }\n\n    const storeUrl = normalizeStoreUrl(config.store_url, config.use_ssl);\n    const url = `${storeUrl}/wp-json/`;\n    \n    const response = await fetch(url, {\n      method: 'GET',\n      headers: { 'Content-Type': 'application/json' }\n    });\n\n    return {\n      connected: response.ok,\n      message: response.ok ? 'Conectado' : 'Erro de conexo',\n      last_sync: config.last_sync_at\n    };\n  } catch (error) {\n    return {\n      connected: false,\n      message: 'Erro ao verificar conexo'\n    };\n  }\n}\n\nexport default {\n  testWooCommerceConnection,\n  fetchWooCommerceProducts,\n  importWooCommerceProducts,\n  getImportJobStatus,\n  checkWooCommerceHealth\n};\n","import { useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport { supabase } from '../../../lib/supabase';\nimport { testWooCommerceConnection, fetchWooCommerceProducts, importWooCommerceProducts } from '../../../api/woocommerce';\n\ninterface WooCommerceIntegrationProps {\n  darkMode: boolean;\n}\n\n//  CORRIGIR: Usar mesma interface do woocommerce.ts\ninterface WooCredentials {\n  storeUrl: string;\n  consumerKey: string;\n  consumerSecret: string;\n  apiVersion: string;\n  useSsl: boolean;\n  onlyProducts: boolean;\n}\n\ninterface ImportJob {\n  id: string;\n  status: 'pending' | 'running' | 'completed' | 'failed';\n  total_items: number;\n  processed_items: number;\n  created_at: string;\n  completed_at?: string;\n  error_message?: string;\n}\n\ninterface ImportedProduct {\n  id: string;\n  woo_id: number;\n  title: string;\n  sku: string;\n  price: number;\n  sale_price?: number;\n  stock: number;\n  images: string[];\n  description: string;\n  short_description: string;\n  category: string;\n  weight?: string;\n  dimensions?: any;\n  manage_stock: boolean;\n  stock_status: string;\n  last_synced_at: string;\n}\n\nexport default function WooCommerceIntegration({ darkMode }: WooCommerceIntegrationProps) {\n  const [credentials, setCredentials] = useState<WooCredentials>({\n    storeUrl: '',\n    consumerKey: '',\n    consumerSecret: '',\n    apiVersion: 'wc/v3',\n    useSsl: true,\n    onlyProducts: true\n  });\n  const [isConnected, setIsConnected] = useState(false);\n  const [testing, setTesting] = useState(false);\n  const [testResult, setTestResult] = useState<any>(null);\n  const [showCredentials, setShowCredentials] = useState(false);\n  const [previewProducts, setPreviewProducts] = useState<any[]>([]);\n  const [showPreview, setShowPreview] = useState(false);\n  const [importing, setImporting] = useState(false);\n  //  ADICIONAR: Estado 'saving' que estava faltando\n  const [saving, setSaving] = useState(false);\n  const [importJobs, setImportJobs] = useState<ImportJob[]>([]);\n  const [importedProducts, setImportedProducts] = useState<ImportedProduct[]>([]);\n  const [showImportedProducts, setShowImportedProducts] = useState(false);\n  const [selectedProduct, setSelectedProduct] = useState<ImportedProduct | null>(null);\n  const [editingProduct, setEditingProduct] = useState<ImportedProduct | null>(null);\n  const [categoryMapping, setCategoryMapping] = useState<Record<string, string>>({});\n  const [syncSchedule, setSyncSchedule] = useState('manual');\n  const [importOptions, setImportOptions] = useState({\n    update_existing: true,\n    create_new: true,\n    sync_stock_only: false,\n    import_images: true\n  });\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [filterCategory, setFilterCategory] = useState('all');\n  const [categories, setCategories] = useState<any[]>([]);\n\n  useEffect(() => {\n    loadConnection();\n    loadImportJobs();\n    loadCategories();\n  }, []);\n\n  const loadConnection = async () => {\n    try {\n      setLoading(true);\n      setError(null);\n      const { data, error } = await supabase\n        .from('integrations_woocommerce')\n        .select('*')\n        .maybeSingle();\n\n      if (error) throw error;\n      \n      if (data) {\n        setIsConnected(true);\n        setCredentials({\n          storeUrl: data.store_url,\n          consumerKey: '',\n          consumerSecret: '',\n          apiVersion: data.api_version || 'wc/v3',\n          useSsl: data.use_ssl ?? true,\n          onlyProducts: data.products_only ?? true\n        });\n        setSyncSchedule(data.sync_schedule || 'manual');\n        loadImportedProducts();\n      }\n    } catch (error: any) {\n      console.error('Erro ao carregar conexo:', error);\n      setError('Falha ao carregar configuraes de conexo');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const loadImportJobs = async () => {\n    try {\n      setError(null);\n      const { data, error } = await supabase\n        .from('woocommerce_import_jobs')\n        .select('*')\n        .order('created_at', { ascending: false })\n        .limit(10);\n\n      if (error) throw error;\n      setImportJobs(data || []);\n    } catch (error: any) {\n      console.error('Erro ao carregar jobs:', error);\n      setError('Falha ao carregar histrico de importaes');\n    }\n  };\n\n  const loadCategories = async () => {\n    try {\n      const { data, error } = await supabase\n        .from('categories')\n        .select('*')\n        .order('name');\n\n      if (error) throw error;\n      setCategories(data || []);\n    } catch (error: any) {\n      console.error('Erro ao carregar categorias:', error);\n    }\n  };\n\n  const loadImportedProducts = async () => {\n    try {\n      const { data: mappings, error: mappingsError } = await supabase\n        .from('product_mappings')\n        .select(`\n          woo_product_id,\n          local_product_id,\n          sku,\n          last_synced_at,\n          products (\n            id,\n            title,\n            sku,\n            price,\n            sale_price,\n            stock,\n            images,\n            description,\n            short_description,\n            category_id,\n            weight,\n            dimensions,\n            manage_stock,\n            stock_status,\n            categories (\n              name\n            )\n          )\n        `)\n        .order('last_synced_at', { ascending: false });\n\n      if (mappingsError) throw mappingsError;\n\n      const products = mappings?.map((m: any) => ({\n        id: m.products.id,\n        woo_id: m.woo_product_id,\n        title: m.products.title,\n        sku: m.products.sku,\n        price: m.products.price,\n        sale_price: m.products.sale_price,\n        stock: m.products.stock,\n        images: m.products.images || [],\n        description: m.products.description || '',\n        short_description: m.products.short_description || '',\n        category: m.products.categories?.name || 'Sem categoria',\n        weight: m.products.weight,\n        dimensions: m.products.dimensions,\n        manage_stock: m.products.manage_stock,\n        stock_status: m.products.stock_status,\n        last_synced_at: m.last_synced_at\n      })) || [];\n\n      setImportedProducts(products);\n    } catch (error: any) {\n      console.error('Erro ao carregar produtos importados:', error);\n    }\n  };\n\n  const testConnection = async () => {\n    setTesting(true);\n    setTestResult(null);\n\n    try {\n      const startTime = Date.now();\n      \n      const result = await testWooCommerceConnection(credentials);\n      const latency = Date.now() - startTime;\n\n      setTestResult({\n        success: result.success,\n        latency,\n        message: result.message,\n        data: result.data\n      });\n\n      if (result.success) {\n        setIsConnected(true);\n      }\n    } catch (error: any) {\n      setTestResult({\n        success: false,\n        message: error.message || 'Erro ao testar conexo'\n      });\n    } finally {\n      setTesting(false);\n    }\n  };\n\n  const saveConnection = async () => {\n    if (!credentials.storeUrl || !credentials.consumerKey || !credentials.consumerSecret) {\n      setError('Por favor, preencha todos os campos de conexo');\n      return;\n    }\n\n    try {\n      //  ADICIONAR: Ativar estado de salvamento\n      setSaving(true);\n      setError(null);\n      const { error } = await supabase\n        .from('integrations_woocommerce')\n        .upsert({\n          store_url: credentials.storeUrl,\n          consumer_key: credentials.consumerKey.replace(//g, ''),\n          consumer_secret: credentials.consumerSecret.replace(//g, ''),\n          api_version: credentials.apiVersion,\n          use_ssl: credentials.useSsl,\n          products_only: credentials.onlyProducts,\n          sync_schedule: syncSchedule,\n          updated_at: new Date().toISOString()\n        });\n\n      if (error) throw error;\n\n      alert(' Conexo salva com sucesso!');\n      loadConnection();\n    } catch (error: any) {\n      console.error('Erro ao salvar:', error);\n      setError('Erro ao salvar conexo. Tente novamente.');\n    } finally {\n      //  ADICIONAR: Desativar estado de salvamento\n      setSaving(false);\n    }\n  };\n\n  const loadPreview = async () => {\n    try {\n      setShowPreview(true);\n      const result = await fetchWooCommerceProducts(50);\n      \n      if (result.success) {\n        setPreviewProducts(result.products || []);\n      } else {\n        alert(` Erro: ${result.message}`);\n      }\n    } catch (error) {\n      console.error('Erro ao carregar preview:', error);\n      alert(' Erro ao carregar preview');\n    }\n  };\n\n  const startImport = async (mode: 'preview' | 'full') => {\n    setImporting(true);\n    \n    try {\n      const result = await importWooCommerceProducts(mode, importOptions, categoryMapping);\n\n      if (result.success) {\n        alert(` Import ${mode === 'preview' ? 'preview' : 'completo'} concludo!\\n\\nProcessados: ${result.processed}/${result.total}\\nCriados: ${result.created}\\nAtualizados: ${result.updated}`);\n        loadImportJobs();\n        loadImportedProducts();\n      } else {\n        alert(` Erro: ${result.message}`);\n      }\n    } catch (error) {\n      console.error('Erro ao importar:', error);\n      alert(' Erro ao iniciar importao');\n    } finally {\n      setImporting(false);\n    }\n  };\n\n  const disconnectWooCommerce = async () => {\n    if (!confirm('Tem certeza que deseja desconectar o WooCommerce?')) return;\n\n    try {\n      setError(null);\n      const { error } = await supabase\n        .from('integrations_woocommerce')\n        .delete()\n        .eq('store_url', credentials.storeUrl);\n\n      if (error) throw error;\n\n      setIsConnected(false);\n      setCredentials({\n        storeUrl: '',\n        consumerKey: '',\n        consumerSecret: '',\n        apiVersion: 'wc/v3',\n        useSsl: true,\n        onlyProducts: true\n      });\n      setImportJobs([]);\n      setPreviewProducts([]);\n      setShowPreview(false);\n      setImportedProducts([]);\n      setShowImportedProducts(false);\n      alert(' Desconectado com sucesso!');\n    } catch (error: any) {\n      console.error('Erro ao desconectar:', error);\n      setError('Erro ao desconectar. Tente novamente.');\n    }\n  };\n\n  const saveProductEdit = async () => {\n    if (!editingProduct) return;\n\n    try {\n      const { error } = await supabase\n        .from('products')\n        .update({\n          title: editingProduct.title,\n          price: editingProduct.price,\n          sale_price: editingProduct.sale_price,\n          stock: editingProduct.stock,\n          description: editingProduct.description,\n          short_description: editingProduct.short_description,\n          images: editingProduct.images,\n          weight: editingProduct.weight,\n          updated_at: new Date().toISOString()\n        })\n        .eq('id', editingProduct.id);\n\n      if (error) throw error;\n\n      alert(' Produto atualizado com sucesso!');\n      setEditingProduct(null);\n      loadImportedProducts();\n    } catch (error: any) {\n      console.error('Erro ao salvar produto:', error);\n      alert(' Erro ao salvar produto');\n    }\n  };\n\n  const filteredProducts = importedProducts.filter(p => {\n    const matchesSearch = p.title.toLowerCase().includes(searchTerm.toLowerCase()) || \n                         p.sku.toLowerCase().includes(searchTerm.toLowerCase());\n    const matchesCategory = filterCategory === 'all' || p.category === filterCategory;\n    return matchesSearch && matchesCategory;\n  });\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center py-12\">\n        <div className=\"w-8 h-8 border-2 border-primary border-t-transparent rounded-full animate-spin\"></div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"bg-white rounded-lg shadow-sm p-6\">\n        <div className=\"flex items-center justify-between mb-4\">\n          <div>\n            <h2 className=\"text-2xl font-bold text-gray-900\">Integrao WooCommerce</h2>\n            <p className=\"text-gray-600 mt-1\">\n              Conecte sua loja WooCommerce e sincronize produtos automaticamente\n            </p>\n          </div>\n          {isConnected && (\n            <div className=\"flex items-center gap-2 px-4 py-2 bg-green-50 text-green-700 rounded-lg\">\n              <i className=\"ri-checkbox-circle-fill text-xl\"></i>\n              <span className=\"font-medium\">Conectado</span>\n            </div>\n          )}\n        </div>\n\n        {/* Guia Rpido para InfinityFree */}\n        <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6\">\n          <div className=\"flex items-start gap-3\">\n            <i className=\"ri-information-fill text-blue-600 text-xl mt-0.5\"></i>\n            <div className=\"flex-1\">\n              <h3 className=\"font-semibold text-blue-900 mb-2\">\n                 Guia Rpido - InfinityFree\n              </h3>\n              <div className=\"text-sm text-blue-800 space-y-2\">\n                <p><strong>1. URL da Loja:</strong> Use o domnio completo (ex: <code className=\"bg-blue-100 px-1 rounded\">seusite.ct.ws</code>)</p>\n                <p><strong>2. SSL/HTTPS:</strong> Se tiver erro de conexo, <strong>desative \"Usar SSL\"</strong> primeiro para testar</p>\n                <p><strong>3. Chaves API:</strong> WordPress  WooCommerce  Configuraes  Avanado  REST API  Adicionar chave</p>\n                <p><strong>4. Permisses:</strong> Selecione <strong>\"Leitura/Escrita\"</strong> ao gerar as chaves</p>\n                <p><strong>5. Permalinks:</strong> WordPress  Configuraes  Permalinks  Selecione <strong>\"Nome do post\"</strong></p>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Formulrio de Conexo */}\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n              URL da Loja *\n            </label>\n            <input\n              type=\"text\"\n              value={credentials.storeUrl}\n              onChange={(e) => setCredentials({ ...credentials, storeUrl: e.target.value })}\n              placeholder=\"https://sua-loja.com ou sua-loja.ct.ws\"\n              className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent\"\n            />\n            <p className=\"text-xs text-gray-500 mt-1\">\n              Pode usar com ou sem https://\n            </p>\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n              Verso da API\n            </label>\n            <select\n              value={credentials.apiVersion}\n              onChange={(e) => setCredentials({ ...credentials, apiVersion: e.target.value })}\n              className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent\"\n            >\n              <option value=\"wc/v3\">wc/v3 (Recomendado)</option>\n              <option value=\"wc/v2\">wc/v2</option>\n              <option value=\"wc/v1\">wc/v1</option>\n            </select>\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n              Consumer Key *\n            </label>\n            <input\n              type=\"text\"\n              value={credentials.consumerKey}\n              onChange={(e) => setCredentials({ ...credentials, consumerKey: e.target.value })}\n              placeholder=\"ck_xxxxxxxxxxxxxxxx\"\n              className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent font-mono text-sm\"\n            />\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n              Consumer Secret *\n            </label>\n            <input\n              type=\"password\"\n              value={credentials.consumerSecret}\n              onChange={(e) => setCredentials({ ...credentials, consumerSecret: e.target.value })}\n              placeholder=\"cs_xxxxxxxxxxxxxxxx\"\n              className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent font-mono text-sm\"\n            />\n          </div>\n        </div>\n\n        {/* Opes */}\n        <div className=\"mt-4 space-y-3\">\n          <label className=\"flex items-center gap-3 cursor-pointer\">\n            <input\n              type=\"checkbox\"\n              checked={credentials.useSsl}\n              onChange={(e) => setCredentials({ ...credentials, useSsl: e.target.checked })}\n              className=\"w-5 h-5 text-purple-600 rounded focus:ring-2 focus:ring-purple-500\"\n            />\n            <div>\n              <span className=\"text-sm font-medium text-gray-700\">Usar SSL (HTTPS)</span>\n              <p className=\"text-xs text-gray-500\">\n                 Se tiver erro de conexo no InfinityFree, desative esta opo primeiro\n              </p>\n            </div>\n          </label>\n\n          <label className=\"flex items-center gap-3 cursor-pointer\">\n            <input\n              type=\"checkbox\"\n              checked={credentials.onlyProducts}\n              onChange={(e) => setCredentials({ ...credentials, onlyProducts: e.target.checked })}\n              className=\"w-5 h-5 text-purple-600 rounded focus:ring-2 focus:ring-purple-500\"\n            />\n            <div>\n              <span className=\"text-sm font-medium text-gray-700\">Sincronizar apenas produtos</span>\n              <p className=\"text-xs text-gray-500\">\n                Ignora pedidos, clientes e outras entidades\n              </p>\n            </div>\n          </label>\n        </div>\n\n        {/* Botes de Ao */}\n        <div className=\"mt-6 flex gap-3\">\n          <button\n            onClick={testConnection}\n            disabled={testing || !credentials.storeUrl || !credentials.consumerKey || !credentials.consumerSecret}\n            className=\"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed flex items-center gap-2 whitespace-nowrap\"\n          >\n            {testing ? (\n              <>\n                <i className=\"ri-loader-4-line animate-spin\"></i>\n                Testando...\n              </>\n            ) : (\n              <>\n                <i className=\"ri-plug-line\"></i>\n                Testar Conexo\n              </>\n            )}\n          </button>\n\n          <button\n            onClick={saveConnection}\n            disabled={saving || !testResult?.success}\n            className=\"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:bg-gray-300 disabled:cursor-not-allowed flex items-center gap-2 whitespace-nowrap\"\n          >\n            {saving ? (\n              <>\n                <i className=\"ri-loader-4-line animate-spin\"></i>\n                Salvando...\n              </>\n            ) : (\n              <>\n                <i className=\"ri-save-line\"></i>\n                Salvar Conexo\n              </>\n            )}\n          </button>\n\n          {isConnected && (\n            <button\n              onClick={disconnectWooCommerce}\n              className=\"px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 flex items-center gap-2 whitespace-nowrap\"\n            >\n              <i className=\"ri-link-unlink\"></i>\n              Desconectar\n            </button>\n          )}\n        </div>\n\n        {/* Resultado do Teste */}\n        {testResult && (\n          <div className={`mt-4 p-4 rounded-lg ${testResult.success ? 'bg-green-50 border border-green-200' : 'bg-red-50 border border-red-200'}`}>\n            <div className=\"flex items-start gap-3\">\n              <i className={`${testResult.success ? 'ri-checkbox-circle-fill text-green-600' : 'ri-error-warning-fill text-red-600'} text-xl mt-0.5`}></i>\n              <div className=\"flex-1\">\n                <pre className=\"text-sm whitespace-pre-wrap font-sans\" style={{ fontFamily: 'inherit' }}>\n                  {testResult.message}\n                </pre>\n                {testResult.success && testResult.latency && (\n                  <p className=\"text-sm text-gray-600 mt-2\">\n                     Latncia: {testResult.latency}ms\n                  </p>\n                )}\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n\n      {isConnected && (\n        <>\n          {/* Importao de Produtos */}\n          <div className={`p-6 rounded-xl ${darkMode ? 'bg-gray-800/50' : 'bg-white'} border ${darkMode ? 'border-gray-700' : 'border-gray-200'} shadow-lg`}>\n            <h3 className=\"text-lg font-bold mb-4 flex items-center gap-2\">\n              <i className=\"ri-download-cloud-line text-accent\"></i>\n              Importao de Produtos\n            </h3>\n\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4\">\n              <label className=\"flex items-center gap-2 cursor-pointer\">\n                <input\n                  type=\"checkbox\"\n                  checked={importOptions.update_existing}\n                  onChange={(e) => setImportOptions({ ...importOptions, update_existing: e.target.checked })}\n                  className=\"w-4 h-4 rounded border-gray-300\"\n                />\n                <span className={`text-sm ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>Atualizar produtos existentes (por SKU)</span>\n              </label>\n\n              <label className=\"flex items-center gap-2 cursor-pointer\">\n                <input\n                  type=\"checkbox\"\n                  checked={importOptions.create_new}\n                  onChange={(e) => setImportOptions({ ...importOptions, create_new: e.target.checked })}\n                  className=\"w-4 h-4 rounded border-gray-300\"\n                />\n                <span className={`text-sm ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>Criar novos produtos</span>\n              </label>\n\n              <label className=\"flex items-center gap-2 cursor-pointer\">\n                <input\n                  type=\"checkbox\"\n                  checked={importOptions.sync_stock_only}\n                  onChange={(e) => setImportOptions({ ...importOptions, sync_stock_only: e.target.checked })}\n                  className=\"w-4 h-4 rounded border-gray-300\"\n                />\n                <span className={`text-sm ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>Sincronizar apenas stock</span>\n              </label>\n\n              <label className=\"flex items-center gap-2 cursor-pointer\">\n                <input\n                  type=\"checkbox\"\n                  checked={importOptions.import_images}\n                  onChange={(e) => setImportOptions({ ...importOptions, import_images: e.target.checked })}\n                  className=\"w-4 h-4 rounded border-gray-300\"\n                />\n                <span className={`text-sm ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>Importar imagens</span>\n              </label>\n            </div>\n\n            <div className=\"mb-4\">\n              <label className={`block text-sm font-medium mb-2 ${darkMode ? 'text-gray-200' : 'text-gray-700'}`}>Agendamento de Sincronizao</label>\n              <select\n                value={syncSchedule}\n                onChange={(e) => setSyncSchedule(e.target.value)}\n                className={`w-full max-w-xs px-4 py-2.5 rounded-lg ${darkMode ? 'bg-gray-900 border-gray-600 text-white' : 'bg-gray-50 border-gray-300 text-gray-900'} border focus:outline-none focus:ring-2 focus:ring-primary`}\n              >\n                <option value=\"manual\">Manual</option>\n                <option value=\"hourly\">A cada hora</option>\n                <option value=\"daily\">Diariamente</option>\n                <option value=\"weekly\">Semanalmente</option>\n              </select>\n            </div>\n\n            <div className=\"flex items-center gap-3\">\n              <button\n                onClick={loadPreview}\n                className=\"px-6 py-2.5 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors flex items-center gap-2 whitespace-nowrap font-medium shadow-lg\"\n              >\n                <i className=\"ri-eye-line\"></i>\n                Preview (50 produtos)\n              </button>\n\n              <button\n                onClick={() => startImport('full')}\n                disabled={importing}\n                className=\"px-6 py-2.5 bg-accent text-white rounded-lg hover:opacity-90 transition-opacity disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 whitespace-nowrap font-medium shadow-lg\"\n              >\n                {importing ? (\n                  <>\n                    <div className=\"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin\"></div>\n                    Importando...\n                  </>\n                ) : (\n                  <>\n                    <i className=\"ri-download-line\"></i>\n                    Importar Todos\n                  </>\n                )}\n              </button>\n\n              {importedProducts.length > 0 && (\n                <button\n                  onClick={() => setShowImportedProducts(!showImportedProducts)}\n                  className=\"px-6 py-2.5 bg-primary text-white rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap font-medium shadow-lg\"\n                >\n                  <i className=\"ri-list-check\"></i>\n                  Ver Produtos Importados ({importedProducts.length})\n                </button>\n              )}\n            </div>\n          </div>\n\n          {/* Preview de Produtos */}\n          {showPreview && previewProducts.length > 0 && (\n            <div className={`p-6 rounded-xl ${darkMode ? 'bg-gray-800/50' : 'bg-white'} border ${darkMode ? 'border-gray-700' : 'border-gray-200'} shadow-lg`}>\n              <div className=\"flex items-center justify-between mb-4\">\n                <h3 className=\"text-lg font-bold\">Preview de Produtos</h3>\n                <button\n                  onClick={() => setShowPreview(false)}\n                  className=\"text-gray-400 hover:text-white\"\n                >\n                  <i className=\"ri-close-line text-xl\"></i>\n                </button>\n              </div>\n              <div className=\"overflow-x-auto\">\n                <table className=\"w-full\">\n                  <thead className={darkMode ? 'bg-gray-900' : 'bg-gray-100'}>\n                    <tr>\n                      <th className={`px-4 py-3 text-left font-semibold ${darkMode ? 'text-gray-200' : 'text-gray-700'}`}>Imagem</th>\n                      <th className={`px-4 py-3 text-left font-semibold ${darkMode ? 'text-gray-200' : 'text-gray-700'}`}>Nome</th>\n                      <th className={`px-4 py-3 text-left font-semibold ${darkMode ? 'text-gray-200' : 'text-gray-700'}`}>SKU</th>\n                      <th className={`px-4 py-3 text-left font-semibold ${darkMode ? 'text-gray-200' : 'text-gray-700'}`}>Preo</th>\n                      <th className={`px-4 py-3 text-left font-semibold ${darkMode ? 'text-gray-200' : 'text-gray-700'}`}>Stock</th>\n                      <th className={`px-4 py-3 text-left font-semibold ${darkMode ? 'text-gray-200' : 'text-gray-700'}`}>Categoria</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {previewProducts.slice(0, 10).map((product, index) => (\n                      <tr key={index} className={`border-t ${darkMode ? 'border-gray-700' : 'border-gray-200'}`}>\n                        <td className=\"px-4 py-3\">\n                          <div className={`w-12 h-12 ${darkMode ? 'bg-gray-700' : 'bg-gray-200'} rounded overflow-hidden`}>\n                            {product.image && (\n                              <img src={product.image} alt={product.name} className=\"w-full h-full object-cover\" />\n                            )}\n                          </div>\n                        </td>\n                        <td className={`px-4 py-3 ${darkMode ? 'text-gray-200' : 'text-gray-800'}`}>{product.name}</td>\n                        <td className={`px-4 py-3 text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>{product.sku || '-'}</td>\n                        <td className=\"px-4 py-3 text-primary font-medium\">{product.price}</td>\n                        <td className={`px-4 py-3 ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>{product.stock}</td>\n                        <td className={`px-4 py-3 text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>{product.category}</td>\n                      </tr>\n                    ))}\n                  </tbody>\n                </table>\n              </div>\n            </div>\n          )}\n\n          {/* Produtos Importados - Vista Detalhada */}\n          {showImportedProducts && (\n            <div className={`p-6 rounded-xl ${darkMode ? 'bg-gray-800/50' : 'bg-white'} border ${darkMode ? 'border-gray-700' : 'border-gray-200'} shadow-lg`}>\n              <div className=\"flex items-center justify-between mb-6\">\n                <h3 className=\"text-lg font-bold flex items-center gap-2\">\n                  <i className=\"ri-box-3-line text-primary\"></i>\n                  Produtos Importados ({filteredProducts.length})\n                </h3>\n                <button\n                  onClick={() => setShowImportedProducts(false)}\n                  className={`text-gray-400 hover:${darkMode ? 'text-white' : 'text-gray-900'}`}\n                >\n                  <i className=\"ri-close-line text-xl\"></i>\n                </button>\n              </div>\n\n              {/* Filtros */}\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6\">\n                <div>\n                  <label className={`block text-sm font-medium mb-2 ${darkMode ? 'text-gray-200' : 'text-gray-700'}`}>Pesquisar</label>\n                  <input\n                    type=\"text\"\n                    placeholder=\"Nome ou SKU...\"\n                    value={searchTerm}\n                    onChange={(e) => setSearchTerm(e.target.value)}\n                    className={`w-full px-4 py-2.5 rounded-lg ${darkMode ? 'bg-gray-900 border-gray-600 text-white' : 'bg-gray-50 border-gray-300 text-gray-900'} border focus:outline-none focus:ring-2 focus:ring-primary`}\n                  />\n                </div>\n                <div>\n                  <label className={`block text-sm font-medium mb-2 ${darkMode ? 'text-gray-200' : 'text-gray-700'}`}>Categoria</label>\n                  <select\n                    value={filterCategory}\n                    onChange={(e) => setFilterCategory(e.target.value)}\n                    className={`w-full px-4 py-2.5 rounded-lg ${darkMode ? 'bg-gray-900 border-gray-600 text-white' : 'bg-gray-50 border-gray-300 text-gray-900'} border focus:outline-none focus:ring-2 focus:ring-primary`}\n                  >\n                    <option value=\"all\">Todas as categorias</option>\n                    {Array.from(new Set(importedProducts.map(p => p.category))).map(cat => (\n                      <option key={cat} value={cat}>{cat}</option>\n                    ))}\n                  </select>\n                </div>\n              </div>\n\n              {/* Grid de Produtos */}\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n                {filteredProducts.map((product) => (\n                  <div\n                    key={product.id}\n                    className={`p-4 rounded-lg ${darkMode ? 'bg-gray-900' : 'bg-gray-50'} border ${darkMode ? 'border-gray-700' : 'border-gray-200'} hover:border-primary transition-colors cursor-pointer`}\n                    onClick={() => setSelectedProduct(product)}\n                  >\n                    <div className={`w-full h-48 ${darkMode ? 'bg-gray-800' : 'bg-gray-200'} rounded-lg overflow-hidden mb-3`}>\n                      {product.images[0] && (\n                        <img src={product.images[0]} alt={product.title} className=\"w-full h-full object-cover\" />\n                      )}\n                    </div>\n                    <h4 className={`font-semibold mb-2 ${darkMode ? 'text-gray-100' : 'text-gray-900'}`}>{product.title}</h4>\n                    <div className=\"flex items-center justify-between mb-2\">\n                      <span className=\"text-primary font-bold text-lg\">{product.price}</span>\n                      {product.sale_price && (\n                        <span className={`text-sm line-through ${darkMode ? 'text-gray-500' : 'text-gray-400'}`}>{product.sale_price}</span>\n                      )}\n                    </div>\n                    <div className=\"flex items-center justify-between text-sm\">\n                      <span className={darkMode ? 'text-gray-400' : 'text-gray-600'}>SKU: {product.sku}</span>\n                      <span className={`px-2 py-1 rounded ${product.stock > 0 ? 'bg-green-500/20 text-green-500' : 'bg-red-500/20 text-red-500'}`}>\n                        Stock: {product.stock}\n                      </span>\n                    </div>\n                    <div className={`text-xs mt-2 ${darkMode ? 'text-gray-500' : 'text-gray-400'}`}>\n                      {product.category}\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </div>\n          )}\n\n          {/* Modal de Detalhes do Produto */}\n          {selectedProduct && !editingProduct && (\n            <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\" onClick={() => setSelectedProduct(null)}>\n              <div\n                className={`${darkMode ? 'bg-gray-800' : 'bg-white'} rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto`}\n                onClick={(e) => e.stopPropagation()}\n              >\n                <div className={`sticky top-0 ${darkMode ? 'bg-gray-800' : 'bg-white'} border-b ${darkMode ? 'border-gray-700' : 'border-gray-200'} p-6 flex items-center justify-between`}>\n                  <h3 className=\"text-xl font-bold\">Detalhes do Produto</h3>\n                  <div className=\"flex items-center gap-2\">\n                    <button\n                      onClick={() => {\n                        setEditingProduct(selectedProduct);\n                        setSelectedProduct(null);\n                      }}\n                      className=\"px-4 py-2 bg-primary text-white rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap font-medium\"\n                    >\n                      <i className=\"ri-edit-line\"></i>\n                      Editar\n                    </button>\n                    <button\n                      onClick={() => setSelectedProduct(null)}\n                      className={`text-gray-400 hover:${darkMode ? 'text-white' : 'text-gray-900'}`}\n                    >\n                      <i className=\"ri-close-line text-2xl\"></i>\n                    </button>\n                  </div>\n                </div>\n\n                <div className=\"p-6\">\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                    {/* Imagens */}\n                    <div>\n                      <h4 className={`font-semibold mb-3 ${darkMode ? 'text-gray-200' : 'text-gray-800'}`}>Imagens</h4>\n                      <div className=\"grid grid-cols-2 gap-2\">\n                        {selectedProduct.images.map((img, idx) => (\n                          <div key={idx} className={`w-full h-48 ${darkMode ? 'bg-gray-900' : 'bg-gray-100'} rounded-lg overflow-hidden`}>\n                            <img src={img} alt={`${selectedProduct.title} ${idx + 1}`} className=\"w-full h-full object-cover\" />\n                          </div>\n                        ))}\n                      </div>\n                    </div>\n\n                    {/* Informaes */}\n                    <div className=\"space-y-4\">\n                      <div>\n                        <label className={`text-sm font-medium ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>Nome</label>\n                        <p className={`text-lg font-semibold ${darkMode ? 'text-gray-100' : 'text-gray-900'}`}>{selectedProduct.title}</p>\n                      </div>\n\n                      <div className=\"grid grid-cols-2 gap-4\">\n                        <div>\n                          <label className={`text-sm font-medium ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>Preo</label>\n                          <p className=\"text-xl font-bold text-primary\">{selectedProduct.price}</p>\n                        </div>\n                        {selectedProduct.sale_price && (\n                          <div>\n                            <label className={`text-sm font-medium ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>Preo Promocional</label>\n                            <p className=\"text-xl font-bold text-accent\">{selectedProduct.sale_price}</p>\n                          </div>\n                        )}\n                      </div>\n\n                      <div className=\"grid grid-cols-2 gap-4\">\n                        <div>\n                          <label className={`text-sm font-medium ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>SKU</label>\n                          <p className={darkMode ? 'text-gray-200' : 'text-gray-800'}>{selectedProduct.sku}</p>\n                        </div>\n                        <div>\n                          <label className={`text-sm font-medium ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>Stock</label>\n                          <p className={`font-semibold ${selectedProduct.stock > 0 ? 'text-green-500' : 'text-red-500'}`}>\n                            {selectedProduct.stock} unidades\n                          </p>\n                        </div>\n                      </div>\n\n                      <div>\n                        <label className={`text-sm font-medium ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>Categoria</label>\n                        <p className={darkMode ? 'text-gray-200' : 'text-gray-800'}>{selectedProduct.category}</p>\n                      </div>\n\n                      {selectedProduct.weight && (\n                        <div>\n                          <label className={`text-sm font-medium ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>Peso</label>\n                          <p className={darkMode ? 'text-gray-200' : 'text-gray-800'}>{selectedProduct.weight} kg</p>\n                        </div>\n                      )}\n\n                      <div>\n                        <label className={`text-sm font-medium ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>Status do Stock</label>\n                        <p className={darkMode ? 'text-gray-200' : 'text-gray-800'}>{selectedProduct.stock_status}</p>\n                      </div>\n\n                      <div>\n                        <label className={`text-sm font-medium ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>ltima Sincronizao</label>\n                        <p className={darkMode ? 'text-gray-200' : 'text-gray-800'}>\n                          {new Date(selectedProduct.last_synced_at).toLocaleString('pt-PT')}\n                        </p>\n                      </div>\n                    </div>\n                  </div>\n\n                  {/* Descries */}\n                  <div className=\"mt-6 space-y-4\">\n                    <div>\n                      <label className={`text-sm font-medium ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>Descrio Curta</label>\n                      <div\n                        className={`mt-2 p-4 rounded-lg ${darkMode ? 'bg-gray-900' : 'bg-gray-50'}`}\n                        dangerouslySetInnerHTML={{ __html: selectedProduct.short_description || 'Sem descrio curta' }}\n                      />\n                    </div>\n\n                    <div>\n                      <label className={`text-sm font-medium ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>Descrio Completa</label>\n                      <div\n                        className={`mt-2 p-4 rounded-lg ${darkMode ? 'bg-gray-900' : 'bg-gray-50'} max-h-64 overflow-y-auto`}\n                        dangerouslySetInnerHTML={{ __html: selectedProduct.description || 'Sem descrio' }}\n                      />\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          )}\n\n          {/* Modal de Edio do Produto */}\n          {editingProduct && (\n            <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\" onClick={() => setEditingProduct(null)}>\n              <div\n                className={`${darkMode ? 'bg-gray-800' : 'bg-white'} rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto`}\n                onClick={(e) => e.stopPropagation()}\n              >\n                <div className={`sticky top-0 ${darkMode ? 'bg-gray-800' : 'bg-white'} border-b ${darkMode ? 'border-gray-700' : 'border-gray-200'} p-6 flex items-center justify-between`}>\n                  <h3 className=\"text-xl font-bold\">Editar Produto</h3>\n                  <button\n                    onClick={() => setEditingProduct(null)}\n                    className={`text-gray-400 hover:${darkMode ? 'text-white' : 'text-gray-900'}`}\n                  >\n                    <i className=\"ri-close-line text-2xl\"></i>\n                  </button>\n                </div>\n\n                <div className=\"p-6 space-y-6\">\n                  <div>\n                    <label className={`block text-sm font-medium mb-2 ${darkMode ? 'text-gray-200' : 'text-gray-700'}`}>Nome do Produto</label>\n                    <input\n                      type=\"text\"\n                      value={editingProduct.title}\n                      onChange={(e) => setEditingProduct({ ...editingProduct, title: e.target.value })}\n                      className={`w-full px-4 py-2.5 rounded-lg ${darkMode ? 'bg-gray-900 border-gray-600 text-white' : 'bg-gray-50 border-gray-300 text-gray-900'} border focus:outline-none focus:ring-2 focus:ring-primary`}\n                    />\n                  </div>\n\n                  <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                    <div>\n                      <label className={`block text-sm font-medium mb-2 ${darkMode ? 'text-gray-200' : 'text-gray-700'}`}>Preo ()</label>\n                      <input\n                        type=\"number\"\n                        step=\"0.01\"\n                        value={editingProduct.price}\n                        onChange={(e) => setEditingProduct({ ...editingProduct, price: parseFloat(e.target.value) })}\n                        className={`w-full px-4 py-2.5 rounded-lg ${darkMode ? 'bg-gray-900 border-gray-600 text-white' : 'bg-gray-50 border-gray-300 text-gray-900'} border focus:outline-none focus:ring-2 focus:ring-primary`}\n                      />\n                    </div>\n\n                    <div>\n                      <label className={`block text-sm font-medium mb-2 ${darkMode ? 'text-gray-200' : 'text-gray-700'}`}>Preo Promocional ()</label>\n                      <input\n                        type=\"number\"\n                        step=\"0.01\"\n                        value={editingProduct.sale_price || ''}\n                        onChange={(e) => setEditingProduct({ ...editingProduct, sale_price: e.target.value ? parseFloat(e.target.value) : undefined })}\n                        className={`w-full px-4 py-2.5 rounded-lg ${darkMode ? 'bg-gray-900 border-gray-600 text-white' : 'bg-gray-50 border-gray-300 text-gray-900'} border focus:outline-none focus:ring-2 focus:ring-primary`}\n                      />\n                    </div>\n\n                    <div>\n                      <label className={`block text-sm font-medium mb-2 ${darkMode ? 'text-gray-200' : 'text-gray-700'}`}>Stock</label>\n                      <input\n                        type=\"number\"\n                        value={editingProduct.stock}\n                        onChange={(e) => setEditingProduct({ ...editingProduct, stock: parseInt(e.target.value) })}\n                        className={`w-full px-4 py-2.5 rounded-lg ${darkMode ? 'bg-gray-900 border-gray-600 text-white' : 'bg-gray-50 border-gray-300 text-gray-900'} border focus:outline-none focus:ring-2 focus:ring-primary`}\n                      />\n                    </div>\n                  </div>\n\n                  <div>\n                    <label className={`block text-sm font-medium mb-2 ${darkMode ? 'text-gray-200' : 'text-gray-700'}`}>Descrio Curta</label>\n                    <textarea\n                      rows={3}\n                      value={editingProduct.short_description}\n                      onChange={(e) => setEditingProduct({ ...editingProduct, short_description: e.target.value })}\n                      className={`w-full px-4 py-2.5 rounded-lg ${darkMode ? 'bg-gray-900 border-gray-600 text-white' : 'bg-gray-50 border-gray-300 text-gray-900'} border focus:outline-none focus:ring-2 focus:ring-primary`}\n                    />\n                  </div>\n\n                  <div>\n                    <label className={`block text-sm font-medium mb-2 ${darkMode ? 'text-gray-200' : 'text-gray-700'}`}>Descrio Completa</label>\n                    <textarea\n                      rows={6}\n                      value={editingProduct.description}\n                      onChange={(e) => setEditingProduct({ ...editingProduct, description: e.target.value })}\n                      className={`w-full px-4 py-2.5 rounded-lg ${darkMode ? 'bg-gray-900 border-gray-600 text-white' : 'bg-gray-50 border-gray-300 text-gray-900'} border focus:outline-none focus:ring-2 focus:ring-primary`}\n                    />\n                  </div>\n\n                  <div>\n                    <label className={`block text-sm font-medium mb-2 ${darkMode ? 'text-gray-200' : 'text-gray-700'}`}>URLs das Imagens (uma por linha)</label>\n                    <textarea\n                      rows={4}\n                      value={editingProduct.images.join('\\n')}\n                      onChange={(e) => setEditingProduct({ ...editingProduct, images: e.target.value.split('\\n').filter(url => url.trim()) })}\n                      className={`w-full px-4 py-2.5 rounded-lg ${darkMode ? 'bg-gray-900 border-gray-600 text-white' : 'bg-gray-50 border-gray-300 text-gray-900'} border focus:outline-none focus:ring-2 focus:ring-primary`}\n                      placeholder=\"https://exemplo.com/imagem1.jpg&#10;https://exemplo.com/imagem2.jpg\"\n                    />\n                  </div>\n\n                  <div>\n                    <label className={`block text-sm font-medium mb-2 ${darkMode ? 'text-gray-200' : 'text-gray-700'}`}>Peso (kg)</label>\n                    <input\n                      type=\"text\"\n                      value={editingProduct.weight || ''}\n                      onChange={(e) => setEditingProduct({ ...editingProduct, weight: e.target.value })}\n                      className={`w-full px-4 py-2.5 rounded-lg ${darkMode ? 'bg-gray-900 border-gray-600 text-white' : 'bg-gray-50 border-gray-300 text-gray-900'} border focus:outline-none focus:ring-2 focus:ring-primary`}\n                    />\n                  </div>\n\n                  <div className=\"flex items-center gap-3 pt-4\">\n                    <button\n                      onClick={saveProductEdit}\n                      className=\"px-6 py-2.5 bg-primary text-white rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap font-medium shadow-lg\"\n                    >\n                      <i className=\"ri-save-line\"></i>\n                      Salvar Alteraes\n                    </button>\n                    <button\n                      onClick={() => setEditingProduct(null)}\n                      className={`px-6 py-2.5 ${darkMode ? 'bg-gray-700' : 'bg-gray-200'} ${darkMode ? 'text-white' : 'text-gray-800'} rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap font-medium`}\n                    >\n                      <i className=\"ri-close-line\"></i>\n                      Cancelar\n                    </button>\n                  </div>\n                </div>\n              </div>\n            </div>\n          )}\n\n          {/* Histrico de Importaes */}\n          <div className={`p-6 rounded-xl ${darkMode ? 'bg-gray-800/50' : 'bg-white'} border ${darkMode ? 'border-gray-700' : 'border-gray-200'} shadow-lg`}>\n            <h3 className=\"text-lg font-bold mb-4 flex items-center gap-2\">\n              <i className=\"ri-history-line text-primary\"></i>\n              Histrico de Importaes\n            </h3>\n\n            {importJobs.length === 0 ? (\n              <p className={`${darkMode ? 'text-gray-400' : 'text-gray-600'} text-center py-8`}>Nenhuma importao realizada ainda</p>\n            ) : (\n              <div className=\"space-y-3\">\n                {importJobs.map((job) => (\n                  <div\n                    key={job.id}\n                    className={`p-4 rounded-lg ${darkMode ? 'bg-gray-900' : 'bg-gray-50'} border ${darkMode ? 'border-gray-700' : 'border-gray-200'}`}\n                  >\n                    <div className=\"flex items-center justify-between\">\n                      <div className=\"flex items-center gap-3\">\n                        <span className={`px-3 py-1 rounded-full text-xs font-medium ${\n                          job.status === 'completed'\n                            ? 'bg-green-500/20 text-green-500'\n                            : job.status === 'failed'\n                            ? 'bg-red-500/20 text-red-500'\n                            : job.status === 'running'\n                            ? 'bg-blue-500/20 text-blue-500'\n                            : 'bg-gray-500/20 text-gray-500'\n                        }`}>\n                          {job.status === 'completed' ? 'Concludo' : job.status === 'failed' ? 'Falhou' : job.status === 'running' ? 'Em execuo' : 'Pendente'}\n                        </span>\n                        <span className={`text-sm ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>\n                          {job.processed_items} / {job.total_items} produtos\n                        </span>\n                      </div>\n                      <span className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>\n                        {new Date(job.created_at).toLocaleString('pt-PT')}\n                      </span>\n                    </div>\n                    {job.error_message && (\n                      <p className=\"text-sm text-red-500 mt-2\">{job.error_message}</p>\n                    )}\n                  </div>\n                ))}\n              </div>\n            )}\n          </div>\n        </>\n      )}\n    </div>\n  );\n}\n","import { useState, lazy, Suspense, useEffect } from 'react';\nimport { useAuth } from '../../contexts/AuthContext';\nimport { useNavigate } from 'react-router-dom';\nimport { supabase } from '../../lib/supabase';\nimport AdminHeader from './components/AdminHeader';\nimport AdminSidebar from './components/AdminSidebar';\nimport DashboardOverview from './components/DashboardOverview';\nimport ProductsManagement from './components/ProductsManagement';\nimport CategoriesManagement from './components/CategoriesManagement';\nimport OrdersManagement from './components/OrdersManagement';\nimport CustomersManagement from './components/CustomersManagement';\nimport ContentManagement from './components/ContentManagement';\nimport MarketingManagement from './components/MarketingManagement';\nimport FinancialManagement from './components/FinancialManagement';\nimport SecurityManagement from './components/SecurityManagement';\nimport AutomationManagement from './components/AutomationManagement';\nimport SupportManagement from './components/SupportManagement';\nimport ShippingManagement from './components/ShippingManagement';\nimport TaxManagement from './components/TaxManagement';\nimport MarketplaceManagement from './components/MarketplaceManagement';\nimport ThemeEditor from './components/ThemeEditor';\nimport SiteSettingsManagement from './components/SiteSettingsManagement';\nimport WooCommerceIntegration from './components/WooCommerceIntegration';\n\nconst ServicesManagement = lazy(() => import('./components/ServicesManagement'));\n\nexport default function AdminPage() {\n  const [activeSection, setActiveSection] = useState('dashboard');\n  const [sidebarOpen, setSidebarOpen] = useState(true);\n  const [userRole, setUserRole] = useState('admin');\n  const { user, signOut } = useAuth();\n  const navigate = useNavigate();\n\n  // Buscar role do utilizador\n  useEffect(() => {\n    const fetchUserRole = async () => {\n      if (!user) return;\n      \n      try {\n        const { data, error } = await supabase\n          .from('profiles')\n          .select('role')\n          .eq('id', user.id)\n          .single();\n\n        if (error) {\n          console.error('Erro ao buscar role:', error);\n          return;\n        }\n\n        if (data?.role) {\n          setUserRole(data.role);\n        }\n      } catch (error) {\n        console.error('Erro ao buscar role:', error);\n      }\n    };\n\n    fetchUserRole();\n  }, [user]);\n\n  const handleSignOut = async () => {\n    try {\n      await signOut();\n      navigate('/login');\n    } catch (error) {\n      console.error('Erro ao fazer logout:', error);\n    }\n  };\n\n  const renderContent = () => {\n    const content = (() => {\n      switch (activeSection) {\n        case 'dashboard':\n          return <DashboardOverview />;\n        case 'products':\n          return <ProductsManagement />;\n        case 'services':\n          return (\n            <Suspense fallback={\n              <div className=\"flex items-center justify-center h-64\">\n                <div className=\"w-12 h-12 border-4 border-[#b62bff] border-t-transparent rounded-full animate-spin\"></div>\n              </div>\n            }>\n              <ServicesManagement />\n            </Suspense>\n          );\n        case 'categories':\n          return <CategoriesManagement />;\n        case 'orders':\n          return <OrdersManagement />;\n        case 'customers':\n          return <CustomersManagement />;\n        case 'content':\n          return <ContentManagement />;\n        case 'marketing':\n          return <MarketingManagement />;\n        case 'financial':\n          return <FinancialManagement />;\n        case 'security':\n          return <SecurityManagement />;\n        case 'automation':\n          return <AutomationManagement />;\n        case 'support':\n          return <SupportManagement />;\n        case 'shipping':\n          return <ShippingManagement />;\n        case 'tax':\n          return <TaxManagement />;\n        case 'marketplace':\n          return <MarketplaceManagement />;\n        case 'site-settings':\n          return <SiteSettingsManagement />;\n        case 'theme':\n          return <ThemeEditor />;\n        case 'woocommerce':\n          return <WooCommerceIntegration />;\n        default:\n          return <DashboardOverview />;\n      }\n    })();\n\n    return content;\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 dark:bg-[#0b0011]\">\n      <AdminHeader \n        sidebarOpen={sidebarOpen} \n        setSidebarOpen={setSidebarOpen}\n        userRole={userRole}\n      />\n      \n      <div className=\"flex\">\n        <AdminSidebar \n          activeSection={activeSection}\n          setActiveSection={setActiveSection}\n          sidebarOpen={sidebarOpen}\n        />\n        \n        <main className={`flex-1 transition-all duration-300 ${sidebarOpen ? 'ml-64' : 'ml-0'} pt-16`}>\n          <div className=\"p-6\">\n            {renderContent()}\n          </div>\n        </main>\n      </div>\n    </div>\n  );\n}\n"],"file":"page-Cb-H3EUI.js"}